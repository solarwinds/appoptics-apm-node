npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.1.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.

added 2 packages, removed 73 packages, changed 3 packages, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:07.600Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:07.601Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:07.601Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:07.601Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:07.686Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:08.115Z appoptics:patching patched crypto 
2022-04-28T06:36:08.138Z appoptics:patching patched https 
2022-04-28T06:36:08.138Z appoptics:patching patched http 
2022-04-28T06:36:08.229Z appoptics:patching patched tedious 0.1.5
2022-04-28T06:36:08.234Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.1.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 0.1.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.1.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.1.5
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.1.5
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.1.5
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.1.5
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.1.5
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 0.1.5
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 0.1.5
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 0.1.5
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 0.1.5
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 0.1.5
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emit (node:events:526:28)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:20.522Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:20.523Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:20.523Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:20.523Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:20.613Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:20.855Z appoptics:patching patched crypto 
2022-04-28T06:36:20.897Z appoptics:patching patched https 
2022-04-28T06:36:20.898Z appoptics:patching patched http 
2022-04-28T06:36:20.982Z appoptics:patching patched tedious 0.2.1
2022-04-28T06:36:20.987Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 0.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.2.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.2.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:31.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:31.555Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:31.555Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:31.556Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:31.646Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:31.810Z appoptics:patching patched crypto 
2022-04-28T06:36:31.829Z appoptics:patching patched https 
2022-04-28T06:36:31.829Z appoptics:patching patched http 
2022-04-28T06:36:31.904Z appoptics:patching patched tedious 0.2.2
2022-04-28T06:36:31.910Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 0.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.2.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.2.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.2.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 0.2.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 0.2.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 0.2.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 0.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 0.2.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

removed 1 package, changed 2 packages, and audited 851 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:44.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:44.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:44.267Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:44.267Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:44.346Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:44.516Z appoptics:patching patched crypto 
2022-04-28T06:36:44.541Z appoptics:patching patched https 
2022-04-28T06:36:44.542Z appoptics:patching patched http 
2022-04-28T06:36:44.625Z appoptics:patching patched tedious 0.2.3
2022-04-28T06:36:44.630Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 0.2.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 851 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:53.542Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:53.543Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:53.543Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:53.543Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:53.620Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:53.814Z appoptics:patching patched crypto 
2022-04-28T06:36:53.837Z appoptics:patching patched https 
2022-04-28T06:36:53.837Z appoptics:patching patched http 
2022-04-28T06:36:53.889Z appoptics:patching patched tedious 0.2.4
2022-04-28T06:36:53.894Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 0.2.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.4
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.3.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 851 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:03.543Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:03.544Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:03.544Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:03.544Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:03.616Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:03.784Z appoptics:patching patched crypto 
2022-04-28T06:37:03.806Z appoptics:patching patched https 
2022-04-28T06:37:03.807Z appoptics:patching patched http 
2022-04-28T06:37:03.851Z appoptics:patching patched tedious 0.3.0
2022-04-28T06:37:03.855Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 0.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.3.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.0.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 851 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:13.777Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:13.777Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:13.777Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:13.778Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:13.853Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:14.026Z appoptics:patching patched crypto 
2022-04-28T06:37:14.046Z appoptics:patching patched https 
2022-04-28T06:37:14.046Z appoptics:patching patched http 
2022-04-28T06:37:14.093Z appoptics:patching patched tedious 1.0.0
2022-04-28T06:37:14.098Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.0.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.1.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 1 package, changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:24.986Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:24.987Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:24.987Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:24.987Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:25.063Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:25.249Z appoptics:patching patched crypto 
2022-04-28T06:37:25.269Z appoptics:patching patched https 
2022-04-28T06:37:25.270Z appoptics:patching patched http 
2022-04-28T06:37:25.321Z appoptics:patching patched tedious 1.1.0
2022-04-28T06:37:25.326Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.1.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.1.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.1.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.1.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.1.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.1.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.1.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:37.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:37.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:37.585Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:37.585Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:37.668Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:37.842Z appoptics:patching patched crypto 
2022-04-28T06:37:37.865Z appoptics:patching patched https 
2022-04-28T06:37:37.866Z appoptics:patching patched http 
2022-04-28T06:37:37.913Z appoptics:patching patched tedious 1.2.0
2022-04-28T06:37:37.919Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:47.887Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:47.888Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:47.888Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:47.888Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:47.970Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:48.147Z appoptics:patching patched crypto 
2022-04-28T06:37:48.170Z appoptics:patching patched https 
2022-04-28T06:37:48.170Z appoptics:patching patched http 
2022-04-28T06:37:48.219Z appoptics:patching patched tedious 1.2.1
2022-04-28T06:37:48.224Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:57.875Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:57.876Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:57.876Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:57.876Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:57.974Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:58.160Z appoptics:patching patched crypto 
2022-04-28T06:37:58.184Z appoptics:patching patched https 
2022-04-28T06:37:58.210Z appoptics:patching patched http 
2022-04-28T06:37:58.273Z appoptics:patching patched tedious 1.2.2
2022-04-28T06:37:58.278Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.2.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.2.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.2.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.2.2
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:09.126Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:09.127Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:09.127Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:09.127Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:09.214Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:09.428Z appoptics:patching patched crypto 
2022-04-28T06:38:09.457Z appoptics:patching patched https 
2022-04-28T06:38:09.457Z appoptics:patching patched http 
2022-04-28T06:38:09.510Z appoptics:patching patched tedious 1.3.0
2022-04-28T06:38:09.515Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.3.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.3.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.3.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.3.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.3.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:21.086Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:21.086Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:21.086Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:21.086Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:21.291Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:21.544Z appoptics:patching patched crypto 
2022-04-28T06:38:21.577Z appoptics:patching patched https 
2022-04-28T06:38:21.578Z appoptics:patching patched http 
2022-04-28T06:38:21.639Z appoptics:patching patched tedious 1.3.1
2022-04-28T06:38:21.644Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 1.3.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.1
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:30.843Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:30.844Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:30.844Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:30.844Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:30.921Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:31.102Z appoptics:patching patched crypto 
2022-04-28T06:38:31.122Z appoptics:patching patched https 
2022-04-28T06:38:31.123Z appoptics:patching patched http 
2022-04-28T06:38:31.173Z appoptics:patching patched tedious 1.3.2
2022-04-28T06:38:31.178Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.3.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.3.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.3.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.3.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.3.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.3.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.3.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.3.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.3.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:43.179Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:43.181Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:43.181Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:43.181Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:43.295Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:43.490Z appoptics:patching patched crypto 
2022-04-28T06:38:43.514Z appoptics:patching patched https 
2022-04-28T06:38:43.514Z appoptics:patching patched http 
2022-04-28T06:38:43.579Z appoptics:patching patched tedious 1.3.3
2022-04-28T06:38:43.587Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.3.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:53.143Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:53.144Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:53.144Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:53.144Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:53.232Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:53.548Z appoptics:patching patched crypto 
2022-04-28T06:38:53.567Z appoptics:patching patched https 
2022-04-28T06:38:53.568Z appoptics:patching patched http 
2022-04-28T06:38:53.615Z appoptics:patching patched tedious 1.3.4
2022-04-28T06:38:53.619Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.3.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.4
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:04.065Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:04.066Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:04.066Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:04.066Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:04.154Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:04.334Z appoptics:patching patched crypto 
2022-04-28T06:39:04.357Z appoptics:patching patched https 
2022-04-28T06:39:04.358Z appoptics:patching patched http 
2022-04-28T06:39:04.409Z appoptics:patching patched tedious 1.3.5
2022-04-28T06:39:04.414Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.3.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.5
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.5
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.3.5
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:15.884Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:15.885Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:15.885Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:15.885Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:15.961Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:16.149Z appoptics:patching patched crypto 
2022-04-28T06:39:16.173Z appoptics:patching patched https 
2022-04-28T06:39:16.173Z appoptics:patching patched http 
2022-04-28T06:39:16.227Z appoptics:patching patched tedious 1.4.0
2022-04-28T06:39:16.232Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 1.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:26.999Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:27.000Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:27.000Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:27.000Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:27.083Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:27.261Z appoptics:patching patched crypto 
2022-04-28T06:39:27.281Z appoptics:patching patched https 
2022-04-28T06:39:27.281Z appoptics:patching patched http 
2022-04-28T06:39:27.328Z appoptics:patching patched tedious 1.4.1
2022-04-28T06:39:27.333Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.4.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.4.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.4.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.4.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.4.1
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 15s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:46.804Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:46.805Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:46.805Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:46.805Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:46.882Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:47.044Z appoptics:patching patched crypto 
2022-04-28T06:39:47.063Z appoptics:patching patched https 
2022-04-28T06:39:47.064Z appoptics:patching patched http 
2022-04-28T06:39:47.113Z appoptics:patching patched tedious 1.4.2
2022-04-28T06:39:47.118Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name

  13) "after all" hook in "probes.tedious 1.4.2"

  3 passing (4s)
  13 failing

  1) probes.tedious 1.4.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.4.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.4.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.4.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.4.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 1.4.2
       "after all" hook in "probes.tedious 1.4.2":
     done() called multiple times in hook <probes.tedious 1.4.2 "after all" hook in "probes.tedious 1.4.2"> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js; in addition, done() received error: ConnectionError: Login failed for user ''.
    at Parser.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:403:37)
    at Parser.emit (node:events:526:28)
    at Parser.nextToken (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/token-stream-parser.js:91:18)
    at Parser.addBuffer (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/token-stream-parser.js:68:17)
    at Connection.sendDataToTokenStreamParser (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:796:35)
    at Connection.data (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:154:23)
    at Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:672:59)
    at MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:604:22)
    at MessageIO.emit (node:events:526:28)
    at MessageIO.eventData (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:56:12)
    at Socket.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:3:59)
    at Socket.emit (node:events:526:28)
    at addChunk (node:internal/streams/readable:315:12)
    at readableAddChunk (node:internal/streams/readable:289:9)
    at Socket.Readable.push (node:internal/streams/readable:228:10)
    at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17) {
  code: 'ELOGIN',
  'error@context': [Object],
  uncaught: true
}
  Error: done() called multiple times in hook <probes.tedious 1.4.2 "after all" hook in "probes.tedious 1.4.2"> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js; in addition, done() received error: ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17) {
    code: 'ELOGIN',
    'error@context': [Object],
    uncaught: true
  }
      at process.emit (node:events:526:28)
      at process._fatalException (node:internal/process/execution:167:25)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:59.430Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:59.431Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:59.431Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:59.431Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:59.523Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:59.695Z appoptics:patching patched crypto 
2022-04-28T06:39:59.748Z appoptics:patching patched https 
2022-04-28T06:39:59.749Z appoptics:patching patched http 
2022-04-28T06:39:59.809Z appoptics:patching patched tedious 1.4.3
2022-04-28T06:39:59.815Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.4.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.3
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.3
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.4.3
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.4.3
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.4.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.4.3
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:12.054Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:12.055Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:12.056Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:12.056Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:12.157Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:12.377Z appoptics:patching patched crypto 
2022-04-28T06:40:12.399Z appoptics:patching patched https 
2022-04-28T06:40:12.399Z appoptics:patching patched http 
2022-04-28T06:40:12.452Z appoptics:patching patched tedious 1.5.1
2022-04-28T06:40:12.458Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) "before each" hook for "should truncate long queries with no database name"


  3 passing (3s)
  10 failing

  1) probes.tedious 1.5.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.1
       "before each" hook for "should truncate long queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:23.652Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:23.653Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:23.653Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:23.653Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:23.813Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:24.002Z appoptics:patching patched crypto 
2022-04-28T06:40:24.026Z appoptics:patching patched https 
2022-04-28T06:40:24.048Z appoptics:patching patched http 
2022-04-28T06:40:24.121Z appoptics:patching patched tedious 1.5.2
2022-04-28T06:40:24.126Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.5.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.5.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.5.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:36.431Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:36.432Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:36.432Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:36.432Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:36.528Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:36.769Z appoptics:patching patched crypto 
2022-04-28T06:40:36.792Z appoptics:patching patched https 
2022-04-28T06:40:36.793Z appoptics:patching patched http 
2022-04-28T06:40:36.846Z appoptics:patching patched tedious 1.5.3
2022-04-28T06:40:36.852Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.5.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.3
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:46.893Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:46.894Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:46.894Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:46.894Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:46.973Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:47.164Z appoptics:patching patched crypto 
2022-04-28T06:40:47.185Z appoptics:patching patched https 
2022-04-28T06:40:47.186Z appoptics:patching patched http 
2022-04-28T06:40:47.234Z appoptics:patching patched tedious 1.5.4
2022-04-28T06:40:47.239Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.5.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.4
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.4
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.4
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.4
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.5.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.5.4
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:59.040Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:59.041Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:59.041Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:59.041Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:59.132Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:59.348Z appoptics:patching patched crypto 
2022-04-28T06:40:59.369Z appoptics:patching patched https 
2022-04-28T06:40:59.370Z appoptics:patching patched http 
2022-04-28T06:40:59.431Z appoptics:patching patched tedious 1.5.5
2022-04-28T06:40:59.445Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.5.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.5
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.5
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.5
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.5
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.5
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.5
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.5
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.5
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.5.5
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.6',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:11.600Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:11.602Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:11.602Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:11.602Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:11.703Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:11.929Z appoptics:patching patched crypto 
2022-04-28T06:41:11.964Z appoptics:patching patched https 
2022-04-28T06:41:11.965Z appoptics:patching patched http 
2022-04-28T06:41:12.020Z appoptics:patching patched tedious 1.5.6
2022-04-28T06:41:12.027Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 1.5.6
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:727:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:748:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.6
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:727:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:748:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.6
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:727:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:748:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.6
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.7',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:21.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:21.714Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:21.714Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:21.714Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:21.806Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:22.038Z appoptics:patching patched crypto 
2022-04-28T06:41:22.061Z appoptics:patching patched https 
2022-04-28T06:41:22.062Z appoptics:patching patched http 
2022-04-28T06:41:22.113Z appoptics:patching patched tedious 1.5.7
2022-04-28T06:41:22.118Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.7
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 1.5.7
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.7
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.7
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.7
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.7
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.7
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.8',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:32.476Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:32.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:32.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:32.477Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:32.570Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:32.771Z appoptics:patching patched crypto 
2022-04-28T06:41:32.793Z appoptics:patching patched https 
2022-04-28T06:41:32.794Z appoptics:patching patched http 
2022-04-28T06:41:32.844Z appoptics:patching patched tedious 1.5.8
2022-04-28T06:41:32.850Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.8
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 1.5.8
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.8
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.6.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:42.878Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:42.879Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:42.879Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:42.879Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:42.958Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:43.173Z appoptics:patching patched crypto 
2022-04-28T06:41:43.197Z appoptics:patching patched https 
2022-04-28T06:41:43.198Z appoptics:patching patched http 
2022-04-28T06:41:43.254Z appoptics:patching patched tedious 1.6.0
2022-04-28T06:41:43.260Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) "before each" hook for "should truncate long queries with no database name"


  3 passing (3s)
  10 failing

  1) probes.tedious 1.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.6.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.6.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.6.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.6.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.6.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.6.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.6.0
       "before each" hook for "should truncate long queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.7.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:55.036Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:55.037Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:55.037Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:55.037Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:55.119Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:55.323Z appoptics:patching patched crypto 
2022-04-28T06:41:55.368Z appoptics:patching patched https 
2022-04-28T06:41:55.369Z appoptics:patching patched http 
2022-04-28T06:41:55.423Z appoptics:patching patched tedious 1.7.0
2022-04-28T06:41:55.429Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.7.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.7.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.7.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.7.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.7.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.7.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.7.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.7.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.7.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.7.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.8.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:07.429Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:07.435Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:07.435Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:07.435Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:07.561Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:07.778Z appoptics:patching patched crypto 
2022-04-28T06:42:07.798Z appoptics:patching patched https 
2022-04-28T06:42:07.799Z appoptics:patching patched http 
2022-04-28T06:42:07.847Z appoptics:patching patched tedious 1.8.0
2022-04-28T06:42:07.852Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.8.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.8.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.8.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.8.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.8.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.8.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.8.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.8.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.8.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.8.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.8.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.8.0
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.8.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:20.541Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:20.542Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:20.542Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:20.542Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:20.623Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:20.781Z appoptics:patching patched crypto 
2022-04-28T06:42:20.812Z appoptics:patching patched https 
2022-04-28T06:42:20.813Z appoptics:patching patched http 
2022-04-28T06:42:20.859Z appoptics:patching patched tedious 1.8.1
2022-04-28T06:42:20.864Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.8.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.8.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.8.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.8.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.8.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.8.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.8.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.8.1
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.9.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:32.711Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:32.712Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:32.712Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:32.712Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:32.787Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:32.950Z appoptics:patching patched crypto 
2022-04-28T06:42:32.972Z appoptics:patching patched https 
2022-04-28T06:42:32.972Z appoptics:patching patched http 
2022-04-28T06:42:33.021Z appoptics:patching patched tedious 1.9.0
2022-04-28T06:42:33.026Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.9.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.9.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.9.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.9.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.9.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.9.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.

changed 4 packages, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:44.205Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:44.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:44.206Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:44.206Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:44.284Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:44.455Z appoptics:patching patched crypto 
2022-04-28T06:42:44.475Z appoptics:patching patched https 
2022-04-28T06:42:44.475Z appoptics:patching patched http 
2022-04-28T06:42:44.525Z appoptics:patching patched tedious 1.10.0
2022-04-28T06:42:44.530Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.10.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.10.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.10.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.10.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.10.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.10.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:56.156Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:56.157Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:56.157Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:56.157Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:56.231Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:56.395Z appoptics:patching patched crypto 
2022-04-28T06:42:56.416Z appoptics:patching patched https 
2022-04-28T06:42:56.416Z appoptics:patching patched http 
2022-04-28T06:42:56.478Z appoptics:patching patched tedious 1.11.0
2022-04-28T06:42:56.486Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.11.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.11.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.11.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.11.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.11.0
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:09.362Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:09.363Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:09.363Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:09.363Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:09.476Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:09.703Z appoptics:patching patched crypto 
2022-04-28T06:43:09.726Z appoptics:patching patched https 
2022-04-28T06:43:09.726Z appoptics:patching patched http 
2022-04-28T06:43:09.780Z appoptics:patching patched tedious 1.11.1
2022-04-28T06:43:09.786Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.11.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.1
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:21.829Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:21.830Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:21.830Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:21.830Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:21.919Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:22.102Z appoptics:patching patched crypto 
2022-04-28T06:43:22.126Z appoptics:patching patched https 
2022-04-28T06:43:22.126Z appoptics:patching patched http 
2022-04-28T06:43:22.174Z appoptics:patching patched tedious 1.11.2
2022-04-28T06:43:22.179Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.11.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:32.811Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:32.812Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:32.812Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:32.812Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:32.904Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:33.095Z appoptics:patching patched crypto 
2022-04-28T06:43:33.114Z appoptics:patching patched https 
2022-04-28T06:43:33.115Z appoptics:patching patched http 
2022-04-28T06:43:33.165Z appoptics:patching patched tedious 1.11.4
2022-04-28T06:43:33.170Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.11.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.4
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.4
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.11.4
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.11.4
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.11.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.11.4
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:45.633Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:45.634Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:45.634Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:45.634Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:45.729Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:46.049Z appoptics:patching patched crypto 
2022-04-28T06:43:46.073Z appoptics:patching patched https 
2022-04-28T06:43:46.074Z appoptics:patching patched http 
2022-04-28T06:43:46.129Z appoptics:patching patched tedious 1.11.5
2022-04-28T06:43:46.134Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.11.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:775:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:57)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:775:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:57)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.5
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.emit (node:events:526:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.emit (node:events:526:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at Socket.emit (node:events:526:28)
      at addChunk (node:internal/streams/readable:315:12)
      at readableAddChunk (node:internal/streams/readable:289:9)
      at Socket.Readable.push (node:internal/streams/readable:228:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

added 6 packages, removed 1 package, changed 1 package, and audited 857 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:57.935Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:57.936Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:57.936Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:57.936Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:58.018Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:58.200Z appoptics:patching patched crypto 
2022-04-28T06:43:58.220Z appoptics:patching patched https 
2022-04-28T06:43:58.220Z appoptics:patching patched http 
2022-04-28T06:43:58.321Z appoptics:patching patched tedious 1.12.0
2022-04-28T06:43:58.326Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.12.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at MessageIO.emit (node:events:526:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)




changed 1 package, and audited 857 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:08.313Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:08.314Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:08.314Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:08.314Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:08.411Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:08.657Z appoptics:patching patched crypto 
2022-04-28T06:44:08.678Z appoptics:patching patched https 
2022-04-28T06:44:08.679Z appoptics:patching patched http 
2022-04-28T06:44:08.893Z appoptics:patching patched tedious 1.12.1
2022-04-28T06:44:08.906Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.12.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.12.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.12.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.12.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.12.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.12.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.12.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at MessageIO.emit (node:events:526:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:20.838Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:20.839Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:20.839Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:20.839Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:21.014Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:21.393Z appoptics:patching patched crypto 
2022-04-28T06:44:21.415Z appoptics:patching patched https 
2022-04-28T06:44:21.416Z appoptics:patching patched http 
2022-04-28T06:44:21.524Z appoptics:patching patched tedious 1.12.2
2022-04-28T06:44:21.531Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 1.12.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.2
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at MessageIO.emit (node:events:526:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)




changed 1 package, and audited 857 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:31.045Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:31.046Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:31.046Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:31.046Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:31.150Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:31.482Z appoptics:patching patched crypto 
2022-04-28T06:44:31.502Z appoptics:patching patched https 
2022-04-28T06:44:31.503Z appoptics:patching patched http 
2022-04-28T06:44:31.625Z appoptics:patching patched tedious 1.12.3
2022-04-28T06:44:31.630Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.12.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.3
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at MessageIO.emit (node:events:526:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)




changed 1 package, and audited 857 packages in 15s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:48.720Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:48.721Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:48.721Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:48.721Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:48.797Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:48.958Z appoptics:patching patched crypto 
2022-04-28T06:44:48.977Z appoptics:patching patched https 
2022-04-28T06:44:48.978Z appoptics:patching patched http 
2022-04-28T06:44:49.055Z appoptics:patching patched tedious 1.13.0
2022-04-28T06:44:49.062Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) "before each" hook for "should sanitize query with no database name"


  3 passing (3s)
  9 failing

  1) probes.tedious 1.13.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.13.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.13.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.13.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.13.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.13.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.13.0
       "before each" hook for "should sanitize query with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:00.894Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:00.895Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:00.895Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:00.895Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:00.984Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:01.155Z appoptics:patching patched crypto 
2022-04-28T06:45:01.176Z appoptics:patching patched https 
2022-04-28T06:45:01.176Z appoptics:patching patched http 
2022-04-28T06:45:01.254Z appoptics:patching patched tedious 1.13.1
2022-04-28T06:45:01.259Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 1.13.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.13.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.13.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.13.1
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:12.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:12.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:12.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:12.218Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:12.325Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:12.501Z appoptics:patching patched crypto 
2022-04-28T06:45:12.522Z appoptics:patching patched https 
2022-04-28T06:45:12.523Z appoptics:patching patched http 
2022-04-28T06:45:12.601Z appoptics:patching patched tedious 1.13.2
2022-04-28T06:45:12.606Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) "before each" hook for "should truncate long queries with no database name"


  3 passing (3s)
  10 failing

  1) probes.tedious 1.13.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.13.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.13.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.13.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.13.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.13.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.13.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.13.2
       "before each" hook for "should truncate long queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




added 1 package, changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:23.856Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:23.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:23.857Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:23.857Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:23.931Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:24.104Z appoptics:patching patched crypto 
2022-04-28T06:45:24.125Z appoptics:patching patched https 
2022-04-28T06:45:24.126Z appoptics:patching patched http 
2022-04-28T06:45:24.199Z appoptics:patching patched tedious 1.14.0
2022-04-28T06:45:24.204Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.14.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) "before each" hook for "should sanitize query with no database name"


  3 passing (3s)
  9 failing

  1) probes.tedious 1.14.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.14.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.14.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.14.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.14.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.14.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.14.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.14.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:538:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.14.0
       "before each" hook for "should sanitize query with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)



npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

added 3 packages, removed 1 package, changed 3 packages, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:36.167Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:36.168Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:36.168Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:36.168Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:36.325Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:36.626Z appoptics:patching patched crypto 
2022-04-28T06:45:36.648Z appoptics:patching patched https 
2022-04-28T06:45:36.649Z appoptics:patching patched http 
2022-04-28T06:45:36.734Z appoptics:patching patched dns 
2022-04-28T06:45:36.786Z appoptics:patching patched tedious 1.15.0
2022-04-28T06:45:36.794Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.15.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.15.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:698:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:591:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.15.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:698:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:591:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.15.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




removed 2 packages, changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:45.622Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:45.623Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:45.623Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:45.623Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:45.707Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:45.869Z appoptics:patching patched crypto 
2022-04-28T06:45:45.890Z appoptics:patching patched https 
2022-04-28T06:45:45.891Z appoptics:patching patched http 
2022-04-28T06:45:45.956Z appoptics:patching patched dns 
2022-04-28T06:45:45.992Z appoptics:patching patched tedious 2.0.0
2022-04-28T06:45:45.997Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 2.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 2.0.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




changed 1 package, and audited 858 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:57.027Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:57.028Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:57.028Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:57.028Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:57.106Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:57.276Z appoptics:patching patched crypto 
2022-04-28T06:45:57.297Z appoptics:patching patched https 
2022-04-28T06:45:57.297Z appoptics:patching patched http 
2022-04-28T06:45:57.360Z appoptics:patching patched dns 
2022-04-28T06:45:57.398Z appoptics:patching patched tedious 2.0.1
2022-04-28T06:45:57.403Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.0.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




added 2 packages, changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:07.623Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:07.623Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:07.623Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:07.624Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:07.701Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:07.918Z appoptics:patching patched crypto 
2022-04-28T06:46:07.946Z appoptics:patching patched https 
2022-04-28T06:46:07.951Z appoptics:patching patched http 
2022-04-28T06:46:08.028Z appoptics:patching patched dns 
2022-04-28T06:46:08.071Z appoptics:patching patched tedious 2.1.0
2022-04-28T06:46:08.076Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:872:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:896:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:768:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:872:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:896:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:768:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.1.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




removed 2 packages, changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:17.582Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:17.583Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:17.583Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:17.583Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:17.660Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:17.829Z appoptics:patching patched crypto 
2022-04-28T06:46:17.849Z appoptics:patching patched https 
2022-04-28T06:46:17.850Z appoptics:patching patched http 
2022-04-28T06:46:17.914Z appoptics:patching patched dns 
2022-04-28T06:46:17.953Z appoptics:patching patched tedious 2.1.1
2022-04-28T06:46:17.958Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.1.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:28.213Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:28.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:28.214Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:28.214Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:28.316Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:28.484Z appoptics:patching patched crypto 
2022-04-28T06:46:28.504Z appoptics:patching patched https 
2022-04-28T06:46:28.505Z appoptics:patching patched http 
2022-04-28T06:46:28.571Z appoptics:patching patched dns 
2022-04-28T06:46:28.613Z appoptics:patching patched tedious 2.1.2
2022-04-28T06:46:28.618Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.2
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:38.168Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:38.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:38.169Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:38.169Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:38.294Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:38.598Z appoptics:patching patched crypto 
2022-04-28T06:46:38.619Z appoptics:patching patched https 
2022-04-28T06:46:38.620Z appoptics:patching patched http 
2022-04-28T06:46:38.718Z appoptics:patching patched dns 
2022-04-28T06:46:38.780Z appoptics:patching patched tedious 2.1.3
2022-04-28T06:46:38.788Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.3
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:47.742Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:47.743Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:47.743Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:47.743Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:47.817Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:48.005Z appoptics:patching patched crypto 
2022-04-28T06:46:48.024Z appoptics:patching patched https 
2022-04-28T06:46:48.024Z appoptics:patching patched http 
2022-04-28T06:46:48.091Z appoptics:patching patched dns 
2022-04-28T06:46:48.129Z appoptics:patching patched tedious 2.1.4
2022-04-28T06:46:48.133Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.4
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:57.696Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:57.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:57.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:57.696Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:57.781Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:57.954Z appoptics:patching patched crypto 
2022-04-28T06:46:57.976Z appoptics:patching patched https 
2022-04-28T06:46:57.976Z appoptics:patching patched http 
2022-04-28T06:46:58.041Z appoptics:patching patched dns 
2022-04-28T06:46:58.085Z appoptics:patching patched tedious 2.1.5
2022-04-28T06:46:58.090Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.5
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:07.906Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:07.907Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:07.907Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:07.907Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:07.984Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:08.161Z appoptics:patching patched crypto 
2022-04-28T06:47:08.183Z appoptics:patching patched https 
2022-04-28T06:47:08.184Z appoptics:patching patched http 
2022-04-28T06:47:08.246Z appoptics:patching patched dns 
2022-04-28T06:47:08.283Z appoptics:patching patched tedious 2.2.0
2022-04-28T06:47:08.288Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:18.481Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:18.482Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:18.482Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:18.482Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:18.560Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:18.762Z appoptics:patching patched crypto 
2022-04-28T06:47:18.802Z appoptics:patching patched https 
2022-04-28T06:47:18.803Z appoptics:patching patched http 
2022-04-28T06:47:18.879Z appoptics:patching patched dns 
2022-04-28T06:47:18.916Z appoptics:patching patched tedious 2.2.1
2022-04-28T06:47:18.921Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:27.916Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:27.917Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:27.917Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:27.917Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:28.005Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:28.212Z appoptics:patching patched crypto 
2022-04-28T06:47:28.234Z appoptics:patching patched https 
2022-04-28T06:47:28.234Z appoptics:patching patched http 
2022-04-28T06:47:28.307Z appoptics:patching patched dns 
2022-04-28T06:47:28.362Z appoptics:patching patched tedious 2.2.2
2022-04-28T06:47:28.367Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.2
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:37.463Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:37.464Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:37.464Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:37.464Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:37.550Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:37.778Z appoptics:patching patched crypto 
2022-04-28T06:47:37.799Z appoptics:patching patched https 
2022-04-28T06:47:37.800Z appoptics:patching patched http 
2022-04-28T06:47:37.876Z appoptics:patching patched dns 
2022-04-28T06:47:37.914Z appoptics:patching patched tedious 2.2.3
2022-04-28T06:47:37.919Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.2.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.2.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:47.850Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:47.851Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:47.851Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:47.851Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:47.938Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:48.112Z appoptics:patching patched crypto 
2022-04-28T06:47:48.133Z appoptics:patching patched https 
2022-04-28T06:47:48.134Z appoptics:patching patched http 
2022-04-28T06:47:48.201Z appoptics:patching patched dns 
2022-04-28T06:47:48.253Z appoptics:patching patched tedious 2.2.4
2022-04-28T06:47:48.258Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.4
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, changed 1 package, and audited 859 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:58.373Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:58.374Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:58.374Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:58.374Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:58.456Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:58.629Z appoptics:patching patched crypto 
2022-04-28T06:47:58.649Z appoptics:patching patched https 
2022-04-28T06:47:58.649Z appoptics:patching patched http 
2022-04-28T06:47:58.726Z appoptics:patching patched dns 
2022-04-28T06:47:58.780Z appoptics:patching patched tedious 2.3.0
2022-04-28T06:47:58.785Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.3.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:09.784Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:09.785Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:09.785Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:09.785Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:09.872Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:10.093Z appoptics:patching patched crypto 
2022-04-28T06:48:10.118Z appoptics:patching patched https 
2022-04-28T06:48:10.118Z appoptics:patching patched http 
2022-04-28T06:48:10.205Z appoptics:patching patched dns 
2022-04-28T06:48:10.282Z appoptics:patching patched tedious 2.3.1
2022-04-28T06:48:10.287Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.3.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.3.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.3.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, removed 1 package, changed 1 package, and audited 859 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:21.931Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:21.932Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:21.932Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:21.932Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:22.011Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:22.187Z appoptics:patching patched crypto 
2022-04-28T06:48:22.207Z appoptics:patching patched https 
2022-04-28T06:48:22.207Z appoptics:patching patched http 
2022-04-28T06:48:22.276Z appoptics:patching patched dns 
2022-04-28T06:48:22.335Z appoptics:patching patched tedious 2.4.0
2022-04-28T06:48:22.340Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.4.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:32.781Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:32.782Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:32.782Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:32.782Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:32.870Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:33.050Z appoptics:patching patched crypto 
2022-04-28T06:48:33.072Z appoptics:patching patched https 
2022-04-28T06:48:33.072Z appoptics:patching patched http 
2022-04-28T06:48:33.171Z appoptics:patching patched dns 
2022-04-28T06:48:33.228Z appoptics:patching patched tedious 2.5.0
2022-04-28T06:48:33.234Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.5.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.5.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:42.729Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:42.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:42.730Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:42.730Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:42.820Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:43.066Z appoptics:patching patched crypto 
2022-04-28T06:48:43.091Z appoptics:patching patched https 
2022-04-28T06:48:43.091Z appoptics:patching patched http 
2022-04-28T06:48:43.315Z appoptics:patching patched dns 
2022-04-28T06:48:43.429Z appoptics:patching patched tedious 2.5.1
2022-04-28T06:48:43.441Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.5.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.5.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.5.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:53.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:53.423Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:53.423Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:53.423Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:53.503Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:53.674Z appoptics:patching patched crypto 
2022-04-28T06:48:53.695Z appoptics:patching patched https 
2022-04-28T06:48:53.696Z appoptics:patching patched http 
2022-04-28T06:48:53.763Z appoptics:patching patched dns 
2022-04-28T06:48:53.819Z appoptics:patching patched tedious 2.6.0
2022-04-28T06:48:53.824Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 2.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 2.6.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:04.272Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:04.272Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:04.272Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:04.273Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:04.367Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:04.597Z appoptics:patching patched crypto 
2022-04-28T06:49:04.621Z appoptics:patching patched https 
2022-04-28T06:49:04.621Z appoptics:patching patched http 
2022-04-28T06:49:04.690Z appoptics:patching patched dns 
2022-04-28T06:49:04.742Z appoptics:patching patched tedious 2.6.1
2022-04-28T06:49:04.747Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.6.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:14.329Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:14.330Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:14.330Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:14.330Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:14.408Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:14.641Z appoptics:patching patched crypto 
2022-04-28T06:49:14.678Z appoptics:patching patched https 
2022-04-28T06:49:14.678Z appoptics:patching patched http 
2022-04-28T06:49:14.772Z appoptics:patching patched dns 
2022-04-28T06:49:14.822Z appoptics:patching patched tedious 2.6.2
2022-04-28T06:49:14.827Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.6.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:26.656Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:26.657Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:26.657Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:26.657Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:26.739Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:26.973Z appoptics:patching patched crypto 
2022-04-28T06:49:27.000Z appoptics:patching patched https 
2022-04-28T06:49:27.001Z appoptics:patching patched http 
2022-04-28T06:49:27.092Z appoptics:patching patched dns 
2022-04-28T06:49:27.149Z appoptics:patching patched tedious 2.6.3
2022-04-28T06:49:27.153Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 2.6.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 2.6.3
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:37.360Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:37.361Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:37.361Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:37.361Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:37.455Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:37.667Z appoptics:patching patched crypto 
2022-04-28T06:49:37.691Z appoptics:patching patched https 
2022-04-28T06:49:37.692Z appoptics:patching patched http 
2022-04-28T06:49:37.774Z appoptics:patching patched dns 
2022-04-28T06:49:37.856Z appoptics:patching patched tedious 2.6.4
2022-04-28T06:49:37.862Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.6.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.4
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 18s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:57.205Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:57.206Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:57.206Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:57.206Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:57.284Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:57.457Z appoptics:patching patched crypto 
2022-04-28T06:49:57.477Z appoptics:patching patched https 
2022-04-28T06:49:57.477Z appoptics:patching patched http 
2022-04-28T06:49:57.545Z appoptics:patching patched dns 
2022-04-28T06:49:57.605Z appoptics:patching patched tedious 2.7.0
2022-04-28T06:49:57.610Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1014:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1038:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:897:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.7.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1014:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1038:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:897:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.7.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:07.703Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:07.704Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:07.704Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:07.704Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:07.778Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:07.950Z appoptics:patching patched crypto 
2022-04-28T06:50:07.971Z appoptics:patching patched https 
2022-04-28T06:50:07.971Z appoptics:patching patched http 
2022-04-28T06:50:08.041Z appoptics:patching patched dns 
2022-04-28T06:50:08.117Z appoptics:patching patched tedious 2.7.1
2022-04-28T06:50:08.122Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.7.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1014:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1038:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:897:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.7.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:18.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:18.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:18.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:18.706Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:18.779Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:18.938Z appoptics:patching patched crypto 
2022-04-28T06:50:18.957Z appoptics:patching patched https 
2022-04-28T06:50:18.957Z appoptics:patching patched http 
2022-04-28T06:50:18.994Z appoptics:patching patched dns 
2022-04-28T06:50:19.053Z appoptics:patching patched tedious 3.0.0
2022-04-28T06:50:19.059Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 3.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:952:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:974:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:857:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:147:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 3.0.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)




removed 5 packages, changed 4 packages, and audited 855 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:30.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:30.062Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:30.062Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:30.062Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:30.148Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:30.326Z appoptics:patching patched crypto 
2022-04-28T06:50:30.351Z appoptics:patching patched https 
2022-04-28T06:50:30.351Z appoptics:patching patched http 
2022-04-28T06:50:30.389Z appoptics:patching patched dns 
2022-04-28T06:50:30.449Z appoptics:patching patched tedious 3.0.1
2022-04-28T06:50:30.455Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 3.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:999:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1022:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:902:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 3.0.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.emit (node:events:526:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at Parser.emit (node:events:526:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:40.357Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:40.358Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:40.358Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:40.358Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:40.438Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:40.622Z appoptics:patching patched crypto 
2022-04-28T06:50:40.643Z appoptics:patching patched https 
2022-04-28T06:50:40.643Z appoptics:patching patched http 
2022-04-28T06:50:40.698Z appoptics:patching patched dns 
2022-04-28T06:50:40.754Z appoptics:patching patched tedious 4.0.0
2022-04-28T06:50:40.759Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 4.0.0
       should support basic queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:99:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:98:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  2) probes.tedious 4.0.0
       should support parameters with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:121:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:120:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  3) probes.tedious 4.0.0
       should sanitize query with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:154:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:152:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  4) probes.tedious 4.0.0
       should truncate long queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:187:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:186:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  5) probes.tedious 4.0.0
       should tag queries when feature is enabled:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:214:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_tag (test/probes/tedious.test.js:213:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  6) probes.tedious 4.0.0
       should do nothing when disabled with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:239:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:238:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  7) probes.tedious 4.0.0
       should support basic queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:99:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:98:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  8) probes.tedious 4.0.0
       should support parameters with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:121:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:120:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  9) probes.tedious 4.0.0
       should sanitize query with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:154:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:152:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  10) probes.tedious 4.0.0
       should truncate long queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:187:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:186:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  11) probes.tedious 4.0.0
       should tag queries when feature is enabled:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:214:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_tag (test/probes/tedious.test.js:213:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  12) probes.tedious 4.0.0
       should do nothing when disabled with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:239:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:238:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)




changed 1 package, and audited 855 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:53.654Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:53.655Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:53.655Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:53.655Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:53.731Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:53.902Z appoptics:patching patched crypto 
2022-04-28T06:50:53.929Z appoptics:patching patched https 
2022-04-28T06:50:53.930Z appoptics:patching patched http 
2022-04-28T06:50:53.961Z appoptics:patching patched dns 
2022-04-28T06:50:54.015Z appoptics:patching patched tedious 4.0.1
2022-04-28T06:50:54.021Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 4.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.1
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1085:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:944:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:04.080Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:04.081Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:04.081Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:04.082Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:04.200Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:04.364Z appoptics:patching patched crypto 
2022-04-28T06:51:04.384Z appoptics:patching patched https 
2022-04-28T06:51:04.385Z appoptics:patching patched http 
2022-04-28T06:51:04.414Z appoptics:patching patched dns 
2022-04-28T06:51:04.469Z appoptics:patching patched tedious 4.0.2
2022-04-28T06:51:04.474Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) should support parameters with no database name
    17) should sanitize query with no database name
    18) should sanitize query with no database name
    19) should truncate long queries with no database name
    20) should truncate long queries with no database name
    21) should tag queries when feature is enabled
    22) should tag queries when feature is enabled
    23) should do nothing when disabled with no database name


  3 passing (4s)
  23 failing

  1) probes.tedious 4.0.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.0.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 4.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 4.0.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 4.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  17) probes.tedious 4.0.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  18) probes.tedious 4.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  19) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  20) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  21) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  22) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  23) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:17.356Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:17.356Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:17.357Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:17.357Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:17.432Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:17.615Z appoptics:patching patched crypto 
2022-04-28T06:51:17.636Z appoptics:patching patched https 
2022-04-28T06:51:17.636Z appoptics:patching patched http 
2022-04-28T06:51:17.668Z appoptics:patching patched dns 
2022-04-28T06:51:17.726Z appoptics:patching patched tedious 4.0.3
2022-04-28T06:51:17.731Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should tag queries when feature is enabled
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) "before each" hook for "should support basic queries with no database name"
    12) should do nothing when disabled with a database name


  3 passing (2s)
  12 failing

  1) probes.tedious 4.0.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.3
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.0.3
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1386:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1326:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1891:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1051:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:951:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'E5B443309183C4A6',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6450,
  Timestamp_u: 1651128680097565,
  'X-Trace': '2B9DB1E5084F17B0C6647505046D58E73F00000000CA641A7BC32D9E2401',
  _V: '1',
  'sw.parent_span_id': 'e5b443309183c4a6',
  'sw.trace_context': '00-9db1e5084f17b0c6647505046d58e73f-ca641a7bc32d9e24-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:28.406Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:28.407Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:28.407Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:28.407Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:28.501Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:28.726Z appoptics:patching patched crypto 
2022-04-28T06:51:28.750Z appoptics:patching patched https 
2022-04-28T06:51:28.750Z appoptics:patching patched http 
2022-04-28T06:51:28.784Z appoptics:patching patched dns 
2022-04-28T06:51:28.847Z appoptics:patching patched tedious 4.0.4
2022-04-28T06:51:28.852Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  8 failing

  1) probes.tedious 4.0.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.4
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1085:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:944:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)



npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 28 packages, changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:40.473Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:40.474Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:40.474Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:40.474Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:40.568Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:40.774Z appoptics:patching patched crypto 
2022-04-28T06:51:40.795Z appoptics:patching patched https 
2022-04-28T06:51:40.795Z appoptics:patching patched http 
2022-04-28T06:51:40.860Z appoptics:patching patched zlib 
2022-04-28T06:51:40.992Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:40.993Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:40.993Z appoptics:patching patched fs 
2022-04-28T06:51:41.198Z appoptics:patching patched dns 
2022-04-28T06:51:41.253Z appoptics:patching patched tedious 4.1.0
2022-04-28T06:51:41.258Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 4.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1096:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:955:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:50.947Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:50.948Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:50.948Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:50.948Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:51.028Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:51.217Z appoptics:patching patched crypto 
2022-04-28T06:51:51.240Z appoptics:patching patched https 
2022-04-28T06:51:51.240Z appoptics:patching patched http 
2022-04-28T06:51:51.345Z appoptics:patching patched zlib 
2022-04-28T06:51:51.413Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:51.413Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:51.414Z appoptics:patching patched fs 
2022-04-28T06:51:51.498Z appoptics:patching patched dns 
2022-04-28T06:51:51.550Z appoptics:patching patched tedious 4.1.1
2022-04-28T06:51:51.554Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2026:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '82112414C24BD739',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6645,
  Timestamp_u: 1651128713992482,
  'X-Trace': '2BA91F7ABC79B3F60D15FCD14F4C5148AF000000002DCE99D4FA0152FC01',
  _V: '1',
  'sw.parent_span_id': '82112414c24bd739',
  'sw.trace_context': '00-a91f7abc79b3f60d15fcd14f4c5148af-2dce99d4fa0152fc-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:03.559Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:03.560Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:03.560Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:03.560Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:03.644Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:03.818Z appoptics:patching patched crypto 
2022-04-28T06:52:03.863Z appoptics:patching patched https 
2022-04-28T06:52:03.864Z appoptics:patching patched http 
2022-04-28T06:52:03.935Z appoptics:patching patched zlib 
2022-04-28T06:52:03.989Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:03.990Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:03.990Z appoptics:patching patched fs 
2022-04-28T06:52:04.097Z appoptics:patching patched dns 
2022-04-28T06:52:04.163Z appoptics:patching patched tedious 4.1.2
2022-04-28T06:52:04.168Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should tag queries when feature is enabled
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) "before each" hook for "should support basic queries with no database name"
    12) should do nothing when disabled with a database name


  3 passing (2s)
  12 failing

  1) probes.tedious 4.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2029:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'EFC8BAF180132F18',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6710,
  Timestamp_u: 1651128726554441,
  'X-Trace': '2BC88ED2D35D5459428AD75B6DE1D41D87000000003DF3C03A73DA18C801',
  _V: '1',
  'sw.parent_span_id': 'efc8baf180132f18',
  'sw.trace_context': '00-c88ed2d35d5459428ad75b6de1d41d87-3df3c03a73da18c8-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:14.868Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:14.869Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:14.869Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:14.869Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:14.945Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:15.122Z appoptics:patching patched crypto 
2022-04-28T06:52:15.148Z appoptics:patching patched https 
2022-04-28T06:52:15.149Z appoptics:patching patched http 
2022-04-28T06:52:15.214Z appoptics:patching patched zlib 
2022-04-28T06:52:15.275Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:15.276Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:15.276Z appoptics:patching patched fs 
2022-04-28T06:52:15.373Z appoptics:patching patched dns 
2022-04-28T06:52:15.432Z appoptics:patching patched tedious 4.1.3
2022-04-28T06:52:15.438Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) should do nothing when disabled with a database name
    12) should support basic queries with no database name
    13) "before each" hook for "should support parameters with no database name"
    14) should support basic queries with no database name


  3 passing (3s)
  14 failing

  1) probes.tedious 4.1.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.3
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.1.3
       "before each" hook for "should support parameters with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2029:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'B232262A530B5518',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  QueryTag: '/*traceparent=\'00-dbde91bc64d785fa5d541bea02ddbd72-c1f3244412784098-01\'*/',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6775,
  Timestamp_u: 1651128738143762,
  'X-Trace': '2BDBDE91BC64D785FA5D541BEA02DDBD7200000000C1F324441278409801',
  _V: '1',
  'sw.parent_span_id': 'b232262a530b5518',
  'sw.trace_context': '00-dbde91bc64d785fa5d541bea02ddbd72-c1f3244412784098-01'
} not to have property QueryTag (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:109:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 4.1.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:26.325Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:26.326Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:26.326Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:26.326Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:26.404Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:26.579Z appoptics:patching patched crypto 
2022-04-28T06:52:26.599Z appoptics:patching patched https 
2022-04-28T06:52:26.599Z appoptics:patching patched http 
2022-04-28T06:52:26.662Z appoptics:patching patched zlib 
2022-04-28T06:52:26.719Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:26.719Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:26.720Z appoptics:patching patched fs 
2022-04-28T06:52:26.820Z appoptics:patching patched dns 
2022-04-28T06:52:26.871Z appoptics:patching patched tedious 4.2.0
2022-04-28T06:52:26.875Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  10 failing

  1) probes.tedious 4.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.2.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.2.0
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1118:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:977:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:39.221Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:39.222Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:39.222Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:39.222Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:39.311Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:39.511Z appoptics:patching patched crypto 
2022-04-28T06:52:39.534Z appoptics:patching patched https 
2022-04-28T06:52:39.534Z appoptics:patching patched http 
2022-04-28T06:52:39.607Z appoptics:patching patched zlib 
2022-04-28T06:52:39.671Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:39.671Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:39.672Z appoptics:patching patched fs 
2022-04-28T06:52:39.778Z appoptics:patching patched dns 
2022-04-28T06:52:39.828Z appoptics:patching patched tedious 5.0.0
2022-04-28T06:52:39.834Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 5.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1410:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1392:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2044:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1009:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '4635D6D2C89E6DBB',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6905,
  Timestamp_u: 1651128762247554,
  'X-Trace': '2B40057E77ADFAD551842A091104D0D3B1000000009AD057340A75E5C601',
  _V: '1',
  'sw.parent_span_id': '4635d6d2c89e6dbb',
  'sw.trace_context': '00-40057e77adfad551842a091104d0d3b1-9ad057340a75e5c6-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:51.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:51.608Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:51.608Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:51.608Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:51.699Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:51.886Z appoptics:patching patched crypto 
2022-04-28T06:52:51.926Z appoptics:patching patched https 
2022-04-28T06:52:51.927Z appoptics:patching patched http 
2022-04-28T06:52:52.039Z appoptics:patching patched zlib 
2022-04-28T06:52:52.106Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:52.106Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:52.107Z appoptics:patching patched fs 
2022-04-28T06:52:52.201Z appoptics:patching patched dns 
2022-04-28T06:52:52.257Z appoptics:patching patched tedious 5.0.1
2022-04-28T06:52:52.262Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  8 failing

  1) probes.tedious 5.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1170:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1004:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:02.348Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:02.349Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:02.349Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:02.349Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:02.423Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:02.616Z appoptics:patching patched crypto 
2022-04-28T06:53:02.639Z appoptics:patching patched https 
2022-04-28T06:53:02.640Z appoptics:patching patched http 
2022-04-28T06:53:02.707Z appoptics:patching patched zlib 
2022-04-28T06:53:02.762Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:02.762Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:02.763Z appoptics:patching patched fs 
2022-04-28T06:53:02.947Z appoptics:patching patched dns 
2022-04-28T06:53:03.013Z appoptics:patching patched tedious 5.0.2
2022-04-28T06:53:03.026Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 5.0.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1412:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1394:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2062:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1136:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1011:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '804149B19C2449E6',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7035,
  Timestamp_u: 1651128785486826,
  'X-Trace': '2B81BAE9F303D1E85D6588BAFCBA257D830000000023B8C46D7CE7CCCF01',
  _V: '1',
  'sw.parent_span_id': '804149b19c2449e6',
  'sw.trace_context': '00-81bae9f303d1e85d6588bafcba257d83-23b8c46d7ce7cccf-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:14.173Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:14.174Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:14.174Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:14.174Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:14.252Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:14.458Z appoptics:patching patched crypto 
2022-04-28T06:53:14.481Z appoptics:patching patched https 
2022-04-28T06:53:14.483Z appoptics:patching patched http 
2022-04-28T06:53:14.563Z appoptics:patching patched zlib 
2022-04-28T06:53:14.616Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:14.616Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:14.616Z appoptics:patching patched fs 
2022-04-28T06:53:14.714Z appoptics:patching patched dns 
2022-04-28T06:53:14.762Z appoptics:patching patched tedious 5.0.3
2022-04-28T06:53:14.767Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) should support parameters with no database name
    17) should sanitize query with no database name
    18) should sanitize query with no database name
    19) should truncate long queries with no database name
    20) should truncate long queries with no database name
    21) should tag queries when feature is enabled
    22) should tag queries when feature is enabled
    23) should do nothing when disabled with no database name


  3 passing (4s)
  23 failing

  1) probes.tedious 5.0.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.3
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 5.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 5.0.3
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 5.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  17) probes.tedious 5.0.3
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  18) probes.tedious 5.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  19) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  20) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  21) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  22) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  23) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:26.970Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:26.971Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:26.971Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:26.971Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:27.095Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:27.310Z appoptics:patching patched crypto 
2022-04-28T06:53:27.344Z appoptics:patching patched https 
2022-04-28T06:53:27.347Z appoptics:patching patched http 
2022-04-28T06:53:27.430Z appoptics:patching patched zlib 
2022-04-28T06:53:27.529Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:27.529Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:27.529Z appoptics:patching patched fs 
2022-04-28T06:53:27.633Z appoptics:patching patched dns 
2022-04-28T06:53:27.683Z appoptics:patching patched tedious 6.0.0
2022-04-28T06:53:27.693Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1419:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2088:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1161:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1034:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'C9FFD3831353A810',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7165,
  Timestamp_u: 1651128810161197,
  'X-Trace': '2B218C0A3DF6015F78DC2981D5FACF51F2000000008E7D41CAE334D9E201',
  _V: '1',
  'sw.parent_span_id': 'c9ffd3831353a810',
  'sw.trace_context': '00-218c0a3df6015f78dc2981d5facf51f2-8e7d41cae334d9e2-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:39.170Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:39.180Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:39.180Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:39.180Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:39.337Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:39.674Z appoptics:patching patched crypto 
2022-04-28T06:53:39.722Z appoptics:patching patched https 
2022-04-28T06:53:39.723Z appoptics:patching patched http 
2022-04-28T06:53:39.913Z appoptics:patching patched zlib 
2022-04-28T06:53:40.052Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:40.052Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:40.052Z appoptics:patching patched fs 
2022-04-28T06:53:40.178Z appoptics:patching patched dns 
2022-04-28T06:53:40.226Z appoptics:patching patched tedious 6.0.1
2022-04-28T06:53:40.232Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.0.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.0.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1419:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2076:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1161:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1034:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '729490FCDD70BB36',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7230,
  Timestamp_u: 1651128822652776,
  'X-Trace': '2BE84C488EA75AC9432A9DD5884CCA2581000000004887FBBE8E0D7CF401',
  _V: '1',
  'sw.parent_span_id': '729490fcdd70bb36',
  'sw.trace_context': '00-e84c488ea75ac9432a9dd5884cca2581-4887fbbe8e0d7cf4-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:52.430Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:52.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:52.431Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:52.431Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:52.539Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:52.795Z appoptics:patching patched crypto 
2022-04-28T06:53:52.822Z appoptics:patching patched https 
2022-04-28T06:53:52.823Z appoptics:patching patched http 
2022-04-28T06:53:52.896Z appoptics:patching patched zlib 
2022-04-28T06:53:52.959Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:52.959Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:52.959Z appoptics:patching patched fs 
2022-04-28T06:53:53.043Z appoptics:patching patched dns 
2022-04-28T06:53:53.088Z appoptics:patching patched tedious 6.1.0
2022-04-28T06:53:53.093Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 6.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1206:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1038:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:04.723Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:04.723Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:04.723Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:04.724Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:04.814Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:05.085Z appoptics:patching patched crypto 
2022-04-28T06:54:05.107Z appoptics:patching patched https 
2022-04-28T06:54:05.108Z appoptics:patching patched http 
2022-04-28T06:54:05.198Z appoptics:patching patched zlib 
2022-04-28T06:54:05.276Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:05.276Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:05.277Z appoptics:patching patched fs 
2022-04-28T06:54:05.390Z appoptics:patching patched dns 
2022-04-28T06:54:05.435Z appoptics:patching patched tedious 6.1.1
2022-04-28T06:54:05.440Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) should support parameters with no database name
    17) should sanitize query with no database name
    18) should sanitize query with no database name
    19) should truncate long queries with no database name
    20) should truncate long queries with no database name
    21) should tag queries when feature is enabled
    22) should tag queries when feature is enabled
    23) should do nothing when disabled with no database name


  3 passing (4s)
  23 failing

  1) probes.tedious 6.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.1.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 6.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 6.1.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 6.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  17) probes.tedious 6.1.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  18) probes.tedious 6.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  19) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  20) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  21) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  22) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  23) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:19.675Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:19.676Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:19.676Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:19.676Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:19.754Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:19.926Z appoptics:patching patched crypto 
2022-04-28T06:54:19.946Z appoptics:patching patched https 
2022-04-28T06:54:19.947Z appoptics:patching patched http 
2022-04-28T06:54:20.016Z appoptics:patching patched zlib 
2022-04-28T06:54:20.067Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:20.067Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:20.068Z appoptics:patching patched fs 
2022-04-28T06:54:20.149Z appoptics:patching patched dns 
2022-04-28T06:54:20.193Z appoptics:patching patched tedious 6.1.2
2022-04-28T06:54:20.198Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.1.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.1.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.1.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1457:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2095:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1172:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1045:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '8749A60C82AB1372',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7425,
  Timestamp_u: 1651128862596260,
  'X-Trace': '2BD95834D836D297C57E43F05E4AFFB1760000000018A1D2CD1907280801',
  _V: '1',
  'sw.parent_span_id': '8749a60c82ab1372',
  'sw.trace_context': '00-d95834d836d297c57e43f05e4affb176-18a1d2cd19072808-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:32.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:32.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:32.921Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:32.921Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:32.997Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:33.181Z appoptics:patching patched crypto 
2022-04-28T06:54:33.202Z appoptics:patching patched https 
2022-04-28T06:54:33.203Z appoptics:patching patched http 
2022-04-28T06:54:33.265Z appoptics:patching patched zlib 
2022-04-28T06:54:33.317Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:33.317Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:33.317Z appoptics:patching patched fs 
2022-04-28T06:54:33.400Z appoptics:patching patched dns 
2022-04-28T06:54:33.445Z appoptics:patching patched tedious 6.2.0
2022-04-28T06:54:33.451Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 6.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.2.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1206:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1038:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




added 1 package, removed 1 package, changed 1 package, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:45.927Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:45.928Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:45.928Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:45.928Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:46.025Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:46.244Z appoptics:patching patched crypto 
2022-04-28T06:54:46.265Z appoptics:patching patched https 
2022-04-28T06:54:46.267Z appoptics:patching patched http 
2022-04-28T06:54:46.333Z appoptics:patching patched zlib 
2022-04-28T06:54:46.402Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:46.402Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:46.402Z appoptics:patching patched fs 
2022-04-28T06:54:46.507Z appoptics:patching patched dns 
2022-04-28T06:54:46.552Z appoptics:patching patched tedious 6.2.1
2022-04-28T06:54:46.560Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  8 failing

  1) probes.tedious 6.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.2.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.2.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.2.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.2.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.2.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.2.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1206:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1038:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




added 10 packages, changed 1 package, and audited 893 packages in 19s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:08.257Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:08.258Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:08.258Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:08.258Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:08.389Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:08.641Z appoptics:patching patched crypto 
2022-04-28T06:55:08.661Z appoptics:patching patched https 
2022-04-28T06:55:08.662Z appoptics:patching patched http 
2022-04-28T06:55:08.716Z appoptics:patching patched zlib 
2022-04-28T06:55:08.725Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:08.726Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:08.726Z appoptics:patching patched fs 
2022-04-28T06:55:08.989Z appoptics:patching patched dns 
2022-04-28T06:55:09.025Z appoptics:patching patched tedious 6.3.0
2022-04-28T06:55:09.031Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.3.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.3.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.3.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.3.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.3.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1507:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1488:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2199:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1211:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '8810D7A44529DAA8',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7620,
  Timestamp_u: 1651128911463626,
  'X-Trace': '2B27A0ED9E66DF50464058537668030353000000007907D2C08ADCAE2C01',
  _V: '1',
  'sw.parent_span_id': '8810d7a44529daa8',
  'sw.trace_context': '00-27a0ed9e66df50464058537668030353-7907d2c08adcae2c-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 894 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:22.439Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:22.440Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:22.440Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:22.440Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:22.522Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:22.698Z appoptics:patching patched crypto 
2022-04-28T06:55:22.719Z appoptics:patching patched https 
2022-04-28T06:55:22.719Z appoptics:patching patched http 
2022-04-28T06:55:22.776Z appoptics:patching patched zlib 
2022-04-28T06:55:22.784Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:22.784Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:22.785Z appoptics:patching patched fs 
2022-04-28T06:55:22.973Z appoptics:patching patched dns 
2022-04-28T06:55:23.008Z appoptics:patching patched tedious 6.4.0
2022-04-28T06:55:23.014Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.4.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.4.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.4.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.4.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.4.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.4.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.4.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1516:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1497:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2208:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1220:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1093:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:33:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '8ECAAA26AD0959E4',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7685,
  Timestamp_u: 1651128925396922,
  'X-Trace': '2BEA22122C47F9F68C1F9FEFB396765B62000000009BB8E79769BDF8E901',
  _V: '1',
  'sw.parent_span_id': '8ecaaa26ad0959e4',
  'sw.trace_context': '00-ea22122c47f9f68c1f9fefb396765b62-9bb8e79769bdf8e9-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 1 package, changed 3 packages, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:36.404Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:36.405Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:36.405Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:36.405Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:36.511Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:36.759Z appoptics:patching patched crypto 
2022-04-28T06:55:36.784Z appoptics:patching patched https 
2022-04-28T06:55:36.784Z appoptics:patching patched http 
2022-04-28T06:55:36.848Z appoptics:patching patched zlib 
2022-04-28T06:55:36.856Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:36.856Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:36.856Z appoptics:patching patched fs 
2022-04-28T06:55:37.046Z appoptics:patching patched dns 
2022-04-28T06:55:37.087Z appoptics:patching patched tedious 6.5.0
2022-04-28T06:55:37.092Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"


  3 passing (2s)
  12 failing

  1) probes.tedious 6.5.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.5.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.5.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.5.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.5.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.5.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.5.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.5.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.5.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.5.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.5.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.5.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1235:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1254:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1086:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:49.588Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:49.589Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:49.589Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:49.589Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:49.678Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:49.871Z appoptics:patching patched crypto 
2022-04-28T06:55:49.890Z appoptics:patching patched https 
2022-04-28T06:55:49.891Z appoptics:patching patched http 
2022-04-28T06:55:49.952Z appoptics:patching patched zlib 
2022-04-28T06:55:49.959Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:49.960Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:49.960Z appoptics:patching patched fs 
2022-04-28T06:55:50.152Z appoptics:patching patched dns 
2022-04-28T06:55:50.199Z appoptics:patching patched tedious 6.6.0
2022-04-28T06:55:50.205Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1539:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1520:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2235:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1242:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1115:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '153843D65DA6225A',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7815,
  Timestamp_u: 1651128952609263,
  'X-Trace': '2B6E0049E611A3EE10FA63E592F93A42BB000000003345A75727B7D81D01',
  _V: '1',
  'sw.parent_span_id': '153843d65da6225a',
  'sw.trace_context': '00-6e0049e611a3ee10fa63e592f93a42bb-3345a75727b7d81d-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 896 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:03.529Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:03.530Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:03.530Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:03.530Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:03.606Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:03.782Z appoptics:patching patched crypto 
2022-04-28T06:56:03.802Z appoptics:patching patched https 
2022-04-28T06:56:03.803Z appoptics:patching patched http 
2022-04-28T06:56:03.860Z appoptics:patching patched zlib 
2022-04-28T06:56:03.867Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:03.868Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:03.868Z appoptics:patching patched fs 
2022-04-28T06:56:04.069Z appoptics:patching patched dns 
2022-04-28T06:56:04.109Z appoptics:patching patched tedious 6.6.1
2022-04-28T06:56:04.114Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1543:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1524:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2300:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1247:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1107:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:40:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '5588D03874C44EB0',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7880,
  Timestamp_u: 1651128966510372,
  'X-Trace': '2BCB0D5FCDEB9CEC01A1908247D047805E00000000CFBEB1E242AC1D4D01',
  _V: '1',
  'sw.parent_span_id': '5588d03874c44eb0',
  'sw.trace_context': '00-cb0d5fcdeb9cec01a1908247d047805e-cfbeb1e242ac1d4d-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:16.359Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:16.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:16.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:16.360Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:16.461Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:16.669Z appoptics:patching patched crypto 
2022-04-28T06:56:16.689Z appoptics:patching patched https 
2022-04-28T06:56:16.689Z appoptics:patching patched http 
2022-04-28T06:56:16.748Z appoptics:patching patched zlib 
2022-04-28T06:56:16.755Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:16.755Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:16.756Z appoptics:patching patched fs 
2022-04-28T06:56:16.942Z appoptics:patching patched dns 
2022-04-28T06:56:16.988Z appoptics:patching patched tedious 6.6.2
2022-04-28T06:56:16.993Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  4 failing

  1) probes.tedious 6.6.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1262:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1280:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1099:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 1 package, and audited 896 packages in 11s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:29.417Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:29.418Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:29.418Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:29.418Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:29.495Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:29.670Z appoptics:patching patched crypto 
2022-04-28T06:56:29.690Z appoptics:patching patched https 
2022-04-28T06:56:29.691Z appoptics:patching patched http 
2022-04-28T06:56:29.755Z appoptics:patching patched zlib 
2022-04-28T06:56:29.767Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:29.767Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:29.768Z appoptics:patching patched fs 
2022-04-28T06:56:29.968Z appoptics:patching patched dns 
2022-04-28T06:56:30.008Z appoptics:patching patched tedious 6.6.3
2022-04-28T06:56:30.013Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) "before each" hook for "should support basic queries with no database name"
    12) should do nothing when disabled with a database name


  3 passing (2s)
  12 failing

  1) probes.tedious 6.6.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.3
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '030719C1A0A88B81',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  QueryTag: '/*traceparent=\'00-9ec4be5f5bca27e0f88b6e32ed247946-121df22b7e716ada-01\'*/',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8010,
  Timestamp_u: 1651128992412032,
  'X-Trace': '2B9EC4BE5F5BCA27E0F88B6E32ED24794600000000121DF22B7E716ADA01',
  _V: '1',
  'sw.parent_span_id': '030719c1a0a88b81',
  'sw.trace_context': '00-9ec4be5f5bca27e0f88b6e32ed247946-121df22b7e716ada-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 11s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:43.958Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:43.959Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:43.959Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:43.959Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:44.036Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:44.218Z appoptics:patching patched crypto 
2022-04-28T06:56:44.238Z appoptics:patching patched https 
2022-04-28T06:56:44.239Z appoptics:patching patched http 
2022-04-28T06:56:44.298Z appoptics:patching patched zlib 
2022-04-28T06:56:44.305Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:44.306Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:44.306Z appoptics:patching patched fs 
2022-04-28T06:56:44.491Z appoptics:patching patched dns 
2022-04-28T06:56:44.542Z appoptics:patching patched tedious 6.6.4
2022-04-28T06:56:44.547Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.4
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.4
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'C4B459E7B09A574C',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8075,
  Timestamp_u: 1651129006937508,
  'X-Trace': '2BDBF92394E47998B2023C9A2D4157628A00000000558FFFA1691A5C9701',
  _V: '1',
  'sw.parent_span_id': 'c4b459e7b09a574c',
  'sw.trace_context': '00-dbf92394e47998b2023c9a2d4157628a-558fffa1691a5c97-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:56.670Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:56.671Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:56.671Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:56.671Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:56.750Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:56.962Z appoptics:patching patched crypto 
2022-04-28T06:56:56.986Z appoptics:patching patched https 
2022-04-28T06:56:56.986Z appoptics:patching patched http 
2022-04-28T06:56:57.053Z appoptics:patching patched zlib 
2022-04-28T06:56:57.064Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:57.065Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:57.065Z appoptics:patching patched fs 
2022-04-28T06:56:57.254Z appoptics:patching patched dns 
2022-04-28T06:56:57.295Z appoptics:patching patched tedious 6.6.5
2022-04-28T06:56:57.302Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.5
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.5
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.5
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.5
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.5
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.5
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.5
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'BC7030E778972F84',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8140,
  Timestamp_u: 1651129019695681,
  'X-Trace': '2BE5522E4B2651325F9E62458E336B4A7E00000000DDF991FAE571798001',
  _V: '1',
  'sw.parent_span_id': 'bc7030e778972f84',
  'sw.trace_context': '00-e5522e4b2651325f9e62458e336b4a7e-ddf991fae5717980-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:09.324Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:09.325Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:09.326Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:09.326Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:09.411Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:09.619Z appoptics:patching patched crypto 
2022-04-28T06:57:09.644Z appoptics:patching patched https 
2022-04-28T06:57:09.645Z appoptics:patching patched http 
2022-04-28T06:57:09.713Z appoptics:patching patched zlib 
2022-04-28T06:57:09.722Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:09.723Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:09.723Z appoptics:patching patched fs 
2022-04-28T06:57:09.939Z appoptics:patching patched dns 
2022-04-28T06:57:09.994Z appoptics:patching patched tedious 6.6.6
2022-04-28T06:57:09.999Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.6
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.6
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.6
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.6
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.6
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.6
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.6
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.6
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.6
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.6
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.6
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.6
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '22C1FFB37CA6DAB1',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8205,
  Timestamp_u: 1651129032416095,
  'X-Trace': '2B0FAF6A3AB928B3CC431A24DEB5FA0FCD000000004D8395727C70DB2901',
  _V: '1',
  'sw.parent_span_id': '22c1ffb37ca6dab1',
  'sw.trace_context': '00-0faf6a3ab928b3cc431a24deb5fa0fcd-4d8395727c70db29-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.6
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:21.896Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:21.897Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:21.897Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:21.897Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:21.971Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:22.145Z appoptics:patching patched crypto 
2022-04-28T06:57:22.167Z appoptics:patching patched https 
2022-04-28T06:57:22.167Z appoptics:patching patched http 
2022-04-28T06:57:22.221Z appoptics:patching patched zlib 
2022-04-28T06:57:22.228Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:22.229Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:22.229Z appoptics:patching patched fs 
2022-04-28T06:57:22.423Z appoptics:patching patched dns 
2022-04-28T06:57:22.464Z appoptics:patching patched tedious 6.7.0
2022-04-28T06:57:22.469Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.7.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.7.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.7.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.7.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.7.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.7.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.7.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.7.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.7.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.7.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.7.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1575:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1556:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2332:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1279:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1139:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '6940B5980AC97057',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8270,
  Timestamp_u: 1651129044859672,
  'X-Trace': '2B9C0C87F587B84ABD2460F2683424544000000000EA5DAB155774BADF01',
  _V: '1',
  'sw.parent_span_id': '6940b5980ac97057',
  'sw.trace_context': '00-9c0c87f587b84abd2460f26834245440-ea5dab155774badf-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.7.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 7 packages, removed 20 packages, changed 7 packages, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:35.018Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:35.019Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:35.019Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:35.019Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:35.105Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:35.286Z appoptics:patching patched crypto 
2022-04-28T06:57:35.308Z appoptics:patching patched https 
2022-04-28T06:57:35.309Z appoptics:patching patched http 
2022-04-28T06:57:35.394Z appoptics:patching patched zlib 
2022-04-28T06:57:35.400Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:35.400Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:35.400Z appoptics:patching patched fs 
2022-04-28T06:57:35.517Z appoptics:patching patched dns 
2022-04-28T06:57:35.569Z appoptics:patching patched tedious 6.7.1
2022-04-28T06:57:35.574Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  8 failing

  1) probes.tedious 6.7.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.7.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.7.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.7.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.7.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.7.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.7.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.7.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1294:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1312:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1131:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)



npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 20 packages, removed 9 packages, changed 7 packages, and audited 894 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:48.218Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:48.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:48.219Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:48.219Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:48.297Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:48.476Z appoptics:patching patched crypto 
2022-04-28T06:57:48.499Z appoptics:patching patched https 
2022-04-28T06:57:48.500Z appoptics:patching patched http 
2022-04-28T06:57:48.557Z appoptics:patching patched zlib 
2022-04-28T06:57:48.568Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:48.568Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:48.569Z appoptics:patching patched fs 
2022-04-28T06:57:48.758Z appoptics:patching patched dns 
2022-04-28T06:57:48.800Z appoptics:patching patched tedious 7.0.0
2022-04-28T06:57:48.804Z appoptics:debug starting runtimeMetrics


  probes.tedious 7.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 7.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 7.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 7.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 7.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 7.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 7.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 7.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 7.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 7.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 7.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 7.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 7.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1573:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1554:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2330:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1277:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1137:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'C71D4B3F7AE3121D',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8400,
  Timestamp_u: 1651129071215654,
  'X-Trace': '2BE842231F9D7A56DB29D472654A6AEB6500000000A59D5442936DE10A01',
  _V: '1',
  'sw.parent_span_id': 'c71d4b3f7ae3121d',
  'sw.trace_context': '00-e842231f9d7a56db29d472654a6aeb65-a59d5442936de10a-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 7.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:00.452Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:00.453Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:00.453Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:00.453Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:00.534Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:00.717Z appoptics:patching patched crypto 
2022-04-28T06:58:00.738Z appoptics:patching patched https 
2022-04-28T06:58:00.739Z appoptics:patching patched http 
2022-04-28T06:58:00.805Z appoptics:patching patched zlib 
2022-04-28T06:58:00.812Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:00.812Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:00.812Z appoptics:patching patched fs 
2022-04-28T06:58:00.999Z appoptics:patching patched dns 
2022-04-28T06:58:01.073Z appoptics:patching patched tedious 8.0.0
2022-04-28T06:58:01.078Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 8.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1573:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1554:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2330:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1277:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1137:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: 'D2013C0FAB66642B',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8465,
  Timestamp_u: 1651129083465163,
  'X-Trace': '2BEC61DB1ED009ADC0655D86C50B324D9C000000007AC1803AA41CF0BE01',
  _V: '1',
  'sw.parent_span_id': 'd2013c0fab66642b',
  'sw.trace_context': '00-ec61db1ed009adc0655d86c50b324d9c-7ac1803aa41cf0be-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:13.088Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:13.089Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:13.089Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:13.089Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:13.179Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:13.390Z appoptics:patching patched crypto 
2022-04-28T06:58:13.412Z appoptics:patching patched https 
2022-04-28T06:58:13.413Z appoptics:patching patched http 
2022-04-28T06:58:13.472Z appoptics:patching patched zlib 
2022-04-28T06:58:13.480Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:13.480Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:13.480Z appoptics:patching patched fs 
2022-04-28T06:58:13.692Z appoptics:patching patched dns 
2022-04-28T06:58:13.768Z appoptics:patching patched tedious 8.0.1
2022-04-28T06:58:13.774Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  10 failing

  1) probes.tedious 8.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.0.1
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1292:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1310:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1129:14)
      at Socket.emit (node:events:538:35)
      at endReadableNT (node:internal/streams/readable:1345:12)
      at processTicksAndRejections (node:internal/process/task_queues:83:21)




changed 2 packages, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:25.293Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:25.294Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:25.294Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:25.295Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:25.409Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:25.911Z appoptics:patching patched crypto 
2022-04-28T06:58:25.951Z appoptics:patching patched https 
2022-04-28T06:58:25.952Z appoptics:patching patched http 
2022-04-28T06:58:26.065Z appoptics:patching patched zlib 
2022-04-28T06:58:26.073Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:26.074Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:26.074Z appoptics:patching patched fs 
2022-04-28T06:58:26.374Z appoptics:patching patched dns 
2022-04-28T06:58:26.525Z appoptics:patching patched tedious 8.1.0
2022-04-28T06:58:26.535Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 8.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.1.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.1.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.1.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1581:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1562:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2328:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1282:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1142:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:47:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '45A8897E4C53DD82',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8595,
  Timestamp_u: 1651129109036353,
  'X-Trace': '2B0E93149AB88C1F50F82456EC64343F7B00000000F63516BA65732E5C01',
  _V: '1',
  'sw.parent_span_id': '45a8897e4c53dd82',
  'sw.trace_context': '00-0e93149ab88c1f50f82456ec64343f7b-f63516ba65732e5c-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 11s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:40.310Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:40.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:40.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:40.311Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:40.398Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:40.717Z appoptics:patching patched crypto 
2022-04-28T06:58:40.738Z appoptics:patching patched https 
2022-04-28T06:58:40.739Z appoptics:patching patched http 
2022-04-28T06:58:40.803Z appoptics:patching patched zlib 
2022-04-28T06:58:40.811Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:40.811Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:40.812Z appoptics:patching patched fs 
2022-04-28T06:58:41.015Z appoptics:patching patched dns 
2022-04-28T06:58:41.086Z appoptics:patching patched tedious 8.1.1
2022-04-28T06:58:41.093Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 8.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.1.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1579:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1560:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2331:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1280:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:47:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '5C37302055EA2FD7',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8660,
  Timestamp_u: 1651129123502272,
  'X-Trace': '2BFB9F19ACD3DA2B1F56AE631EB5D928C7000000000C92E2D457F3ABDE01',
  _V: '1',
  'sw.parent_span_id': '5c37302055ea2fd7',
  'sw.trace_context': '00-fb9f19acd3da2b1f56ae631eb5d928c7-0c92e2d457f3abde-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:52.588Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:52.589Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:52.589Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:52.589Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:52.701Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:52.887Z appoptics:patching patched crypto 
2022-04-28T06:58:52.906Z appoptics:patching patched https 
2022-04-28T06:58:52.907Z appoptics:patching patched http 
2022-04-28T06:58:52.965Z appoptics:patching patched zlib 
2022-04-28T06:58:52.972Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:52.972Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:52.973Z appoptics:patching patched fs 
2022-04-28T06:58:53.170Z appoptics:patching patched dns 
2022-04-28T06:58:53.245Z appoptics:patching patched tedious 8.2.0
2022-04-28T06:58:53.250Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 8.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.2.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.2.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:526:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1143:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.2.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1581:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:526:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1562:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2333:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1282:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1142:14)\nat MessageIO.emit (node:events:526:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:47:14)\nat Message.emit (node:events:538:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat processTicksAndRejections (node:internal/process/task_queues:83:21)',
  Database: '',
  Edge: '46A4C970BCE1FAF4',
  Flavor: 'mssql',
  Hostname: '6522fdd67a05',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8725,
  Timestamp_u: 1651129135643121,
  'X-Trace': '2BD36572A56D2FF8F4CB64412C9253F94B0000000042E8F649A319872901',
  _V: '1',
  'sw.parent_span_id': '46a4c970bce1faf4',
  'sw.trace_context': '00-d36572a56d2ff8f4cb64412c9253f94b-42e8f649a3198729-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:04.338Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:04.339Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:04.339Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:04.339Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:04.448Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:04.697Z appoptics:patching patched crypto 
2022-04-28T06:59:04.722Z appoptics:patching patched https 
2022-04-28T06:59:04.723Z appoptics:patching patched http 
2022-04-28T06:59:04.806Z appoptics:patching patched zlib 
2022-04-28T06:59:04.815Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:04.815Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:04.816Z appoptics:patching patched fs 
2022-04-28T06:59:05.110Z appoptics:patching patched dns 
2022-04-28T06:59:05.186Z appoptics:patching patched tedious 8.3.0
2022-04-28T06:59:05.191Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:18.934Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:18.935Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:18.935Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:18.935Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:19.012Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:19.184Z appoptics:patching patched crypto 
2022-04-28T06:59:19.205Z appoptics:patching patched https 
2022-04-28T06:59:19.206Z appoptics:patching patched http 
2022-04-28T06:59:19.262Z appoptics:patching patched zlib 
2022-04-28T06:59:19.269Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:19.269Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:19.270Z appoptics:patching patched fs 
2022-04-28T06:59:19.457Z appoptics:patching patched dns 
2022-04-28T06:59:19.521Z appoptics:patching patched tedious 8.3.1
2022-04-28T06:59:19.525Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:33.944Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:33.945Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:33.945Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:33.946Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:34.024Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:34.200Z appoptics:patching patched crypto 
2022-04-28T06:59:34.220Z appoptics:patching patched https 
2022-04-28T06:59:34.221Z appoptics:patching patched http 
2022-04-28T06:59:34.277Z appoptics:patching patched zlib 
2022-04-28T06:59:34.284Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:34.285Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:34.285Z appoptics:patching patched fs 
2022-04-28T06:59:34.470Z appoptics:patching patched dns 
2022-04-28T06:59:34.545Z appoptics:patching patched tedious 9.0.0
2022-04-28T06:59:34.550Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:47.986Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:47.987Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:47.987Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:47.987Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:48.065Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:48.242Z appoptics:patching patched crypto 
2022-04-28T06:59:48.264Z appoptics:patching patched https 
2022-04-28T06:59:48.265Z appoptics:patching patched http 
2022-04-28T06:59:48.326Z appoptics:patching patched zlib 
2022-04-28T06:59:48.334Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:48.334Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:48.335Z appoptics:patching patched fs 
2022-04-28T06:59:48.520Z appoptics:patching patched dns 
2022-04-28T06:59:48.596Z appoptics:patching patched tedious 9.0.1
2022-04-28T06:59:48.606Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 19s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:12.026Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:12.027Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:12.027Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:12.027Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:12.108Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:12.286Z appoptics:patching patched crypto 
2022-04-28T07:00:12.306Z appoptics:patching patched https 
2022-04-28T07:00:12.307Z appoptics:patching patched http 
2022-04-28T07:00:12.377Z appoptics:patching patched zlib 
2022-04-28T07:00:12.385Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:12.385Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:12.386Z appoptics:patching patched fs 
2022-04-28T07:00:12.625Z appoptics:patching patched dns 
2022-04-28T07:00:12.734Z appoptics:patching patched tedious 9.1.0
2022-04-28T07:00:12.739Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (51ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 3 packages, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:27.355Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:27.357Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:27.357Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:27.357Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:27.459Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:27.668Z appoptics:patching patched crypto 
2022-04-28T07:00:27.689Z appoptics:patching patched https 
2022-04-28T07:00:27.689Z appoptics:patching patched http 
2022-04-28T07:00:27.751Z appoptics:patching patched zlib 
2022-04-28T07:00:27.759Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:27.760Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:27.760Z appoptics:patching patched fs 
2022-04-28T07:00:28.104Z appoptics:patching patched dns 
2022-04-28T07:00:28.187Z appoptics:patching patched tedious 9.1.1
2022-04-28T07:00:28.193Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (82ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:42.749Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:42.750Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:42.750Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:42.750Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:42.827Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:43.012Z appoptics:patching patched crypto 
2022-04-28T07:00:43.033Z appoptics:patching patched https 
2022-04-28T07:00:43.034Z appoptics:patching patched http 
2022-04-28T07:00:43.101Z appoptics:patching patched zlib 
2022-04-28T07:00:43.108Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:43.108Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:43.109Z appoptics:patching patched fs 
2022-04-28T07:00:43.367Z appoptics:patching patched dns 
2022-04-28T07:00:43.446Z appoptics:patching patched tedious 9.2.0
2022-04-28T07:00:43.451Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (55ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:57.515Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:57.516Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:57.516Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:57.516Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:57.604Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:57.790Z appoptics:patching patched crypto 
2022-04-28T07:00:57.810Z appoptics:patching patched https 
2022-04-28T07:00:57.810Z appoptics:patching patched http 
2022-04-28T07:00:57.874Z appoptics:patching patched zlib 
2022-04-28T07:00:57.884Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:57.884Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:57.885Z appoptics:patching patched fs 
2022-04-28T07:00:58.073Z appoptics:patching patched dns 
2022-04-28T07:00:58.152Z appoptics:patching patched tedious 9.2.1
2022-04-28T07:00:58.157Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (52ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 7 packages, removed 20 packages, changed 7 packages, and audited 882 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:13.103Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:13.104Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:13.104Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:13.104Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:13.183Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:13.363Z appoptics:patching patched crypto 
2022-04-28T07:01:13.384Z appoptics:patching patched https 
2022-04-28T07:01:13.384Z appoptics:patching patched http 
2022-04-28T07:01:13.473Z appoptics:patching patched zlib 
2022-04-28T07:01:13.477Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:13.478Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:13.478Z appoptics:patching patched fs 
2022-04-28T07:01:13.583Z appoptics:patching patched dns 
2022-04-28T07:01:13.660Z appoptics:patching patched tedious 9.2.2
2022-04-28T07:01:13.665Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 23 packages, removed 2 packages, changed 3 packages, and audited 903 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:28.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:28.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:28.267Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:28.267Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:28.345Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:28.538Z appoptics:patching patched crypto 
2022-04-28T07:01:28.575Z appoptics:patching patched https 
2022-04-28T07:01:28.576Z appoptics:patching patched http 
2022-04-28T07:01:28.664Z appoptics:patching patched zlib 
2022-04-28T07:01:28.669Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:28.669Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:28.670Z appoptics:patching patched fs 
2022-04-28T07:01:28.790Z appoptics:patching patched dns 
2022-04-28T07:01:28.984Z appoptics:patching patched tedious 9.2.3
2022-04-28T07:01:28.989Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (64ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 903 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:43.858Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:43.859Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:43.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:43.859Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:43.944Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:44.142Z appoptics:patching patched crypto 
2022-04-28T07:01:44.170Z appoptics:patching patched https 
2022-04-28T07:01:44.170Z appoptics:patching patched http 
2022-04-28T07:01:44.268Z appoptics:patching patched zlib 
2022-04-28T07:01:44.272Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:44.274Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:44.274Z appoptics:patching patched fs 
2022-04-28T07:01:44.402Z appoptics:patching patched dns 
2022-04-28T07:01:44.687Z appoptics:patching patched tedious 10.0.0
2022-04-28T07:01:44.705Z appoptics:debug starting runtimeMetrics


  probes.tedious 10.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 903 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:58.704Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:58.705Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:58.705Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:58.705Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:58.781Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:58.984Z appoptics:patching patched crypto 
2022-04-28T07:01:59.005Z appoptics:patching patched https 
2022-04-28T07:01:59.005Z appoptics:patching patched http 
2022-04-28T07:01:59.099Z appoptics:patching patched zlib 
2022-04-28T07:01:59.103Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:59.104Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:59.104Z appoptics:patching patched fs 
2022-04-28T07:01:59.225Z appoptics:patching patched dns 
2022-04-28T07:01:59.419Z appoptics:patching patched tedious 11.0.0
2022-04-28T07:01:59.425Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (69ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 3 packages, removed 23 packages, changed 4 packages, and audited 883 packages in 11s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:14.559Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:14.560Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:14.560Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:14.560Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:14.641Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:14.826Z appoptics:patching patched crypto 
2022-04-28T07:02:14.848Z appoptics:patching patched https 
2022-04-28T07:02:14.848Z appoptics:patching patched http 
2022-04-28T07:02:14.930Z appoptics:patching patched zlib 
2022-04-28T07:02:14.935Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:14.935Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:14.935Z appoptics:patching patched fs 
2022-04-28T07:02:15.037Z appoptics:patching patched dns 
2022-04-28T07:02:15.105Z appoptics:patching patched tedious 11.0.1
2022-04-28T07:02:15.110Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 1 package, changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:28.747Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:28.748Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:28.748Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:28.748Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:28.834Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:29.011Z appoptics:patching patched crypto 
2022-04-28T07:02:29.032Z appoptics:patching patched https 
2022-04-28T07:02:29.033Z appoptics:patching patched http 
2022-04-28T07:02:29.145Z appoptics:patching patched zlib 
2022-04-28T07:02:29.150Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:29.151Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:29.151Z appoptics:patching patched fs 
2022-04-28T07:02:29.282Z appoptics:patching patched dns 
2022-04-28T07:02:29.376Z appoptics:patching patched tedious 11.0.2
2022-04-28T07:02:29.381Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (65ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:43.064Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:43.065Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:43.065Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:43.065Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:43.141Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:43.315Z appoptics:patching patched crypto 
2022-04-28T07:02:43.340Z appoptics:patching patched https 
2022-04-28T07:02:43.341Z appoptics:patching patched http 
2022-04-28T07:02:43.429Z appoptics:patching patched zlib 
2022-04-28T07:02:43.434Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:43.435Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:43.435Z appoptics:patching patched fs 
2022-04-28T07:02:43.543Z appoptics:patching patched dns 
2022-04-28T07:02:43.630Z appoptics:patching patched tedious 11.0.3
2022-04-28T07:02:43.637Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (53ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:57.915Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:57.917Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:57.917Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:57.917Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:57.996Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:58.162Z appoptics:patching patched crypto 
2022-04-28T07:02:58.181Z appoptics:patching patched https 
2022-04-28T07:02:58.181Z appoptics:patching patched http 
2022-04-28T07:02:58.263Z appoptics:patching patched zlib 
2022-04-28T07:02:58.267Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:58.268Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:58.268Z appoptics:patching patched fs 
2022-04-28T07:02:58.371Z appoptics:patching patched dns 
2022-04-28T07:02:58.440Z appoptics:patching patched tedious 11.0.4
2022-04-28T07:02:58.445Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:12.975Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:12.976Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:12.976Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:12.976Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:13.075Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:13.271Z appoptics:patching patched crypto 
2022-04-28T07:03:13.332Z appoptics:patching patched https 
2022-04-28T07:03:13.333Z appoptics:patching patched http 
2022-04-28T07:03:13.420Z appoptics:patching patched zlib 
2022-04-28T07:03:13.425Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:13.426Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:13.427Z appoptics:patching patched fs 
2022-04-28T07:03:13.569Z appoptics:patching patched dns 
2022-04-28T07:03:13.661Z appoptics:patching patched tedious 11.0.5
2022-04-28T07:03:13.666Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (47ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:27.746Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:27.746Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:27.747Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:27.747Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:27.824Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:27.996Z appoptics:patching patched crypto 
2022-04-28T07:03:28.016Z appoptics:patching patched https 
2022-04-28T07:03:28.017Z appoptics:patching patched http 
2022-04-28T07:03:28.105Z appoptics:patching patched zlib 
2022-04-28T07:03:28.110Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:28.110Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:28.110Z appoptics:patching patched fs 
2022-04-28T07:03:28.220Z appoptics:patching patched dns 
2022-04-28T07:03:28.290Z appoptics:patching patched tedious 11.0.6
2022-04-28T07:03:28.295Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (53ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:41.449Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:41.450Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:41.450Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:41.450Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:41.579Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:41.834Z appoptics:patching patched crypto 
2022-04-28T07:03:41.854Z appoptics:patching patched https 
2022-04-28T07:03:41.855Z appoptics:patching patched http 
2022-04-28T07:03:41.954Z appoptics:patching patched zlib 
2022-04-28T07:03:41.963Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:41.970Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:41.971Z appoptics:patching patched fs 
2022-04-28T07:03:42.137Z appoptics:patching patched dns 
2022-04-28T07:03:42.218Z appoptics:patching patched tedious 11.0.7
2022-04-28T07:03:42.224Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.7
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (52ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:55.316Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:55.316Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:55.317Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:55.317Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:55.407Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:55.619Z appoptics:patching patched crypto 
2022-04-28T07:03:55.641Z appoptics:patching patched https 
2022-04-28T07:03:55.642Z appoptics:patching patched http 
2022-04-28T07:03:55.730Z appoptics:patching patched zlib 
2022-04-28T07:03:55.734Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:55.735Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:55.735Z appoptics:patching patched fs 
2022-04-28T07:03:55.870Z appoptics:patching patched dns 
2022-04-28T07:03:55.941Z appoptics:patching patched tedious 11.0.8
2022-04-28T07:03:55.946Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.8
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (119ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name (48ms)
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 98 packages, removed 2 packages, changed 5 packages, and audited 980 packages in 13s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:13.382Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:13.383Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:13.383Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:13.383Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:13.461Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:13.655Z appoptics:patching patched crypto 
2022-04-28T07:04:13.680Z appoptics:patching patched https 
2022-04-28T07:04:13.680Z appoptics:patching patched http 
2022-04-28T07:04:13.766Z appoptics:patching patched zlib 
2022-04-28T07:04:13.770Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:13.771Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:13.771Z appoptics:patching patched fs 
2022-04-28T07:04:13.874Z appoptics:patching patched dns 
2022-04-28T07:04:13.956Z appoptics:patching patched tedious 11.0.9
2022-04-28T07:04:13.961Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.9
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (53ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:28.813Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:28.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:28.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:28.814Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:28.893Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:29.094Z appoptics:patching patched crypto 
2022-04-28T07:04:29.115Z appoptics:patching patched https 
2022-04-28T07:04:29.116Z appoptics:patching patched http 
2022-04-28T07:04:29.207Z appoptics:patching patched zlib 
2022-04-28T07:04:29.212Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:29.212Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:29.213Z appoptics:patching patched fs 
2022-04-28T07:04:29.318Z appoptics:patching patched dns 
2022-04-28T07:04:29.393Z appoptics:patching patched tedious 11.0.10
2022-04-28T07:04:29.398Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.10
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (61ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:44.518Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:44.519Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:44.519Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:44.519Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:44.600Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:44.785Z appoptics:patching patched crypto 
2022-04-28T07:04:44.807Z appoptics:patching patched https 
2022-04-28T07:04:44.807Z appoptics:patching patched http 
2022-04-28T07:04:44.902Z appoptics:patching patched zlib 
2022-04-28T07:04:44.912Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:44.913Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:44.913Z appoptics:patching patched fs 
2022-04-28T07:04:45.043Z appoptics:patching patched dns 
2022-04-28T07:04:45.121Z appoptics:patching patched tedious 11.1.0
2022-04-28T07:04:45.126Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (92ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:00.378Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:00.379Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:00.379Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:00.379Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:00.457Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:00.638Z appoptics:patching patched crypto 
2022-04-28T07:05:00.657Z appoptics:patching patched https 
2022-04-28T07:05:00.658Z appoptics:patching patched http 
2022-04-28T07:05:00.741Z appoptics:patching patched zlib 
2022-04-28T07:05:00.745Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:00.746Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:00.746Z appoptics:patching patched fs 
2022-04-28T07:05:00.858Z appoptics:patching patched dns 
2022-04-28T07:05:00.931Z appoptics:patching patched tedious 11.1.1
2022-04-28T07:05:00.936Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (59ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 23s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:28.716Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:28.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:28.717Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:28.717Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:28.797Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:28.976Z appoptics:patching patched crypto 
2022-04-28T07:05:28.998Z appoptics:patching patched https 
2022-04-28T07:05:28.998Z appoptics:patching patched http 
2022-04-28T07:05:29.093Z appoptics:patching patched zlib 
2022-04-28T07:05:29.097Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:29.098Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:29.098Z appoptics:patching patched fs 
2022-04-28T07:05:29.204Z appoptics:patching patched dns 
2022-04-28T07:05:29.274Z appoptics:patching patched tedious 11.2.0
2022-04-28T07:05:29.278Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 1 package, changed 4 packages, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:43.627Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:43.629Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:43.629Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:43.629Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:43.711Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:43.921Z appoptics:patching patched crypto 
2022-04-28T07:05:43.942Z appoptics:patching patched https 
2022-04-28T07:05:43.942Z appoptics:patching patched http 
2022-04-28T07:05:44.025Z appoptics:patching patched zlib 
2022-04-28T07:05:44.029Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:44.029Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:44.030Z appoptics:patching patched fs 
2022-04-28T07:05:44.137Z appoptics:patching patched dns 
2022-04-28T07:05:44.226Z appoptics:patching patched tedious 11.3.0
2022-04-28T07:05:44.231Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (71ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 8s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:57.045Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:57.046Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:57.046Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:57.046Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:57.161Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:57.422Z appoptics:patching patched crypto 
2022-04-28T07:05:57.464Z appoptics:patching patched https 
2022-04-28T07:05:57.465Z appoptics:patching patched http 
2022-04-28T07:05:57.575Z appoptics:patching patched zlib 
2022-04-28T07:05:57.580Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:57.580Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:57.581Z appoptics:patching patched fs 
2022-04-28T07:05:57.773Z appoptics:patching patched dns 
2022-04-28T07:05:57.905Z appoptics:patching patched tedious 11.3.1
2022-04-28T07:05:57.915Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (119ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:12.482Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:12.483Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:12.483Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:12.483Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:12.557Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:12.796Z appoptics:patching patched crypto 
2022-04-28T07:06:12.817Z appoptics:patching patched https 
2022-04-28T07:06:12.818Z appoptics:patching patched http 
2022-04-28T07:06:12.895Z appoptics:patching patched zlib 
2022-04-28T07:06:12.899Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:12.900Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:12.900Z appoptics:patching patched fs 
2022-04-28T07:06:13.002Z appoptics:patching patched dns 
2022-04-28T07:06:13.084Z appoptics:patching patched tedious 11.4.0
2022-04-28T07:06:13.090Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (54ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:27.604Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:27.604Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:27.605Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:27.605Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:27.680Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:27.854Z appoptics:patching patched crypto 
2022-04-28T07:06:27.873Z appoptics:patching patched https 
2022-04-28T07:06:27.874Z appoptics:patching patched http 
2022-04-28T07:06:27.951Z appoptics:patching patched zlib 
2022-04-28T07:06:27.955Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:27.955Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:27.956Z appoptics:patching patched fs 
2022-04-28T07:06:28.050Z appoptics:patching patched dns 
2022-04-28T07:06:28.125Z appoptics:patching patched tedious 11.4.1
2022-04-28T07:06:28.129Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (51ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:42.391Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:42.391Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:42.392Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:42.392Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:42.470Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:42.649Z appoptics:patching patched crypto 
2022-04-28T07:06:42.669Z appoptics:patching patched https 
2022-04-28T07:06:42.670Z appoptics:patching patched http 
2022-04-28T07:06:42.752Z appoptics:patching patched zlib 
2022-04-28T07:06:42.756Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:42.756Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:42.757Z appoptics:patching patched fs 
2022-04-28T07:06:42.855Z appoptics:patching patched dns 
2022-04-28T07:06:42.926Z appoptics:patching patched tedious 11.4.2
2022-04-28T07:06:42.931Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (53ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:58.813Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:58.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:58.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:58.814Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:58.901Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:59.129Z appoptics:patching patched crypto 
2022-04-28T07:06:59.151Z appoptics:patching patched https 
2022-04-28T07:06:59.151Z appoptics:patching patched http 
2022-04-28T07:06:59.233Z appoptics:patching patched zlib 
2022-04-28T07:06:59.237Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:59.238Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:59.238Z appoptics:patching patched fs 
2022-04-28T07:06:59.362Z appoptics:patching patched dns 
2022-04-28T07:06:59.458Z appoptics:patching patched tedious 11.5.0
2022-04-28T07:06:59.463Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:14.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:14.807Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:14.807Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:14.807Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:14.887Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:15.076Z appoptics:patching patched crypto 
2022-04-28T07:07:15.097Z appoptics:patching patched https 
2022-04-28T07:07:15.098Z appoptics:patching patched http 
2022-04-28T07:07:15.179Z appoptics:patching patched zlib 
2022-04-28T07:07:15.184Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:15.184Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:15.185Z appoptics:patching patched fs 
2022-04-28T07:07:15.296Z appoptics:patching patched dns 
2022-04-28T07:07:15.378Z appoptics:patching patched tedious 11.6.0
2022-04-28T07:07:15.382Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (52ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:30.973Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:30.974Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:30.974Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:30.974Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:31.049Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:31.234Z appoptics:patching patched crypto 
2022-04-28T07:07:31.254Z appoptics:patching patched https 
2022-04-28T07:07:31.254Z appoptics:patching patched http 
2022-04-28T07:07:31.329Z appoptics:patching patched zlib 
2022-04-28T07:07:31.334Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:31.334Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:31.334Z appoptics:patching patched fs 
2022-04-28T07:07:31.441Z appoptics:patching patched dns 
2022-04-28T07:07:31.522Z appoptics:patching patched tedious 11.6.1
2022-04-28T07:07:31.526Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:46.208Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:46.209Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:46.209Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:46.210Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:46.288Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:46.475Z appoptics:patching patched crypto 
2022-04-28T07:07:46.494Z appoptics:patching patched https 
2022-04-28T07:07:46.495Z appoptics:patching patched http 
2022-04-28T07:07:46.567Z appoptics:patching patched zlib 
2022-04-28T07:07:46.571Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:46.571Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:46.572Z appoptics:patching patched fs 
2022-04-28T07:07:46.740Z appoptics:patching patched dns 
2022-04-28T07:07:46.841Z appoptics:patching patched tedious 11.7.0
2022-04-28T07:07:46.846Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (51ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:00.764Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:00.765Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:00.765Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:00.765Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:00.931Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:01.234Z appoptics:patching patched crypto 
2022-04-28T07:08:01.257Z appoptics:patching patched https 
2022-04-28T07:08:01.258Z appoptics:patching patched http 
2022-04-28T07:08:01.345Z appoptics:patching patched zlib 
2022-04-28T07:08:01.349Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:01.350Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:01.350Z appoptics:patching patched fs 
2022-04-28T07:08:01.468Z appoptics:patching patched dns 
2022-04-28T07:08:01.554Z appoptics:patching patched tedious 11.8.0
2022-04-28T07:08:01.560Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.8.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (49ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name (40ms)
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:16.742Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:16.743Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:16.743Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:16.743Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:16.834Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:17.022Z appoptics:patching patched crypto 
2022-04-28T07:08:17.044Z appoptics:patching patched https 
2022-04-28T07:08:17.044Z appoptics:patching patched http 
2022-04-28T07:08:17.125Z appoptics:patching patched zlib 
2022-04-28T07:08:17.131Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:17.131Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:17.132Z appoptics:patching patched fs 
2022-04-28T07:08:17.319Z appoptics:patching patched dns 
2022-04-28T07:08:17.423Z appoptics:patching patched tedious 12.0.0
2022-04-28T07:08:17.428Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (65ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:32.476Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:32.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:32.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:32.477Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:32.557Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:32.746Z appoptics:patching patched crypto 
2022-04-28T07:08:32.768Z appoptics:patching patched https 
2022-04-28T07:08:32.768Z appoptics:patching patched http 
2022-04-28T07:08:32.847Z appoptics:patching patched zlib 
2022-04-28T07:08:32.851Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:32.852Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:32.852Z appoptics:patching patched fs 
2022-04-28T07:08:32.962Z appoptics:patching patched dns 
2022-04-28T07:08:33.057Z appoptics:patching patched tedious 12.1.0
2022-04-28T07:08:33.062Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (50ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:47.543Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:47.544Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:47.545Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:47.545Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:47.622Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:47.803Z appoptics:patching patched crypto 
2022-04-28T07:08:47.825Z appoptics:patching patched https 
2022-04-28T07:08:47.826Z appoptics:patching patched http 
2022-04-28T07:08:47.953Z appoptics:patching patched zlib 
2022-04-28T07:08:47.958Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:47.958Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:47.959Z appoptics:patching patched fs 
2022-04-28T07:08:48.108Z appoptics:patching patched dns 
2022-04-28T07:08:48.201Z appoptics:patching patched tedious 12.2.0
2022-04-28T07:08:48.206Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (50ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 3 packages, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:02.822Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:02.822Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:02.822Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:02.822Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:02.924Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:03.168Z appoptics:patching patched crypto 
2022-04-28T07:09:03.190Z appoptics:patching patched https 
2022-04-28T07:09:03.190Z appoptics:patching patched http 
2022-04-28T07:09:03.274Z appoptics:patching patched zlib 
2022-04-28T07:09:03.278Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:03.278Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:03.279Z appoptics:patching patched fs 
2022-04-28T07:09:03.411Z appoptics:patching patched dns 
2022-04-28T07:09:03.565Z appoptics:patching patched tedious 12.3.0
2022-04-28T07:09:03.571Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (54ms)
    ✔ should support parameters with a database name (43ms)
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


removed 17 packages, changed 2 packages, and audited 964 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:19.716Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:19.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:19.717Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:19.717Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:19.791Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:19.969Z appoptics:patching patched crypto 
2022-04-28T07:09:19.992Z appoptics:patching patched https 
2022-04-28T07:09:19.992Z appoptics:patching patched http 
2022-04-28T07:09:20.086Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:20.086Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:20.087Z appoptics:patching patched fs 
2022-04-28T07:09:20.127Z appoptics:patching patched zlib 
2022-04-28T07:09:20.227Z appoptics:patching patched dns 
2022-04-28T07:09:20.318Z appoptics:patching patched tedious 13.0.0
2022-04-28T07:09:20.323Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (62ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:35.616Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:35.617Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:35.617Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:35.617Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:35.695Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:35.862Z appoptics:patching patched crypto 
2022-04-28T07:09:35.882Z appoptics:patching patched https 
2022-04-28T07:09:35.882Z appoptics:patching patched http 
2022-04-28T07:09:35.957Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:35.958Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:35.958Z appoptics:patching patched fs 
2022-04-28T07:09:35.989Z appoptics:patching patched zlib 
2022-04-28T07:09:36.089Z appoptics:patching patched dns 
2022-04-28T07:09:36.194Z appoptics:patching patched tedious 13.0.1
2022-04-28T07:09:36.199Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (51ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:51.203Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:51.204Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:51.204Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:51.204Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:51.279Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:51.450Z appoptics:patching patched crypto 
2022-04-28T07:09:51.470Z appoptics:patching patched https 
2022-04-28T07:09:51.470Z appoptics:patching patched http 
2022-04-28T07:09:51.549Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:51.550Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:51.550Z appoptics:patching patched fs 
2022-04-28T07:09:51.585Z appoptics:patching patched zlib 
2022-04-28T07:09:51.686Z appoptics:patching patched dns 
2022-04-28T07:09:51.780Z appoptics:patching patched tedious 13.0.2
2022-04-28T07:09:51.791Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (50ms)
    ✔ should support parameters with a database name (43ms)
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:10:06.538Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:10:06.539Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:10:06.539Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:10:06.539Z appoptics:debug using context provider: ace-context
2022-04-28T07:10:06.650Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:10:06.834Z appoptics:patching patched crypto 
2022-04-28T07:10:06.854Z appoptics:patching patched https 
2022-04-28T07:10:06.855Z appoptics:patching patched http 
2022-04-28T07:10:06.939Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:10:06.939Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:10:06.940Z appoptics:patching patched fs 
2022-04-28T07:10:06.970Z appoptics:patching patched zlib 
2022-04-28T07:10:07.075Z appoptics:patching patched dns 
2022-04-28T07:10:07.173Z appoptics:patching patched tedious 13.0.3
2022-04-28T07:10:07.177Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (54ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 21s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:10:32.774Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:10:32.775Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:10:32.775Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:10:32.775Z appoptics:debug using context provider: ace-context
2022-04-28T07:10:32.851Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:10:33.021Z appoptics:patching patched crypto 
2022-04-28T07:10:33.041Z appoptics:patching patched https 
2022-04-28T07:10:33.041Z appoptics:patching patched http 
2022-04-28T07:10:33.115Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:10:33.115Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:10:33.116Z appoptics:patching patched fs 
2022-04-28T07:10:33.148Z appoptics:patching patched zlib 
2022-04-28T07:10:33.249Z appoptics:patching patched dns 
2022-04-28T07:10:33.361Z appoptics:patching patched tedious 13.0.4
2022-04-28T07:10:33.366Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:10:47.332Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:10:47.333Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:10:47.333Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:10:47.333Z appoptics:debug using context provider: ace-context
2022-04-28T07:10:47.402Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:10:47.563Z appoptics:patching patched crypto 
2022-04-28T07:10:47.582Z appoptics:patching patched https 
2022-04-28T07:10:47.582Z appoptics:patching patched http 
2022-04-28T07:10:47.654Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:10:47.654Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:10:47.654Z appoptics:patching patched fs 
2022-04-28T07:10:47.683Z appoptics:patching patched zlib 
2022-04-28T07:10:47.776Z appoptics:patching patched dns 
2022-04-28T07:10:47.879Z appoptics:patching patched tedious 13.0.5
2022-04-28T07:10:47.884Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (48ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 8s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:11:00.805Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:11:00.806Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:11:00.806Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:11:00.806Z appoptics:debug using context provider: ace-context
2022-04-28T07:11:00.876Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:11:01.031Z appoptics:patching patched crypto 
2022-04-28T07:11:01.048Z appoptics:patching patched https 
2022-04-28T07:11:01.049Z appoptics:patching patched http 
2022-04-28T07:11:01.115Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:11:01.116Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:11:01.116Z appoptics:patching patched fs 
2022-04-28T07:11:01.148Z appoptics:patching patched zlib 
2022-04-28T07:11:01.233Z appoptics:patching patched dns 
2022-04-28T07:11:01.312Z appoptics:patching patched tedious 13.1.0
2022-04-28T07:11:01.316Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (43ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:11:14.596Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:11:14.597Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:11:14.597Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:11:14.597Z appoptics:debug using context provider: ace-context
2022-04-28T07:11:14.665Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:11:14.839Z appoptics:patching patched crypto 
2022-04-28T07:11:14.865Z appoptics:patching patched https 
2022-04-28T07:11:14.866Z appoptics:patching patched http 
2022-04-28T07:11:14.942Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:11:14.943Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:11:14.943Z appoptics:patching patched fs 
2022-04-28T07:11:14.968Z appoptics:patching patched zlib 
2022-04-28T07:11:15.052Z appoptics:patching patched dns 
2022-04-28T07:11:15.145Z appoptics:patching patched tedious 13.2.0
2022-04-28T07:11:15.149Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (42ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name (63ms)
    ✔ should tag queries when feature is enabled (41ms)
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 8s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:11:28.126Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:11:28.126Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:11:28.126Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:11:28.126Z appoptics:debug using context provider: ace-context
2022-04-28T07:11:28.212Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:11:28.398Z appoptics:patching patched crypto 
2022-04-28T07:11:28.418Z appoptics:patching patched https 
2022-04-28T07:11:28.418Z appoptics:patching patched http 
2022-04-28T07:11:28.501Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:11:28.502Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:11:28.502Z appoptics:patching patched fs 
2022-04-28T07:11:28.529Z appoptics:patching patched zlib 
2022-04-28T07:11:28.636Z appoptics:patching patched dns 
2022-04-28T07:11:28.729Z appoptics:patching patched tedious 14.0.0
2022-04-28T07:11:28.742Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (43ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:11:42.802Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:11:42.803Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:11:42.803Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:11:42.803Z appoptics:debug using context provider: ace-context
2022-04-28T07:11:42.876Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:11:43.044Z appoptics:patching patched crypto 
2022-04-28T07:11:43.067Z appoptics:patching patched https 
2022-04-28T07:11:43.068Z appoptics:patching patched http 
2022-04-28T07:11:43.136Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:11:43.136Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:11:43.136Z appoptics:patching patched fs 
2022-04-28T07:11:43.168Z appoptics:patching patched zlib 
2022-04-28T07:11:43.248Z appoptics:patching patched dns 
2022-04-28T07:11:43.331Z appoptics:patching patched tedious 14.1.0
2022-04-28T07:11:43.335Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (51ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:11:56.774Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:11:56.774Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:11:56.774Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:11:56.775Z appoptics:debug using context provider: ace-context
2022-04-28T07:11:56.850Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:11:57.081Z appoptics:patching patched crypto 
2022-04-28T07:11:57.100Z appoptics:patching patched https 
2022-04-28T07:11:57.101Z appoptics:patching patched http 
2022-04-28T07:11:57.164Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:11:57.165Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:11:57.165Z appoptics:patching patched fs 
2022-04-28T07:11:57.195Z appoptics:patching patched zlib 
2022-04-28T07:11:57.281Z appoptics:patching patched dns 
2022-04-28T07:11:57.356Z appoptics:patching patched tedious 14.2.0
2022-04-28T07:11:57.360Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (43ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 5 packages, removed 46 packages, changed 5 packages, and audited 923 packages in 10s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:12:12.136Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:12:12.137Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:12:12.137Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:12:12.137Z appoptics:debug using context provider: ace-context
2022-04-28T07:12:12.209Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:12:12.365Z appoptics:patching patched crypto 
2022-04-28T07:12:12.382Z appoptics:patching patched https 
2022-04-28T07:12:12.383Z appoptics:patching patched http 
2022-04-28T07:12:12.431Z appoptics:patching patched zlib 
2022-04-28T07:12:12.498Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:12:12.499Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:12:12.499Z appoptics:patching patched fs 
2022-04-28T07:12:12.545Z appoptics:patching patched dns 
2022-04-28T07:12:12.638Z appoptics:patching patched tedious 14.3.0
2022-04-28T07:12:12.643Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (54ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 923 packages in 9s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:12:25.724Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:12:25.725Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:12:25.725Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:12:25.725Z appoptics:debug using context provider: ace-context
2022-04-28T07:12:25.805Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:12:25.960Z appoptics:patching patched crypto 
2022-04-28T07:12:25.981Z appoptics:patching patched https 
2022-04-28T07:12:25.981Z appoptics:patching patched http 
2022-04-28T07:12:26.037Z appoptics:patching patched zlib 
2022-04-28T07:12:26.107Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:12:26.108Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:12:26.108Z appoptics:patching patched fs 
2022-04-28T07:12:26.159Z appoptics:patching patched dns 
2022-04-28T07:12:26.243Z appoptics:patching patched tedious 14.4.0
2022-04-28T07:12:26.248Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (45ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 4 packages, changed 1 package, and audited 927 packages in 8s

92 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:12:39.075Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:12:39.076Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:12:39.076Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:12:39.076Z appoptics:debug using context provider: ace-context
2022-04-28T07:12:39.159Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:12:39.305Z appoptics:patching patched crypto 
2022-04-28T07:12:39.323Z appoptics:patching patched https 
2022-04-28T07:12:39.324Z appoptics:patching patched http 
2022-04-28T07:12:39.375Z appoptics:patching patched zlib 
2022-04-28T07:12:39.444Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:12:39.445Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:12:39.445Z appoptics:patching patched fs 
2022-04-28T07:12:39.489Z appoptics:patching patched dns 
2022-04-28T07:12:39.615Z appoptics:patching patched tedious 14.5.0
2022-04-28T07:12:39.620Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (57ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


removed 4 packages, changed 1 package, and audited 923 packages in 8s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
