npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.1.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.1.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.1.5
added 2 packages from 2 contributors, removed 45 packages, updated 2 packages and audited 892 packages in 4.91s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:26:53.721Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:26:53.723Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:26:53.723Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:26:53.723Z appoptics:debug using context provider: ace-context
2022-04-20T15:26:53.796Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:26:53.973Z appoptics:patching patched crypto 
2022-04-20T15:26:54.018Z appoptics:patching patched https 
2022-04-20T15:26:54.019Z appoptics:patching patched http 
2022-04-20T15:26:54.124Z appoptics:patching patched tedious 0.1.5
2022-04-20T15:26:54.129Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.1.5
       should support basic queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.1.5
       should support parameters with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.1.5
       should sanitize query with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.1.5
       should truncate long queries with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.1.5
       should do nothing when disabled with a database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.1.5
       should support basic queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.1.5
       should support parameters with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.1.5
       should sanitize query with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.1.5
       should truncate long queries with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.1.5
       should do nothing when disabled with no database name:
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.1
updated 2 packages and audited 892 packages in 3.811s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:02.144Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:02.145Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:02.145Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:02.146Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:02.211Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:02.378Z appoptics:patching patched crypto 
2022-04-20T15:27:02.403Z appoptics:patching patched https 
2022-04-20T15:27:02.403Z appoptics:patching patched http 
2022-04-20T15:27:02.491Z appoptics:patching patched tedious 0.2.1
2022-04-20T15:27:02.500Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.2
updated 1 package and audited 892 packages in 3.888s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (1 moderate, 6 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:10.608Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:10.610Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:10.610Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:10.611Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:10.676Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:10.824Z appoptics:patching patched crypto 
2022-04-20T15:27:10.854Z appoptics:patching patched https 
2022-04-20T15:27:10.854Z appoptics:patching patched http 
2022-04-20T15:27:10.944Z appoptics:patching patched tedious 0.2.2
2022-04-20T15:27:10.949Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.3
removed 1 package, updated 1 package and audited 891 packages in 4.836s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:19.844Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:19.845Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:19.846Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:19.846Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:19.911Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:20.063Z appoptics:patching patched crypto 
2022-04-20T15:27:20.088Z appoptics:patching patched https 
2022-04-20T15:27:20.088Z appoptics:patching patched http 
2022-04-20T15:27:20.178Z appoptics:patching patched tedious 0.2.3
2022-04-20T15:27:20.183Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.2.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.2.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.2.4
updated 2 packages and audited 891 packages in 3.738s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:28.371Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:28.374Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:28.374Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:28.375Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:28.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:28.851Z appoptics:patching patched crypto 
2022-04-20T15:27:28.903Z appoptics:patching patched https 
2022-04-20T15:27:28.903Z appoptics:patching patched http 
2022-04-20T15:27:28.983Z appoptics:patching patched tedious 0.2.4
2022-04-20T15:27:28.989Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@0.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@0.3.0
updated 1 package and audited 891 packages in 3.588s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:36.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:36.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:36.655Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:36.655Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:36.721Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:36.858Z appoptics:patching patched crypto 
2022-04-20T15:27:36.881Z appoptics:patching patched https 
2022-04-20T15:27:36.881Z appoptics:patching patched http 
2022-04-20T15:27:36.919Z appoptics:patching patched tedious 0.3.0
2022-04-20T15:27:36.923Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 0.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 0.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 0.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 0.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 0.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 0.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 0.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 0.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 0.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 0.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.0.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.0.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.0.0
updated 1 package and audited 891 packages in 3.261s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:44.404Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:44.405Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:44.405Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:44.406Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:44.465Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:44.610Z appoptics:patching patched crypto 
2022-04-20T15:27:44.633Z appoptics:patching patched https 
2022-04-20T15:27:44.633Z appoptics:patching patched http 
2022-04-20T15:27:44.665Z appoptics:patching patched tedious 1.0.0
2022-04-20T15:27:44.669Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.1.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.1.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.1.0
added 1 package from 1 contributor, updated 1 package and audited 892 packages in 3.873s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:52.686Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:52.688Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:52.688Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:52.688Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:52.777Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:52.949Z appoptics:patching patched crypto 
2022-04-20T15:27:52.971Z appoptics:patching patched https 
2022-04-20T15:27:52.972Z appoptics:patching patched http 
2022-04-20T15:27:53.006Z appoptics:patching patched tedious 1.1.0
2022-04-20T15:27:53.009Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.0
updated 1 package and audited 892 packages in 3.564s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:00.781Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:00.783Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:00.783Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:00.783Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:00.908Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:01.091Z appoptics:patching patched crypto 
2022-04-20T15:28:01.115Z appoptics:patching patched https 
2022-04-20T15:28:01.115Z appoptics:patching patched http 
2022-04-20T15:28:01.154Z appoptics:patching patched tedious 1.2.0
2022-04-20T15:28:01.158Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.1
updated 1 package and audited 892 packages in 3.415s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:08.627Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:08.628Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:08.628Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:08.629Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:08.689Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:08.829Z appoptics:patching patched crypto 
2022-04-20T15:28:08.854Z appoptics:patching patched https 
2022-04-20T15:28:08.854Z appoptics:patching patched http 
2022-04-20T15:28:08.895Z appoptics:patching patched tedious 1.2.1
2022-04-20T15:28:08.899Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.2.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.2.2
updated 1 package and audited 892 packages in 4.642s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:17.547Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:17.548Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:17.548Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:17.549Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:17.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:17.771Z appoptics:patching patched crypto 
2022-04-20T15:28:17.793Z appoptics:patching patched https 
2022-04-20T15:28:17.793Z appoptics:patching patched http 
2022-04-20T15:28:17.835Z appoptics:patching patched tedious 1.2.2
2022-04-20T15:28:17.850Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.0
updated 1 package and audited 892 packages in 3.497s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:25.387Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:25.388Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:25.388Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:25.389Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:25.472Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:25.630Z appoptics:patching patched crypto 
2022-04-20T15:28:25.655Z appoptics:patching patched https 
2022-04-20T15:28:25.655Z appoptics:patching patched http 
2022-04-20T15:28:25.694Z appoptics:patching patched tedious 1.3.0
2022-04-20T15:28:25.698Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.1
updated 1 package and audited 892 packages in 3.761s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:33.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:33.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:33.586Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:33.586Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:33.649Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:33.806Z appoptics:patching patched crypto 
2022-04-20T15:28:33.830Z appoptics:patching patched https 
2022-04-20T15:28:33.830Z appoptics:patching patched http 
2022-04-20T15:28:33.868Z appoptics:patching patched tedious 1.3.1
2022-04-20T15:28:33.873Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.2
updated 1 package and audited 892 packages in 4.132s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:42.048Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:42.049Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:42.050Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:42.050Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:42.116Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:42.266Z appoptics:patching patched crypto 
2022-04-20T15:28:42.290Z appoptics:patching patched https 
2022-04-20T15:28:42.290Z appoptics:patching patched http 
2022-04-20T15:28:42.329Z appoptics:patching patched tedious 1.3.2
2022-04-20T15:28:42.333Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.3
updated 1 package and audited 892 packages in 3.529s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:49.973Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:49.975Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:49.975Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:49.975Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:50.052Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:50.247Z appoptics:patching patched crypto 
2022-04-20T15:28:50.272Z appoptics:patching patched https 
2022-04-20T15:28:50.272Z appoptics:patching patched http 
2022-04-20T15:28:50.329Z appoptics:patching patched tedious 1.3.3
2022-04-20T15:28:50.335Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.4
updated 1 package and audited 892 packages in 3.825s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:58.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:58.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:58.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:58.219Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:58.282Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:58.442Z appoptics:patching patched crypto 
2022-04-20T15:28:58.476Z appoptics:patching patched https 
2022-04-20T15:28:58.476Z appoptics:patching patched http 
2022-04-20T15:28:58.534Z appoptics:patching patched tedious 1.3.4
2022-04-20T15:28:58.539Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.3.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.3.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.3.5
updated 1 package and audited 892 packages in 3.907s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:06.799Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:06.800Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:06.800Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:06.801Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:06.862Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:07.025Z appoptics:patching patched crypto 
2022-04-20T15:29:07.067Z appoptics:patching patched https 
2022-04-20T15:29:07.067Z appoptics:patching patched http 
2022-04-20T15:29:07.117Z appoptics:patching patched tedious 1.3.5
2022-04-20T15:29:07.122Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.3.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.3.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.3.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.3.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.3.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.3.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.3.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.3.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.3.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.3.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.0
updated 1 package and audited 892 packages in 4.069s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:15.200Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:15.201Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:15.201Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:15.202Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:15.264Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:15.493Z appoptics:patching patched crypto 
2022-04-20T15:29:15.516Z appoptics:patching patched https 
2022-04-20T15:29:15.516Z appoptics:patching patched http 
2022-04-20T15:29:15.554Z appoptics:patching patched tedious 1.4.0
2022-04-20T15:29:15.559Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.1
updated 1 package and audited 892 packages in 3.996s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:23.611Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:23.613Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:23.613Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:23.613Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:23.679Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:23.831Z appoptics:patching patched crypto 
2022-04-20T15:29:23.855Z appoptics:patching patched https 
2022-04-20T15:29:23.856Z appoptics:patching patched http 
2022-04-20T15:29:23.897Z appoptics:patching patched tedious 1.4.1
2022-04-20T15:29:23.901Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.4.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.4.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.2
updated 1 package and audited 892 packages in 3.496s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:31.512Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:31.513Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:31.513Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:31.514Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:31.578Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:31.736Z appoptics:patching patched crypto 
2022-04-20T15:29:31.767Z appoptics:patching patched https 
2022-04-20T15:29:31.767Z appoptics:patching patched http 
2022-04-20T15:29:31.813Z appoptics:patching patched tedious 1.4.2
2022-04-20T15:29:31.818Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.4.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.4.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.4.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.4.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.4.3
updated 1 package and audited 892 packages in 4.561s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:40.428Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:40.430Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:40.430Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:40.430Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:40.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:40.644Z appoptics:patching patched crypto 
2022-04-20T15:29:40.676Z appoptics:patching patched https 
2022-04-20T15:29:40.676Z appoptics:patching patched http 
2022-04-20T15:29:40.715Z appoptics:patching patched tedious 1.4.3
2022-04-20T15:29:40.719Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.4.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.4.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.4.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.4.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.4.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.4.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.4.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.4.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.4.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.4.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.1
updated 1 package and audited 892 packages in 3.877s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:49.204Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:49.205Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:49.205Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:49.206Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:49.313Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:49.501Z appoptics:patching patched crypto 
2022-04-20T15:29:49.524Z appoptics:patching patched https 
2022-04-20T15:29:49.525Z appoptics:patching patched http 
2022-04-20T15:29:49.581Z appoptics:patching patched tedious 1.5.1
2022-04-20T15:29:49.586Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.2: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.2
updated 1 package and audited 892 packages in 3.639s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:29:57.246Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:57.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:57.248Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:57.248Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:57.319Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:57.474Z appoptics:patching patched crypto 
2022-04-20T15:29:57.496Z appoptics:patching patched https 
2022-04-20T15:29:57.496Z appoptics:patching patched http 
2022-04-20T15:29:57.534Z appoptics:patching patched tedious 1.5.2
2022-04-20T15:29:57.538Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.3: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.3
updated 1 package and audited 892 packages in 3.432s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:05.130Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:05.131Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:05.131Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:05.132Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:05.191Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:05.324Z appoptics:patching patched crypto 
2022-04-20T15:30:05.355Z appoptics:patching patched https 
2022-04-20T15:30:05.355Z appoptics:patching patched http 
2022-04-20T15:30:05.394Z appoptics:patching patched tedious 1.5.3
2022-04-20T15:30:05.398Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.4: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.4
updated 1 package and audited 892 packages in 4.155s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:13.744Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:13.745Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:13.745Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:13.746Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:13.810Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:13.958Z appoptics:patching patched crypto 
2022-04-20T15:30:13.987Z appoptics:patching patched https 
2022-04-20T15:30:13.988Z appoptics:patching patched http 
2022-04-20T15:30:14.035Z appoptics:patching patched tedious 1.5.4
2022-04-20T15:30:14.039Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.5: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.5
updated 1 package and audited 892 packages in 3.626s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:21.716Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:21.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:21.717Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:21.718Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:21.783Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:21.920Z appoptics:patching patched crypto 
2022-04-20T15:30:21.942Z appoptics:patching patched https 
2022-04-20T15:30:21.942Z appoptics:patching patched http 
2022-04-20T15:30:21.977Z appoptics:patching patched tedious 1.5.5
2022-04-20T15:30:21.981Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.6: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.6
updated 1 package and audited 892 packages in 3.379s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:29.377Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:29.379Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:29.379Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:29.379Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:29.439Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:29.590Z appoptics:patching patched crypto 
2022-04-20T15:30:29.625Z appoptics:patching patched https 
2022-04-20T15:30:29.625Z appoptics:patching patched http 
2022-04-20T15:30:29.675Z appoptics:patching patched tedious 1.5.6
2022-04-20T15:30:29.680Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.6
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.6
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.7: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.7
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.7
updated 1 package and audited 892 packages in 4.068s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:37.836Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:37.837Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:37.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:37.838Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:37.915Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:38.097Z appoptics:patching patched crypto 
2022-04-20T15:30:38.119Z appoptics:patching patched https 
2022-04-20T15:30:38.119Z appoptics:patching patched http 
2022-04-20T15:30:38.159Z appoptics:patching patched tedious 1.5.7
2022-04-20T15:30:38.164Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.7
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.7
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.5.8: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.5.8
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.5.8
updated 1 package and audited 892 packages in 3.962s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:46.191Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:46.192Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:46.192Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:46.193Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:46.274Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:46.462Z appoptics:patching patched crypto 
2022-04-20T15:30:46.504Z appoptics:patching patched https 
2022-04-20T15:30:46.504Z appoptics:patching patched http 
2022-04-20T15:30:46.552Z appoptics:patching patched tedious 1.5.8
2022-04-20T15:30:46.556Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.5.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.5.8
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.5.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.5.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.5.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.5.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.5.8
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.5.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.5.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.5.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.6.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.6.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.6.0
updated 1 package and audited 892 packages in 3.536s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:30:54.156Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:54.158Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:54.158Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:54.158Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:54.219Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:54.357Z appoptics:patching patched crypto 
2022-04-20T15:30:54.382Z appoptics:patching patched https 
2022-04-20T15:30:54.382Z appoptics:patching patched http 
2022-04-20T15:30:54.422Z appoptics:patching patched tedious 1.6.0
2022-04-20T15:30:54.427Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.7.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.7.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.7.0
updated 1 package and audited 892 packages in 4.323s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:02.770Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:02.771Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:02.771Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:02.772Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:02.835Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:02.977Z appoptics:patching patched crypto 
2022-04-20T15:31:02.999Z appoptics:patching patched https 
2022-04-20T15:31:03.000Z appoptics:patching patched http 
2022-04-20T15:31:03.036Z appoptics:patching patched tedious 1.7.0
2022-04-20T15:31:03.040Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.0
updated 1 package and audited 892 packages in 3.911s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:11.103Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:11.105Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:11.105Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:11.105Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:11.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:11.413Z appoptics:patching patched crypto 
2022-04-20T15:31:11.461Z appoptics:patching patched https 
2022-04-20T15:31:11.462Z appoptics:patching patched http 
2022-04-20T15:31:11.542Z appoptics:patching patched tedious 1.8.0
2022-04-20T15:31:11.547Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.8.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.8.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.8.1: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.8.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.8.1
updated 1 package and audited 892 packages in 3.822s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:19.466Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:19.468Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:19.468Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:19.469Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:19.535Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:19.686Z appoptics:patching patched crypto 
2022-04-20T15:31:19.711Z appoptics:patching patched https 
2022-04-20T15:31:19.711Z appoptics:patching patched http 
2022-04-20T15:31:19.750Z appoptics:patching patched tedious 1.8.1
2022-04-20T15:31:19.754Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.8.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.8.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.8.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.8.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.8.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.8.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.8.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.8.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.8.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.8.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.
npm WARN notsup Unsupported engine for tedious@1.9.0: wanted: {"node":"0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@1.9.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.9.0
updated 1 package and audited 892 packages in 3.554s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:27.476Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:27.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:27.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:27.478Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:27.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:27.694Z appoptics:patching patched crypto 
2022-04-20T15:31:27.721Z appoptics:patching patched https 
2022-04-20T15:31:27.721Z appoptics:patching patched http 
2022-04-20T15:31:27.767Z appoptics:patching patched tedious 1.9.0
2022-04-20T15:31:27.772Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.9.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.9.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.9.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.9.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.9.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.9.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.9.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.9.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.9.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.9.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.9.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.10.0
updated 4 packages and audited 892 packages in 4.529s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:36.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:36.411Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:36.411Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:36.411Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:36.477Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:36.627Z appoptics:patching patched crypto 
2022-04-20T15:31:36.651Z appoptics:patching patched https 
2022-04-20T15:31:36.651Z appoptics:patching patched http 
2022-04-20T15:31:36.692Z appoptics:patching patched tedious 1.10.0
2022-04-20T15:31:36.697Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.10.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.10.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.10.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.10.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.10.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.10.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.10.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.10.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.10.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.10.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.10.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.0
updated 1 package and audited 892 packages in 3.337s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:44.128Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:44.129Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:44.129Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:44.130Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:44.205Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:44.372Z appoptics:patching patched crypto 
2022-04-20T15:31:44.396Z appoptics:patching patched https 
2022-04-20T15:31:44.397Z appoptics:patching patched http 
2022-04-20T15:31:44.438Z appoptics:patching patched tedious 1.11.0
2022-04-20T15:31:44.443Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.11.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.11.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.11.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.11.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.11.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.11.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.11.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.11.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.11.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.1
updated 1 package and audited 892 packages in 3.556s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:31:52.136Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:52.137Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:52.137Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:52.138Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:52.204Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:52.355Z appoptics:patching patched crypto 
2022-04-20T15:31:52.380Z appoptics:patching patched https 
2022-04-20T15:31:52.380Z appoptics:patching patched http 
2022-04-20T15:31:52.421Z appoptics:patching patched tedious 1.11.1
2022-04-20T15:31:52.426Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.11.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.11.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.11.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.11.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.11.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.11.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.11.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.11.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.11.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.2
updated 1 package and audited 892 packages in 4.963s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:01.545Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:01.547Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:01.547Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:01.547Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:01.613Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:01.764Z appoptics:patching patched crypto 
2022-04-20T15:32:01.788Z appoptics:patching patched https 
2022-04-20T15:32:01.788Z appoptics:patching patched http 
2022-04-20T15:32:01.831Z appoptics:patching patched tedious 1.11.2
2022-04-20T15:32:01.835Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.11.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.11.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.11.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.11.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.11.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.11.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.11.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.11.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.11.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.4
updated 1 package and audited 892 packages in 4.586s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:10.667Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:10.669Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:10.669Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:10.669Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:10.804Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:11.005Z appoptics:patching patched crypto 
2022-04-20T15:32:11.029Z appoptics:patching patched https 
2022-04-20T15:32:11.029Z appoptics:patching patched http 
2022-04-20T15:32:11.070Z appoptics:patching patched tedious 1.11.4
2022-04-20T15:32:11.075Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.11.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.11.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.11.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.11.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.11.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.11.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.11.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.11.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.11.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.11.5
updated 1 package and audited 892 packages in 3.67s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:18.824Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:18.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:18.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:18.827Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:18.908Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:19.157Z appoptics:patching patched crypto 
2022-04-20T15:32:19.204Z appoptics:patching patched https 
2022-04-20T15:32:19.205Z appoptics:patching patched http 
2022-04-20T15:32:19.295Z appoptics:patching patched tedious 1.11.5
2022-04-20T15:32:19.300Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.11.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  2) probes.tedious 1.11.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  3) probes.tedious 1.11.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  4) probes.tedious 1.11.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  5) probes.tedious 1.11.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  6) probes.tedious 1.11.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  7) probes.tedious 1.11.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  8) probes.tedious 1.11.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  9) probes.tedious 1.11.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)

  10) probes.tedious 1.11.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at Socket.Readable.push (_stream_readable.js:224:10)
      at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.0
added 8 packages from 3 contributors, removed 1 package, updated 1 package and audited 899 packages in 3.884s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:27.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:27.284Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:27.284Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:27.284Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:27.350Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:27.500Z appoptics:patching patched crypto 
2022-04-20T15:32:27.524Z appoptics:patching patched https 
2022-04-20T15:32:27.524Z appoptics:patching patched http 
2022-04-20T15:32:27.653Z appoptics:patching patched tedious 1.12.0
2022-04-20T15:32:27.665Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  2) probes.tedious 1.12.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  3) probes.tedious 1.12.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  4) probes.tedious 1.12.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  5) probes.tedious 1.12.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  6) probes.tedious 1.12.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  7) probes.tedious 1.12.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  8) probes.tedious 1.12.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  9) probes.tedious 1.12.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)

  10) probes.tedious 1.12.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.1
updated 1 package and audited 899 packages in 4.194s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:35.991Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:35.993Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:35.993Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:35.993Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:36.058Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:36.202Z appoptics:patching patched crypto 
2022-04-20T15:32:36.228Z appoptics:patching patched https 
2022-04-20T15:32:36.228Z appoptics:patching patched http 
2022-04-20T15:32:36.302Z appoptics:patching patched tedious 1.12.1
2022-04-20T15:32:36.307Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.2
updated 1 package and audited 899 packages in 3.824s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:44.418Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:44.419Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:44.419Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:44.420Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:44.549Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:44.749Z appoptics:patching patched crypto 
2022-04-20T15:32:44.774Z appoptics:patching patched https 
2022-04-20T15:32:44.774Z appoptics:patching patched http 
2022-04-20T15:32:44.871Z appoptics:patching patched tedious 1.12.2
2022-04-20T15:32:44.876Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.12.3
updated 1 package and audited 899 packages in 3.755s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:32:52.729Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:52.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:52.730Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:52.731Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:52.798Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:52.945Z appoptics:patching patched crypto 
2022-04-20T15:32:52.969Z appoptics:patching patched https 
2022-04-20T15:32:52.969Z appoptics:patching patched http 
2022-04-20T15:32:53.049Z appoptics:patching patched tedious 1.12.3
2022-04-20T15:32:53.054Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.12.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  2) probes.tedious 1.12.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  3) probes.tedious 1.12.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  4) probes.tedious 1.12.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  5) probes.tedious 1.12.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  6) probes.tedious 1.12.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  7) probes.tedious 1.12.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  8) probes.tedious 1.12.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  9) probes.tedious 1.12.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)

  10) probes.tedious 1.12.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at Generator.prototype.(anonymous function) [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at Parser.StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.0
updated 1 package and audited 899 packages in 3.688s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:01.076Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:01.077Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:01.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:01.078Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:01.143Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:01.290Z appoptics:patching patched crypto 
2022-04-20T15:33:01.314Z appoptics:patching patched https 
2022-04-20T15:33:01.314Z appoptics:patching patched http 
2022-04-20T15:33:01.374Z appoptics:patching patched tedious 1.13.0
2022-04-20T15:33:01.378Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.1
updated 1 package and audited 899 packages in 4.169s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:09.643Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:09.644Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:09.644Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:09.645Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:09.712Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:09.852Z appoptics:patching patched crypto 
2022-04-20T15:33:09.874Z appoptics:patching patched https 
2022-04-20T15:33:09.874Z appoptics:patching patched http 
2022-04-20T15:33:09.928Z appoptics:patching patched tedious 1.13.1
2022-04-20T15:33:09.933Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.13.2
updated 1 package and audited 899 packages in 3.117s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:17.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:17.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:17.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:17.044Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:17.103Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:17.241Z appoptics:patching patched crypto 
2022-04-20T15:33:17.263Z appoptics:patching patched https 
2022-04-20T15:33:17.263Z appoptics:patching patched http 
2022-04-20T15:33:17.316Z appoptics:patching patched tedious 1.13.2
2022-04-20T15:33:17.320Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.13.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  2) probes.tedious 1.13.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  3) probes.tedious 1.13.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  4) probes.tedious 1.13.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  5) probes.tedious 1.13.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  6) probes.tedious 1.13.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  7) probes.tedious 1.13.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  8) probes.tedious 1.13.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  9) probes.tedious 1.13.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)

  10) probes.tedious 1.13.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.14.0
added 1 package, updated 1 package and audited 900 packages in 3.373s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:24.715Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:24.717Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:24.718Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:24.718Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:24.778Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:24.925Z appoptics:patching patched crypto 
2022-04-20T15:33:24.947Z appoptics:patching patched https 
2022-04-20T15:33:24.947Z appoptics:patching patched http 
2022-04-20T15:33:24.997Z appoptics:patching patched tedious 1.14.0
2022-04-20T15:33:25.001Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.14.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.14.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  2) probes.tedious 1.14.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  3) probes.tedious 1.14.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  4) probes.tedious 1.14.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  5) probes.tedious 1.14.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  6) probes.tedious 1.14.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  7) probes.tedious 1.14.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  8) probes.tedious 1.14.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  9) probes.tedious 1.14.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)

  10) probes.tedious 1.14.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> core-js@2.6.12 postinstall /__w/appoptics-apm-node/appoptics-apm-node/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@1.15.0
added 2 packages from 2 contributors, updated 3 packages, moved 1 package and audited 902 packages in 4.425s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:33.482Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:33.483Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:33.483Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:33.484Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:33.543Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:33.682Z appoptics:patching patched crypto 
2022-04-20T15:33:33.704Z appoptics:patching patched https 
2022-04-20T15:33:33.704Z appoptics:patching patched http 
2022-04-20T15:33:33.788Z appoptics:patching patched tedious 1.15.0
2022-04-20T15:33:33.792Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.15.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 1.15.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 1.15.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 1.15.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 1.15.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 1.15.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 1.15.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 1.15.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 1.15.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 1.15.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 1.15.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.0
removed 2 packages, updated 1 package and audited 900 packages in 3.223s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:41.034Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:41.035Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:41.035Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:41.035Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:41.096Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:41.233Z appoptics:patching patched crypto 
2022-04-20T15:33:41.265Z appoptics:patching patched https 
2022-04-20T15:33:41.266Z appoptics:patching patched http 
2022-04-20T15:33:41.355Z appoptics:patching patched tedious 2.0.0
2022-04-20T15:33:41.359Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.0.1
updated 1 package and audited 900 packages in 3.342s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:48.896Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:48.897Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:48.898Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:48.898Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:48.957Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:49.106Z appoptics:patching patched crypto 
2022-04-20T15:33:49.128Z appoptics:patching patched https 
2022-04-20T15:33:49.128Z appoptics:patching patched http 
2022-04-20T15:33:49.198Z appoptics:patching patched tedious 2.0.1
2022-04-20T15:33:49.202Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  2) probes.tedious 2.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  3) probes.tedious 2.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  4) probes.tedious 2.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  5) probes.tedious 2.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  6) probes.tedious 2.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  7) probes.tedious 2.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  8) probes.tedious 2.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  9) probes.tedious 2.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)

  10) probes.tedious 2.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

> sspi-client@0.1.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client
> node-gyp rebuild

make: Entering directory '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client/build'
  SOLINK_MODULE(target) Release/obj.target/sspi-client.node
  COPY Release/sspi-client.node
make: Leaving directory '/__w/appoptics-apm-node/appoptics-apm-node/node_modules/sspi-client/build'
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.0
added 2 packages from 1 contributor, updated 1 package and audited 902 packages in 4.868s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:33:58.087Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:58.088Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:58.088Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:58.089Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:58.148Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:58.286Z appoptics:patching patched crypto 
2022-04-20T15:33:58.308Z appoptics:patching patched https 
2022-04-20T15:33:58.308Z appoptics:patching patched http 
2022-04-20T15:33:58.401Z appoptics:patching patched tedious 2.1.0
2022-04-20T15:33:58.405Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.1
removed 2 packages, updated 1 package and audited 900 packages in 3.237s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:05.706Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:05.707Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:05.707Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:05.707Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:05.788Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:06.074Z appoptics:patching patched crypto 
2022-04-20T15:34:06.131Z appoptics:patching patched https 
2022-04-20T15:34:06.131Z appoptics:patching patched http 
2022-04-20T15:34:06.274Z appoptics:patching patched tedious 2.1.1
2022-04-20T15:34:06.278Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.2
updated 1 package and audited 900 packages in 3.587s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:13.921Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:13.922Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:13.922Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:13.923Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:13.987Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:14.132Z appoptics:patching patched crypto 
2022-04-20T15:34:14.163Z appoptics:patching patched https 
2022-04-20T15:34:14.163Z appoptics:patching patched http 
2022-04-20T15:34:14.241Z appoptics:patching patched tedious 2.1.2
2022-04-20T15:34:14.246Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.3
updated 1 package and audited 900 packages in 3.769s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:22.238Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:22.239Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:22.239Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:22.240Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:22.299Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:22.448Z appoptics:patching patched crypto 
2022-04-20T15:34:22.472Z appoptics:patching patched https 
2022-04-20T15:34:22.473Z appoptics:patching patched http 
2022-04-20T15:34:22.553Z appoptics:patching patched tedious 2.1.3
2022-04-20T15:34:22.558Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.4
updated 1 package and audited 900 packages in 5.24s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:31.883Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:31.884Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:31.884Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:31.885Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:31.949Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:32.086Z appoptics:patching patched crypto 
2022-04-20T15:34:32.119Z appoptics:patching patched https 
2022-04-20T15:34:32.119Z appoptics:patching patched http 
2022-04-20T15:34:32.204Z appoptics:patching patched tedious 2.1.4
2022-04-20T15:34:32.208Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.1.5
updated 1 package and audited 900 packages in 3.912s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:40.125Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:40.127Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:40.127Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:40.127Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:40.187Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:40.317Z appoptics:patching patched crypto 
2022-04-20T15:34:40.341Z appoptics:patching patched https 
2022-04-20T15:34:40.341Z appoptics:patching patched http 
2022-04-20T15:34:40.424Z appoptics:patching patched tedious 2.1.5
2022-04-20T15:34:40.428Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.1.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.1.5
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.1.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.1.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.1.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.1.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.1.5
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.1.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.1.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.1.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.0
updated 1 package and audited 900 packages in 3.726s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:48.182Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:48.183Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:48.183Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:48.184Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:48.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:48.399Z appoptics:patching patched crypto 
2022-04-20T15:34:48.423Z appoptics:patching patched https 
2022-04-20T15:34:48.423Z appoptics:patching patched http 
2022-04-20T15:34:48.501Z appoptics:patching patched tedious 2.2.0
2022-04-20T15:34:48.506Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.1
updated 1 package and audited 900 packages in 4.332s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:34:56.916Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:56.918Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:56.918Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:56.918Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:56.978Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:57.112Z appoptics:patching patched crypto 
2022-04-20T15:34:57.141Z appoptics:patching patched https 
2022-04-20T15:34:57.141Z appoptics:patching patched http 
2022-04-20T15:34:57.210Z appoptics:patching patched tedious 2.2.1
2022-04-20T15:34:57.214Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.2
updated 1 package and audited 900 packages in 3.945s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:05.299Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:05.301Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:05.301Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:05.301Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:05.375Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:05.575Z appoptics:patching patched crypto 
2022-04-20T15:35:05.602Z appoptics:patching patched https 
2022-04-20T15:35:05.602Z appoptics:patching patched http 
2022-04-20T15:35:05.704Z appoptics:patching patched tedious 2.2.2
2022-04-20T15:35:05.710Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.3
updated 1 package and audited 900 packages in 3.897s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:13.690Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:13.691Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:13.692Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:13.692Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:13.774Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:13.926Z appoptics:patching patched crypto 
2022-04-20T15:35:13.949Z appoptics:patching patched https 
2022-04-20T15:35:13.949Z appoptics:patching patched http 
2022-04-20T15:35:14.019Z appoptics:patching patched tedious 2.2.3
2022-04-20T15:35:14.023Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.2.4
updated 1 package and audited 900 packages in 3.391s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:21.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:21.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:21.586Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:21.586Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:21.694Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:21.854Z appoptics:patching patched crypto 
2022-04-20T15:35:21.876Z appoptics:patching patched https 
2022-04-20T15:35:21.876Z appoptics:patching patched http 
2022-04-20T15:35:21.952Z appoptics:patching patched tedious 2.2.4
2022-04-20T15:35:21.956Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.2.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.2.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.2.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.2.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.2.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.2.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.2.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.2.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.2.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.2.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.0
added 1 package from 1 contributor, updated 1 package and audited 901 packages in 4.176s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:30.253Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:30.255Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:30.255Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:30.255Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:30.316Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:30.469Z appoptics:patching patched crypto 
2022-04-20T15:35:30.498Z appoptics:patching patched https 
2022-04-20T15:35:30.499Z appoptics:patching patched http 
2022-04-20T15:35:30.589Z appoptics:patching patched tedious 2.3.0
2022-04-20T15:35:30.593Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.3.1
updated 1 package and audited 901 packages in 3.347s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:38.084Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:38.085Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:38.085Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:38.086Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:38.151Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:38.294Z appoptics:patching patched crypto 
2022-04-20T15:35:38.320Z appoptics:patching patched https 
2022-04-20T15:35:38.320Z appoptics:patching patched http 
2022-04-20T15:35:38.411Z appoptics:patching patched tedious 2.3.1
2022-04-20T15:35:38.415Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.4.0
added 1 package from 1 contributor, removed 1 package, updated 1 package and audited 901 packages in 4.141s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:46.676Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:46.678Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:46.678Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:46.678Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:46.743Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:46.896Z appoptics:patching patched crypto 
2022-04-20T15:35:46.924Z appoptics:patching patched https 
2022-04-20T15:35:46.924Z appoptics:patching patched http 
2022-04-20T15:35:47.035Z appoptics:patching patched tedious 2.4.0
2022-04-20T15:35:47.039Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.4.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.4.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.0
added 1 package from 1 contributor, updated 1 package and audited 902 packages in 4.464s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:35:55.668Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:55.669Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:55.669Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:55.670Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:55.735Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:55.881Z appoptics:patching patched crypto 
2022-04-20T15:35:55.915Z appoptics:patching patched https 
2022-04-20T15:35:55.915Z appoptics:patching patched http 
2022-04-20T15:35:56.026Z appoptics:patching patched tedious 2.5.0
2022-04-20T15:35:56.030Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.5.1
updated 1 package and audited 902 packages in 3.528s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:03.677Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:03.678Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:03.678Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:03.679Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:03.771Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:04.015Z appoptics:patching patched crypto 
2022-04-20T15:36:04.052Z appoptics:patching patched https 
2022-04-20T15:36:04.052Z appoptics:patching patched http 
2022-04-20T15:36:04.242Z appoptics:patching patched tedious 2.5.1
2022-04-20T15:36:04.248Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.5.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.5.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.5.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.5.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.5.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.5.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.5.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.5.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.5.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.5.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.0
updated 1 package and audited 902 packages in 3.409s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:11.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:11.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:11.646Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:11.647Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:11.705Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:11.843Z appoptics:patching patched crypto 
2022-04-20T15:36:11.864Z appoptics:patching patched https 
2022-04-20T15:36:11.864Z appoptics:patching patched http 
2022-04-20T15:36:11.948Z appoptics:patching patched tedious 2.6.0
2022-04-20T15:36:11.953Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.1
updated 1 package and audited 902 packages in 3.599s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:19.841Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:19.843Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:19.843Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:19.843Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:19.902Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:20.035Z appoptics:patching patched crypto 
2022-04-20T15:36:20.057Z appoptics:patching patched https 
2022-04-20T15:36:20.057Z appoptics:patching patched http 
2022-04-20T15:36:20.138Z appoptics:patching patched tedious 2.6.1
2022-04-20T15:36:20.143Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.2
updated 1 package and audited 902 packages in 3.547s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:27.767Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:27.768Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:27.768Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:27.769Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:27.861Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:28.071Z appoptics:patching patched crypto 
2022-04-20T15:36:28.093Z appoptics:patching patched https 
2022-04-20T15:36:28.093Z appoptics:patching patched http 
2022-04-20T15:36:28.177Z appoptics:patching patched tedious 2.6.2
2022-04-20T15:36:28.181Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.2
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.2
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.3
updated 1 package and audited 902 packages in 3.319s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:35.542Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:35.543Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:35.544Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:35.544Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:35.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:35.764Z appoptics:patching patched crypto 
2022-04-20T15:36:35.789Z appoptics:patching patched https 
2022-04-20T15:36:35.789Z appoptics:patching patched http 
2022-04-20T15:36:35.879Z appoptics:patching patched tedious 2.6.3
2022-04-20T15:36:35.885Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.3
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.3
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.6.4
added 1 package from 1 contributor, updated 1 package and audited 903 packages in 3.561s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:43.604Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:43.606Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:43.606Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:43.606Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:43.670Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:43.821Z appoptics:patching patched crypto 
2022-04-20T15:36:43.849Z appoptics:patching patched https 
2022-04-20T15:36:43.849Z appoptics:patching patched http 
2022-04-20T15:36:43.927Z appoptics:patching patched tedious 2.6.4
2022-04-20T15:36:43.932Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.6.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.6.4
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.6.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.6.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.6.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.6.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.6.4
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.6.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.6.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.6.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.0
updated 1 package and audited 903 packages in 4.354s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:36:52.330Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:52.331Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:52.331Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:52.331Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:52.391Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:52.526Z appoptics:patching patched crypto 
2022-04-20T15:36:52.564Z appoptics:patching patched https 
2022-04-20T15:36:52.564Z appoptics:patching patched http 
2022-04-20T15:36:52.650Z appoptics:patching patched tedious 2.7.0
2022-04-20T15:36:52.654Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 2.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  8) probes.tedious 2.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  9) probes.tedious 2.7.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  10) probes.tedious 2.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@2.7.1
updated 1 package and audited 903 packages in 3.424s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:00.159Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:00.160Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:00.160Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:00.161Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:00.229Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:00.365Z appoptics:patching patched crypto 
2022-04-20T15:37:00.392Z appoptics:patching patched https 
2022-04-20T15:37:00.393Z appoptics:patching patched http 
2022-04-20T15:37:00.472Z appoptics:patching patched tedious 2.7.1
2022-04-20T15:37:00.476Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) "before each" hook for "should support parameters with no database name"


  2 passing (2s)
  7 failing

  1) probes.tedious 2.7.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  2) probes.tedious 2.7.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  3) probes.tedious 2.7.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  4) probes.tedious 2.7.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  5) probes.tedious 2.7.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  6) probes.tedious 2.7.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)

  7) probes.tedious 2.7.1
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1028:28)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1047:14)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:884:18)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.0
updated 1 package and audited 903 packages in 3.995s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:07.586Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:07.587Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:07.587Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:07.588Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:07.654Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:07.790Z appoptics:patching patched crypto 
2022-04-20T15:37:07.818Z appoptics:patching patched https 
2022-04-20T15:37:07.818Z appoptics:patching patched http 
2022-04-20T15:37:07.881Z appoptics:patching patched tedious 3.0.0
2022-04-20T15:37:07.885Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  2) probes.tedious 3.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  3) probes.tedious 3.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  4) probes.tedious 3.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  5) probes.tedious 3.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  6) probes.tedious 3.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  7) probes.tedious 3.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  8) probes.tedious 3.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  9) probes.tedious 3.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)

  10) probes.tedious 3.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:601:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:46:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:152:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:332:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:324:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:331:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:128:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@3.0.1
removed 9 packages, updated 2 packages and audited 894 packages in 3.995s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:15.928Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:15.930Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:15.930Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:15.930Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:15.989Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:16.123Z appoptics:patching patched crypto 
2022-04-20T15:37:16.150Z appoptics:patching patched https 
2022-04-20T15:37:16.151Z appoptics:patching patched http 
2022-04-20T15:37:16.202Z appoptics:patching patched tedious 3.0.1
2022-04-20T15:37:16.206Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 3.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  2) probes.tedious 3.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  3) probes.tedious 3.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  4) probes.tedious 3.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  5) probes.tedious 3.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  6) probes.tedious 3.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  7) probes.tedious 3.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  8) probes.tedious 3.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  9) probes.tedious 3.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)

  10) probes.tedious 3.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.tokenStreamParser.on.token (node_modules/tedious/lib/connection.js:654:29)
      at Parser.parser.on.token (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Parser.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Parser.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at token (node_modules/tedious/lib/token/infoerror-token-parser.js:48:5)
      at call.lineNumber (node_modules/tedious/lib/token/infoerror-token-parser.js:13:19)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:153:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at parser.readBVarChar.procName (node_modules/tedious/lib/token/infoerror-token-parser.js:12:90)
      at readBuffer.data (node_modules/tedious/lib/token/stream-parser.js:322:9)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:314:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at readUInt8.length (node_modules/tedious/lib/token/stream-parser.js:321:12)
      at awaitData (node_modules/tedious/lib/token/stream-parser.js:129:7)
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.0
updated 1 package and audited 894 packages in 3.703s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:23.953Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:23.955Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:23.955Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:23.955Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:24.015Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:24.149Z appoptics:patching patched crypto 
2022-04-20T15:37:24.171Z appoptics:patching patched https 
2022-04-20T15:37:24.171Z appoptics:patching patched http 
2022-04-20T15:37:24.231Z appoptics:patching patched tedious 4.0.0
2022-04-20T15:37:24.235Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should do nothing when disabled with a database name
    6) should support basic queries with no database name
    7) should support parameters with no database name
    8) should sanitize query with no database name
    9) should truncate long queries with no database name
    10) should do nothing when disabled with no database name


  2 passing (3s)
  10 failing

  1) probes.tedious 4.0.0
       should support basic queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  2) probes.tedious 4.0.0
       should support parameters with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  3) probes.tedious 4.0.0
       should sanitize query with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  4) probes.tedious 4.0.0
       should truncate long queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  5) probes.tedious 4.0.0
       should do nothing when disabled with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  6) probes.tedious 4.0.0
       should support basic queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:93:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:92:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  7) probes.tedious 4.0.0
       should support parameters with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:114:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:113:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  8) probes.tedious 4.0.0
       should sanitize query with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:146:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:144:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  9) probes.tedious 4.0.0
       should truncate long queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:179:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:178:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)

  10) probes.tedious 4.0.0
       should do nothing when disabled with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:244:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at Object.exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:206:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.1
updated 1 package and audited 894 packages in 3.523s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:31.691Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:31.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:31.697Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:31.697Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:31.780Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:31.932Z appoptics:patching patched crypto 
2022-04-20T15:37:31.957Z appoptics:patching patched https 
2022-04-20T15:37:31.957Z appoptics:patching patched http 
2022-04-20T15:37:32.010Z appoptics:patching patched tedious 4.0.1
2022-04-20T15:37:32.014Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.2
updated 1 package and audited 894 packages in 3.745s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:39.825Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:39.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:39.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:39.827Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:39.886Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:40.033Z appoptics:patching patched crypto 
2022-04-20T15:37:40.055Z appoptics:patching patched https 
2022-04-20T15:37:40.055Z appoptics:patching patched http 
2022-04-20T15:37:40.119Z appoptics:patching patched tedious 4.0.2
2022-04-20T15:37:40.123Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.3
updated 1 package and audited 894 packages in 3.534s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:47.768Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:47.769Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:47.770Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:47.770Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:47.855Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:48.026Z appoptics:patching patched crypto 
2022-04-20T15:37:48.049Z appoptics:patching patched https 
2022-04-20T15:37:48.050Z appoptics:patching patched http 
2022-04-20T15:37:48.123Z appoptics:patching patched tedious 4.0.3
2022-04-20T15:37:48.127Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.0.4
updated 1 package and audited 894 packages in 4.081s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:37:56.355Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:56.357Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:56.357Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:56.357Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:56.416Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:56.565Z appoptics:patching patched crypto 
2022-04-20T15:37:56.594Z appoptics:patching patched https 
2022-04-20T15:37:56.594Z appoptics:patching patched http 
2022-04-20T15:37:56.652Z appoptics:patching patched tedious 4.0.4
2022-04-20T15:37:56.656Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:938:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.0
added 29 packages from 62 contributors, updated 1 package and audited 923 packages in 4.473s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:05.185Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:05.187Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:05.187Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:05.187Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:05.251Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:05.408Z appoptics:patching patched crypto 
2022-04-20T15:38:05.433Z appoptics:patching patched https 
2022-04-20T15:38:05.433Z appoptics:patching patched http 
2022-04-20T15:38:05.487Z appoptics:patching patched zlib 
2022-04-20T15:38:05.539Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:05.540Z appoptics:patching patched fs 
2022-04-20T15:38:05.643Z appoptics:patching patched tedious 4.1.0
2022-04-20T15:38:05.647Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1077:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:949:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.1
updated 1 package and audited 923 packages in 4.343s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:14.124Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:14.125Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:14.125Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:14.126Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:14.185Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:14.318Z appoptics:patching patched crypto 
2022-04-20T15:38:14.341Z appoptics:patching patched https 
2022-04-20T15:38:14.341Z appoptics:patching patched http 
2022-04-20T15:38:14.405Z appoptics:patching patched zlib 
2022-04-20T15:38:14.459Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:14.459Z appoptics:patching patched fs 
2022-04-20T15:38:14.572Z appoptics:patching patched tedious 4.1.1
2022-04-20T15:38:14.576Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.2
updated 1 package and audited 923 packages in 3.972s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:22.745Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:22.747Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:22.747Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:22.747Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:22.817Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:23.008Z appoptics:patching patched crypto 
2022-04-20T15:38:23.033Z appoptics:patching patched https 
2022-04-20T15:38:23.033Z appoptics:patching patched http 
2022-04-20T15:38:23.115Z appoptics:patching patched zlib 
2022-04-20T15:38:23.174Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:23.175Z appoptics:patching patched fs 
2022-04-20T15:38:23.292Z appoptics:patching patched tedious 4.1.2
2022-04-20T15:38:23.296Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.1.3
updated 1 package and audited 923 packages in 3.239s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:30.550Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:30.551Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:30.551Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:30.551Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:30.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:30.746Z appoptics:patching patched crypto 
2022-04-20T15:38:30.769Z appoptics:patching patched https 
2022-04-20T15:38:30.769Z appoptics:patching patched http 
2022-04-20T15:38:30.834Z appoptics:patching patched zlib 
2022-04-20T15:38:30.896Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:30.896Z appoptics:patching patched fs 
2022-04-20T15:38:30.987Z appoptics:patching patched tedious 4.1.3
2022-04-20T15:38:30.991Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.1.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.1.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.1.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.1.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.1.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.1.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.1.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.1.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.1.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.1.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.1.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.1.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.1.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.1.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@4.2.0
updated 1 package and audited 923 packages in 3.321s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:38.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:38.715Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:38.715Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:38.715Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:38.775Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:38.911Z appoptics:patching patched crypto 
2022-04-20T15:38:38.938Z appoptics:patching patched https 
2022-04-20T15:38:38.938Z appoptics:patching patched http 
2022-04-20T15:38:38.987Z appoptics:patching patched zlib 
2022-04-20T15:38:39.035Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:39.035Z appoptics:patching patched fs 
2022-04-20T15:38:39.134Z appoptics:patching patched tedious 4.2.0
2022-04-20T15:38:39.138Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 4.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 4.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 4.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 4.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 4.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 4.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 4.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 4.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 4.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 4.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 4.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 4.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:47:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 4.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:971:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:63:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 4.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.0
updated 1 package and audited 923 packages in 4.396s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:47.627Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:47.629Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:47.629Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:47.629Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:47.688Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:47.822Z appoptics:patching patched crypto 
2022-04-20T15:38:47.846Z appoptics:patching patched https 
2022-04-20T15:38:47.846Z appoptics:patching patched http 
2022-04-20T15:38:47.907Z appoptics:patching patched zlib 
2022-04-20T15:38:47.944Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:47.944Z appoptics:patching patched fs 
2022-04-20T15:38:48.033Z appoptics:patching patched tedious 5.0.0
2022-04-20T15:38:48.036Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 5.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 5.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 5.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 5.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 5.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 5.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 5.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 5.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 5.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 5.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 5.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 5.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1149:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:996:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 5.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.1
updated 1 package and audited 923 packages in 3.924s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:38:55.994Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:55.995Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:55.995Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:55.995Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:56.055Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:56.217Z appoptics:patching patched crypto 
2022-04-20T15:38:56.241Z appoptics:patching patched https 
2022-04-20T15:38:56.241Z appoptics:patching patched http 
2022-04-20T15:38:56.305Z appoptics:patching patched zlib 
2022-04-20T15:38:56.358Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:56.358Z appoptics:patching patched fs 
2022-04-20T15:38:56.455Z appoptics:patching patched tedious 5.0.1
2022-04-20T15:38:56.460Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 5.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 5.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 5.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 5.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 5.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 5.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 5.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 5.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 5.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 5.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 5.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.2
updated 1 package and audited 923 packages in 3.843s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:04.376Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:04.377Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:04.377Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:04.378Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:04.449Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:04.593Z appoptics:patching patched crypto 
2022-04-20T15:39:04.619Z appoptics:patching patched https 
2022-04-20T15:39:04.619Z appoptics:patching patched http 
2022-04-20T15:39:04.689Z appoptics:patching patched zlib 
2022-04-20T15:39:04.730Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:04.731Z appoptics:patching patched fs 
2022-04-20T15:39:04.828Z appoptics:patching patched tedious 5.0.2
2022-04-20T15:39:04.832Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 5.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 5.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 5.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 5.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 5.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 5.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 5.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 5.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 5.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 5.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 5.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@5.0.3
updated 1 package and audited 923 packages in 4.098s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:13.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:13.044Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:13.044Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:13.044Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:13.110Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:13.314Z appoptics:patching patched crypto 
2022-04-20T15:39:13.364Z appoptics:patching patched https 
2022-04-20T15:39:13.365Z appoptics:patching patched http 
2022-04-20T15:39:13.431Z appoptics:patching patched zlib 
2022-04-20T15:39:13.467Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:13.468Z appoptics:patching patched fs 
2022-04-20T15:39:13.563Z appoptics:patching patched tedious 5.0.3
2022-04-20T15:39:13.567Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 5.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 5.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 5.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 5.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 5.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 5.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 5.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 5.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 5.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 5.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 5.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 5.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 5.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1151:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:998:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 5.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.0
updated 1 package and audited 923 packages in 4.346s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:22.160Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:22.161Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:22.162Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:22.163Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:22.235Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:22.396Z appoptics:patching patched crypto 
2022-04-20T15:39:22.417Z appoptics:patching patched https 
2022-04-20T15:39:22.417Z appoptics:patching patched http 
2022-04-20T15:39:22.477Z appoptics:patching patched zlib 
2022-04-20T15:39:22.521Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:22.522Z appoptics:patching patched fs 
2022-04-20T15:39:22.615Z appoptics:patching patched tedious 6.0.0
2022-04-20T15:39:22.619Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 6.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 6.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 6.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 6.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 6.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 6.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 6.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 6.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 6.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 6.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 6.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 6.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 6.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.0.1
updated 1 package and audited 923 packages in 4.233s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:30.968Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:30.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:30.970Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:30.970Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:31.036Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:31.178Z appoptics:patching patched crypto 
2022-04-20T15:39:31.200Z appoptics:patching patched https 
2022-04-20T15:39:31.200Z appoptics:patching patched http 
2022-04-20T15:39:31.250Z appoptics:patching patched zlib 
2022-04-20T15:39:31.295Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:31.295Z appoptics:patching patched fs 
2022-04-20T15:39:31.416Z appoptics:patching patched tedious 6.0.1
2022-04-20T15:39:31.422Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 6.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 6.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 6.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 6.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 6.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 6.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 6.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 6.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 6.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 6.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 6.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 6.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1176:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1021:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 6.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.0
updated 1 package and audited 923 packages in 3.758s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:39.391Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:39.393Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:39.393Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:39.393Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:39.474Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:39.665Z appoptics:patching patched crypto 
2022-04-20T15:39:39.689Z appoptics:patching patched https 
2022-04-20T15:39:39.689Z appoptics:patching patched http 
2022-04-20T15:39:39.761Z appoptics:patching patched zlib 
2022-04-20T15:39:39.812Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:39.813Z appoptics:patching patched fs 
2022-04-20T15:39:39.933Z appoptics:patching patched tedious 6.1.0
2022-04-20T15:39:39.937Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 6.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 6.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 6.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 6.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 6.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 6.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 6.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 6.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 6.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 6.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 6.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 6.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 6.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.1
updated 1 package and audited 923 packages in 4.467s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:48.536Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:48.538Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:48.538Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:48.539Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:48.604Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:48.752Z appoptics:patching patched crypto 
2022-04-20T15:39:48.782Z appoptics:patching patched https 
2022-04-20T15:39:48.782Z appoptics:patching patched http 
2022-04-20T15:39:48.836Z appoptics:patching patched zlib 
2022-04-20T15:39:48.891Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:48.891Z appoptics:patching patched fs 
2022-04-20T15:39:48.992Z appoptics:patching patched tedious 6.1.1
2022-04-20T15:39:48.996Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 6.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 6.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 6.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 6.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 6.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 6.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 6.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 6.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 6.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 6.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 6.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 6.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 6.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.1.2
updated 1 package and audited 923 packages in 4.612s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:39:57.962Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:57.963Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:57.964Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:57.964Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:58.029Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:58.188Z appoptics:patching patched crypto 
2022-04-20T15:39:58.215Z appoptics:patching patched https 
2022-04-20T15:39:58.215Z appoptics:patching patched http 
2022-04-20T15:39:58.281Z appoptics:patching patched zlib 
2022-04-20T15:39:58.323Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:58.323Z appoptics:patching patched fs 
2022-04-20T15:39:58.423Z appoptics:patching patched tedious 6.1.2
2022-04-20T15:39:58.427Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 6.1.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 6.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 6.1.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 6.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 6.1.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 6.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 6.1.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 6.1.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 6.1.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 6.1.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 6.1.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 6.1.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:51:18)
      at Message.Readable.read (node_modules/readable-stream/lib/_stream_readable.js:483:26)
      at flow (node_modules/readable-stream/lib/_stream_readable.js:939:34)
      at emitReadable_ (node_modules/readable-stream/lib/_stream_readable.js:549:3)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  18) probes.tedious 6.1.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1032:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:68:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 6.1.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.0
updated 1 package and audited 923 packages in 3.993s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:06.556Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:06.557Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:06.557Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:06.558Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:06.623Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:06.765Z appoptics:patching patched crypto 
2022-04-20T15:40:06.795Z appoptics:patching patched https 
2022-04-20T15:40:06.795Z appoptics:patching patched http 
2022-04-20T15:40:06.844Z appoptics:patching patched zlib 
2022-04-20T15:40:06.888Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:06.888Z appoptics:patching patched fs 
2022-04-20T15:40:06.991Z appoptics:patching patched tedious 6.2.0
2022-04-20T15:40:06.995Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.2.1
added 1 package, removed 1 package, updated 1 package and audited 923 packages in 4.412s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:15.551Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:15.553Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:15.553Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:15.553Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:15.618Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:15.773Z appoptics:patching patched crypto 
2022-04-20T15:40:15.797Z appoptics:patching patched https 
2022-04-20T15:40:15.798Z appoptics:patching patched http 
2022-04-20T15:40:15.853Z appoptics:patching patched zlib 
2022-04-20T15:40:15.908Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:15.909Z appoptics:patching patched fs 
2022-04-20T15:40:15.999Z appoptics:patching patched tedious 6.2.1
2022-04-20T15:40:16.003Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.3.0
added 10 packages from 5 contributors, updated 1 package and audited 933 packages in 5.106s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:25.229Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:25.230Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:25.230Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:25.231Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:25.288Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:25.460Z appoptics:patching patched crypto 
2022-04-20T15:40:25.488Z appoptics:patching patched https 
2022-04-20T15:40:25.488Z appoptics:patching patched http 
2022-04-20T15:40:25.528Z appoptics:patching patched zlib 
2022-04-20T15:40:25.533Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:25.534Z appoptics:patching patched fs 
2022-04-20T15:40:25.731Z appoptics:patching patched tedious 6.3.0
2022-04-20T15:40:25.735Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.4.0
added 1 package from 35 contributors, updated 1 package and audited 934 packages in 4.169s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:33.939Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:33.941Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:33.941Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:33.941Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:34.002Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:34.151Z appoptics:patching patched crypto 
2022-04-20T15:40:34.180Z appoptics:patching patched https 
2022-04-20T15:40:34.181Z appoptics:patching patched http 
2022-04-20T15:40:34.228Z appoptics:patching patched zlib 
2022-04-20T15:40:34.239Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:34.239Z appoptics:patching patched fs 
2022-04-20T15:40:34.426Z appoptics:patching patched tedious 6.4.0
2022-04-20T15:40:34.430Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.5.0
added 2 packages from 1 contributor, removed 1 package, updated 3 packages and audited 935 packages in 4.302s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:42.977Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:42.978Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:42.978Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:42.979Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:43.052Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:43.236Z appoptics:patching patched crypto 
2022-04-20T15:40:43.278Z appoptics:patching patched https 
2022-04-20T15:40:43.278Z appoptics:patching patched http 
2022-04-20T15:40:43.351Z appoptics:patching patched zlib 
2022-04-20T15:40:43.356Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:43.357Z appoptics:patching patched fs 
2022-04-20T15:40:43.735Z appoptics:patching patched tedious 6.5.0
2022-04-20T15:40:43.744Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name (39ms)
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.0
updated 1 package and audited 935 packages in 3.666s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:40:51.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:51.531Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:51.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:51.531Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:51.592Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:51.736Z appoptics:patching patched crypto 
2022-04-20T15:40:51.758Z appoptics:patching patched https 
2022-04-20T15:40:51.758Z appoptics:patching patched http 
2022-04-20T15:40:51.799Z appoptics:patching patched zlib 
2022-04-20T15:40:51.804Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:51.804Z appoptics:patching patched fs 
2022-04-20T15:40:51.981Z appoptics:patching patched tedious 6.6.0
2022-04-20T15:40:51.985Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.1
added 1 package from 2 contributors, updated 1 package and audited 936 packages in 4.874s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:01.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:01.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:01.103Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:01.103Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:01.162Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:01.299Z appoptics:patching patched crypto 
2022-04-20T15:41:01.322Z appoptics:patching patched https 
2022-04-20T15:41:01.323Z appoptics:patching patched http 
2022-04-20T15:41:01.373Z appoptics:patching patched zlib 
2022-04-20T15:41:01.378Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:01.378Z appoptics:patching patched fs 
2022-04-20T15:41:01.546Z appoptics:patching patched tedious 6.6.1
2022-04-20T15:41:01.550Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.2
updated 1 package and audited 936 packages in 4.371s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:10.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:10.079Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:10.079Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:10.079Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:10.145Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:10.286Z appoptics:patching patched crypto 
2022-04-20T15:41:10.308Z appoptics:patching patched https 
2022-04-20T15:41:10.308Z appoptics:patching patched http 
2022-04-20T15:41:10.347Z appoptics:patching patched zlib 
2022-04-20T15:41:10.352Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:10.353Z appoptics:patching patched fs 
2022-04-20T15:41:10.533Z appoptics:patching patched tedious 6.6.2
2022-04-20T15:41:10.537Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.3
updated 1 package and audited 936 packages in 4.354s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:19.047Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:19.048Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:19.048Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:19.049Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:19.125Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:19.308Z appoptics:patching patched crypto 
2022-04-20T15:41:19.331Z appoptics:patching patched https 
2022-04-20T15:41:19.331Z appoptics:patching patched http 
2022-04-20T15:41:19.388Z appoptics:patching patched zlib 
2022-04-20T15:41:19.394Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:19.394Z appoptics:patching patched fs 
2022-04-20T15:41:19.622Z appoptics:patching patched tedious 6.6.3
2022-04-20T15:41:19.626Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.4
updated 1 package and audited 936 packages in 4.022s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:27.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:27.808Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:27.808Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:27.809Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:27.891Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:28.069Z appoptics:patching patched crypto 
2022-04-20T15:41:28.094Z appoptics:patching patched https 
2022-04-20T15:41:28.094Z appoptics:patching patched http 
2022-04-20T15:41:28.135Z appoptics:patching patched zlib 
2022-04-20T15:41:28.140Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:28.140Z appoptics:patching patched fs 
2022-04-20T15:41:28.317Z appoptics:patching patched tedious 6.6.4
2022-04-20T15:41:28.320Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.5
updated 1 package and audited 936 packages in 4.156s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:36.590Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:36.591Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:36.591Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:36.592Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:36.660Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:36.814Z appoptics:patching patched crypto 
2022-04-20T15:41:36.838Z appoptics:patching patched https 
2022-04-20T15:41:36.838Z appoptics:patching patched http 
2022-04-20T15:41:36.883Z appoptics:patching patched zlib 
2022-04-20T15:41:36.889Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:36.889Z appoptics:patching patched fs 
2022-04-20T15:41:37.091Z appoptics:patching patched tedious 6.6.5
2022-04-20T15:41:37.095Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.6.6
updated 1 package and audited 936 packages in 4.313s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:45.487Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:45.489Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:45.489Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:45.489Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:45.548Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:45.790Z appoptics:patching patched crypto 
2022-04-20T15:41:45.812Z appoptics:patching patched https 
2022-04-20T15:41:45.812Z appoptics:patching patched http 
2022-04-20T15:41:45.857Z appoptics:patching patched zlib 
2022-04-20T15:41:45.863Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:45.863Z appoptics:patching patched fs 
2022-04-20T15:41:46.079Z appoptics:patching patched tedious 6.6.6
2022-04-20T15:41:46.083Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.0
updated 1 package and audited 936 packages in 3.641s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:41:53.929Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:53.931Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:53.931Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:53.932Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:54.043Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:54.255Z appoptics:patching patched crypto 
2022-04-20T15:41:54.281Z appoptics:patching patched https 
2022-04-20T15:41:54.281Z appoptics:patching patched http 
2022-04-20T15:41:54.356Z appoptics:patching patched zlib 
2022-04-20T15:41:54.364Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:54.364Z appoptics:patching patched fs 
2022-04-20T15:41:54.653Z appoptics:patching patched tedious 6.7.0
2022-04-20T15:41:54.657Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@6.7.1
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 923 packages in 4.425s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:03.201Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:03.202Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:03.202Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:03.203Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:03.271Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:03.424Z appoptics:patching patched crypto 
2022-04-20T15:42:03.448Z appoptics:patching patched https 
2022-04-20T15:42:03.448Z appoptics:patching patched http 
2022-04-20T15:42:03.534Z appoptics:patching patched zlib 
2022-04-20T15:42:03.538Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:03.538Z appoptics:patching patched fs 
2022-04-20T15:42:03.659Z appoptics:patching patched tedious 6.7.1
2022-04-20T15:42:03.664Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@7.0.0
added 19 packages from 45 contributors, removed 8 packages, updated 6 packages, moved 1 package and audited 934 packages in 4.612s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:12.367Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:12.368Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:12.368Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:12.369Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:12.433Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:12.586Z appoptics:patching patched crypto 
2022-04-20T15:42:12.610Z appoptics:patching patched https 
2022-04-20T15:42:12.610Z appoptics:patching patched http 
2022-04-20T15:42:12.653Z appoptics:patching patched zlib 
2022-04-20T15:42:12.659Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:12.660Z appoptics:patching patched fs 
2022-04-20T15:42:12.884Z appoptics:patching patched tedious 7.0.0
2022-04-20T15:42:12.888Z appoptics:debug starting runtimeMetrics


  probes.tedious 7.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.0
added 1 package from 1 contributor, updated 1 package and audited 935 packages in 4.859s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:21.935Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:21.936Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:21.936Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:21.937Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:22.004Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:22.156Z appoptics:patching patched crypto 
2022-04-20T15:42:22.180Z appoptics:patching patched https 
2022-04-20T15:42:22.180Z appoptics:patching patched http 
2022-04-20T15:42:22.224Z appoptics:patching patched zlib 
2022-04-20T15:42:22.229Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:22.230Z appoptics:patching patched fs 
2022-04-20T15:42:22.457Z appoptics:patching patched tedious 8.0.0
2022-04-20T15:42:22.461Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
updated 1 package and audited 935 packages in 4.187s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:30.711Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:30.712Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:30.712Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:30.713Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:30.778Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:30.932Z appoptics:patching patched crypto 
2022-04-20T15:42:30.954Z appoptics:patching patched https 
2022-04-20T15:42:30.954Z appoptics:patching patched http 
2022-04-20T15:42:30.993Z appoptics:patching patched zlib 
2022-04-20T15:42:30.999Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:30.999Z appoptics:patching patched fs 
2022-04-20T15:42:31.206Z appoptics:patching patched tedious 8.0.1
2022-04-20T15:42:31.210Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    ✓ should support basic queries with a database name
    ✓ should support parameters with a database name
    ✓ should sanitize query with a database name
    ✓ should truncate long queries with a database name
    ✓ should do nothing when disabled with a database name
    ✓ should support basic queries with no database name
    ✓ should support parameters with no database name
    ✓ should sanitize query with no database name
    ✓ should truncate long queries with no database name
    ✓ should do nothing when disabled with no database name


  12 passing (3s)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.0
updated 2 packages and audited 935 packages in 4.663s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:40.101Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:40.102Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:40.102Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:40.103Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:40.178Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:40.363Z appoptics:patching patched crypto 
2022-04-20T15:42:40.385Z appoptics:patching patched https 
2022-04-20T15:42:40.385Z appoptics:patching patched http 
2022-04-20T15:42:40.441Z appoptics:patching patched zlib 
2022-04-20T15:42:40.447Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:40.447Z appoptics:patching patched fs 
2022-04-20T15:42:40.703Z appoptics:patching patched tedious 8.1.0
2022-04-20T15:42:40.707Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 8.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 8.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 8.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 8.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 8.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 8.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 8.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 8.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 8.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 8.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 8.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 8.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 8.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.1.1
updated 1 package and audited 935 packages in 4.442s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:49.310Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:49.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:49.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:49.312Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:49.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:49.534Z appoptics:patching patched crypto 
2022-04-20T15:42:49.558Z appoptics:patching patched https 
2022-04-20T15:42:49.558Z appoptics:patching patched http 
2022-04-20T15:42:49.603Z appoptics:patching patched zlib 
2022-04-20T15:42:49.609Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:49.609Z appoptics:patching patched fs 
2022-04-20T15:42:49.836Z appoptics:patching patched tedious 8.1.1
2022-04-20T15:42:49.840Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 8.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 8.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 8.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 8.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 8.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 8.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 8.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 8.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 8.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 8.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 8.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1295:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1126:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 8.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.2.0
updated 1 package and audited 935 packages in 3.675s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:42:57.730Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:57.731Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:57.731Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:57.731Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:57.796Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:57.955Z appoptics:patching patched crypto 
2022-04-20T15:42:57.979Z appoptics:patching patched https 
2022-04-20T15:42:57.979Z appoptics:patching patched http 
2022-04-20T15:42:58.024Z appoptics:patching patched zlib 
2022-04-20T15:42:58.030Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:58.030Z appoptics:patching patched fs 
2022-04-20T15:42:58.236Z appoptics:patching patched tedious 8.2.0
2022-04-20T15:42:58.240Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:42:59 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 8.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 8.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 8.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 8.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 8.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 8.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 8.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 8.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 8.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 8.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 8.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1128:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 8.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.0
updated 1 package and audited 935 packages in 4.563s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:06.974Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:06.975Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:06.975Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:06.975Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:07.035Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:07.173Z appoptics:patching patched crypto 
2022-04-20T15:43:07.200Z appoptics:patching patched https 
2022-04-20T15:43:07.200Z appoptics:patching patched http 
2022-04-20T15:43:07.238Z appoptics:patching patched zlib 
2022-04-20T15:43:07.243Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:07.243Z appoptics:patching patched fs 
2022-04-20T15:43:07.476Z appoptics:patching patched tedious 8.3.0
2022-04-20T15:43:07.487Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:08 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:43:08 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 8.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 8.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 8.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 8.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 8.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 8.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 8.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 8.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 8.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 8.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 8.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 8.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 8.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.3.1
updated 1 package and audited 935 packages in 3.408s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:15.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:15.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:15.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:15.043Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:15.128Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:15.339Z appoptics:patching patched crypto 
2022-04-20T15:43:15.370Z appoptics:patching patched https 
2022-04-20T15:43:15.370Z appoptics:patching patched http 
2022-04-20T15:43:15.422Z appoptics:patching patched zlib 
2022-04-20T15:43:15.427Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:15.428Z appoptics:patching patched fs 
2022-04-20T15:43:15.674Z appoptics:patching patched tedious 8.3.1
2022-04-20T15:43:15.677Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:16 GMT tedious deprecated The default value for `config.options.trustServerCertificate` will change from `true` to `false` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:43:16 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 8.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 8.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 8.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 8.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 8.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 8.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 8.3.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 8.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 8.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 8.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 8.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 8.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 8.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 8.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 8.3.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1312:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1143:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 8.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 8.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.0
updated 1 package and audited 935 packages in 4.138s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:23.976Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:23.977Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:23.977Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:23.978Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:24.037Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:24.187Z appoptics:patching patched crypto 
2022-04-20T15:43:24.209Z appoptics:patching patched https 
2022-04-20T15:43:24.209Z appoptics:patching patched http 
2022-04-20T15:43:24.250Z appoptics:patching patched zlib 
2022-04-20T15:43:24.256Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:24.256Z appoptics:patching patched fs 
2022-04-20T15:43:24.465Z appoptics:patching patched tedious 9.0.0
2022-04-20T15:43:24.469Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:25 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.0.1
updated 1 package and audited 935 packages in 4.229s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:32.834Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:32.835Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:32.835Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:32.836Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:32.895Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:33.046Z appoptics:patching patched crypto 
2022-04-20T15:43:33.070Z appoptics:patching patched https 
2022-04-20T15:43:33.071Z appoptics:patching patched http 
2022-04-20T15:43:33.116Z appoptics:patching patched zlib 
2022-04-20T15:43:33.122Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:33.123Z appoptics:patching patched fs 
2022-04-20T15:43:33.348Z appoptics:patching patched tedious 9.0.1
2022-04-20T15:43:33.352Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:34 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1310:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1141:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.0
updated 1 package and audited 935 packages in 4.651s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:42.022Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:42.023Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:42.023Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:42.024Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:42.083Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:42.216Z appoptics:patching patched crypto 
2022-04-20T15:43:42.239Z appoptics:patching patched https 
2022-04-20T15:43:42.239Z appoptics:patching patched http 
2022-04-20T15:43:42.284Z appoptics:patching patched zlib 
2022-04-20T15:43:42.289Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:42.289Z appoptics:patching patched fs 
2022-04-20T15:43:42.505Z appoptics:patching patched tedious 9.1.0
2022-04-20T15:43:42.510Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:43 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1632:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1395:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.1.1
updated 3 packages and audited 935 packages in 5.701s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:43:52.341Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:52.342Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:52.342Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:52.343Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:52.409Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:52.549Z appoptics:patching patched crypto 
2022-04-20T15:43:52.571Z appoptics:patching patched https 
2022-04-20T15:43:52.571Z appoptics:patching patched http 
2022-04-20T15:43:52.610Z appoptics:patching patched zlib 
2022-04-20T15:43:52.616Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:52.616Z appoptics:patching patched fs 
2022-04-20T15:43:52.842Z appoptics:patching patched tedious 9.1.1
2022-04-20T15:43:52.846Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:43:53 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1646:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1406:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.0
updated 1 package and audited 935 packages in 3.896s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:00.860Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:00.861Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:00.862Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:00.862Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:00.928Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:01.121Z appoptics:patching patched crypto 
2022-04-20T15:44:01.149Z appoptics:patching patched https 
2022-04-20T15:44:01.149Z appoptics:patching patched http 
2022-04-20T15:44:01.199Z appoptics:patching patched zlib 
2022-04-20T15:44:01.208Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:01.208Z appoptics:patching patched fs 
2022-04-20T15:44:01.411Z appoptics:patching patched tedious 9.2.0
2022-04-20T15:44:01.415Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:44:02 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:44:02 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.1
updated 1 package and audited 935 packages in 3.593s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:09.111Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:09.112Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:09.112Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:09.113Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:09.172Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:09.306Z appoptics:patching patched crypto 
2022-04-20T15:44:09.333Z appoptics:patching patched https 
2022-04-20T15:44:09.333Z appoptics:patching patched http 
2022-04-20T15:44:09.370Z appoptics:patching patched zlib 
2022-04-20T15:44:09.375Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:09.375Z appoptics:patching patched fs 
2022-04-20T15:44:09.633Z appoptics:patching patched tedious 9.2.1
2022-04-20T15:44:09.637Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:44:10 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:44:10 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.2.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.2.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.2.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.2.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.2.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.2.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.2.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.2.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.2.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.2.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.2.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.2.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.2.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.2
added 6 packages from 4 contributors, removed 19 packages, updated 6 packages, moved 1 package and audited 922 packages in 4.609s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:18.460Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:18.461Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:18.461Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:18.462Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:18.533Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:18.674Z appoptics:patching patched crypto 
2022-04-20T15:44:18.698Z appoptics:patching patched https 
2022-04-20T15:44:18.698Z appoptics:patching patched http 
2022-04-20T15:44:18.777Z appoptics:patching patched zlib 
2022-04-20T15:44:18.780Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:18.780Z appoptics:patching patched fs 
2022-04-20T15:44:18.922Z appoptics:patching patched tedious 9.2.2
2022-04-20T15:44:18.934Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:44:19 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:44:19 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.2.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.2.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.2.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.2.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.2.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.2.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.2.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.2.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.2.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.2.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.2.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.2.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1658:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1418:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.2.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@9.2.3
added 22 packages from 54 contributors, updated 2 packages, moved 2 packages and audited 944 packages in 4.123s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:27.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:27.119Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:27.119Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:27.120Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:27.185Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:27.346Z appoptics:patching patched crypto 
2022-04-20T15:44:27.376Z appoptics:patching patched https 
2022-04-20T15:44:27.376Z appoptics:patching patched http 
2022-04-20T15:44:27.451Z appoptics:patching patched zlib 
2022-04-20T15:44:27.455Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:27.455Z appoptics:patching patched fs 
2022-04-20T15:44:27.696Z appoptics:patching patched tedious 9.2.3
2022-04-20T15:44:27.700Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
Wed, 20 Apr 2022 15:44:28 GMT tedious deprecated The default value for "config.options.validateBulkLoadParameters" will change from `false` to `true` in the next major version of `tedious`. Set the value to `true` or `false` explicitly to silence this message. at test/probes/tedious.test.js:244:24
Wed, 20 Apr 2022 15:44:28 GMT tedious deprecated In the next major version of `tedious`, creating a new `Connection` instance will no longer establish a connection to the server automatically. Please use the new `connect` helper function or call the `.connect` method on the newly created `Connection` object to silence this message. at internal/process/next_tick.js:61:11
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 9.2.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 9.2.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 9.2.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 9.2.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 9.2.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 9.2.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 9.2.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 9.2.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 9.2.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 9.2.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 9.2.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 9.2.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 9.2.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 9.2.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 9.2.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 9.2.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 9.2.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@10.0.0
updated 1 package and audited 944 packages in 4.599s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:36.380Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:36.382Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:36.382Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:36.382Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:36.458Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:36.667Z appoptics:patching patched crypto 
2022-04-20T15:44:36.740Z appoptics:patching patched https 
2022-04-20T15:44:36.741Z appoptics:patching patched http 
2022-04-20T15:44:36.847Z appoptics:patching patched zlib 
2022-04-20T15:44:36.859Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:36.860Z appoptics:patching patched fs 
2022-04-20T15:44:37.141Z appoptics:patching patched tedious 10.0.0
2022-04-20T15:44:37.146Z appoptics:debug starting runtimeMetrics


  probes.tedious 10.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 10.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 10.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 10.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 10.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 10.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 10.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 10.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 10.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 10.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 10.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 10.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 10.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 10.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 10.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 10.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 10.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 10.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.0
updated 1 package and audited 944 packages in 4.193s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:45.478Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:45.480Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:45.480Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:45.480Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:45.545Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:45.691Z appoptics:patching patched crypto 
2022-04-20T15:44:45.720Z appoptics:patching patched https 
2022-04-20T15:44:45.720Z appoptics:patching patched http 
2022-04-20T15:44:45.795Z appoptics:patching patched zlib 
2022-04-20T15:44:45.799Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:45.799Z appoptics:patching patched fs 
2022-04-20T15:44:46.040Z appoptics:patching patched tedious 11.0.0
2022-04-20T15:44:46.044Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1651:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1411:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.1
added 1 package from 3 contributors, removed 22 packages, updated 3 packages, moved 2 packages and audited 923 packages in 4.329s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:44:54.523Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:54.525Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:54.525Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:54.526Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:54.593Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:54.742Z appoptics:patching patched crypto 
2022-04-20T15:44:54.773Z appoptics:patching patched https 
2022-04-20T15:44:54.774Z appoptics:patching patched http 
2022-04-20T15:44:54.839Z appoptics:patching patched zlib 
2022-04-20T15:44:54.842Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:54.843Z appoptics:patching patched fs 
2022-04-20T15:44:55.000Z appoptics:patching patched tedious 11.0.1
2022-04-20T15:44:55.005Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.2
added 1 package from 1 contributor, updated 1 package and audited 924 packages in 4.995s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:04.207Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:04.209Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:04.209Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:04.209Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:04.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:04.459Z appoptics:patching patched crypto 
2022-04-20T15:45:04.480Z appoptics:patching patched https 
2022-04-20T15:45:04.481Z appoptics:patching patched http 
2022-04-20T15:45:04.554Z appoptics:patching patched zlib 
2022-04-20T15:45:04.557Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:04.557Z appoptics:patching patched fs 
2022-04-20T15:45:04.696Z appoptics:patching patched tedious 11.0.2
2022-04-20T15:45:04.700Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1656:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1416:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.3
updated 1 package and audited 924 packages in 4.524s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:13.628Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:13.630Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:13.630Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:13.630Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:13.698Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:13.851Z appoptics:patching patched crypto 
2022-04-20T15:45:13.877Z appoptics:patching patched https 
2022-04-20T15:45:13.878Z appoptics:patching patched http 
2022-04-20T15:45:13.966Z appoptics:patching patched zlib 
2022-04-20T15:45:13.970Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:13.970Z appoptics:patching patched fs 
2022-04-20T15:45:14.112Z appoptics:patching patched tedious 11.0.3
2022-04-20T15:45:14.116Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.3
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.4
updated 1 package and audited 924 packages in 3.411s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:21.583Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:21.584Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:21.584Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:21.585Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:21.652Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:21.802Z appoptics:patching patched crypto 
2022-04-20T15:45:21.833Z appoptics:patching patched https 
2022-04-20T15:45:21.834Z appoptics:patching patched http 
2022-04-20T15:45:21.915Z appoptics:patching patched zlib 
2022-04-20T15:45:21.918Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:21.918Z appoptics:patching patched fs 
2022-04-20T15:45:22.057Z appoptics:patching patched tedious 11.0.4
2022-04-20T15:45:22.061Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.4
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1662:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.5
updated 1 package and audited 924 packages in 4.145s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:30.373Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:30.374Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:30.374Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:30.375Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:30.436Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:30.574Z appoptics:patching patched crypto 
2022-04-20T15:45:30.596Z appoptics:patching patched https 
2022-04-20T15:45:30.596Z appoptics:patching patched http 
2022-04-20T15:45:30.679Z appoptics:patching patched zlib 
2022-04-20T15:45:30.695Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:30.696Z appoptics:patching patched fs 
2022-04-20T15:45:30.851Z appoptics:patching patched tedious 11.0.5
2022-04-20T15:45:30.855Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.5
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.5
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1647:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1407:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.6
updated 1 package and audited 924 packages in 4.545s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:39.659Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:39.661Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:39.661Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:39.661Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:39.728Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:39.881Z appoptics:patching patched crypto 
2022-04-20T15:45:39.904Z appoptics:patching patched https 
2022-04-20T15:45:39.904Z appoptics:patching patched http 
2022-04-20T15:45:39.996Z appoptics:patching patched zlib 
2022-04-20T15:45:40.005Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:40.005Z appoptics:patching patched fs 
2022-04-20T15:45:40.140Z appoptics:patching patched tedious 11.0.6
2022-04-20T15:45:40.144Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.6
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.6
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.6
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.6
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.6
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.6
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.6
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.6
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.6
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.6
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.6
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.6
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.6
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.6
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.6
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.6
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.6
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.6 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.7
updated 1 package and audited 924 packages in 4.261s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:48.602Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:48.604Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:48.604Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:48.604Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:48.670Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:48.826Z appoptics:patching patched crypto 
2022-04-20T15:45:48.857Z appoptics:patching patched https 
2022-04-20T15:45:48.857Z appoptics:patching patched http 
2022-04-20T15:45:48.935Z appoptics:patching patched zlib 
2022-04-20T15:45:48.938Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:48.939Z appoptics:patching patched fs 
2022-04-20T15:45:49.095Z appoptics:patching patched tedious 11.0.7
2022-04-20T15:45:49.099Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.7
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.7
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.7
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.7
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.7
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.7
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.7
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.7
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.7
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.7
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.7
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.7
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.7
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.7
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.7
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.7
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.7
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.7 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.8
updated 1 package and audited 924 packages in 3.434s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:45:56.788Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:56.789Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:56.789Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:56.790Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:56.853Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:57.002Z appoptics:patching patched crypto 
2022-04-20T15:45:57.029Z appoptics:patching patched https 
2022-04-20T15:45:57.029Z appoptics:patching patched http 
2022-04-20T15:45:57.099Z appoptics:patching patched zlib 
2022-04-20T15:45:57.102Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:57.102Z appoptics:patching patched fs 
2022-04-20T15:45:57.260Z appoptics:patching patched tedious 11.0.8
2022-04-20T15:45:57.265Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.8
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.8
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.8
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.8
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.8
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.8
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.8
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.8
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.8
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.8
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.8
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.8
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.8
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.8
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.8
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.8
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1645:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1405:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.8
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.8 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!

> keytar@7.9.0 install /__w/appoptics-apm-node/appoptics-apm-node/node_modules/keytar
> prebuild-install || npm run build

npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.9
added 93 packages from 65 contributors, removed 2 packages, updated 4 packages and audited 1015 packages in 8.822s

92 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:10.468Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:10.469Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:10.469Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:10.470Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:10.587Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:10.776Z appoptics:patching patched crypto 
2022-04-20T15:46:10.799Z appoptics:patching patched https 
2022-04-20T15:46:10.799Z appoptics:patching patched http 
2022-04-20T15:46:10.902Z appoptics:patching patched zlib 
2022-04-20T15:46:10.905Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:10.906Z appoptics:patching patched fs 
2022-04-20T15:46:11.064Z appoptics:patching patched tedious 11.0.9
2022-04-20T15:46:11.068Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.9
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.9
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.9
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.9
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.9
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.9
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.9
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.9
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.9
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.9
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.9
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.9
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.9
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.9
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.9
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.9
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1657:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1417:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.9
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.9 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.0.10
updated 1 package and audited 1015 packages in 4.866s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:20.207Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:20.208Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:20.208Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:20.208Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:20.268Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:20.407Z appoptics:patching patched crypto 
2022-04-20T15:46:20.431Z appoptics:patching patched https 
2022-04-20T15:46:20.431Z appoptics:patching patched http 
2022-04-20T15:46:20.507Z appoptics:patching patched zlib 
2022-04-20T15:46:20.510Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:20.511Z appoptics:patching patched fs 
2022-04-20T15:46:20.643Z appoptics:patching patched tedious 11.0.10
2022-04-20T15:46:20.646Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.10
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.0.10
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.0.10
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.0.10
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.0.10
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.0.10
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.0.10
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.0.10
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.0.10
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.0.10
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.0.10
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.0.10
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.0.10
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.0.10
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.0.10
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.0.10
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1659:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1419:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.0.10
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.0.10 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.1.0
updated 1 package and audited 1015 packages in 4.523s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:29.394Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:29.395Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:29.395Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:29.396Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:29.458Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:29.605Z appoptics:patching patched crypto 
2022-04-20T15:46:29.627Z appoptics:patching patched https 
2022-04-20T15:46:29.627Z appoptics:patching patched http 
2022-04-20T15:46:29.701Z appoptics:patching patched zlib 
2022-04-20T15:46:29.704Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:29.704Z appoptics:patching patched fs 
2022-04-20T15:46:29.840Z appoptics:patching patched tedious 11.1.0
2022-04-20T15:46:29.843Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.1.1
updated 1 package and audited 1015 packages in 5.086s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:39.187Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:39.189Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:39.189Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:39.189Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:39.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:39.417Z appoptics:patching patched crypto 
2022-04-20T15:46:39.455Z appoptics:patching patched https 
2022-04-20T15:46:39.456Z appoptics:patching patched http 
2022-04-20T15:46:39.567Z appoptics:patching patched zlib 
2022-04-20T15:46:39.571Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:39.571Z appoptics:patching patched fs 
2022-04-20T15:46:39.726Z appoptics:patching patched tedious 11.1.1
2022-04-20T15:46:39.731Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.1.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.1.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.1.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.1.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.1.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.1.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.1.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.1.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.1.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.1.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.1.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.1.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.2.0
updated 1 package and audited 1015 packages in 4.9s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:48.831Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:48.832Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:48.832Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:48.832Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:48.892Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:49.042Z appoptics:patching patched crypto 
2022-04-20T15:46:49.070Z appoptics:patching patched https 
2022-04-20T15:46:49.070Z appoptics:patching patched http 
2022-04-20T15:46:49.140Z appoptics:patching patched zlib 
2022-04-20T15:46:49.143Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:49.144Z appoptics:patching patched fs 
2022-04-20T15:46:49.293Z appoptics:patching patched tedious 11.2.0
2022-04-20T15:46:49.297Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should do nothing when disabled with a database name
    10) should do nothing when disabled with a database name
    11) should support basic queries with no database name
    12) should support basic queries with no database name
    13) should support parameters with no database name
    14) should support parameters with no database name
    15) should sanitize query with no database name
    16) should sanitize query with no database name
    17) should truncate long queries with no database name
    18) should truncate long queries with no database name
    19) should do nothing when disabled with no database name
    20) should do nothing when disabled with no database name


  2 passing (3s)
  20 failing

  1) probes.tedious 11.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  8) probes.tedious 11.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  17) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on.data (node_modules/tedious/lib/outgoing-message-stream.js:59:18)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Message.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.Transform.push (node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at Message.afterTransform (node_modules/readable-stream/lib/_stream_transform.js:88:10)
      at Message.PassThrough._transform (node_modules/readable-stream/lib/_stream_passthrough.js:38:3)
      at Message.Transform._read (node_modules/readable-stream/lib/_stream_transform.js:177:10)
      at Message.Transform._write (node_modules/readable-stream/lib/_stream_transform.js:164:83)

  18) probes.tedious 11.2.0
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:199:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  19) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1663:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1423:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  20) probes.tedious 11.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.3.0
added 1 package from 2 contributors, updated 4 packages and audited 1016 packages in 4.475s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:46:58.039Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:58.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:58.040Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:58.041Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:58.104Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:58.242Z appoptics:patching patched crypto 
2022-04-20T15:46:58.266Z appoptics:patching patched https 
2022-04-20T15:46:58.266Z appoptics:patching patched http 
2022-04-20T15:46:58.343Z appoptics:patching patched zlib 
2022-04-20T15:46:58.346Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:58.347Z appoptics:patching patched fs 
2022-04-20T15:46:58.479Z appoptics:patching patched tedious 11.3.0
2022-04-20T15:46:58.483Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.3.1
updated 1 package and audited 1016 packages in 5.336s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:07.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:07.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:07.970Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:07.971Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:08.086Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:08.287Z appoptics:patching patched crypto 
2022-04-20T15:47:08.327Z appoptics:patching patched https 
2022-04-20T15:47:08.328Z appoptics:patching patched http 
2022-04-20T15:47:08.415Z appoptics:patching patched zlib 
2022-04-20T15:47:08.418Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:08.418Z appoptics:patching patched fs 
2022-04-20T15:47:08.580Z appoptics:patching patched tedious 11.3.1
2022-04-20T15:47:08.584Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.3.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.3.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.3.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.3.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.3.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.3.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.3.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.3.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.3.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.3.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.3.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.3.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.3.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1665:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1425:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.3.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.3.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.4.0
updated 1 package and audited 1016 packages in 3.972s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:16.693Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:16.694Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:16.694Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:16.695Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:16.752Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:16.894Z appoptics:patching patched crypto 
2022-04-20T15:47:16.916Z appoptics:patching patched https 
2022-04-20T15:47:16.916Z appoptics:patching patched http 
2022-04-20T15:47:16.982Z appoptics:patching patched zlib 
2022-04-20T15:47:16.989Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:16.990Z appoptics:patching patched fs 
2022-04-20T15:47:17.127Z appoptics:patching patched tedious 11.4.0
2022-04-20T15:47:17.130Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.4.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.4.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.4.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.4.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.4.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.4.1
updated 1 package and audited 1016 packages in 6.162s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:27.385Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:27.386Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:27.386Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:27.387Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:27.446Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:27.593Z appoptics:patching patched crypto 
2022-04-20T15:47:27.616Z appoptics:patching patched https 
2022-04-20T15:47:27.617Z appoptics:patching patched http 
2022-04-20T15:47:27.693Z appoptics:patching patched zlib 
2022-04-20T15:47:27.696Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:27.696Z appoptics:patching patched fs 
2022-04-20T15:47:27.826Z appoptics:patching patched tedious 11.4.1
2022-04-20T15:47:27.830Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.4.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.4.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.4.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.4.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.4.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.4.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.4.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.4.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.4.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.4.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.4.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.4.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.4.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.4.2
updated 1 package and audited 1016 packages in 5.288s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:37.500Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:37.502Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:37.502Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:37.502Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:37.568Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:37.723Z appoptics:patching patched crypto 
2022-04-20T15:47:37.747Z appoptics:patching patched https 
2022-04-20T15:47:37.747Z appoptics:patching patched http 
2022-04-20T15:47:37.824Z appoptics:patching patched zlib 
2022-04-20T15:47:37.827Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:37.827Z appoptics:patching patched fs 
2022-04-20T15:47:37.976Z appoptics:patching patched tedious 11.4.2
2022-04-20T15:47:37.980Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.4.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.4.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.4.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.4.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.4.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.4.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.4.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.4.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.4.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.4.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.4.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.4.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.4.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (node_modules/readable-stream/lib/_stream_readable.js:681:20)
      at addChunk (node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at OutgoingMessageStream.Readable.push (node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (node_modules/readable-stream/lib/_stream_readable.js:1094:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.4.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.4.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.5.0
updated 1 package and audited 1016 packages in 5.301s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:47.509Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:47.510Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:47.510Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:47.511Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:47.571Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:47.725Z appoptics:patching patched crypto 
2022-04-20T15:47:47.756Z appoptics:patching patched https 
2022-04-20T15:47:47.756Z appoptics:patching patched http 
2022-04-20T15:47:47.830Z appoptics:patching patched zlib 
2022-04-20T15:47:47.834Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:47.835Z appoptics:patching patched fs 
2022-04-20T15:47:47.986Z appoptics:patching patched tedious 11.5.0
2022-04-20T15:47:47.990Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.5.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.5.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.5.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.5.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.5.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.5.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.5.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.5.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.5.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.5.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.5.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.5.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.5.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.5.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.5.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.5.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.6.0
updated 1 package and audited 1016 packages in 5.191s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:47:57.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:57.423Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:57.423Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:57.423Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:57.483Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:57.623Z appoptics:patching patched crypto 
2022-04-20T15:47:57.645Z appoptics:patching patched https 
2022-04-20T15:47:57.645Z appoptics:patching patched http 
2022-04-20T15:47:57.714Z appoptics:patching patched zlib 
2022-04-20T15:47:57.717Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:57.717Z appoptics:patching patched fs 
2022-04-20T15:47:57.851Z appoptics:patching patched tedious 11.6.0
2022-04-20T15:47:57.855Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.6.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.6.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.6.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.6.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.6.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.6.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.6.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.6.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.6.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.6.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.6.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.6.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1667:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1427:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.6.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.6.1
updated 1 package and audited 1016 packages in 4.711s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:06.894Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:06.895Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:06.895Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:06.896Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:06.975Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:07.183Z appoptics:patching patched crypto 
2022-04-20T15:48:07.209Z appoptics:patching patched https 
2022-04-20T15:48:07.209Z appoptics:patching patched http 
2022-04-20T15:48:07.320Z appoptics:patching patched zlib 
2022-04-20T15:48:07.323Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:07.324Z appoptics:patching patched fs 
2022-04-20T15:48:07.517Z appoptics:patching patched tedious 11.6.1
2022-04-20T15:48:07.521Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.6.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.6.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.6.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.6.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.6.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.6.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.6.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.6.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.6.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.6.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.6.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.6.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.6.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.6.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.6.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.7.0
updated 1 package and audited 1016 packages in 5.08s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:16.841Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:16.842Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:16.842Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:16.843Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:16.903Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:17.045Z appoptics:patching patched crypto 
2022-04-20T15:48:17.067Z appoptics:patching patched https 
2022-04-20T15:48:17.067Z appoptics:patching patched http 
2022-04-20T15:48:17.140Z appoptics:patching patched zlib 
2022-04-20T15:48:17.142Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:17.143Z appoptics:patching patched fs 
2022-04-20T15:48:17.280Z appoptics:patching patched tedious 11.7.0
2022-04-20T15:48:17.284Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.7.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.7.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.7.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.7.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.7.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.7.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.7.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.7.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.7.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.7.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.7.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.7.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.7.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.7.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.7.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.7.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@11.8.0
updated 1 package and audited 1016 packages in 4.231s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:25.657Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:25.658Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:25.658Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:25.659Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:25.724Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:25.879Z appoptics:patching patched crypto 
2022-04-20T15:48:25.903Z appoptics:patching patched https 
2022-04-20T15:48:25.903Z appoptics:patching patched http 
2022-04-20T15:48:25.984Z appoptics:patching patched zlib 
2022-04-20T15:48:25.987Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:25.988Z appoptics:patching patched fs 
2022-04-20T15:48:26.138Z appoptics:patching patched tedious 11.8.0
2022-04-20T15:48:26.142Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.8.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 11.8.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 11.8.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 11.8.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 11.8.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 11.8.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 11.8.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 11.8.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 11.8.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 11.8.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 11.8.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 11.8.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 11.8.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 11.8.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1673:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1433:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 11.8.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 11.8.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@12.0.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@12.0.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@12.0.0
updated 1 package and audited 1016 packages in 5.068s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:35.427Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:35.428Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:35.429Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:35.429Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:35.500Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:35.640Z appoptics:patching patched crypto 
2022-04-20T15:48:35.664Z appoptics:patching patched https 
2022-04-20T15:48:35.664Z appoptics:patching patched http 
2022-04-20T15:48:35.742Z appoptics:patching patched zlib 
2022-04-20T15:48:35.745Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:35.746Z appoptics:patching patched fs 
2022-04-20T15:48:35.890Z appoptics:patching patched tedious 12.0.0
2022-04-20T15:48:35.894Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 12.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 12.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 12.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 12.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 12.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 12.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 12.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 12.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 12.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 12.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 12.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 12.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1660:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1420:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 12.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@12.1.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@12.1.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@12.1.0
updated 1 package and audited 1016 packages in 5.384s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:45.435Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:45.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:45.436Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:45.437Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:45.521Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:45.673Z appoptics:patching patched crypto 
2022-04-20T15:48:45.710Z appoptics:patching patched https 
2022-04-20T15:48:45.710Z appoptics:patching patched http 
2022-04-20T15:48:45.793Z appoptics:patching patched zlib 
2022-04-20T15:48:45.796Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:45.796Z appoptics:patching patched fs 
2022-04-20T15:48:45.942Z appoptics:patching patched tedious 12.1.0
2022-04-20T15:48:45.946Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 12.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 12.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 12.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 12.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 12.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 12.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 12.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 12.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 12.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 12.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 12.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 12.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 12.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@12.2.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@12.2.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@12.2.0
updated 1 package and audited 1016 packages in 4.225s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:48:54.371Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:54.373Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:54.373Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:54.373Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:54.468Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:54.637Z appoptics:patching patched crypto 
2022-04-20T15:48:54.665Z appoptics:patching patched https 
2022-04-20T15:48:54.666Z appoptics:patching patched http 
2022-04-20T15:48:54.741Z appoptics:patching patched zlib 
2022-04-20T15:48:54.744Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:54.744Z appoptics:patching patched fs 
2022-04-20T15:48:54.875Z appoptics:patching patched tedious 12.2.0
2022-04-20T15:48:54.879Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 12.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 12.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 12.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 12.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 12.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 12.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 12.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 12.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 12.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 12.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 12.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 12.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1668:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1428:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 12.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@12.3.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@12.3.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@12.3.0
updated 3 packages and audited 1016 packages in 4.508s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:03.544Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:03.545Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:03.545Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:03.546Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:03.613Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:03.760Z appoptics:patching patched crypto 
2022-04-20T15:49:03.782Z appoptics:patching patched https 
2022-04-20T15:49:03.782Z appoptics:patching patched http 
2022-04-20T15:49:03.855Z appoptics:patching patched zlib 
2022-04-20T15:49:03.858Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:03.859Z appoptics:patching patched fs 
2022-04-20T15:49:04.003Z appoptics:patching patched tedious 12.3.0
2022-04-20T15:49:04.007Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 12.3.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 12.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 12.3.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 12.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 12.3.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 12.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 12.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 12.3.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 12.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 12.3.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 12.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 12.3.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 12.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1680:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1440:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 12.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 12.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.0
removed 17 packages, updated 1 package and audited 999 packages in 4.572s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:12.753Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:12.756Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:12.756Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:12.757Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:12.837Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:12.988Z appoptics:patching patched crypto 
2022-04-20T15:49:13.009Z appoptics:patching patched https 
2022-04-20T15:49:13.010Z appoptics:patching patched http 
2022-04-20T15:49:13.063Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:13.063Z appoptics:patching patched fs 
2022-04-20T15:49:13.081Z appoptics:patching patched zlib 
2022-04-20T15:49:13.225Z appoptics:patching patched tedious 13.0.0
2022-04-20T15:49:13.229Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.1: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.1
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.1
updated 1 package and audited 999 packages in 4.321s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:21.750Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:21.751Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:21.751Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:21.752Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:21.812Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:21.947Z appoptics:patching patched crypto 
2022-04-20T15:49:21.974Z appoptics:patching patched https 
2022-04-20T15:49:21.974Z appoptics:patching patched http 
2022-04-20T15:49:22.024Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:22.025Z appoptics:patching patched fs 
2022-04-20T15:49:22.052Z appoptics:patching patched zlib 
2022-04-20T15:49:22.198Z appoptics:patching patched tedious 13.0.1
2022-04-20T15:49:22.201Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.1
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.1
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.1
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.1
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.1
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.1
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.1
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.1
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.1 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.2: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.2
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.2
updated 1 package and audited 999 packages in 4.428s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:30.770Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:30.772Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:30.772Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:30.772Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:30.846Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:31.038Z appoptics:patching patched crypto 
2022-04-20T15:49:31.060Z appoptics:patching patched https 
2022-04-20T15:49:31.061Z appoptics:patching patched http 
2022-04-20T15:49:31.126Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:31.127Z appoptics:patching patched fs 
2022-04-20T15:49:31.148Z appoptics:patching patched zlib 
2022-04-20T15:49:31.306Z appoptics:patching patched tedious 13.0.2
2022-04-20T15:49:31.310Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.2
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.2
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.2
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.2
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.2
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.2
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.2
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.2
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.2 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.3: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.3
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.3
updated 1 package and audited 999 packages in 5.723s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:41.175Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:41.176Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:41.176Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:41.177Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:41.239Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:41.387Z appoptics:patching patched crypto 
2022-04-20T15:49:41.408Z appoptics:patching patched https 
2022-04-20T15:49:41.408Z appoptics:patching patched http 
2022-04-20T15:49:41.467Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:41.467Z appoptics:patching patched fs 
2022-04-20T15:49:41.487Z appoptics:patching patched zlib 
2022-04-20T15:49:41.675Z appoptics:patching patched tedious 13.0.3
2022-04-20T15:49:41.678Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.3
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.3
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.3
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.3
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.3
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.3
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.3
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.3
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.3
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.3
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.3
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.3 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.4: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.4
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.4
updated 1 package and audited 999 packages in 3.943s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:49.749Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:49.750Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:49.750Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:49.751Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:49.813Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:49.952Z appoptics:patching patched crypto 
2022-04-20T15:49:49.981Z appoptics:patching patched https 
2022-04-20T15:49:49.981Z appoptics:patching patched http 
2022-04-20T15:49:50.038Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:50.038Z appoptics:patching patched fs 
2022-04-20T15:49:50.056Z appoptics:patching patched zlib 
2022-04-20T15:49:50.206Z appoptics:patching patched tedious 13.0.4
2022-04-20T15:49:50.210Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.4
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.4
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.4
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.4
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.4
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.4
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.4
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.4
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.4
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.4
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.4
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.4 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.0.5: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.0.5
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.0.5
updated 1 package and audited 999 packages in 4.413s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:49:58.723Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:58.724Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:58.724Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:58.724Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:58.787Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:58.928Z appoptics:patching patched crypto 
2022-04-20T15:49:58.950Z appoptics:patching patched https 
2022-04-20T15:49:58.950Z appoptics:patching patched http 
2022-04-20T15:49:59.007Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:59.008Z appoptics:patching patched fs 
2022-04-20T15:49:59.026Z appoptics:patching patched zlib 
2022-04-20T15:49:59.175Z appoptics:patching patched tedious 13.0.5
2022-04-20T15:49:59.179Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.5
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.0.5
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.0.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.0.5
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.0.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.0.5
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.0.5
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.0.5
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.0.5
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.0.5
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.0.5
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.0.5
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.0.5
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.0.5
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1653:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1413:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.0.5
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.0.5 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.1.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.1.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.1.0
updated 1 package and audited 999 packages in 4.698s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:08.308Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:08.310Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:08.310Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:08.310Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:08.376Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:08.519Z appoptics:patching patched crypto 
2022-04-20T15:50:08.541Z appoptics:patching patched https 
2022-04-20T15:50:08.541Z appoptics:patching patched http 
2022-04-20T15:50:08.598Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:08.598Z appoptics:patching patched fs 
2022-04-20T15:50:08.617Z appoptics:patching patched zlib 
2022-04-20T15:50:08.760Z appoptics:patching patched tedious 13.1.0
2022-04-20T15:50:08.764Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.1.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.1.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.1.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.1.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.1.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.1.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:54)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@13.2.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@13.2.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@13.2.0
updated 1 package and audited 999 packages in 5.222s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:18.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:18.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:18.103Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:18.104Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:18.169Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:18.327Z appoptics:patching patched crypto 
2022-04-20T15:50:18.354Z appoptics:patching patched https 
2022-04-20T15:50:18.355Z appoptics:patching patched http 
2022-04-20T15:50:18.432Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:18.432Z appoptics:patching patched fs 
2022-04-20T15:50:18.448Z appoptics:patching patched zlib 
2022-04-20T15:50:18.600Z appoptics:patching patched tedious 13.2.0
2022-04-20T15:50:18.605Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 13.2.0
       should support basic queries with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 13.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 13.2.0
       should support parameters with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 13.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 13.2.0
       should sanitize query with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 13.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 13.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 13.2.0
       should support basic queries with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 13.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 13.2.0
       should support parameters with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 13.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 13.2.0
       should sanitize query with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 13.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Uncaught ConnectionError: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1381:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1142:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 13.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 13.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@14.0.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@14.0.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.0.0
updated 1 package and audited 999 packages in 4.962s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:27.958Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:27.959Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:27.959Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:27.960Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:28.031Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:28.295Z appoptics:patching patched crypto 
2022-04-20T15:50:28.330Z appoptics:patching patched https 
2022-04-20T15:50:28.331Z appoptics:patching patched http 
2022-04-20T15:50:28.405Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:28.405Z appoptics:patching patched fs 
2022-04-20T15:50:28.431Z appoptics:patching patched zlib 
2022-04-20T15:50:28.589Z appoptics:patching patched tedious 14.0.0
2022-04-20T15:50:28.594Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.0.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.0.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 14.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 14.0.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 14.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 14.0.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 14.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 14.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 14.0.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 14.0.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 14.0.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 14.0.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 14.0.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 14.0.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1377:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1138:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 14.0.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.0.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@14.1.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@14.1.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.1.0
updated 1 package and audited 999 packages in 4.504s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:37.314Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:37.315Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:37.315Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:37.315Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:37.390Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:37.560Z appoptics:patching patched crypto 
2022-04-20T15:50:37.582Z appoptics:patching patched https 
2022-04-20T15:50:37.582Z appoptics:patching patched http 
2022-04-20T15:50:37.641Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:37.641Z appoptics:patching patched fs 
2022-04-20T15:50:37.660Z appoptics:patching patched zlib 
2022-04-20T15:50:37.808Z appoptics:patching patched tedious 14.1.0
2022-04-20T15:50:37.812Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.1.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:4623) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.1.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 14.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 14.1.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 14.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 14.1.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 14.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 14.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 14.1.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 14.1.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 14.1.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 14.1.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 14.1.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 14.1.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1388:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1149:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 14.1.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.1.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@14.2.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@14.2.0
npm WARN notsup Unsupported engine for @azure/identity@1.5.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@1.5.2
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.12: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.12
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.2.0
updated 1 package and audited 999 packages in 4.128s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:46.140Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:46.141Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:46.141Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:46.142Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:46.208Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:46.349Z appoptics:patching patched crypto 
2022-04-20T15:50:46.371Z appoptics:patching patched https 
2022-04-20T15:50:46.371Z appoptics:patching patched http 
2022-04-20T15:50:46.429Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:46.429Z appoptics:patching patched fs 
2022-04-20T15:50:46.448Z appoptics:patching patched zlib 
2022-04-20T15:50:46.599Z appoptics:patching patched tedious 14.2.0
2022-04-20T15:50:46.603Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.2.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:4648) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.2.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 14.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 14.2.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 14.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 14.2.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 14.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 14.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 14.2.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 14.2.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 14.2.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 14.2.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 14.2.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 14.2.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1397:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1158:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 14.2.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.2.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@14.3.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@14.3.0
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/identity@2.0.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@2.0.4
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for open@8.4.0: wanted: {"node":">=12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: open@8.4.0
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.3.0
added 5 packages from 3 contributors, removed 46 packages, updated 5 packages and audited 958 packages in 5.265s

87 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:50:56.142Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:56.143Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:56.143Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:56.144Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:56.203Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:56.334Z appoptics:patching patched crypto 
2022-04-20T15:50:56.359Z appoptics:patching patched https 
2022-04-20T15:50:56.359Z appoptics:patching patched http 
2022-04-20T15:50:56.411Z appoptics:patching patched zlib 
2022-04-20T15:50:56.457Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:56.457Z appoptics:patching patched fs 
2022-04-20T15:50:56.572Z appoptics:patching patched tedious 14.3.0
2022-04-20T15:50:56.576Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.3.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:4673) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.3.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 14.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 14.3.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 14.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 14.3.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 14.3.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 14.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 14.3.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 14.3.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 14.3.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 14.3.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 14.3.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 14.3.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1416:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1177:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 14.3.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.3.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for tedious@14.4.0: wanted: {"node":">= 12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: tedious@14.4.0
npm WARN notsup Unsupported engine for @azure/identity@2.0.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/identity@2.0.4
npm WARN notsup Unsupported engine for @azure/keyvault-keys@4.4.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/keyvault-keys@4.4.0
npm WARN notsup Unsupported engine for @azure/core-rest-pipeline@1.8.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-rest-pipeline@1.8.0
npm WARN notsup Unsupported engine for open@8.4.0: wanted: {"node":">=12"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: open@8.4.0
npm WARN notsup Unsupported engine for @azure/core-tracing@1.0.0-preview.13: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-tracing@1.0.0-preview.13
npm WARN notsup Unsupported engine for @azure/logger@1.0.3: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/logger@1.0.3
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN notsup Unsupported engine for @azure/core-client@1.5.0: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-client@1.5.0
npm WARN notsup Unsupported engine for @azure/core-asynciterator-polyfill@1.0.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-asynciterator-polyfill@1.0.2
npm WARN notsup Unsupported engine for @azure/core-paging@1.2.1: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-paging@1.2.1
npm WARN notsup Unsupported engine for @azure/core-lro@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-lro@2.2.4
npm WARN notsup Unsupported engine for @azure/core-http@2.2.4: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-http@2.2.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@14.4.0
updated 1 package and audited 958 packages in 4.351s

86 packages are looking for funding
  run `npm fund` for details

found 6 vulnerabilities (1 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:51:05.008Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:05.009Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:05.009Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:05.010Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:05.071Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:05.243Z appoptics:patching patched crypto 
2022-04-20T15:51:05.284Z appoptics:patching patched https 
2022-04-20T15:51:05.284Z appoptics:patching patched http 
2022-04-20T15:51:05.338Z appoptics:patching patched zlib 
2022-04-20T15:51:05.385Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:05.386Z appoptics:patching patched fs 
2022-04-20T15:51:05.501Z appoptics:patching patched tedious 14.4.0
2022-04-20T15:51:05.505Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.4.0
    ✓ UDP might lose a message
    ✓ should be configured to sanitize SQL by default
(node:4698) Warning: `config.options.trustServerCertificate` will default to false in the future. To silence this message, specify a value explicitly in the config options
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    ✓ should truncate long queries with a database name
    7) should do nothing when disabled with a database name
    8) should do nothing when disabled with a database name
    9) should support basic queries with no database name
    10) should support basic queries with no database name
    11) should support parameters with no database name
    12) should support parameters with no database name
    13) should sanitize query with no database name
    14) should sanitize query with no database name
    ✓ should truncate long queries with no database name
    15) should do nothing when disabled with no database name
    16) should do nothing when disabled with no database name


  4 passing (3s)
  16 failing

  1) probes.tedious 14.4.0
       should support basic queries with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  2) probes.tedious 14.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  3) probes.tedious 14.4.0
       should support parameters with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  4) probes.tedious 14.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  5) probes.tedious 14.4.0
       should sanitize query with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  6) probes.tedious 14.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  7) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  8) probes.tedious 14.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  9) probes.tedious 14.4.0
       should support basic queries with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  10) probes.tedious 14.4.0
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  11) probes.tedious 14.4.0
       should support parameters with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  12) probes.tedious 14.4.0
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  13) probes.tedious 14.4.0
       should sanitize query with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  14) probes.tedious 14.4.0
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:167:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)

  15) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Uncaught Error: Connection lost - Cannot call write after a stream was destroyed
      at Connection.socketError (node_modules/tedious/lib/connection.js:1427:26)
      at Socket.socket.on.error (node_modules/tedious/lib/connection.js:1188:14)
      at errorOrDestroy (internal/streams/destroy.js:107:12)
      at onwriteError (_stream_writable.js:430:5)
      at onwrite (_stream_writable.js:461:5)
      at doWrite (_stream_writable.js:411:11)
      at writeOrBuffer (_stream_writable.js:399:5)
      at Socket.Writable.write (_stream_writable.js:299:11)
      at OutgoingMessageStream.ondata (_stream_readable.js:710:20)
      at addChunk (_stream_readable.js:288:12)
      at readableAddChunk (_stream_readable.js:269:11)
      at OutgoingMessageStream.Readable.push (_stream_readable.js:224:10)
      at Message.currentMessage.on (node_modules/tedious/lib/outgoing-message-stream.js:76:12)
      at endReadableNT (_stream_readable.js:1145:12)
      at process._tickCallback (internal/process/next_tick.js:63:19)

  16) probes.tedious 14.4.0
       should do nothing when disabled with no database name:
     Error: done() called multiple times in test <probes.tedious 14.4.0 should do nothing when disabled with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:218:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at Socket.<anonymous> (test/helper.js:112:13)
      at UDP.onMessage [as onmessage] (dgram.js:628:8)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN notsup Unsupported engine for @azure/core-auth@1.3.2: wanted: {"node":">=12.0.0"} (current: {"node":"10.24.1","npm":"6.14.12"})
npm WARN notsup Not compatible with your version of node/npm: @azure/core-auth@1.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ tedious@8.0.1
added 27 packages from 51 contributors, removed 50 packages, updated 7 packages, moved 1 package and audited 935 packages in 5.08s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
