
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:13.006Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:13.007Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:13.007Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:13.008Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:13.162Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:13.413Z appoptics:patching patched crypto 
2022-04-20T15:35:13.486Z appoptics:patching patched https 
2022-04-20T15:35:13.487Z appoptics:patching patched http 
2022-04-20T15:35:13.610Z appoptics:patching patched pino 2.3.0
2022-04-20T15:35:13.614Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message (38ms)
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (274ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:21.318Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:21.319Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:21.319Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:21.320Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:21.386Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:21.515Z appoptics:patching patched crypto 
2022-04-20T15:35:21.535Z appoptics:patching patched https 
2022-04-20T15:35:21.536Z appoptics:patching patched http 
2022-04-20T15:35:21.603Z appoptics:patching patched pino 2.4.0
2022-04-20T15:35:21.607Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:29.874Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:29.874Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:29.875Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:29.875Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:29.943Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:30.085Z appoptics:patching patched crypto 
2022-04-20T15:35:30.116Z appoptics:patching patched https 
2022-04-20T15:35:30.116Z appoptics:patching patched http 
2022-04-20T15:35:30.160Z appoptics:patching patched pino 2.4.1
2022-04-20T15:35:30.164Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:37.427Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:37.428Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:37.428Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:37.429Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:37.520Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:37.683Z appoptics:patching patched crypto 
2022-04-20T15:35:37.730Z appoptics:patching patched https 
2022-04-20T15:35:37.731Z appoptics:patching patched http 
2022-04-20T15:35:37.781Z appoptics:patching patched pino 2.4.2
2022-04-20T15:35:37.785Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:45.218Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:45.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:45.219Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:45.220Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:45.289Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:45.418Z appoptics:patching patched crypto 
2022-04-20T15:35:45.438Z appoptics:patching patched https 
2022-04-20T15:35:45.439Z appoptics:patching patched http 
2022-04-20T15:35:45.487Z appoptics:patching patched pino 2.4.3
2022-04-20T15:35:45.491Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:54.173Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:54.174Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:54.174Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:54.175Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:54.244Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:54.375Z appoptics:patching patched crypto 
2022-04-20T15:35:54.399Z appoptics:patching patched https 
2022-04-20T15:35:54.400Z appoptics:patching patched http 
2022-04-20T15:35:54.449Z appoptics:patching patched pino 2.4.4
2022-04-20T15:35:54.454Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:01.715Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:01.716Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:01.716Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:01.717Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:01.783Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:01.913Z appoptics:patching patched crypto 
2022-04-20T15:36:01.933Z appoptics:patching patched https 
2022-04-20T15:36:01.934Z appoptics:patching patched http 
2022-04-20T15:36:01.982Z appoptics:patching patched pino 2.5.0
2022-04-20T15:36:01.986Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:09.778Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:09.778Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:09.778Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:09.779Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:09.849Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:09.980Z appoptics:patching patched crypto 
2022-04-20T15:36:10.003Z appoptics:patching patched https 
2022-04-20T15:36:10.004Z appoptics:patching patched http 
2022-04-20T15:36:10.102Z appoptics:patching patched pino 2.6.0
2022-04-20T15:36:10.106Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (196ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:17.847Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:17.848Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:17.848Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:17.849Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:17.915Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:18.050Z appoptics:patching patched crypto 
2022-04-20T15:36:18.070Z appoptics:patching patched https 
2022-04-20T15:36:18.070Z appoptics:patching patched http 
2022-04-20T15:36:18.117Z appoptics:patching patched pino 2.6.1
2022-04-20T15:36:18.122Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:25.189Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:25.190Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:25.190Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:25.195Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:25.287Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:25.417Z appoptics:patching patched crypto 
2022-04-20T15:36:25.437Z appoptics:patching patched https 
2022-04-20T15:36:25.438Z appoptics:patching patched http 
2022-04-20T15:36:25.486Z appoptics:patching patched pino 2.7.0
2022-04-20T15:36:25.490Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:33.836Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:33.836Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:33.836Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:33.837Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:33.904Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:34.039Z appoptics:patching patched crypto 
2022-04-20T15:36:34.068Z appoptics:patching patched https 
2022-04-20T15:36:34.069Z appoptics:patching patched http 
2022-04-20T15:36:34.113Z appoptics:patching patched pino 2.7.1
2022-04-20T15:36:34.117Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:42.260Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:42.262Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:42.262Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:42.263Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:42.401Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:42.539Z appoptics:patching patched crypto 
2022-04-20T15:36:42.561Z appoptics:patching patched https 
2022-04-20T15:36:42.561Z appoptics:patching patched http 
2022-04-20T15:36:42.608Z appoptics:patching patched pino 2.7.2
2022-04-20T15:36:42.612Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:49.879Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:49.880Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:49.880Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:49.881Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:49.952Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:50.080Z appoptics:patching patched crypto 
2022-04-20T15:36:50.099Z appoptics:patching patched https 
2022-04-20T15:36:50.100Z appoptics:patching patched http 
2022-04-20T15:36:50.147Z appoptics:patching patched pino 2.7.3
2022-04-20T15:36:50.151Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:59.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:59.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:59.150Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:59.150Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:59.217Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:59.349Z appoptics:patching patched crypto 
2022-04-20T15:36:59.369Z appoptics:patching patched https 
2022-04-20T15:36:59.370Z appoptics:patching patched http 
2022-04-20T15:36:59.415Z appoptics:patching patched pino 2.7.4
2022-04-20T15:36:59.419Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:07.495Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:07.496Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:07.496Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:07.496Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:07.565Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:07.756Z appoptics:patching patched crypto 
2022-04-20T15:37:07.791Z appoptics:patching patched https 
2022-04-20T15:37:07.791Z appoptics:patching patched http 
2022-04-20T15:37:07.835Z appoptics:patching patched pino 2.7.5
2022-04-20T15:37:07.839Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:14.858Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:14.859Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:14.859Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:14.860Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:14.950Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:15.150Z appoptics:patching patched crypto 
2022-04-20T15:37:15.195Z appoptics:patching patched https 
2022-04-20T15:37:15.196Z appoptics:patching patched http 
2022-04-20T15:37:15.243Z appoptics:patching patched pino 2.8.0
2022-04-20T15:37:15.247Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:23.011Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:23.011Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:23.011Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:23.012Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:23.080Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:23.207Z appoptics:patching patched crypto 
2022-04-20T15:37:23.226Z appoptics:patching patched https 
2022-04-20T15:37:23.227Z appoptics:patching patched http 
2022-04-20T15:37:23.282Z appoptics:patching patched pino 2.8.1
2022-04-20T15:37:23.287Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:31.394Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:31.395Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:31.395Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:31.396Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:31.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:31.762Z appoptics:patching patched crypto 
2022-04-20T15:37:31.805Z appoptics:patching patched https 
2022-04-20T15:37:31.806Z appoptics:patching patched http 
2022-04-20T15:37:31.858Z appoptics:patching patched pino 2.8.2
2022-04-20T15:37:31.862Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:39.306Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:39.307Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:39.307Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:39.307Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:39.378Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:39.510Z appoptics:patching patched crypto 
2022-04-20T15:37:39.531Z appoptics:patching patched https 
2022-04-20T15:37:39.531Z appoptics:patching patched http 
2022-04-20T15:37:39.589Z appoptics:patching patched pino 2.8.3
2022-04-20T15:37:39.594Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:47.441Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:47.442Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:47.442Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:47.443Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:47.512Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:47.645Z appoptics:patching patched crypto 
2022-04-20T15:37:47.669Z appoptics:patching patched https 
2022-04-20T15:37:47.671Z appoptics:patching patched http 
2022-04-20T15:37:47.809Z appoptics:patching patched pino 2.9.0
2022-04-20T15:37:47.813Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:55.629Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:55.630Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:55.630Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:55.631Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:55.705Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:55.884Z appoptics:patching patched crypto 
2022-04-20T15:37:55.931Z appoptics:patching patched https 
2022-04-20T15:37:55.932Z appoptics:patching patched http 
2022-04-20T15:37:55.990Z appoptics:patching patched pino 2.10.0
2022-04-20T15:37:55.994Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (107ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (189ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:03.950Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:03.951Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:03.951Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:03.952Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:04.019Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:04.152Z appoptics:patching patched crypto 
2022-04-20T15:38:04.171Z appoptics:patching patched https 
2022-04-20T15:38:04.172Z appoptics:patching patched http 
2022-04-20T15:38:04.232Z appoptics:patching patched pino 2.10.1
2022-04-20T15:38:04.236Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:12.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:12.651Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:12.651Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:12.652Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:12.721Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:12.850Z appoptics:patching patched crypto 
2022-04-20T15:38:12.890Z appoptics:patching patched https 
2022-04-20T15:38:12.890Z appoptics:patching patched http 
2022-04-20T15:38:12.942Z appoptics:patching patched pino 2.11.0
2022-04-20T15:38:12.946Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:20.610Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:20.611Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:20.611Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:20.612Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:20.715Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:21.006Z appoptics:patching patched crypto 
2022-04-20T15:38:21.070Z appoptics:patching patched https 
2022-04-20T15:38:21.071Z appoptics:patching patched http 
2022-04-20T15:38:21.139Z appoptics:patching patched pino 2.12.0
2022-04-20T15:38:21.143Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:28.265Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:28.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:28.266Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:28.266Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:28.339Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:28.472Z appoptics:patching patched crypto 
2022-04-20T15:38:28.493Z appoptics:patching patched https 
2022-04-20T15:38:28.494Z appoptics:patching patched http 
2022-04-20T15:38:28.551Z appoptics:patching patched pino 2.12.1
2022-04-20T15:38:28.555Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:37.378Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:37.378Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:37.378Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:37.379Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:37.447Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:37.575Z appoptics:patching patched crypto 
2022-04-20T15:38:37.595Z appoptics:patching patched https 
2022-04-20T15:38:37.596Z appoptics:patching patched http 
2022-04-20T15:38:37.653Z appoptics:patching patched pino 2.12.2
2022-04-20T15:38:37.657Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:45.265Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:45.266Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:45.266Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:45.267Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:45.348Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:45.496Z appoptics:patching patched crypto 
2022-04-20T15:38:45.543Z appoptics:patching patched https 
2022-04-20T15:38:45.544Z appoptics:patching patched http 
2022-04-20T15:38:45.600Z appoptics:patching patched pino 2.12.3
2022-04-20T15:38:45.604Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:52.671Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:52.671Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:52.671Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:52.672Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:52.740Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:52.876Z appoptics:patching patched crypto 
2022-04-20T15:38:52.906Z appoptics:patching patched https 
2022-04-20T15:38:52.912Z appoptics:patching patched http 
2022-04-20T15:38:52.979Z appoptics:patching patched pino 2.12.4
2022-04-20T15:38:52.983Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:01.061Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:01.062Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:01.062Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:01.063Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:01.138Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:01.289Z appoptics:patching patched crypto 
2022-04-20T15:39:01.310Z appoptics:patching patched https 
2022-04-20T15:39:01.311Z appoptics:patching patched http 
2022-04-20T15:39:01.387Z appoptics:patching patched pino 2.13.0
2022-04-20T15:39:01.392Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 937 packages in 21s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:22.961Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:22.962Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:22.962Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:22.963Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:23.031Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:23.158Z appoptics:patching patched crypto 
2022-04-20T15:39:23.179Z appoptics:patching patched https 
2022-04-20T15:39:23.179Z appoptics:patching patched http 
2022-04-20T15:39:23.243Z appoptics:patching patched pino 2.13.2
2022-04-20T15:39:23.247Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:30.721Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:30.721Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:30.721Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:30.722Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:30.802Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:30.939Z appoptics:patching patched crypto 
2022-04-20T15:39:30.960Z appoptics:patching patched https 
2022-04-20T15:39:30.961Z appoptics:patching patched http 
2022-04-20T15:39:31.018Z appoptics:patching patched pino 2.14.0
2022-04-20T15:39:31.022Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:38.843Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:38.844Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:38.844Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:38.845Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:38.914Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:39.074Z appoptics:patching patched crypto 
2022-04-20T15:39:39.094Z appoptics:patching patched https 
2022-04-20T15:39:39.095Z appoptics:patching patched http 
2022-04-20T15:39:39.145Z appoptics:patching patched pino 2.15.0
2022-04-20T15:39:39.149Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:46.585Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:46.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:46.585Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:46.589Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:46.697Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:46.893Z appoptics:patching patched crypto 
2022-04-20T15:39:46.914Z appoptics:patching patched https 
2022-04-20T15:39:46.914Z appoptics:patching patched http 
2022-04-20T15:39:46.949Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:46.949Z appoptics:patching patched fs 
2022-04-20T15:39:46.973Z appoptics:patching patched pino 2.16.0
2022-04-20T15:39:46.977Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:54.085Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:54.085Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:54.085Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:54.086Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:54.152Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:54.277Z appoptics:patching patched crypto 
2022-04-20T15:39:54.298Z appoptics:patching patched https 
2022-04-20T15:39:54.299Z appoptics:patching patched http 
2022-04-20T15:39:54.360Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:54.360Z appoptics:patching patched fs 
2022-04-20T15:39:54.385Z appoptics:patching patched pino 3.0.0
2022-04-20T15:39:54.389Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:02.453Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:02.454Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:02.454Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:02.454Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:02.520Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:02.653Z appoptics:patching patched crypto 
2022-04-20T15:40:02.673Z appoptics:patching patched https 
2022-04-20T15:40:02.674Z appoptics:patching patched http 
2022-04-20T15:40:02.708Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:02.708Z appoptics:patching patched fs 
2022-04-20T15:40:02.723Z appoptics:patching patched pino 3.0.1
2022-04-20T15:40:02.727Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:09.763Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:09.764Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:09.764Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:09.765Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:09.856Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:09.999Z appoptics:patching patched crypto 
2022-04-20T15:40:10.047Z appoptics:patching patched https 
2022-04-20T15:40:10.047Z appoptics:patching patched http 
2022-04-20T15:40:10.084Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:10.084Z appoptics:patching patched fs 
2022-04-20T15:40:10.100Z appoptics:patching patched pino 3.0.2
2022-04-20T15:40:10.104Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:18.034Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:18.034Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:18.034Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:18.035Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:18.103Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:18.226Z appoptics:patching patched crypto 
2022-04-20T15:40:18.246Z appoptics:patching patched https 
2022-04-20T15:40:18.247Z appoptics:patching patched http 
2022-04-20T15:40:18.281Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:18.281Z appoptics:patching patched fs 
2022-04-20T15:40:18.296Z appoptics:patching patched pino 3.0.3
2022-04-20T15:40:18.300Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:26.433Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:26.434Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:26.434Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:26.435Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:26.502Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:26.629Z appoptics:patching patched crypto 
2022-04-20T15:40:26.650Z appoptics:patching patched https 
2022-04-20T15:40:26.650Z appoptics:patching patched http 
2022-04-20T15:40:26.691Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:26.692Z appoptics:patching patched fs 
2022-04-20T15:40:26.708Z appoptics:patching patched pino 3.0.4
2022-04-20T15:40:26.712Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:33.848Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:33.849Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:33.849Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:33.850Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:33.938Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:34.081Z appoptics:patching patched crypto 
2022-04-20T15:40:34.127Z appoptics:patching patched https 
2022-04-20T15:40:34.128Z appoptics:patching patched http 
2022-04-20T15:40:34.163Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:34.164Z appoptics:patching patched fs 
2022-04-20T15:40:34.179Z appoptics:patching patched pino 3.0.5
2022-04-20T15:40:34.183Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:41.920Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:41.921Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:41.921Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:41.922Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:41.989Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:42.115Z appoptics:patching patched crypto 
2022-04-20T15:40:42.136Z appoptics:patching patched https 
2022-04-20T15:40:42.136Z appoptics:patching patched http 
2022-04-20T15:40:42.171Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:42.172Z appoptics:patching patched fs 
2022-04-20T15:40:42.186Z appoptics:patching patched pino 3.0.6
2022-04-20T15:40:42.190Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:50.037Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:50.038Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:50.038Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:50.039Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:50.107Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:50.234Z appoptics:patching patched crypto 
2022-04-20T15:40:50.253Z appoptics:patching patched https 
2022-04-20T15:40:50.254Z appoptics:patching patched http 
2022-04-20T15:40:50.290Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:50.290Z appoptics:patching patched fs 
2022-04-20T15:40:50.306Z appoptics:patching patched pino 3.0.7
2022-04-20T15:40:50.310Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:57.639Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:57.640Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:57.640Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:57.641Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:57.709Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:57.838Z appoptics:patching patched crypto 
2022-04-20T15:40:57.859Z appoptics:patching patched https 
2022-04-20T15:40:57.859Z appoptics:patching patched http 
2022-04-20T15:40:57.892Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:57.893Z appoptics:patching patched fs 
2022-04-20T15:40:57.908Z appoptics:patching patched pino 3.1.0
2022-04-20T15:40:57.912Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:05.597Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:05.598Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:05.598Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:05.599Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:05.675Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:05.837Z appoptics:patching patched crypto 
2022-04-20T15:41:05.857Z appoptics:patching patched https 
2022-04-20T15:41:05.858Z appoptics:patching patched http 
2022-04-20T15:41:05.907Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:05.907Z appoptics:patching patched fs 
2022-04-20T15:41:05.927Z appoptics:patching patched pino 3.1.1
2022-04-20T15:41:05.931Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:13.522Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:13.531Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:13.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:13.532Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:13.632Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:13.783Z appoptics:patching patched crypto 
2022-04-20T15:41:13.835Z appoptics:patching patched https 
2022-04-20T15:41:13.836Z appoptics:patching patched http 
2022-04-20T15:41:13.883Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:13.884Z appoptics:patching patched fs 
2022-04-20T15:41:13.902Z appoptics:patching patched pino 3.1.2
2022-04-20T15:41:13.908Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (188ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:21.521Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:21.522Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:21.522Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:21.523Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:21.588Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:21.714Z appoptics:patching patched crypto 
2022-04-20T15:41:21.734Z appoptics:patching patched https 
2022-04-20T15:41:21.735Z appoptics:patching patched http 
2022-04-20T15:41:21.776Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:21.776Z appoptics:patching patched fs 
2022-04-20T15:41:21.800Z appoptics:patching patched pino 3.1.3
2022-04-20T15:41:21.804Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (198ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:29.805Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:29.806Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:29.806Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:29.807Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:29.874Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:30.001Z appoptics:patching patched crypto 
2022-04-20T15:41:30.020Z appoptics:patching patched https 
2022-04-20T15:41:30.021Z appoptics:patching patched http 
2022-04-20T15:41:30.057Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:30.057Z appoptics:patching patched fs 
2022-04-20T15:41:30.073Z appoptics:patching patched pino 3.2.0
2022-04-20T15:41:30.077Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:37.141Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:37.141Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:37.141Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:37.142Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:37.236Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:37.378Z appoptics:patching patched crypto 
2022-04-20T15:41:37.424Z appoptics:patching patched https 
2022-04-20T15:41:37.424Z appoptics:patching patched http 
2022-04-20T15:41:37.459Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:37.459Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Module._resolveFilename (node:internal/modules/cjs/loader:939:15)
    at Module._load (node:internal/modules/cjs/loader:780:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Module._load (node:internal/modules/cjs/loader:827:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:45.004Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:45.005Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:45.005Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:45.006Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:45.073Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:45.202Z appoptics:patching patched crypto 
2022-04-20T15:41:45.223Z appoptics:patching patched https 
2022-04-20T15:41:45.223Z appoptics:patching patched http 
2022-04-20T15:41:45.255Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:45.255Z appoptics:patching patched fs 
2022-04-20T15:41:45.277Z appoptics:patching patched pino 3.3.1
2022-04-20T15:41:45.282Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:53.447Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:53.448Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:53.448Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:53.448Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:53.516Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:53.649Z appoptics:patching patched crypto 
2022-04-20T15:41:53.668Z appoptics:patching patched https 
2022-04-20T15:41:53.669Z appoptics:patching patched http 
2022-04-20T15:41:53.699Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:53.700Z appoptics:patching patched fs 
2022-04-20T15:41:53.730Z appoptics:patching patched pino 3.3.2
2022-04-20T15:41:53.734Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


added 2 packages, changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:00.642Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:00.642Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:00.642Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:00.643Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:00.712Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:00.844Z appoptics:patching patched crypto 
2022-04-20T15:42:00.864Z appoptics:patching patched https 
2022-04-20T15:42:00.865Z appoptics:patching patched http 
2022-04-20T15:42:00.897Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:00.897Z appoptics:patching patched fs 
2022-04-20T15:42:00.916Z appoptics:patching patched pino 3.4.0
2022-04-20T15:42:00.921Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:08.892Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:08.893Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:08.893Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:08.894Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:08.961Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:09.090Z appoptics:patching patched crypto 
2022-04-20T15:42:09.109Z appoptics:patching patched https 
2022-04-20T15:42:09.109Z appoptics:patching patched http 
2022-04-20T15:42:09.139Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:09.139Z appoptics:patching patched fs 
2022-04-20T15:42:09.175Z appoptics:patching patched pino 4.0.0
2022-04-20T15:42:09.179Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:17.230Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:17.231Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:17.231Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:17.232Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:17.301Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:17.431Z appoptics:patching patched crypto 
2022-04-20T15:42:17.452Z appoptics:patching patched https 
2022-04-20T15:42:17.452Z appoptics:patching patched http 
2022-04-20T15:42:17.483Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:17.484Z appoptics:patching patched fs 
2022-04-20T15:42:17.505Z appoptics:patching patched pino 4.0.1
2022-04-20T15:42:17.509Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:24.560Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:24.561Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:24.561Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:24.562Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:24.629Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:24.776Z appoptics:patching patched crypto 
2022-04-20T15:42:24.795Z appoptics:patching patched https 
2022-04-20T15:42:24.796Z appoptics:patching patched http 
2022-04-20T15:42:24.845Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:24.846Z appoptics:patching patched fs 
2022-04-20T15:42:24.865Z appoptics:patching patched pino 4.0.2
2022-04-20T15:42:24.869Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:32.801Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:32.802Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:32.802Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:32.802Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:32.872Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:33.049Z appoptics:patching patched crypto 
2022-04-20T15:42:33.070Z appoptics:patching patched https 
2022-04-20T15:42:33.071Z appoptics:patching patched http 
2022-04-20T15:42:33.102Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:33.106Z appoptics:patching patched fs 
2022-04-20T15:42:33.124Z appoptics:patching patched pino 4.0.3
2022-04-20T15:42:33.128Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:41.018Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:41.019Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:41.019Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:41.020Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:41.165Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:41.398Z appoptics:patching patched crypto 
2022-04-20T15:42:41.449Z appoptics:patching patched https 
2022-04-20T15:42:41.449Z appoptics:patching patched http 
2022-04-20T15:42:41.483Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:41.484Z appoptics:patching patched fs 
2022-04-20T15:42:41.502Z appoptics:patching patched pino 4.1.0
2022-04-20T15:42:41.506Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:48.889Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:48.890Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:48.890Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:48.891Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:48.970Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:49.098Z appoptics:patching patched crypto 
2022-04-20T15:42:49.118Z appoptics:patching patched https 
2022-04-20T15:42:49.118Z appoptics:patching patched http 
2022-04-20T15:42:49.149Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:49.149Z appoptics:patching patched fs 
2022-04-20T15:42:49.171Z appoptics:patching patched pino 4.1.1
2022-04-20T15:42:49.175Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:56.914Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:56.915Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:56.915Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:56.916Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:56.982Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:57.111Z appoptics:patching patched crypto 
2022-04-20T15:42:57.131Z appoptics:patching patched https 
2022-04-20T15:42:57.132Z appoptics:patching patched http 
2022-04-20T15:42:57.163Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:57.167Z appoptics:patching patched fs 
2022-04-20T15:42:57.185Z appoptics:patching patched pino 4.1.2
2022-04-20T15:42:57.189Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:04.746Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:04.747Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:04.754Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:04.755Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:04.840Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:04.985Z appoptics:patching patched crypto 
2022-04-20T15:43:05.032Z appoptics:patching patched https 
2022-04-20T15:43:05.033Z appoptics:patching patched http 
2022-04-20T15:43:05.067Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:05.067Z appoptics:patching patched fs 
2022-04-20T15:43:05.085Z appoptics:patching patched pino 4.2.0
2022-04-20T15:43:05.089Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:12.610Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:12.611Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:12.611Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:12.612Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:12.679Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:12.807Z appoptics:patching patched crypto 
2022-04-20T15:43:12.828Z appoptics:patching patched https 
2022-04-20T15:43:12.828Z appoptics:patching patched http 
2022-04-20T15:43:12.861Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:12.862Z appoptics:patching patched fs 
2022-04-20T15:43:12.880Z appoptics:patching patched pino 4.2.1
2022-04-20T15:43:12.884Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:20.861Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:20.862Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:20.862Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:20.863Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:20.930Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:21.060Z appoptics:patching patched crypto 
2022-04-20T15:43:21.080Z appoptics:patching patched https 
2022-04-20T15:43:21.081Z appoptics:patching patched http 
2022-04-20T15:43:21.132Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:21.133Z appoptics:patching patched fs 
2022-04-20T15:43:21.153Z appoptics:patching patched pino 4.2.2
2022-04-20T15:43:21.157Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:28.016Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:28.017Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:28.017Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:28.018Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:28.087Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:28.241Z appoptics:patching patched crypto 
2022-04-20T15:43:28.260Z appoptics:patching patched https 
2022-04-20T15:43:28.261Z appoptics:patching patched http 
2022-04-20T15:43:28.292Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:28.293Z appoptics:patching patched fs 
2022-04-20T15:43:28.314Z appoptics:patching patched pino 4.2.3
2022-04-20T15:43:28.318Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:36.338Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:36.339Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:36.339Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:36.340Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:36.409Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:36.539Z appoptics:patching patched crypto 
2022-04-20T15:43:36.558Z appoptics:patching patched https 
2022-04-20T15:43:36.559Z appoptics:patching patched http 
2022-04-20T15:43:36.589Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:36.589Z appoptics:patching patched fs 
2022-04-20T15:43:36.612Z appoptics:patching patched pino 4.2.4
2022-04-20T15:43:36.616Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:44.886Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:44.887Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:44.887Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:44.888Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:44.958Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:45.087Z appoptics:patching patched crypto 
2022-04-20T15:43:45.107Z appoptics:patching patched https 
2022-04-20T15:43:45.108Z appoptics:patching patched http 
2022-04-20T15:43:45.141Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:45.145Z appoptics:patching patched fs 
2022-04-20T15:43:45.164Z appoptics:patching patched pino 4.3.0
2022-04-20T15:43:45.168Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (183ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:52.137Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:52.138Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:52.138Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:52.139Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:52.206Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:52.334Z appoptics:patching patched crypto 
2022-04-20T15:43:52.353Z appoptics:patching patched https 
2022-04-20T15:43:52.354Z appoptics:patching patched http 
2022-04-20T15:43:52.385Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:52.385Z appoptics:patching patched fs 
2022-04-20T15:43:52.407Z appoptics:patching patched pino 4.4.0
2022-04-20T15:43:52.411Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:00.468Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:00.468Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:00.468Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:00.469Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:00.555Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:00.682Z appoptics:patching patched crypto 
2022-04-20T15:44:00.702Z appoptics:patching patched https 
2022-04-20T15:44:00.703Z appoptics:patching patched http 
2022-04-20T15:44:00.733Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:00.737Z appoptics:patching patched fs 
2022-04-20T15:44:00.754Z appoptics:patching patched pino 4.5.0
2022-04-20T15:44:00.758Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:08.393Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:08.393Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:08.393Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:08.394Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:08.508Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:08.692Z appoptics:patching patched crypto 
2022-04-20T15:44:08.748Z appoptics:patching patched https 
2022-04-20T15:44:08.757Z appoptics:patching patched http 
2022-04-20T15:44:08.825Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:08.825Z appoptics:patching patched fs 
2022-04-20T15:44:08.849Z appoptics:patching patched pino 4.5.1
2022-04-20T15:44:08.854Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (240ms)


changed 1 package, and audited 939 packages in 24s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:33.963Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:33.964Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:33.964Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:33.964Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:34.033Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:34.159Z appoptics:patching patched crypto 
2022-04-20T15:44:34.188Z appoptics:patching patched https 
2022-04-20T15:44:34.189Z appoptics:patching patched http 
2022-04-20T15:44:34.213Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:34.214Z appoptics:patching patched fs 
2022-04-20T15:44:34.231Z appoptics:patching patched pino 4.5.2
2022-04-20T15:44:34.235Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:41.411Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:41.412Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:41.412Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:41.413Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:41.481Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:41.606Z appoptics:patching patched crypto 
2022-04-20T15:44:41.626Z appoptics:patching patched https 
2022-04-20T15:44:41.626Z appoptics:patching patched http 
2022-04-20T15:44:41.656Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:41.656Z appoptics:patching patched fs 
2022-04-20T15:44:41.678Z appoptics:patching patched pino 4.5.3
2022-04-20T15:44:41.682Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:49.558Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:49.558Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:49.558Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:49.559Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:49.626Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:49.751Z appoptics:patching patched crypto 
2022-04-20T15:44:49.771Z appoptics:patching patched https 
2022-04-20T15:44:49.772Z appoptics:patching patched http 
2022-04-20T15:44:49.803Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:49.807Z appoptics:patching patched fs 
2022-04-20T15:44:49.825Z appoptics:patching patched pino 4.5.4
2022-04-20T15:44:49.829Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:57.249Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:57.251Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:57.251Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:57.251Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:57.339Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:57.511Z appoptics:patching patched crypto 
2022-04-20T15:44:57.558Z appoptics:patching patched https 
2022-04-20T15:44:57.564Z appoptics:patching patched http 
2022-04-20T15:44:57.630Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:57.631Z appoptics:patching patched fs 
2022-04-20T15:44:57.683Z appoptics:patching patched pino 4.6.0
2022-04-20T15:44:57.692Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:04.861Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:04.861Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:04.861Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:04.862Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:04.930Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:05.059Z appoptics:patching patched crypto 
2022-04-20T15:45:05.079Z appoptics:patching patched https 
2022-04-20T15:45:05.079Z appoptics:patching patched http 
2022-04-20T15:45:05.111Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:05.115Z appoptics:patching patched fs 
2022-04-20T15:45:05.138Z appoptics:patching patched pino 4.7.0
2022-04-20T15:45:05.142Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:13.176Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:13.176Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:13.177Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:13.177Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:13.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:13.384Z appoptics:patching patched crypto 
2022-04-20T15:45:13.404Z appoptics:patching patched https 
2022-04-20T15:45:13.405Z appoptics:patching patched http 
2022-04-20T15:45:13.439Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:13.440Z appoptics:patching patched fs 
2022-04-20T15:45:13.463Z appoptics:patching patched pino 4.7.1
2022-04-20T15:45:13.467Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:20.527Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:20.528Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:20.528Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:20.529Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:20.655Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:20.819Z appoptics:patching patched crypto 
2022-04-20T15:45:20.866Z appoptics:patching patched https 
2022-04-20T15:45:20.868Z appoptics:patching patched http 
2022-04-20T15:45:20.903Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:20.904Z appoptics:patching patched fs 
2022-04-20T15:45:20.928Z appoptics:patching patched pino 4.7.2
2022-04-20T15:45:20.932Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:28.679Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:28.680Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:28.680Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:28.681Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:28.748Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:28.872Z appoptics:patching patched crypto 
2022-04-20T15:45:28.891Z appoptics:patching patched https 
2022-04-20T15:45:28.893Z appoptics:patching patched http 
2022-04-20T15:45:28.922Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:28.923Z appoptics:patching patched fs 
2022-04-20T15:45:28.950Z appoptics:patching patched pino 4.7.3
2022-04-20T15:45:28.954Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 938 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:37.274Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:37.275Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:37.275Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:37.276Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:37.342Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:37.470Z appoptics:patching patched crypto 
2022-04-20T15:45:37.490Z appoptics:patching patched https 
2022-04-20T15:45:37.491Z appoptics:patching patched http 
2022-04-20T15:45:37.521Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:37.522Z appoptics:patching patched fs 
2022-04-20T15:45:37.554Z appoptics:patching patched pino 4.8.0
2022-04-20T15:45:37.559Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:44.812Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:44.813Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:44.813Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:44.813Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:44.895Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:45.038Z appoptics:patching patched crypto 
2022-04-20T15:45:45.058Z appoptics:patching patched https 
2022-04-20T15:45:45.059Z appoptics:patching patched http 
2022-04-20T15:45:45.119Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:45.120Z appoptics:patching patched fs 
2022-04-20T15:45:45.143Z appoptics:patching patched pino 4.8.1
2022-04-20T15:45:45.147Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:52.771Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:52.771Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:52.771Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:52.772Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:52.835Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:52.961Z appoptics:patching patched crypto 
2022-04-20T15:45:52.981Z appoptics:patching patched https 
2022-04-20T15:45:52.982Z appoptics:patching patched http 
2022-04-20T15:45:53.012Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:53.012Z appoptics:patching patched fs 
2022-04-20T15:45:53.040Z appoptics:patching patched pino 4.8.2
2022-04-20T15:45:53.044Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:01.027Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:01.027Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:01.028Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:01.028Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:01.118Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:01.248Z appoptics:patching patched crypto 
2022-04-20T15:46:01.267Z appoptics:patching patched https 
2022-04-20T15:46:01.268Z appoptics:patching patched http 
2022-04-20T15:46:01.297Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:01.297Z appoptics:patching patched fs 
2022-04-20T15:46:01.325Z appoptics:patching patched pino 4.9.0
2022-04-20T15:46:01.329Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:08.401Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:08.402Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:08.402Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:08.403Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:08.469Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:08.596Z appoptics:patching patched crypto 
2022-04-20T15:46:08.616Z appoptics:patching patched https 
2022-04-20T15:46:08.617Z appoptics:patching patched http 
2022-04-20T15:46:08.651Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:08.652Z appoptics:patching patched fs 
2022-04-20T15:46:08.674Z appoptics:patching patched pino 4.10.0
2022-04-20T15:46:08.678Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:16.418Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:16.419Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:16.419Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:16.420Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:16.503Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:16.640Z appoptics:patching patched crypto 
2022-04-20T15:46:16.659Z appoptics:patching patched https 
2022-04-20T15:46:16.660Z appoptics:patching patched http 
2022-04-20T15:46:16.690Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:16.690Z appoptics:patching patched fs 
2022-04-20T15:46:16.718Z appoptics:patching patched pino 4.10.1
2022-04-20T15:46:16.722Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:24.188Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:24.188Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:24.188Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:24.189Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:24.325Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:24.525Z appoptics:patching patched crypto 
2022-04-20T15:46:24.557Z appoptics:patching patched https 
2022-04-20T15:46:24.558Z appoptics:patching patched http 
2022-04-20T15:46:24.596Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:24.596Z appoptics:patching patched fs 
2022-04-20T15:46:24.619Z appoptics:patching patched pino 4.10.2
2022-04-20T15:46:24.623Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 2 packages, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:31.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:31.969Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:31.969Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:31.970Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:32.056Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:32.198Z appoptics:patching patched crypto 
2022-04-20T15:46:32.218Z appoptics:patching patched https 
2022-04-20T15:46:32.219Z appoptics:patching patched http 
2022-04-20T15:46:32.250Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:32.250Z appoptics:patching patched fs 
2022-04-20T15:46:32.277Z appoptics:patching patched pino 4.10.3
2022-04-20T15:46:32.281Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 938 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:40.072Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:40.073Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:40.073Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:40.074Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:40.162Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:40.311Z appoptics:patching patched crypto 
2022-04-20T15:46:40.369Z appoptics:patching patched https 
2022-04-20T15:46:40.370Z appoptics:patching patched http 
2022-04-20T15:46:40.390Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:40.391Z appoptics:patching patched fs 
2022-04-20T15:46:40.414Z appoptics:patching patched pino 4.10.4
2022-04-20T15:46:40.418Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:47.331Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:47.332Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:47.332Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:47.333Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:47.398Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:47.542Z appoptics:patching patched crypto 
2022-04-20T15:46:47.584Z appoptics:patching patched https 
2022-04-20T15:46:47.585Z appoptics:patching patched http 
2022-04-20T15:46:47.617Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:47.618Z appoptics:patching patched fs 
2022-04-20T15:46:47.642Z appoptics:patching patched pino 4.11.0
2022-04-20T15:46:47.646Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


added 1 package, changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:55.470Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:55.471Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:55.471Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:55.472Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:55.540Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:55.669Z appoptics:patching patched crypto 
2022-04-20T15:46:55.688Z appoptics:patching patched https 
2022-04-20T15:46:55.688Z appoptics:patching patched http 
2022-04-20T15:46:55.720Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:55.721Z appoptics:patching patched fs 
2022-04-20T15:46:55.748Z appoptics:patching patched pino 4.12.0
2022-04-20T15:46:55.751Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:03.940Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:03.941Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:03.941Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:03.942Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:04.023Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:04.153Z appoptics:patching patched crypto 
2022-04-20T15:47:04.172Z appoptics:patching patched https 
2022-04-20T15:47:04.173Z appoptics:patching patched http 
2022-04-20T15:47:04.208Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:04.209Z appoptics:patching patched fs 
2022-04-20T15:47:04.232Z appoptics:patching patched pino 4.13.0
2022-04-20T15:47:04.236Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 2 packages, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:11.113Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:11.114Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:11.114Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:11.115Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:11.183Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:11.314Z appoptics:patching patched crypto 
2022-04-20T15:47:11.334Z appoptics:patching patched https 
2022-04-20T15:47:11.337Z appoptics:patching patched http 
2022-04-20T15:47:11.376Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:11.377Z appoptics:patching patched fs 
2022-04-20T15:47:11.400Z appoptics:patching patched pino 4.14.0
2022-04-20T15:47:11.404Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:19.588Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:19.588Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:19.588Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:19.589Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:19.656Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:19.784Z appoptics:patching patched crypto 
2022-04-20T15:47:19.805Z appoptics:patching patched https 
2022-04-20T15:47:19.805Z appoptics:patching patched http 
2022-04-20T15:47:19.840Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:19.840Z appoptics:patching patched fs 
2022-04-20T15:47:19.863Z appoptics:patching patched pino 4.15.0
2022-04-20T15:47:19.866Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:27.547Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:27.550Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:27.550Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:27.553Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:27.723Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:27.900Z appoptics:patching patched crypto 
2022-04-20T15:47:27.932Z appoptics:patching patched https 
2022-04-20T15:47:27.932Z appoptics:patching patched http 
2022-04-20T15:47:27.964Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:27.965Z appoptics:patching patched fs 
2022-04-20T15:47:27.989Z appoptics:patching patched pino 4.15.1
2022-04-20T15:47:27.993Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:35.035Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:35.036Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:35.036Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:35.038Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:35.105Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:35.235Z appoptics:patching patched crypto 
2022-04-20T15:47:35.254Z appoptics:patching patched https 
2022-04-20T15:47:35.255Z appoptics:patching patched http 
2022-04-20T15:47:35.288Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:35.288Z appoptics:patching patched fs 
2022-04-20T15:47:35.316Z appoptics:patching patched pino 4.15.2
2022-04-20T15:47:35.320Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 2 packages, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:43.256Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:43.257Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:43.257Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:43.258Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:43.324Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:43.456Z appoptics:patching patched crypto 
2022-04-20T15:47:43.475Z appoptics:patching patched https 
2022-04-20T15:47:43.476Z appoptics:patching patched http 
2022-04-20T15:47:43.509Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:43.509Z appoptics:patching patched fs 
2022-04-20T15:47:43.531Z appoptics:patching patched pino 4.15.3
2022-04-20T15:47:43.535Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:50.784Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:50.787Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:50.787Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:50.788Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:50.895Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:51.082Z appoptics:patching patched crypto 
2022-04-20T15:47:51.131Z appoptics:patching patched https 
2022-04-20T15:47:51.132Z appoptics:patching patched http 
2022-04-20T15:47:51.170Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:51.171Z appoptics:patching patched fs 
2022-04-20T15:47:51.193Z appoptics:patching patched pino 4.15.4
2022-04-20T15:47:51.197Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:58.725Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:58.726Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:58.726Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:58.727Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:58.793Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:58.921Z appoptics:patching patched crypto 
2022-04-20T15:47:58.941Z appoptics:patching patched https 
2022-04-20T15:47:58.941Z appoptics:patching patched http 
2022-04-20T15:47:58.976Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:58.977Z appoptics:patching patched fs 
2022-04-20T15:47:59.000Z appoptics:patching patched pino 4.16.0
2022-04-20T15:47:59.004Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:06.789Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:06.790Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:06.790Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:06.790Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:06.858Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:06.993Z appoptics:patching patched crypto 
2022-04-20T15:48:07.013Z appoptics:patching patched https 
2022-04-20T15:48:07.014Z appoptics:patching patched http 
2022-04-20T15:48:07.048Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:07.049Z appoptics:patching patched fs 
2022-04-20T15:48:07.072Z appoptics:patching patched pino 4.16.1
2022-04-20T15:48:07.077Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:14.349Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:14.350Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:14.350Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:14.350Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:14.424Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:14.557Z appoptics:patching patched crypto 
2022-04-20T15:48:14.577Z appoptics:patching patched https 
2022-04-20T15:48:14.578Z appoptics:patching patched http 
2022-04-20T15:48:14.621Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:14.621Z appoptics:patching patched fs 
2022-04-20T15:48:14.644Z appoptics:patching patched pino 4.17.0
2022-04-20T15:48:14.648Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:22.633Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:22.634Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:22.634Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:22.635Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:22.704Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:22.892Z appoptics:patching patched crypto 
2022-04-20T15:48:22.916Z appoptics:patching patched https 
2022-04-20T15:48:22.917Z appoptics:patching patched http 
2022-04-20T15:48:22.963Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:22.963Z appoptics:patching patched fs 
2022-04-20T15:48:22.987Z appoptics:patching patched pino 4.17.1
2022-04-20T15:48:22.991Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:30.945Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:30.946Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:30.946Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:30.947Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:31.039Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:31.189Z appoptics:patching patched crypto 
2022-04-20T15:48:31.237Z appoptics:patching patched https 
2022-04-20T15:48:31.237Z appoptics:patching patched http 
2022-04-20T15:48:31.274Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:31.274Z appoptics:patching patched fs 
2022-04-20T15:48:31.298Z appoptics:patching patched pino 4.17.2
2022-04-20T15:48:31.302Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:38.346Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:38.347Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:38.347Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:38.348Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:38.416Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:38.548Z appoptics:patching patched crypto 
2022-04-20T15:48:38.569Z appoptics:patching patched https 
2022-04-20T15:48:38.583Z appoptics:patching patched http 
2022-04-20T15:48:38.632Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:38.633Z appoptics:patching patched fs 
2022-04-20T15:48:38.660Z appoptics:patching patched pino 4.17.3
2022-04-20T15:48:38.664Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:46.687Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:46.688Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:46.688Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:46.689Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:46.754Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:46.891Z appoptics:patching patched crypto 
2022-04-20T15:48:46.914Z appoptics:patching patched https 
2022-04-20T15:48:46.915Z appoptics:patching patched http 
2022-04-20T15:48:46.971Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:46.972Z appoptics:patching patched fs 
2022-04-20T15:48:46.995Z appoptics:patching patched pino 4.17.5
2022-04-20T15:48:46.999Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (190ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:55.241Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:55.242Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:55.242Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:55.243Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:55.311Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:55.446Z appoptics:patching patched crypto 
2022-04-20T15:48:55.466Z appoptics:patching patched https 
2022-04-20T15:48:55.467Z appoptics:patching patched http 
2022-04-20T15:48:55.505Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:55.505Z appoptics:patching patched fs 
2022-04-20T15:48:55.529Z appoptics:patching patched pino 4.17.6
2022-04-20T15:48:55.533Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:02.539Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:02.543Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:02.544Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:02.544Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:02.626Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:02.753Z appoptics:patching patched crypto 
2022-04-20T15:49:02.772Z appoptics:patching patched https 
2022-04-20T15:49:02.773Z appoptics:patching patched http 
2022-04-20T15:49:02.804Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:02.808Z appoptics:patching patched fs 
2022-04-20T15:49:02.817Z appoptics:patching patched pino 5.0.0
2022-04-20T15:49:02.821Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 2 packages, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:11.020Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:11.021Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:11.021Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:11.022Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:11.094Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:11.233Z appoptics:patching patched crypto 
2022-04-20T15:49:11.253Z appoptics:patching patched https 
2022-04-20T15:49:11.253Z appoptics:patching patched http 
2022-04-20T15:49:11.286Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:11.287Z appoptics:patching patched fs 
2022-04-20T15:49:11.300Z appoptics:patching patched pino 5.0.1
2022-04-20T15:49:11.305Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 2 packages, and audited 929 packages in 30s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:42.393Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:42.394Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:42.394Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:42.395Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:42.462Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:42.592Z appoptics:patching patched crypto 
2022-04-20T15:49:42.612Z appoptics:patching patched https 
2022-04-20T15:49:42.613Z appoptics:patching patched http 
2022-04-20T15:49:42.643Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:42.644Z appoptics:patching patched fs 
2022-04-20T15:49:42.653Z appoptics:patching patched pino 5.0.2
2022-04-20T15:49:42.657Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:50.367Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:50.368Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:50.368Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:50.368Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:50.435Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:50.561Z appoptics:patching patched crypto 
2022-04-20T15:49:50.581Z appoptics:patching patched https 
2022-04-20T15:49:50.582Z appoptics:patching patched http 
2022-04-20T15:49:50.613Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:50.613Z appoptics:patching patched fs 
2022-04-20T15:49:50.622Z appoptics:patching patched pino 5.0.3
2022-04-20T15:49:50.626Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:58.510Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:58.511Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:58.511Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:58.512Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:58.584Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:58.734Z appoptics:patching patched crypto 
2022-04-20T15:49:58.780Z appoptics:patching patched https 
2022-04-20T15:49:58.780Z appoptics:patching patched http 
2022-04-20T15:49:58.816Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:58.817Z appoptics:patching patched fs 
2022-04-20T15:49:58.826Z appoptics:patching patched pino 5.0.4
2022-04-20T15:49:58.830Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:06.413Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:06.414Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:06.414Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:06.415Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:06.521Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:06.700Z appoptics:patching patched crypto 
2022-04-20T15:50:06.721Z appoptics:patching patched https 
2022-04-20T15:50:06.721Z appoptics:patching patched http 
2022-04-20T15:50:06.757Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:06.757Z appoptics:patching patched fs 
2022-04-20T15:50:06.766Z appoptics:patching patched pino 5.0.5
2022-04-20T15:50:06.770Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:13.811Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:13.811Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:13.811Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:13.812Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:13.879Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:14.027Z appoptics:patching patched crypto 
2022-04-20T15:50:14.046Z appoptics:patching patched https 
2022-04-20T15:50:14.047Z appoptics:patching patched http 
2022-04-20T15:50:14.087Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:14.087Z appoptics:patching patched fs 
2022-04-20T15:50:14.096Z appoptics:patching patched pino 5.1.0
2022-04-20T15:50:14.100Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:22.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:22.078Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:22.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:22.078Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:22.146Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:22.277Z appoptics:patching patched crypto 
2022-04-20T15:50:22.297Z appoptics:patching patched https 
2022-04-20T15:50:22.298Z appoptics:patching patched http 
2022-04-20T15:50:22.329Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:22.329Z appoptics:patching patched fs 
2022-04-20T15:50:22.338Z appoptics:patching patched pino 5.1.1
2022-04-20T15:50:22.342Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:29.332Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:29.333Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:29.333Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:29.333Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:29.421Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:29.573Z appoptics:patching patched crypto 
2022-04-20T15:50:29.618Z appoptics:patching patched https 
2022-04-20T15:50:29.619Z appoptics:patching patched http 
2022-04-20T15:50:29.655Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:29.655Z appoptics:patching patched fs 
2022-04-20T15:50:29.664Z appoptics:patching patched pino 5.2.0
2022-04-20T15:50:29.668Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:37.255Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:37.255Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:37.255Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:37.256Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:37.326Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:37.452Z appoptics:patching patched crypto 
2022-04-20T15:50:37.473Z appoptics:patching patched https 
2022-04-20T15:50:37.473Z appoptics:patching patched http 
2022-04-20T15:50:37.507Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:37.507Z appoptics:patching patched fs 
2022-04-20T15:50:37.517Z appoptics:patching patched pino 5.3.0
2022-04-20T15:50:37.521Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:45.829Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:45.830Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:45.830Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:45.831Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:45.898Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:46.029Z appoptics:patching patched crypto 
2022-04-20T15:50:46.050Z appoptics:patching patched https 
2022-04-20T15:50:46.050Z appoptics:patching patched http 
2022-04-20T15:50:46.083Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:46.083Z appoptics:patching patched fs 
2022-04-20T15:50:46.092Z appoptics:patching patched pino 5.3.1
2022-04-20T15:50:46.096Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:52.934Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:52.935Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:52.935Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:52.936Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:53.003Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:53.128Z appoptics:patching patched crypto 
2022-04-20T15:50:53.148Z appoptics:patching patched https 
2022-04-20T15:50:53.149Z appoptics:patching patched http 
2022-04-20T15:50:53.179Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:53.180Z appoptics:patching patched fs 
2022-04-20T15:50:53.193Z appoptics:patching patched pino 5.4.0
2022-04-20T15:50:53.197Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:01.150Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:01.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:01.150Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:01.151Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:01.217Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:01.344Z appoptics:patching patched crypto 
2022-04-20T15:51:01.363Z appoptics:patching patched https 
2022-04-20T15:51:01.364Z appoptics:patching patched http 
2022-04-20T15:51:01.395Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:01.395Z appoptics:patching patched fs 
2022-04-20T15:51:01.404Z appoptics:patching patched pino 5.4.1
2022-04-20T15:51:01.408Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:09.291Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:09.292Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:09.292Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:09.293Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:09.396Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:09.537Z appoptics:patching patched crypto 
2022-04-20T15:51:09.557Z appoptics:patching patched https 
2022-04-20T15:51:09.558Z appoptics:patching patched http 
2022-04-20T15:51:09.589Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:09.590Z appoptics:patching patched fs 
2022-04-20T15:51:09.599Z appoptics:patching patched pino 5.5.0
2022-04-20T15:51:09.604Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:16.874Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:16.876Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:16.876Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:16.876Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:16.962Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:17.101Z appoptics:patching patched crypto 
2022-04-20T15:51:17.121Z appoptics:patching patched https 
2022-04-20T15:51:17.122Z appoptics:patching patched http 
2022-04-20T15:51:17.156Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:17.157Z appoptics:patching patched fs 
2022-04-20T15:51:17.166Z appoptics:patching patched pino 5.6.0
2022-04-20T15:51:17.170Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:24.767Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:24.768Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:24.768Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:24.768Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:24.859Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:24.986Z appoptics:patching patched crypto 
2022-04-20T15:51:25.005Z appoptics:patching patched https 
2022-04-20T15:51:25.006Z appoptics:patching patched http 
2022-04-20T15:51:25.043Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:25.043Z appoptics:patching patched fs 
2022-04-20T15:51:25.053Z appoptics:patching patched pino 5.6.1
2022-04-20T15:51:25.057Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:32.581Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:32.582Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:32.582Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:32.587Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:32.663Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:32.837Z appoptics:patching patched crypto 
2022-04-20T15:51:32.858Z appoptics:patching patched https 
2022-04-20T15:51:32.875Z appoptics:patching patched http 
2022-04-20T15:51:32.927Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:32.928Z appoptics:patching patched fs 
2022-04-20T15:51:32.945Z appoptics:patching patched pino 5.6.2
2022-04-20T15:51:32.950Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (108ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (195ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:40.268Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:40.269Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:40.269Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:40.270Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:40.336Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:40.465Z appoptics:patching patched crypto 
2022-04-20T15:51:40.487Z appoptics:patching patched https 
2022-04-20T15:51:40.487Z appoptics:patching patched http 
2022-04-20T15:51:40.525Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:40.525Z appoptics:patching patched fs 
2022-04-20T15:51:40.535Z appoptics:patching patched pino 5.6.3
2022-04-20T15:51:40.539Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:48.359Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:48.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:48.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:48.361Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:48.429Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:48.558Z appoptics:patching patched crypto 
2022-04-20T15:51:48.577Z appoptics:patching patched https 
2022-04-20T15:51:48.578Z appoptics:patching patched http 
2022-04-20T15:51:48.612Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:48.612Z appoptics:patching patched fs 
2022-04-20T15:51:48.621Z appoptics:patching patched pino 5.6.4
2022-04-20T15:51:48.625Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:51:55.729Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:51:55.730Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:51:55.730Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:51:55.731Z appoptics:debug using context provider: ace-context
2022-04-20T15:51:55.799Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:51:55.933Z appoptics:patching patched crypto 
2022-04-20T15:51:55.985Z appoptics:patching patched https 
2022-04-20T15:51:55.986Z appoptics:patching patched http 
2022-04-20T15:51:56.026Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:51:56.026Z appoptics:patching patched fs 
2022-04-20T15:51:56.036Z appoptics:patching patched pino 5.7.0
2022-04-20T15:51:56.040Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:03.933Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:03.934Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:03.934Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:03.935Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:04.005Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:04.135Z appoptics:patching patched crypto 
2022-04-20T15:52:04.165Z appoptics:patching patched https 
2022-04-20T15:52:04.166Z appoptics:patching patched http 
2022-04-20T15:52:04.195Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:04.195Z appoptics:patching patched fs 
2022-04-20T15:52:04.204Z appoptics:patching patched pino 5.8.0
2022-04-20T15:52:04.208Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:11.993Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:11.994Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:11.994Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:11.995Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:12.063Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:12.190Z appoptics:patching patched crypto 
2022-04-20T15:52:12.210Z appoptics:patching patched https 
2022-04-20T15:52:12.211Z appoptics:patching patched http 
2022-04-20T15:52:12.249Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:12.249Z appoptics:patching patched fs 
2022-04-20T15:52:12.255Z appoptics:patching patched pino 5.8.1
2022-04-20T15:52:12.258Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:19.102Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:19.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:19.103Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:19.104Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:19.168Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:19.293Z appoptics:patching patched crypto 
2022-04-20T15:52:19.313Z appoptics:patching patched https 
2022-04-20T15:52:19.314Z appoptics:patching patched http 
2022-04-20T15:52:19.353Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:19.354Z appoptics:patching patched fs 
2022-04-20T15:52:19.359Z appoptics:patching patched pino 5.9.0
2022-04-20T15:52:19.363Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


added 1 package, changed 2 packages, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:27.580Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:27.581Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:27.581Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:27.582Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:27.651Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:27.785Z appoptics:patching patched crypto 
2022-04-20T15:52:27.805Z appoptics:patching patched https 
2022-04-20T15:52:27.806Z appoptics:patching patched http 
2022-04-20T15:52:27.840Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:27.840Z appoptics:patching patched fs 
2022-04-20T15:52:27.846Z appoptics:patching patched pino 5.10.1
2022-04-20T15:52:27.850Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:36.224Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:36.224Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:36.224Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:36.225Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:36.293Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:36.424Z appoptics:patching patched crypto 
2022-04-20T15:52:36.444Z appoptics:patching patched https 
2022-04-20T15:52:36.445Z appoptics:patching patched http 
2022-04-20T15:52:36.481Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:36.481Z appoptics:patching patched fs 
2022-04-20T15:52:36.487Z appoptics:patching patched pino 5.10.2
2022-04-20T15:52:36.491Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:43.383Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:43.384Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:43.384Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:43.385Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:43.452Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:43.586Z appoptics:patching patched crypto 
2022-04-20T15:52:43.618Z appoptics:patching patched https 
2022-04-20T15:52:43.619Z appoptics:patching patched http 
2022-04-20T15:52:43.656Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:43.656Z appoptics:patching patched fs 
2022-04-20T15:52:43.662Z appoptics:patching patched pino 5.10.3
2022-04-20T15:52:43.666Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 930 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:51.757Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:51.758Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:51.758Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:51.759Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:51.829Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:52:51.963Z appoptics:patching patched crypto 
2022-04-20T15:52:51.984Z appoptics:patching patched https 
2022-04-20T15:52:51.985Z appoptics:patching patched http 
2022-04-20T15:52:52.031Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:52:52.031Z appoptics:patching patched fs 
2022-04-20T15:52:52.037Z appoptics:patching patched pino 5.10.4
2022-04-20T15:52:52.041Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


removed 3 packages, changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:52:59.888Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:52:59.889Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:52:59.889Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:52:59.889Z appoptics:debug using context provider: ace-context
2022-04-20T15:52:59.977Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:00.130Z appoptics:patching patched crypto 
2022-04-20T15:53:00.170Z appoptics:patching patched https 
2022-04-20T15:53:00.171Z appoptics:patching patched http 
2022-04-20T15:53:00.220Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:00.220Z appoptics:patching patched fs 
2022-04-20T15:53:00.226Z appoptics:patching patched pino 5.10.5
2022-04-20T15:53:00.230Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (191ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:07.358Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:07.361Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:07.361Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:07.362Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:07.471Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:07.624Z appoptics:patching patched crypto 
2022-04-20T15:53:07.648Z appoptics:patching patched https 
2022-04-20T15:53:07.649Z appoptics:patching patched http 
2022-04-20T15:53:07.703Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:07.704Z appoptics:patching patched fs 
2022-04-20T15:53:07.709Z appoptics:patching patched pino 5.10.6
2022-04-20T15:53:07.713Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:15.322Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:15.323Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:15.323Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:15.323Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:15.391Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:15.520Z appoptics:patching patched crypto 
2022-04-20T15:53:15.542Z appoptics:patching patched https 
2022-04-20T15:53:15.543Z appoptics:patching patched http 
2022-04-20T15:53:15.577Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:15.577Z appoptics:patching patched fs 
2022-04-20T15:53:15.583Z appoptics:patching patched pino 5.10.7
2022-04-20T15:53:15.587Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:22.825Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:22.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:22.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:22.827Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:22.892Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:23.031Z appoptics:patching patched crypto 
2022-04-20T15:53:23.069Z appoptics:patching patched https 
2022-04-20T15:53:23.070Z appoptics:patching patched http 
2022-04-20T15:53:23.141Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:23.142Z appoptics:patching patched fs 
2022-04-20T15:53:23.148Z appoptics:patching patched pino 5.10.8
2022-04-20T15:53:23.152Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:30.633Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:30.633Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:30.633Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:30.634Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:30.706Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:30.834Z appoptics:patching patched crypto 
2022-04-20T15:53:30.854Z appoptics:patching patched https 
2022-04-20T15:53:30.855Z appoptics:patching patched http 
2022-04-20T15:53:30.894Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:30.895Z appoptics:patching patched fs 
2022-04-20T15:53:30.900Z appoptics:patching patched pino 5.10.9
2022-04-20T15:53:30.904Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:38.611Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:38.611Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:38.611Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:38.612Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:38.681Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:38.808Z appoptics:patching patched crypto 
2022-04-20T15:53:38.827Z appoptics:patching patched https 
2022-04-20T15:53:38.828Z appoptics:patching patched http 
2022-04-20T15:53:38.868Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:38.868Z appoptics:patching patched fs 
2022-04-20T15:53:38.874Z appoptics:patching patched pino 5.10.10
2022-04-20T15:53:38.878Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:45.932Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:45.933Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:45.933Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:45.934Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:46.003Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:46.134Z appoptics:patching patched crypto 
2022-04-20T15:53:46.154Z appoptics:patching patched https 
2022-04-20T15:53:46.154Z appoptics:patching patched http 
2022-04-20T15:53:46.195Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:46.195Z appoptics:patching patched fs 
2022-04-20T15:53:46.201Z appoptics:patching patched pino 5.11.0
2022-04-20T15:53:46.205Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:53:54.039Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:53:54.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:53:54.040Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:53:54.041Z appoptics:debug using context provider: ace-context
2022-04-20T15:53:54.107Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:53:54.232Z appoptics:patching patched crypto 
2022-04-20T15:53:54.260Z appoptics:patching patched https 
2022-04-20T15:53:54.260Z appoptics:patching patched http 
2022-04-20T15:53:54.297Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:53:54.297Z appoptics:patching patched fs 
2022-04-20T15:53:54.302Z appoptics:patching patched pino 5.11.1
2022-04-20T15:53:54.306Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:54:02.519Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:54:02.520Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:54:02.520Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:54:02.521Z appoptics:debug using context provider: ace-context
2022-04-20T15:54:02.595Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:54:02.760Z appoptics:patching patched crypto 
2022-04-20T15:54:02.803Z appoptics:patching patched https 
2022-04-20T15:54:02.804Z appoptics:patching patched http 
2022-04-20T15:54:02.849Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:54:02.850Z appoptics:patching patched fs 
2022-04-20T15:54:02.859Z appoptics:patching patched pino 5.11.2
2022-04-20T15:54:02.865Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (194ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:54:09.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:54:09.970Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:54:09.970Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:54:09.971Z appoptics:debug using context provider: ace-context
2022-04-20T15:54:10.039Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:54:10.171Z appoptics:patching patched crypto 
2022-04-20T15:54:10.190Z appoptics:patching patched https 
2022-04-20T15:54:10.191Z appoptics:patching patched http 
2022-04-20T15:54:10.230Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:54:10.230Z appoptics:patching patched fs 
2022-04-20T15:54:10.236Z appoptics:patching patched pino 5.11.3
2022-04-20T15:54:10.240Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:54:18.806Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:54:18.807Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:54:18.807Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:54:18.808Z appoptics:debug using context provider: ace-context
2022-04-20T15:54:18.876Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:54:19.004Z appoptics:patching patched crypto 
2022-04-20T15:54:19.023Z appoptics:patching patched https 
2022-04-20T15:54:19.023Z appoptics:patching patched http 
2022-04-20T15:54:19.063Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:54:19.063Z appoptics:patching patched fs 
2022-04-20T15:54:19.069Z appoptics:patching patched pino 5.12.0
2022-04-20T15:54:19.073Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 24s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:54:44.133Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:54:44.133Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:54:44.133Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:54:44.134Z appoptics:debug using context provider: ace-context
2022-04-20T15:54:44.234Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:54:44.373Z appoptics:patching patched crypto 
2022-04-20T15:54:44.407Z appoptics:patching patched https 
2022-04-20T15:54:44.408Z appoptics:patching patched http 
2022-04-20T15:54:44.439Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:54:44.439Z appoptics:patching patched fs 
2022-04-20T15:54:44.445Z appoptics:patching patched pino 5.12.1
2022-04-20T15:54:44.449Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:54:52.534Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:54:52.535Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:54:52.535Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:54:52.536Z appoptics:debug using context provider: ace-context
2022-04-20T15:54:52.603Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:54:52.730Z appoptics:patching patched crypto 
2022-04-20T15:54:52.749Z appoptics:patching patched https 
2022-04-20T15:54:52.750Z appoptics:patching patched http 
2022-04-20T15:54:52.787Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:54:52.787Z appoptics:patching patched fs 
2022-04-20T15:54:52.793Z appoptics:patching patched pino 5.12.2
2022-04-20T15:54:52.797Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:00.181Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:00.182Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:00.182Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:00.183Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:00.255Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:00.385Z appoptics:patching patched crypto 
2022-04-20T15:55:00.411Z appoptics:patching patched https 
2022-04-20T15:55:00.412Z appoptics:patching patched http 
2022-04-20T15:55:00.448Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:00.448Z appoptics:patching patched fs 
2022-04-20T15:55:00.454Z appoptics:patching patched pino 5.12.3
2022-04-20T15:55:00.458Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:07.897Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:07.897Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:07.897Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:07.898Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:07.986Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:08.156Z appoptics:patching patched crypto 
2022-04-20T15:55:08.177Z appoptics:patching patched https 
2022-04-20T15:55:08.204Z appoptics:patching patched http 
2022-04-20T15:55:08.246Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:08.246Z appoptics:patching patched fs 
2022-04-20T15:55:08.254Z appoptics:patching patched pino 5.12.4
2022-04-20T15:55:08.259Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (211ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:15.968Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:15.969Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:15.969Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:15.970Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:16.035Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:16.161Z appoptics:patching patched crypto 
2022-04-20T15:55:16.181Z appoptics:patching patched https 
2022-04-20T15:55:16.182Z appoptics:patching patched http 
2022-04-20T15:55:16.222Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:16.222Z appoptics:patching patched fs 
2022-04-20T15:55:16.228Z appoptics:patching patched pino 5.12.5
2022-04-20T15:55:16.232Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:23.519Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:23.520Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:23.520Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:23.521Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:23.588Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:23.714Z appoptics:patching patched crypto 
2022-04-20T15:55:23.732Z appoptics:patching patched https 
2022-04-20T15:55:23.733Z appoptics:patching patched http 
2022-04-20T15:55:23.773Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:23.774Z appoptics:patching patched fs 
2022-04-20T15:55:23.779Z appoptics:patching patched pino 5.12.6
2022-04-20T15:55:23.783Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (107ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (200ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:31.661Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:31.662Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:31.662Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:31.663Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:31.735Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:31.860Z appoptics:patching patched crypto 
2022-04-20T15:55:31.880Z appoptics:patching patched https 
2022-04-20T15:55:31.881Z appoptics:patching patched http 
2022-04-20T15:55:31.922Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:31.922Z appoptics:patching patched fs 
2022-04-20T15:55:31.928Z appoptics:patching patched pino 5.13.0
2022-04-20T15:55:31.932Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:39.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:39.530Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:39.530Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:39.531Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:39.635Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:39.792Z appoptics:patching patched crypto 
2022-04-20T15:55:39.812Z appoptics:patching patched https 
2022-04-20T15:55:39.813Z appoptics:patching patched http 
2022-04-20T15:55:39.850Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:39.851Z appoptics:patching patched fs 
2022-04-20T15:55:39.856Z appoptics:patching patched pino 5.13.1
2022-04-20T15:55:39.861Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:46.842Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:46.843Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:46.844Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:46.844Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:46.917Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:47.050Z appoptics:patching patched crypto 
2022-04-20T15:55:47.070Z appoptics:patching patched https 
2022-04-20T15:55:47.070Z appoptics:patching patched http 
2022-04-20T15:55:47.104Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:47.105Z appoptics:patching patched fs 
2022-04-20T15:55:47.110Z appoptics:patching patched pino 5.13.2
2022-04-20T15:55:47.115Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:55:55.218Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:55:55.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:55:55.220Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:55:55.221Z appoptics:debug using context provider: ace-context
2022-04-20T15:55:55.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:55:55.456Z appoptics:patching patched crypto 
2022-04-20T15:55:55.476Z appoptics:patching patched https 
2022-04-20T15:55:55.477Z appoptics:patching patched http 
2022-04-20T15:55:55.514Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:55:55.514Z appoptics:patching patched fs 
2022-04-20T15:55:55.520Z appoptics:patching patched pino 5.13.3
2022-04-20T15:55:55.524Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:02.745Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:02.746Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:02.746Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:02.746Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:02.829Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:03.016Z appoptics:patching patched crypto 
2022-04-20T15:56:03.038Z appoptics:patching patched https 
2022-04-20T15:56:03.038Z appoptics:patching patched http 
2022-04-20T15:56:03.119Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:03.119Z appoptics:patching patched fs 
2022-04-20T15:56:03.129Z appoptics:patching patched pino 5.13.4
2022-04-20T15:56:03.137Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (207ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:11.103Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:11.103Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:11.104Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:11.104Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:11.172Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:11.308Z appoptics:patching patched crypto 
2022-04-20T15:56:11.329Z appoptics:patching patched https 
2022-04-20T15:56:11.330Z appoptics:patching patched http 
2022-04-20T15:56:11.367Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:11.367Z appoptics:patching patched fs 
2022-04-20T15:56:11.373Z appoptics:patching patched pino 5.13.5
2022-04-20T15:56:11.377Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:19.458Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:19.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:19.458Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:19.459Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:19.528Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:19.656Z appoptics:patching patched crypto 
2022-04-20T15:56:19.675Z appoptics:patching patched https 
2022-04-20T15:56:19.676Z appoptics:patching patched http 
2022-04-20T15:56:19.716Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:19.716Z appoptics:patching patched fs 
2022-04-20T15:56:19.722Z appoptics:patching patched pino 5.13.6
2022-04-20T15:56:19.726Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:26.813Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:26.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:26.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:26.815Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:26.882Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:27.025Z appoptics:patching patched crypto 
2022-04-20T15:56:27.046Z appoptics:patching patched https 
2022-04-20T15:56:27.047Z appoptics:patching patched http 
2022-04-20T15:56:27.086Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:27.086Z appoptics:patching patched fs 
2022-04-20T15:56:27.092Z appoptics:patching patched pino 5.14.0
2022-04-20T15:56:27.096Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (178ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:35.058Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:35.059Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:35.059Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:35.060Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:35.143Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:35.301Z appoptics:patching patched crypto 
2022-04-20T15:56:35.321Z appoptics:patching patched https 
2022-04-20T15:56:35.322Z appoptics:patching patched http 
2022-04-20T15:56:35.368Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:35.369Z appoptics:patching patched fs 
2022-04-20T15:56:35.375Z appoptics:patching patched pino 5.15.0
2022-04-20T15:56:35.379Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:43.110Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:43.111Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:43.111Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:43.111Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:43.180Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:43.310Z appoptics:patching patched crypto 
2022-04-20T15:56:43.331Z appoptics:patching patched https 
2022-04-20T15:56:43.332Z appoptics:patching patched http 
2022-04-20T15:56:43.382Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:43.382Z appoptics:patching patched fs 
2022-04-20T15:56:43.388Z appoptics:patching patched pino 5.16.0
2022-04-20T15:56:43.392Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:50.523Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:50.524Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:50.524Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:50.525Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:50.594Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:50.721Z appoptics:patching patched crypto 
2022-04-20T15:56:50.741Z appoptics:patching patched https 
2022-04-20T15:56:50.742Z appoptics:patching patched http 
2022-04-20T15:56:50.782Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:50.782Z appoptics:patching patched fs 
2022-04-20T15:56:50.788Z appoptics:patching patched pino 5.17.0
2022-04-20T15:56:50.792Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 3 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:56:58.342Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:56:58.342Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:56:58.342Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:56:58.343Z appoptics:debug using context provider: ace-context
2022-04-20T15:56:58.418Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:56:58.573Z appoptics:patching patched crypto 
2022-04-20T15:56:58.616Z appoptics:patching patched https 
2022-04-20T15:56:58.617Z appoptics:patching patched http 
2022-04-20T15:56:58.652Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:56:58.653Z appoptics:patching patched fs 
2022-04-20T15:56:58.659Z appoptics:patching patched pino 6.0.0
2022-04-20T15:56:58.664Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (211ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4226
         "time": 1650470218697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4226
         "time": 1650470218709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4226
         "time": 1650470218714
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4226
         "time": 1650470218717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4226
         "time": 1650470218721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4226
         "time": 1650470218725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4226
         "time": 1650470218727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4226
         "time": 1650470218729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4226
         "time": 1650470218731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4226
         "time": 1650470218732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4226
         "time": 1650470218736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4226
         "time": 1650470218738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4226
         "time": 1650470218846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D2C180A10953EE1F3503B04EC94972D7A115439A-1"
         "pid": 4226
         "time": 1650470218878
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:06.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:06.119Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:06.119Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:06.121Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:06.214Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:06.394Z appoptics:patching patched crypto 
2022-04-20T15:57:06.455Z appoptics:patching patched https 
2022-04-20T15:57:06.466Z appoptics:patching patched http 
2022-04-20T15:57:06.540Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:06.541Z appoptics:patching patched fs 
2022-04-20T15:57:06.550Z appoptics:patching patched pino 6.1.0
2022-04-20T15:57:06.557Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (200ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4248
         "time": 1650470226594
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4248
         "time": 1650470226605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4248
         "time": 1650470226609
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4248
         "time": 1650470226612
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4248
         "time": 1650470226615
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4248
         "time": 1650470226620
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4248
         "time": 1650470226623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4248
         "time": 1650470226624
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4248
         "time": 1650470226626
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4248
         "time": 1650470226628
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4248
         "time": 1650470226630
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4248
         "time": 1650470226632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4248
         "time": 1650470226737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 36DCB6B6BADDD6DF06977F0A230BF6A93F7851DC-1"
         "pid": 4248
         "time": 1650470226765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:13.907Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:13.908Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:13.908Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:13.909Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:13.976Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:14.106Z appoptics:patching patched crypto 
2022-04-20T15:57:14.125Z appoptics:patching patched https 
2022-04-20T15:57:14.126Z appoptics:patching patched http 
2022-04-20T15:57:14.164Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:14.165Z appoptics:patching patched fs 
2022-04-20T15:57:14.171Z appoptics:patching patched pino 6.1.1
2022-04-20T15:57:14.175Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4270
         "time": 1650470234202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4270
         "time": 1650470234210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4270
         "time": 1650470234214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4270
         "time": 1650470234216
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4270
         "time": 1650470234219
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4270
         "time": 1650470234222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4270
         "time": 1650470234224
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4270
         "time": 1650470234225
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4270
         "time": 1650470234226
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4270
         "time": 1650470234228
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4270
         "time": 1650470234229
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4270
         "time": 1650470234231
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4270
         "time": 1650470234337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 51A1F7B89EDCE72845F8B731433AC28F024CE36D-1"
         "pid": 4270
         "time": 1650470234365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:22.469Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:22.470Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:22.470Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:22.471Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:22.539Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:22.669Z appoptics:patching patched crypto 
2022-04-20T15:57:22.690Z appoptics:patching patched https 
2022-04-20T15:57:22.690Z appoptics:patching patched http 
2022-04-20T15:57:22.726Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:22.727Z appoptics:patching patched fs 
2022-04-20T15:57:22.733Z appoptics:patching patched pino 6.2.0
2022-04-20T15:57:22.738Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4292
         "time": 1650470242765
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4292
         "time": 1650470242773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4292
         "time": 1650470242777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4292
         "time": 1650470242780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4292
         "time": 1650470242782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4292
         "time": 1650470242786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4292
         "time": 1650470242787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4292
         "time": 1650470242789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4292
         "time": 1650470242790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4292
         "time": 1650470242792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4292
         "time": 1650470242793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4292
         "time": 1650470242795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4292
         "time": 1650470242901
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C390E6A7B5CE735E9F71299CAF401DC500CA993E-1"
         "pid": 4292
         "time": 1650470242930
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:30.082Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:30.083Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:30.083Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:30.084Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:30.172Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:30.329Z appoptics:patching patched crypto 
2022-04-20T15:57:30.377Z appoptics:patching patched https 
2022-04-20T15:57:30.398Z appoptics:patching patched http 
2022-04-20T15:57:30.429Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:30.430Z appoptics:patching patched fs 
2022-04-20T15:57:30.440Z appoptics:patching patched pino 6.2.1
2022-04-20T15:57:30.449Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (241ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4314
         "time": 1650470250518
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4314
         "time": 1650470250536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4314
         "time": 1650470250544
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4314
         "time": 1650470250551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4314
         "time": 1650470250554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4314
         "time": 1650470250559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4314
         "time": 1650470250561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4314
         "time": 1650470250562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4314
         "time": 1650470250564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4314
         "time": 1650470250566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4314
         "time": 1650470250567
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4314
         "time": 1650470250569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4314
         "time": 1650470250674
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F9CF8CC06C488051B869454F4038664CE9B008BC-1"
         "pid": 4314
         "time": 1650470250703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:37.989Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:37.990Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:37.990Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:37.991Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:38.065Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:38.191Z appoptics:patching patched crypto 
2022-04-20T15:57:38.211Z appoptics:patching patched https 
2022-04-20T15:57:38.211Z appoptics:patching patched http 
2022-04-20T15:57:38.251Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:38.251Z appoptics:patching patched fs 
2022-04-20T15:57:38.258Z appoptics:patching patched pino 6.3.0
2022-04-20T15:57:38.262Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4336
         "time": 1650470258289
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4336
         "time": 1650470258297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4336
         "time": 1650470258301
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4336
         "time": 1650470258303
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4336
         "time": 1650470258306
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4336
         "time": 1650470258309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4336
         "time": 1650470258311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4336
         "time": 1650470258313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4336
         "time": 1650470258314
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4336
         "time": 1650470258316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4336
         "time": 1650470258317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4336
         "time": 1650470258319
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4336
         "time": 1650470258426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7B323215A5D87F61A98CF9D790471726D79CABFD-1"
         "pid": 4336
         "time": 1650470258456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:46.440Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:46.440Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:46.440Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:46.441Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:46.536Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:46.666Z appoptics:patching patched crypto 
2022-04-20T15:57:46.697Z appoptics:patching patched https 
2022-04-20T15:57:46.697Z appoptics:patching patched http 
2022-04-20T15:57:46.733Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:46.734Z appoptics:patching patched fs 
2022-04-20T15:57:46.740Z appoptics:patching patched pino 6.3.1
2022-04-20T15:57:46.744Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (190ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4358
         "time": 1650470266772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4358
         "time": 1650470266780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4358
         "time": 1650470266783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4358
         "time": 1650470266786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4358
         "time": 1650470266789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4358
         "time": 1650470266792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4358
         "time": 1650470266794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4358
         "time": 1650470266796
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4358
         "time": 1650470266797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4358
         "time": 1650470266800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4358
         "time": 1650470266801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4358
         "time": 1650470266804
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4358
         "time": 1650470266907
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5C27CB235062CA0F294F9FFE21E1FF2832AB494E-1"
         "pid": 4358
         "time": 1650470266938
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:57:53.781Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:57:53.781Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:57:53.781Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:57:53.782Z appoptics:debug using context provider: ace-context
2022-04-20T15:57:53.846Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:57:53.975Z appoptics:patching patched crypto 
2022-04-20T15:57:53.995Z appoptics:patching patched https 
2022-04-20T15:57:53.996Z appoptics:patching patched http 
2022-04-20T15:57:54.065Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:57:54.065Z appoptics:patching patched fs 
2022-04-20T15:57:54.076Z appoptics:patching patched pino 6.3.2
2022-04-20T15:57:54.082Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4380
         "time": 1650470274115
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4380
         "time": 1650470274125
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4380
         "time": 1650470274129
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4380
         "time": 1650470274132
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4380
         "time": 1650470274134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4380
         "time": 1650470274137
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4380
         "time": 1650470274139
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4380
         "time": 1650470274141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4380
         "time": 1650470274142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4380
         "time": 1650470274144
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4380
         "time": 1650470274145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4380
         "time": 1650470274148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4380
         "time": 1650470274251
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AB8FD0F94F8A4E0135B7288E61743C54CA6D799F-1"
         "pid": 4380
         "time": 1650470274280
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:01.958Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:01.958Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:01.958Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:01.959Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:02.030Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:02.180Z appoptics:patching patched crypto 
2022-04-20T15:58:02.201Z appoptics:patching patched https 
2022-04-20T15:58:02.201Z appoptics:patching patched http 
2022-04-20T15:58:02.269Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:02.270Z appoptics:patching patched fs 
2022-04-20T15:58:02.276Z appoptics:patching patched pino 6.4.0
2022-04-20T15:58:02.280Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4402
         "time": 1650470282309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64CE11E2311583BE6EEC7D9AD6509B2D97E2140C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4402
         "time": 1650470282317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC15D67256B1F9C65B3E55E05593F15FC0CC7DC4-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4402
         "time": 1650470282321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7728E2717D4FC086A6D8C6FA53FB4B21CA1DC7E4-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4402
         "time": 1650470282324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3765117B97354E849E4C8D76256F4EFB4FBBBB07-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4402
         "time": 1650470282327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4402
         "time": 1650470282330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4BDCF13F4609FDFFA93ABCD4A2E1F6D29E9161BF-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4402
         "time": 1650470282332
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "96CDCA9362299430F2A0A11792958578BC758C2B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4402
         "time": 1650470282333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4402
         "time": 1650470282335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C2759EF705793E6EF2828B963ACAED90AA0D8BA7-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4402
         "time": 1650470282336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4402
         "time": 1650470282338
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EC38F371EF24F397F607E70478488AD35E84318B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4402
         "time": 1650470282340
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0C29CD48296F6EF9D83FB89B89A5E94CD2853D53-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4402
         "time": 1650470282445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 33273548A5845D5BB49C43CA96139BA7142AF445-1"
         "pid": 4402
         "time": 1650470282474
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:09.970Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:09.971Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:09.971Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:09.972Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:10.041Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:10.185Z appoptics:patching patched crypto 
2022-04-20T15:58:10.204Z appoptics:patching patched https 
2022-04-20T15:58:10.205Z appoptics:patching patched http 
2022-04-20T15:58:10.249Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:10.250Z appoptics:patching patched fs 
2022-04-20T15:58:10.257Z appoptics:patching patched pino 6.4.1
2022-04-20T15:58:10.261Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4424
         "time": 1650470290288
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BDEF5A24E3B2F47832310FFBE278CF7AFEC60DCF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4424
         "time": 1650470290296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE391998FF157A78FDE904587812FD7EE59E42E7-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4424
         "time": 1650470290300
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B6E752254E4DB61D885B5BEC3BB742D747BF1F49-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4424
         "time": 1650470290303
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F833265041706D72F75509430D689A306AF780FA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4424
         "time": 1650470290306
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4424
         "time": 1650470290309
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "420CDAA52C826341BF971AC2EB5F8EB7CCF95553-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4424
         "time": 1650470290310
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E2D8185DDE5F5239B0CA1C662D7C24CA6783408-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4424
         "time": 1650470290312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4424
         "time": 1650470290313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A2B0155A04CAC8F3F6EEE4802EF9E8E9D0D8B44-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4424
         "time": 1650470290315
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4424
         "time": 1650470290316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35D4FBD8150E99C0C141FB62F813094329040C9F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4424
         "time": 1650470290318
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B1044E70A36E1ED53FFD8C55C887D66EDE582182-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4424
         "time": 1650470290423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1E41CEF71C67A4A70E6092D8907B3FB658BA400B-1"
         "pid": 4424
         "time": 1650470290450
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:17.349Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:17.350Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:17.350Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:17.351Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:17.419Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:17.581Z appoptics:patching patched crypto 
2022-04-20T15:58:17.601Z appoptics:patching patched https 
2022-04-20T15:58:17.602Z appoptics:patching patched http 
2022-04-20T15:58:17.642Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:17.643Z appoptics:patching patched fs 
2022-04-20T15:58:17.649Z appoptics:patching patched pino 6.5.0
2022-04-20T15:58:17.653Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4446
         "time": 1650470297682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9CFDE07D159ECD65A5B3729D47D3353B1359853C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4446
         "time": 1650470297690
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F4A6CCBE61B9C9D6A19538F63206E3C738D4B40-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4446
         "time": 1650470297693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "89331CDEE4CA3C2F1C8082968A12894DCC78CCF6-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4446
         "time": 1650470297696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB72CD76D365AA749500991B89376AFF2F081F2A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4446
         "time": 1650470297698
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4446
         "time": 1650470297701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40F41FB37866CEBDF2654BEA5AF9EE6266FA9E5C-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4446
         "time": 1650470297703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7353712EB1630E62E6AB663A7E2937B2B6A4F7C7-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4446
         "time": 1650470297704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4446
         "time": 1650470297705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "14C81CA6E5DB12BB41E0EEA56E5C0EA0B5AFC247-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4446
         "time": 1650470297707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4446
         "time": 1650470297708
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4BA906F859471BDDE3F98F4BB33D7B5F64899423-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4446
         "time": 1650470297710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5680DC73EE70FA033173420A50E6277DDD1CDFCC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4446
         "time": 1650470297815
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 86702753707074AC7D6FB8228EDA8A59C678EB6A-1"
         "pid": 4446
         "time": 1650470297842
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:25.369Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:25.370Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:25.370Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:25.371Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:25.441Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:25.574Z appoptics:patching patched crypto 
2022-04-20T15:58:25.594Z appoptics:patching patched https 
2022-04-20T15:58:25.609Z appoptics:patching patched http 
2022-04-20T15:58:25.641Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:25.642Z appoptics:patching patched fs 
2022-04-20T15:58:25.648Z appoptics:patching patched pino 6.5.1
2022-04-20T15:58:25.652Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4468
         "time": 1650470305681
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38B0FF49CB11BF4B2D5FFF5A2E6A752C4B372969-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4468
         "time": 1650470305689
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5DB56C2D247ADB55711F12EA29A63ADD26C70FE1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4468
         "time": 1650470305693
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF162F9354B6FE1362872966BDC7D719AFBC4954-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4468
         "time": 1650470305696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0FA2E2C86F16D6FD6E5FE93A1ABEEA4F5C04AD66-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4468
         "time": 1650470305699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4468
         "time": 1650470305702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "36ECF4E728340FF1210F9544D11FA8633F68C8C4-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4468
         "time": 1650470305704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F99785539D61578A7A8E50B22548F97A47442EE9-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4468
         "time": 1650470305706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4468
         "time": 1650470305707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C570F217275F013D517A678122B6C62C790FE22-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4468
         "time": 1650470305709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4468
         "time": 1650470305710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C50980D08E0E30AB4D17CF8EE006804B9DA8132-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4468
         "time": 1650470305712
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "922FF8D60241A39E5E6979A1327835E68ADFA046-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4468
         "time": 1650470305817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FE31D38F93A44CE2C422ED0D82CA2C584A2704F2-1"
         "pid": 4468
         "time": 1650470305846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:33.339Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:33.340Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:33.340Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:33.341Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:33.424Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:33.587Z appoptics:patching patched crypto 
2022-04-20T15:58:33.637Z appoptics:patching patched https 
2022-04-20T15:58:33.637Z appoptics:patching patched http 
2022-04-20T15:58:33.685Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:33.685Z appoptics:patching patched fs 
2022-04-20T15:58:33.693Z appoptics:patching patched pino 6.6.0
2022-04-20T15:58:33.698Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (199ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4490
         "time": 1650470313731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DE79536830B4435A2F31A426CBDC9E6CC2B134C0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4490
         "time": 1650470313742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "928EDE4DF6B71AF7139D049084387A682A6650F1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4490
         "time": 1650470313747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF88A1CC31133FA13C762B1782CD581910B8F32C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4490
         "time": 1650470313750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEE3AAADAD10246F5D1CCDBBCDC24387FC242152-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4490
         "time": 1650470313753
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4490
         "time": 1650470313758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C779BAFCB649EB2CF49B76E094FA6E193EB391FE-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4490
         "time": 1650470313761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AD07E38ECC419F47B199ACEA7F9225BCC502128-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4490
         "time": 1650470313762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4490
         "time": 1650470313764
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B5E80F2C70CBCE805D072FB717657525933DB02-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4490
         "time": 1650470313766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4490
         "time": 1650470313768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DB64C25206599EACA7D16278F3E4F04ECC06088-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4490
         "time": 1650470313770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D17E1063ACE35E9334B098594722DB90E5FA32EF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4490
         "time": 1650470313876
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B4F3595FC76CB8D80F9F968BB90705ACB66754D1-1"
         "pid": 4490
         "time": 1650470313904
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:40.831Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:40.832Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:40.832Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:40.832Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:40.901Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:41.058Z appoptics:patching patched crypto 
2022-04-20T15:58:41.080Z appoptics:patching patched https 
2022-04-20T15:58:41.081Z appoptics:patching patched http 
2022-04-20T15:58:41.129Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:41.129Z appoptics:patching patched fs 
2022-04-20T15:58:41.135Z appoptics:patching patched pino 6.6.1
2022-04-20T15:58:41.139Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4512
         "time": 1650470321167
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9B4EF7962F8F63800FFDA72AC208CB775040347-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4512
         "time": 1650470321176
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "321A890599742DBA4128356E8809158646546590-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4512
         "time": 1650470321180
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3248DB462DF1080FF1F4B2C1965066C06843143-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4512
         "time": 1650470321183
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "91C376D98B4E102DD9CE2B0E2667A8101ECB8EE1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4512
         "time": 1650470321185
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4512
         "time": 1650470321188
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "263C6359E83AD9F8837E16F462A2284C63D25571-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4512
         "time": 1650470321190
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59A92340F1E0999F6FEF1F68D6C5F253C3EC4CD1-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4512
         "time": 1650470321192
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4512
         "time": 1650470321193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "435C9ACAF290DFC427F0D9C3326D82D639E2938A-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4512
         "time": 1650470321195
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4512
         "time": 1650470321196
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2642C7C67B87191BF925161423EF047CA00DBCDA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4512
         "time": 1650470321198
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8AC2006FDBF6443F67DD62AFB347C9563F1F4DFF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4512
         "time": 1650470321304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 95CA3278AADA8E5740DB2EBD421F4BF7A38ADFC3-1"
         "pid": 4512
         "time": 1650470321334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:48.708Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:48.709Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:48.709Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:48.710Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:48.787Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:48.937Z appoptics:patching patched crypto 
2022-04-20T15:58:48.982Z appoptics:patching patched https 
2022-04-20T15:58:48.983Z appoptics:patching patched http 
2022-04-20T15:58:49.026Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:49.026Z appoptics:patching patched fs 
2022-04-20T15:58:49.033Z appoptics:patching patched pino 6.7.0
2022-04-20T15:58:49.037Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4534
         "time": 1650470329066
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CBFE16C2B2DE72A6F925C6B9B3A2DF5FE0163CA5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4534
         "time": 1650470329074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD641C367C773802058F0E11D39CD3D124F87A07-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4534
         "time": 1650470329079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D65B8960543B84EA7BB8ABB66B9F07FE85B29EDB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4534
         "time": 1650470329083
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F4F2F35F8B7544E42D258132CA362847407E4BA0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4534
         "time": 1650470329086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4534
         "time": 1650470329090
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6795AA8E405A9F40CEA4BC5188617FC00E3BCE73-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4534
         "time": 1650470329092
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "421D80E460032B6FDB5BADE8D248687389F128DF-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4534
         "time": 1650470329093
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4534
         "time": 1650470329095
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DAC4FC34437F8F1214ABDDB589D3C7813DFFEB66-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4534
         "time": 1650470329097
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4534
         "time": 1650470329098
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "686EA5B64BBE58F7ED1A3445638A133279D16764-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4534
         "time": 1650470329101
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FBC89B16A656814A4774F8CE38BB0BBCDFF328E5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4534
         "time": 1650470329204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8CD7BC2CBBEE9F18FB8DE84006981BC74345F399-1"
         "pid": 4534
         "time": 1650470329233
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:58:56.016Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:58:56.016Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:58:56.016Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:58:56.017Z appoptics:debug using context provider: ace-context
2022-04-20T15:58:56.111Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:58:56.250Z appoptics:patching patched crypto 
2022-04-20T15:58:56.270Z appoptics:patching patched https 
2022-04-20T15:58:56.296Z appoptics:patching patched http 
2022-04-20T15:58:56.340Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:58:56.340Z appoptics:patching patched fs 
2022-04-20T15:58:56.347Z appoptics:patching patched pino 6.8.0
2022-04-20T15:58:56.351Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4556
         "time": 1650470336380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "446055F373DA429F853A96699BCDD2D738A6AC48-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4556
         "time": 1650470336389
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8A318D212C6C9693179C282EDCF05DC4231978D8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4556
         "time": 1650470336392
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "233796A969DC8581C98AF91E56F6082E6C47CCA9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4556
         "time": 1650470336396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "35402156DDC7100B356E521A6562A832A6D401CE-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4556
         "time": 1650470336398
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4556
         "time": 1650470336401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "76E6AA443BACC0BC1BF26D48AF7C3586B6D8E338-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4556
         "time": 1650470336403
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "166A561CEC81761E1C1D7144F0C1F2BDF17B89FC-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4556
         "time": 1650470336405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4556
         "time": 1650470336407
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9722B1C88CAF3058AE35BD1515E5559239BC88B9-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4556
         "time": 1650470336408
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4556
         "time": 1650470336410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E90266420160E98601FB142B2F0EEB8F1506072C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4556
         "time": 1650470336412
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26CAD5525916904BED33B646F284E21C0C9EC61E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4556
         "time": 1650470336515
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FEDB185C30E51BD38ABF6B6701B2C50C9A3A7198-1"
         "pid": 4556
         "time": 1650470336543
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:59:04.279Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:59:04.279Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:59:04.280Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:59:04.280Z appoptics:debug using context provider: ace-context
2022-04-20T15:59:04.346Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:59:04.476Z appoptics:patching patched crypto 
2022-04-20T15:59:04.497Z appoptics:patching patched https 
2022-04-20T15:59:04.498Z appoptics:patching patched http 
2022-04-20T15:59:04.533Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:59:04.533Z appoptics:patching patched fs 
2022-04-20T15:59:04.539Z appoptics:patching patched pino 6.9.0
2022-04-20T15:59:04.544Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4578
         "time": 1650470344571
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EE0182D87A7F7C395DA7F2E7860B0A740A7F3364-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4578
         "time": 1650470344580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7BD818548A335458BF043C62A696A2A991D03252-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4578
         "time": 1650470344583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "097439B5B78F618F233E915E8969D56F8C88A423-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4578
         "time": 1650470344586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB582340EDE015EB5818BF22BA609325F7D44239-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4578
         "time": 1650470344589
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4578
         "time": 1650470344592
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DEC5C4A8810D6B2D678F70CF80D8AE41EDD0AF5-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4578
         "time": 1650470344594
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A1EB05ADB29E49C3FD1DA48C83D10285DCCC30AD-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4578
         "time": 1650470344595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4578
         "time": 1650470344597
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F93D80ECF70A92329A6CD124F9372AE823A119E9-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4578
         "time": 1650470344598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4578
         "time": 1650470344600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C814902FA7F2973E104F8C40A5ABC5DA3F09CC2-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4578
         "time": 1650470344601
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "23E588F4B2AD5E94B8D10E07C4426A70810AC4D1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4578
         "time": 1650470344705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9A88C0CF9F27379210E68A2753C72647780124BA-1"
         "pid": 4578
         "time": 1650470344732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:59:12.569Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:59:12.570Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:59:12.570Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:59:12.571Z appoptics:debug using context provider: ace-context
2022-04-20T15:59:12.639Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:59:12.768Z appoptics:patching patched crypto 
2022-04-20T15:59:12.790Z appoptics:patching patched https 
2022-04-20T15:59:12.791Z appoptics:patching patched http 
2022-04-20T15:59:12.829Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:59:12.829Z appoptics:patching patched fs 
2022-04-20T15:59:12.835Z appoptics:patching patched pino 6.10.0
2022-04-20T15:59:12.840Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4600
         "time": 1650470352868
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B267AC87E991B762BA5B8E09B72CC0E8C0EA5FAC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4600
         "time": 1650470352877
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B2BC0A57B03816766E63C677DE8FA02CB65081DF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4600
         "time": 1650470352881
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E661C05543BAD313D4E9E6DA8372C2AA0E49725-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4600
         "time": 1650470352884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDDB554210CF3E65A1F4A5BF6B4AE36B4C9E6B81-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4600
         "time": 1650470352886
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4600
         "time": 1650470352889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "12C88EB8F53A5316D8304F3A442A9C345A22F740-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4600
         "time": 1650470352891
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BC3EE3A468BF737F9987C15BB6214A76B91E567-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4600
         "time": 1650470352893
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4600
         "time": 1650470352894
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "84419E4D6D4970F8A7815090EB9412F375305994-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4600
         "time": 1650470352896
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4600
         "time": 1650470352898
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C92D98A9767B4D0B876BE7382AFEB749E27CAF6-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4600
         "time": 1650470352900
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0015AC798989468D22D8B793ECF13FC6CC06CD7D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4600
         "time": 1650470353004
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9430DDC8C6C69B4AB06CCBE1A97C53B4EC2AF859-1"
         "pid": 4600
         "time": 1650470353032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:59:19.706Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:59:19.707Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:59:19.707Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:59:19.707Z appoptics:debug using context provider: ace-context
2022-04-20T15:59:19.775Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:59:19.908Z appoptics:patching patched crypto 
2022-04-20T15:59:19.929Z appoptics:patching patched https 
2022-04-20T15:59:19.930Z appoptics:patching patched http 
2022-04-20T15:59:19.965Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:59:19.965Z appoptics:patching patched fs 
2022-04-20T15:59:19.972Z appoptics:patching patched pino 6.11.0
2022-04-20T15:59:19.975Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4622
         "time": 1650470360002
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFC936BFEA72B5D8B3DC092FE100A7E8921699E7-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4622
         "time": 1650470360010
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DF61D07F9614850FA630EB8E69AACB30F125C70-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4622
         "time": 1650470360014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A69DF972EB66C0DA0C0DE2E504209C931D705284-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4622
         "time": 1650470360017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B2C24DE6C4557BFE974619241A5D016687DDF52-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4622
         "time": 1650470360019
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4622
         "time": 1650470360022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4A922A5F7A654C11605BA20E11C77B782F24D67-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4622
         "time": 1650470360024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4F1C78025106EC58FC838B76D9E97E1F868AD56-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4622
         "time": 1650470360025
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4622
         "time": 1650470360027
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "033A4E89D55DBE2C43229E50D8B71598717D4814-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4622
         "time": 1650470360028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4622
         "time": 1650470360030
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CB5B34BC5A7235516135B3AFE2DE7A54E7DB49F8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4622
         "time": 1650470360032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "31FED684B2357356C353244F30BC3926DBE6781A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4622
         "time": 1650470360138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A49FAD1467747E0F29133CD207FDAB1F71355FA6-1"
         "pid": 4622
         "time": 1650470360168
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 27s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:59:47.704Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:59:47.704Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:59:47.704Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:59:47.705Z appoptics:debug using context provider: ace-context
2022-04-20T15:59:47.774Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:59:47.903Z appoptics:patching patched crypto 
2022-04-20T15:59:47.922Z appoptics:patching patched https 
2022-04-20T15:59:47.923Z appoptics:patching patched http 
2022-04-20T15:59:47.962Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:59:47.962Z appoptics:patching patched fs 
2022-04-20T15:59:47.968Z appoptics:patching patched pino 6.11.1
2022-04-20T15:59:47.972Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4644
         "time": 1650470387998
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "73B8156AAD2C64DD0E8BC73487273F4CAB87E0A9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4644
         "time": 1650470388006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B728124CFB9F1EE8A9C707A873C4F1D9279FD575-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4644
         "time": 1650470388010
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B19BFBD9292E2AF0C918E3E455DB897F055F68AF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4644
         "time": 1650470388013
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E9EF4D39F60F94B81CD5993042584DCF27221B0F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4644
         "time": 1650470388015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4644
         "time": 1650470388018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "683723E0738B4FCFFBE370943D81FB29345BE581-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4644
         "time": 1650470388020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9493FBDE691C1363C7DA1BEDA4956959616A91E0-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4644
         "time": 1650470388022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4644
         "time": 1650470388023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "014050EC1A4649BF1C1FBF20A2D64D8D0988DA53-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4644
         "time": 1650470388024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4644
         "time": 1650470388026
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADE9641EE4B7153BB0E81ADE08C19289436CD833-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4644
         "time": 1650470388028
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E821E75A569C4BF84B6670BCC0D397523B46A01B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4644
         "time": 1650470388133
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6F32842611AC83701B64E531D1B3FC2228631F60-1"
         "pid": 4644
         "time": 1650470388162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:59:55.304Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:59:55.304Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:59:55.304Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:59:55.305Z appoptics:debug using context provider: ace-context
2022-04-20T15:59:55.385Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:59:55.533Z appoptics:patching patched crypto 
2022-04-20T15:59:55.557Z appoptics:patching patched https 
2022-04-20T15:59:55.558Z appoptics:patching patched http 
2022-04-20T15:59:55.611Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:59:55.611Z appoptics:patching patched fs 
2022-04-20T15:59:55.618Z appoptics:patching patched pino 6.11.2
2022-04-20T15:59:55.622Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4666
         "time": 1650470395652
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99FC8958B86733923F0640A8E8FDBFFC5AFE925A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4666
         "time": 1650470395660
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7287A3CCB1A394033856BAD1A05EE8270F78B1EB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4666
         "time": 1650470395664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3A6F20007C76FD6E4885F5E63F46069C1068DD27-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4666
         "time": 1650470395667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60F46DFE19642477E3321529B67F5A33A5ECADC3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4666
         "time": 1650470395670
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4666
         "time": 1650470395673
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3F1D893B3CECD01A3F906E89950730767FEAB23-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4666
         "time": 1650470395675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33511F3E2B9BC6A2FCD9B23E6B177D754F3AC4F1-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4666
         "time": 1650470395677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4666
         "time": 1650470395678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4136A6527A683E289E0809F7129770E50FB743C8-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4666
         "time": 1650470395680
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4666
         "time": 1650470395681
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A98866D947498F5DF63654B304EAE6055ECA850A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4666
         "time": 1650470395683
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "32D12C942CA00EDF8E44BC90555E755F0EA0B6E9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4666
         "time": 1650470395788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D168BFE2CADE27D6ABBF19F3ACD23720C7E51D2D-1"
         "pid": 4666
         "time": 1650470395816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:03.387Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:03.388Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:03.388Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:03.389Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:03.455Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:03.581Z appoptics:patching patched crypto 
2022-04-20T16:00:03.600Z appoptics:patching patched https 
2022-04-20T16:00:03.601Z appoptics:patching patched http 
2022-04-20T16:00:03.641Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:03.641Z appoptics:patching patched fs 
2022-04-20T16:00:03.647Z appoptics:patching patched pino 6.11.3
2022-04-20T16:00:03.651Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4688
         "time": 1650470403678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "59757B34C5890BDAB541B5B27043C80BCDCAF9FC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4688
         "time": 1650470403686
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5B6E06FD6ACEEEB3F1B088ED6F355E7DC4892E8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4688
         "time": 1650470403691
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "70F2097EDDB0AE591EA0316DF129F7CE0C0F60E3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4688
         "time": 1650470403694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7C3B959E484BB64089D8AA6629700D119AE1404-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4688
         "time": 1650470403696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4688
         "time": 1650470403699
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07683A2531F981EB78AB3300B42AF536262F98E7-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4688
         "time": 1650470403701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E89AC54C8B9ECE30C762F90D99654F3FE8DD4271-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4688
         "time": 1650470403702
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4688
         "time": 1650470403704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD406A86ECFAA621E3114855B8623DE9C3503961-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4688
         "time": 1650470403705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4688
         "time": 1650470403707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "54A5D1A3782636B7E685DEA340F6A88D4D4B4BD0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4688
         "time": 1650470403709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EA3EAB7DAA8D9ADE9E4EED1085506FE4201E4812-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4688
         "time": 1650470403814
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 07144BD8A750D10797CD31F14B6763FE1BB12E26-1"
         "pid": 4688
         "time": 1650470403843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:11.599Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:11.600Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:11.600Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:11.601Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:11.670Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:11.801Z appoptics:patching patched crypto 
2022-04-20T16:00:11.823Z appoptics:patching patched https 
2022-04-20T16:00:11.824Z appoptics:patching patched http 
2022-04-20T16:00:11.869Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:11.869Z appoptics:patching patched fs 
2022-04-20T16:00:11.876Z appoptics:patching patched pino 6.12.0
2022-04-20T16:00:11.880Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4710
         "time": 1650470411910
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "855D3951D51926F9E5EDA9E6A789E03A48DE4376-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4710
         "time": 1650470411921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "131DE3B16CDA840D12918483AC9CF4F3901BC77A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4710
         "time": 1650470411926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C8A2C574003F4D5BD9D3551EB4941C4AD0CB5EC6-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4710
         "time": 1650470411929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A70C2C61585E2B8E81E210C27D92EFF148B28D03-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4710
         "time": 1650470411932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4710
         "time": 1650470411936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F55E9D6089460FDF028AA6BC88AD11F463464927-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4710
         "time": 1650470411939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BF116025A01F62E79BCB4A88D2B2130CA8547A80-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4710
         "time": 1650470411941
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4710
         "time": 1650470411942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8AD4B445D08DE63FDB3C04D7E31C222F5F3067B8-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4710
         "time": 1650470411943
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4710
         "time": 1650470411945
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E7FA0C12B350507E39F3CD7A3CB1D8DA0F01D76-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4710
         "time": 1650470411947
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C73B1AFC9D5AC5B34E78726A6D0EA458376B43EA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4710
         "time": 1650470412051
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C3B668EF35B3E42B20D1C85E3EDFBB0186138F86-1"
         "pid": 4710
         "time": 1650470412081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:19.144Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:19.145Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:19.145Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:19.146Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:19.241Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:19.426Z appoptics:patching patched crypto 
2022-04-20T16:00:19.446Z appoptics:patching patched https 
2022-04-20T16:00:19.455Z appoptics:patching patched http 
2022-04-20T16:00:19.494Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:19.494Z appoptics:patching patched fs 
2022-04-20T16:00:19.500Z appoptics:patching patched pino 6.13.0
2022-04-20T16:00:19.504Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (184ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4732
         "time": 1650470419532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2141F75A1AFB6B8A64D65B306F35E9A7C9589D5B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4732
         "time": 1650470419540
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8F936D575213359664C0CB9293FCC332F3A1B89A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4732
         "time": 1650470419544
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "90138B00B314482617AB3A35DC04D3132A15E414-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4732
         "time": 1650470419547
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B9BAEC629D6E4CAC793D7E659201FBC76DC148E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4732
         "time": 1650470419550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4732
         "time": 1650470419553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "52E2C8FB436CA5BABECFB598E977949DCFB4A79A-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4732
         "time": 1650470419555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A0730DC72EF4DB2DDF89A0AA40F214133846C021-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4732
         "time": 1650470419556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4732
         "time": 1650470419557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2792F6EB05DA11A08D391B6A4665FB2CA0AD562E-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4732
         "time": 1650470419559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4732
         "time": 1650470419561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AAE36EFA02EB15923555F7E0DDFBFF5B8216699E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4732
         "time": 1650470419563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6FCA47431AABAC58A0292C68A167B03FCF3250E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4732
         "time": 1650470419667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FCF84EE42E816B80C5C3E3DB6B01D2DD25299921-1"
         "pid": 4732
         "time": 1650470419695
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:27.359Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:27.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:27.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:27.361Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:27.428Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:27.555Z appoptics:patching patched crypto 
2022-04-20T16:00:27.575Z appoptics:patching patched https 
2022-04-20T16:00:27.575Z appoptics:patching patched http 
2022-04-20T16:00:27.615Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:27.616Z appoptics:patching patched fs 
2022-04-20T16:00:27.622Z appoptics:patching patched pino 6.13.1
2022-04-20T16:00:27.626Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4754
         "time": 1650470427653
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DD2956FD104013BA97B61D1E95C32FBC2B883489-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4754
         "time": 1650470427661
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9F37D8F66C5924FE8692EDC986FEAB36F05E1E7-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4754
         "time": 1650470427665
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CE9E80213853302A7595C01494C9A89C6553D1F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4754
         "time": 1650470427668
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA02F52DF56F308C1DFA38197A0E9DC9029B6589-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4754
         "time": 1650470427670
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4754
         "time": 1650470427673
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61E74FBB3F4BF6D6339FC5BA7DE891F274D90504-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4754
         "time": 1650470427675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "707060D3AE3406E652B378EBD32E531F1D4396A6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4754
         "time": 1650470427677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4754
         "time": 1650470427678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "067E6130B85AA3FD34F74839E2C98E7E808E627B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4754
         "time": 1650470427679
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4754
         "time": 1650470427681
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "41131646B7CF647D0EB5FE7285905AF32677B0FF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4754
         "time": 1650470427682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9818563550FFE7071373C7772C4BF766F9F4EA8B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4754
         "time": 1650470427787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 978176D70C0DD0CC38D336408830BD35C107D9B2-1"
         "pid": 4754
         "time": 1650470427817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:35.251Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:35.252Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:35.252Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:35.253Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:35.340Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:35.497Z appoptics:patching patched crypto 
2022-04-20T16:00:35.542Z appoptics:patching patched https 
2022-04-20T16:00:35.543Z appoptics:patching patched http 
2022-04-20T16:00:35.584Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:35.584Z appoptics:patching patched fs 
2022-04-20T16:00:35.592Z appoptics:patching patched pino 6.13.2
2022-04-20T16:00:35.596Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4776
         "time": 1650470435625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E56DA3F6F6BCD7F349B500045C65392C9F164F8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4776
         "time": 1650470435634
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C81FD9EA5F6C6000B455E6DCF14538A966254173-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4776
         "time": 1650470435638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A3043447B99E61492A4396611D15059F2283AD33-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4776
         "time": 1650470435641
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "801D7B5FFF33968A755B8B7197E08D41AB589E0B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4776
         "time": 1650470435644
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4776
         "time": 1650470435647
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A858C38720F6048484EA7E90A71F9179468F1893-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4776
         "time": 1650470435649
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "284108D18C4C553D8A65CDD11E8DE90867937BE6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4776
         "time": 1650470435651
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4776
         "time": 1650470435652
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADA32C1A73009F4A37177BBA1542320D82848800-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4776
         "time": 1650470435654
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4776
         "time": 1650470435655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F1C3BEECF7F7E625F1581988E2BF2A4EF9D10D9C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4776
         "time": 1650470435657
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B1E45F3937B8B124F16D777C6A18E982657EE1B4-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4776
         "time": 1650470435762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 49559144CDE3649B0D5007EE35B0090B121141CA-1"
         "pid": 4776
         "time": 1650470435793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:42.925Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:42.925Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:42.926Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:42.926Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:42.995Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:43.166Z appoptics:patching patched crypto 
2022-04-20T16:00:43.205Z appoptics:patching patched https 
2022-04-20T16:00:43.235Z appoptics:patching patched http 
2022-04-20T16:00:43.286Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:43.287Z appoptics:patching patched fs 
2022-04-20T16:00:43.294Z appoptics:patching patched pino 6.13.3
2022-04-20T16:00:43.298Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (199ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4798
         "time": 1650470443327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3C0717C0C6B122FD9449F2B64C050F654D5018F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4798
         "time": 1650470443335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BC34330642291DBC6F4F8D6D88CC3D895A1EE553-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4798
         "time": 1650470443339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30382907B8FC95F72CF2D86646615093D5AA8B70-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4798
         "time": 1650470443342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFADD31C88D6EDA3964A5F15882C49D7195347AA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4798
         "time": 1650470443346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4798
         "time": 1650470443357
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "93806AED5B9C6494B15B56309FF85A6BD8455E8B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4798
         "time": 1650470443359
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "736D7F6D0FD3F5952C626E4C8BF45D903504408E-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4798
         "time": 1650470443361
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4798
         "time": 1650470443362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A744C9530D0BBDA98B9C9DA3614717E2CA46ADBA-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4798
         "time": 1650470443364
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4798
         "time": 1650470443365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B556606566C204B9050101C0323EEF6571429A86-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4798
         "time": 1650470443367
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F7E4CF2D4604933DC8D482F1537731D8FB86E389-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4798
         "time": 1650470443472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8901B402468440FC2E37EF9E8355DC6F16B4FFCC-1"
         "pid": 4798
         "time": 1650470443502
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:51.116Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:51.117Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:51.117Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:51.118Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:51.187Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:51.319Z appoptics:patching patched crypto 
2022-04-20T16:00:51.338Z appoptics:patching patched https 
2022-04-20T16:00:51.339Z appoptics:patching patched http 
2022-04-20T16:00:51.375Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:51.375Z appoptics:patching patched fs 
2022-04-20T16:00:51.382Z appoptics:patching patched pino 6.13.4
2022-04-20T16:00:51.386Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4820
         "time": 1650470451416
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D8EA96157D43DD4A7FD81CC6E29CB81B900D3571-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4820
         "time": 1650470451425
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "97FDEAC32CF517FE9054A82061CEC4EFFE84C8BD-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4820
         "time": 1650470451429
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "022706A6447E779AE51C81A7C8E20148FEAE7A2F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4820
         "time": 1650470451432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F38AC1F8EE822DF96660A3C11C9E01064DED290-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4820
         "time": 1650470451434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4820
         "time": 1650470451438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "29F759819E852CA617B91DCC55DDD8C4F6242957-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4820
         "time": 1650470451440
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F47050A46244F4A1C105C65B7A0996D092107EA-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4820
         "time": 1650470451441
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4820
         "time": 1650470451442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5705BC1A6547093A359B1D7F20D9E432D0BE7E53-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4820
         "time": 1650470451444
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4820
         "time": 1650470451445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62D34E49D7A0ED146F4F7F48D9989E985EF32EDB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4820
         "time": 1650470451447
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "89B92376F3799C17981FD42E686CFDB88FA8D56C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4820
         "time": 1650470451551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 70E6F072E4DF7492C20407808CD48EB52A4D30BA-1"
         "pid": 4820
         "time": 1650470451581
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:00:58.421Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:00:58.422Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:00:58.422Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:00:58.423Z appoptics:debug using context provider: ace-context
2022-04-20T16:00:58.490Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:00:58.633Z appoptics:patching patched crypto 
2022-04-20T16:00:58.654Z appoptics:patching patched https 
2022-04-20T16:00:58.655Z appoptics:patching patched http 
2022-04-20T16:00:58.724Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:00:58.725Z appoptics:patching patched fs 
2022-04-20T16:00:58.733Z appoptics:patching patched pino 6.14.0
2022-04-20T16:00:58.737Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4842
         "time": 1650470458772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B542CD2A57194B04152354FC95FFFB5BAF77967-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4842
         "time": 1650470458780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0FF86E0B0347A3DB1CCDF0C3D741D9524F839155-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4842
         "time": 1650470458784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AECA0AFA373F548DFFABBB1125F572EB89332AB3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4842
         "time": 1650470458787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "43AF25F6123159DE61AA204430360AC33BA04C37-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4842
         "time": 1650470458790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4842
         "time": 1650470458793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "505B559E3B1BD5D38A7099355323746AB61180CD-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4842
         "time": 1650470458795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F14376BF3298B7BC21427A1508E79EA809923D66-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4842
         "time": 1650470458797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4842
         "time": 1650470458798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02D7BCC88DCC40BC0D5EC61C18B0AFCC88C99CD6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4842
         "time": 1650470458799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4842
         "time": 1650470458801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ACD7BEAB960C88F66BE4DDE44130B5DDD23D429D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4842
         "time": 1650470458803
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC76D7DC900859547A779D6E3970A2971CF89251-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4842
         "time": 1650470458906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DB988AC5415D700A217B32BD9DBF5C0C15D58E36-1"
         "pid": 4842
         "time": 1650470458935
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:07.042Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:07.043Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:07.043Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:07.044Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:07.117Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:07.250Z appoptics:patching patched crypto 
2022-04-20T16:01:07.270Z appoptics:patching patched https 
2022-04-20T16:01:07.271Z appoptics:patching patched http 
2022-04-20T16:01:07.315Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:07.316Z appoptics:patching patched fs 
2022-04-20T16:01:07.323Z appoptics:patching patched pino 7.0.0
2022-04-20T16:01:07.328Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4864
         "time": 1650470467357
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C810BD9551A1BC92E8DE2FA08ABDAC1FE9EB6877-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4864
         "time": 1650470467366
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "81B3FFEC71FC4174C6A602427190BAE0578FEBA3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4864
         "time": 1650470467370
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "86A80A6768F2F6DDB4BD9964CB4D05B70AB5FCF0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4864
         "time": 1650470467373
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "08821F9D68B34499976345347183F5C58FAA3240-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4864
         "time": 1650470467376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4864
         "time": 1650470467378
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6CCD260DE4008B737F2A264FC878B80AFF4C9F65-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4864
         "time": 1650470467380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "101072F292288902547E78BFEAAA5E2FDCC605F6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4864
         "time": 1650470467382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4864
         "time": 1650470467383
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B978E52FF9B9BB751930E8B94B0C675B3B9BF05A-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4864
         "time": 1650470467385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4864
         "time": 1650470467386
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DCD5A5B49B7C19C1D7EA278AB9EE310AAF7AB8C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4864
         "time": 1650470467388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "895BD99A28A891688DFB62F5B946CD68BB1342EF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4864
         "time": 1650470467494
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 97A1C2600FF734787D5DD06BB2EFE7E6421DFDF0-1"
         "pid": 4864
         "time": 1650470467527
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:15.691Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:15.691Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:15.691Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:15.692Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:15.761Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:15.892Z appoptics:patching patched crypto 
2022-04-20T16:01:15.912Z appoptics:patching patched https 
2022-04-20T16:01:15.913Z appoptics:patching patched http 
2022-04-20T16:01:15.953Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:15.953Z appoptics:patching patched fs 
2022-04-20T16:01:15.961Z appoptics:patching patched pino 7.0.1
2022-04-20T16:01:15.965Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4886
         "time": 1650470475993
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE45364B1BACE5176A66FC78725476FAE3BFAF68-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4886
         "time": 1650470476001
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E3412DE699F9B193F8534C2A36059E918EE8B45-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4886
         "time": 1650470476005
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ECDE9010B678DEEAF9E27E00BA5B9522293789D9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4886
         "time": 1650470476008
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D11C4595F0347066AA722DA0A63A98FBD0B1F35D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4886
         "time": 1650470476011
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4886
         "time": 1650470476014
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "56F680ADC01A7D31A33A24CC960BB29D9DB49AD8-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4886
         "time": 1650470476015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "698F89FF488544595E54F27A42BBFB87D5A21E5F-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4886
         "time": 1650470476017
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4886
         "time": 1650470476018
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "147357B7C186BB9E0553E184A50DC70C9C0B90B4-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4886
         "time": 1650470476020
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4886
         "time": 1650470476021
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "543E0A5C46A83CD62B22304EF8C103C87708A326-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4886
         "time": 1650470476023
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5059620CB89B1F5C9FD65F719631094EEEA1302E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4886
         "time": 1650470476127
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A178EF37E6ADD41D4C22ABC22314484C02A5E6B8-1"
         "pid": 4886
         "time": 1650470476156
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:22.879Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:22.880Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:22.880Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:22.881Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:22.949Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:23.081Z appoptics:patching patched crypto 
2022-04-20T16:01:23.101Z appoptics:patching patched https 
2022-04-20T16:01:23.102Z appoptics:patching patched http 
2022-04-20T16:01:23.145Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:23.145Z appoptics:patching patched fs 
2022-04-20T16:01:23.153Z appoptics:patching patched pino 7.0.2
2022-04-20T16:01:23.158Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4908
         "time": 1650470483187
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4BC00B521643FD903190E1D8A2511E19CB8013E6-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4908
         "time": 1650470483195
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ABBFAF08CDCDA40A33B7CFA711A6199B21EAA423-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4908
         "time": 1650470483199
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F08BAD6A3167FE9CDE98568EFC089E844EDE782-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4908
         "time": 1650470483202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F6BC789573DE891E1CED695E1FF1B95BFBE65BEA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4908
         "time": 1650470483204
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4908
         "time": 1650470483207
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "552F4B3D0DBB83D224F50295DF803A75E62947CD-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4908
         "time": 1650470483209
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DEB775FB11FB50BAEE50CDC4BA1B995C6929981-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4908
         "time": 1650470483210
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4908
         "time": 1650470483212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B38E45FD7EEC694BDC7693068350F262E4DA75F-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4908
         "time": 1650470483213
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4908
         "time": 1650470483214
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1EF8D8E34EB7147B2F3A0EC688F90E7DA9164FB9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4908
         "time": 1650470483216
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C35A1CA8D00090D76DF506E1780F3E362E1CC186-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4908
         "time": 1650470483321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E25EC1524F2E11F2B61C9CE3469167A1A5E07E1B-1"
         "pid": 4908
         "time": 1650470483348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:31.408Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:31.409Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:31.409Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:31.409Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:31.479Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:31.614Z appoptics:patching patched crypto 
2022-04-20T16:01:31.637Z appoptics:patching patched https 
2022-04-20T16:01:31.638Z appoptics:patching patched http 
2022-04-20T16:01:31.681Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:31.682Z appoptics:patching patched fs 
2022-04-20T16:01:31.695Z appoptics:patching patched pino 7.0.3
2022-04-20T16:01:31.699Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4930
         "time": 1650470491729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D9860F548ED056150A07B323BAEE4C03111BC8E0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4930
         "time": 1650470491737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "106544236B6D3A434261305A60791BC3C69667F3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4930
         "time": 1650470491741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "383D4AD816D06F64E6C54ED8969B2AF1A0CA7F91-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4930
         "time": 1650470491744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BD2F639E3D2CD4C8880A4A0D83B4E1EA67EF51DC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4930
         "time": 1650470491747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4930
         "time": 1650470491750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A6E5DC3ABF5576BE84AE53366ECC60AAA103C7D-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4930
         "time": 1650470491751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5E45313AA05337C515C67FF64A2BAD0AF65FD06E-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4930
         "time": 1650470491753
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4930
         "time": 1650470491754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1ED8F31163AF7143122046ECAE5A0E4DFE1A7949-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4930
         "time": 1650470491756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4930
         "time": 1650470491757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E3BCA6AEA04D5AEE142E66A2B5DB3F5D5FE3AA24-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4930
         "time": 1650470491759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "541ED3DB8F7200344B8E3722368EBBFEE22601D8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4930
         "time": 1650470491864
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5D9AE86E85FF91E7474F51D6B36C9A5EFF5917BD-1"
         "pid": 4930
         "time": 1650470491893
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:39.706Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:39.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:39.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:39.707Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:39.776Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:39.905Z appoptics:patching patched crypto 
2022-04-20T16:01:39.924Z appoptics:patching patched https 
2022-04-20T16:01:39.925Z appoptics:patching patched http 
2022-04-20T16:01:39.965Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:39.966Z appoptics:patching patched fs 
2022-04-20T16:01:39.974Z appoptics:patching patched pino 7.0.4
2022-04-20T16:01:39.978Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4952
         "time": 1650470500006
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C012490826D86DBD9DEBB81E4DDBBBBA23A8368-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4952
         "time": 1650470500015
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6A6AA9DC778621DD596DA36A1A2D81DDA1A4B9BB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4952
         "time": 1650470500019
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B386614FCBFCFC260F7F564981683B151B41557-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4952
         "time": 1650470500022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EE8100BFD5B570EDFFB1F01EDD79C86741D654B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4952
         "time": 1650470500024
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4952
         "time": 1650470500027
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "292A95FAF604EAC3FA1B588EFE27471D9787BA78-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4952
         "time": 1650470500029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "65161328002BA9DD8A69BF833D1C688B8E4BB704-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4952
         "time": 1650470500031
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4952
         "time": 1650470500032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "492F8088D7ED1062D16D838E1B5DE4C2A66B0534-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4952
         "time": 1650470500033
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4952
         "time": 1650470500035
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "49BB4E4AAF3352F916C293EDF73AC146F64E9E13-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4952
         "time": 1650470500037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1CE3B05A08D2CFB6F821846D4340066E35FBE04-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4952
         "time": 1650470500142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4FF6BEDC423A359F8005DF1C7A52D03C524C8E33-1"
         "pid": 4952
         "time": 1650470500171
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:47.289Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:47.289Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:47.289Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:47.290Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:47.356Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:47.485Z appoptics:patching patched crypto 
2022-04-20T16:01:47.505Z appoptics:patching patched https 
2022-04-20T16:01:47.505Z appoptics:patching patched http 
2022-04-20T16:01:47.546Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:47.546Z appoptics:patching patched fs 
2022-04-20T16:01:47.554Z appoptics:patching patched pino 7.0.5
2022-04-20T16:01:47.558Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4974
         "time": 1650470507586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "534BB9C2236626960CE20C410063039FC33F6A01-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4974
         "time": 1650470507595
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9DDC08470E5E37771FF6DE318223FA667591DCD9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4974
         "time": 1650470507598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9F4CFB17A124D64DFD7AE389576CC84DAD797DDB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4974
         "time": 1650470507601
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D731B97A05E3E7401310EBD170173C924B90969-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4974
         "time": 1650470507604
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4974
         "time": 1650470507607
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2FEA0F0570FB9A3FB558E7EB8C05F59F5E50E430-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4974
         "time": 1650470507609
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "37C0A69CC826EBFF9CCD51F2D203204B234154DD-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4974
         "time": 1650470507610
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4974
         "time": 1650470507612
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "67E3460445280AB8136E49974CE8FB68EC3F13F2-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4974
         "time": 1650470507613
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4974
         "time": 1650470507614
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D20D504CE6F3F0B786011D2AB45AA1D65611508-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4974
         "time": 1650470507616
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "135935752C502DB2C99C00C5BEC10AFD2A00B2AF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4974
         "time": 1650470507722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 92C048B88490D9F9F497B33F3D3B23DF92E9F468-1"
         "pid": 4974
         "time": 1650470507751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:01:55.219Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:01:55.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:01:55.219Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:01:55.220Z appoptics:debug using context provider: ace-context
2022-04-20T16:01:55.289Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:01:55.421Z appoptics:patching patched crypto 
2022-04-20T16:01:55.441Z appoptics:patching patched https 
2022-04-20T16:01:55.442Z appoptics:patching patched http 
2022-04-20T16:01:55.484Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:01:55.484Z appoptics:patching patched fs 
2022-04-20T16:01:55.493Z appoptics:patching patched pino 7.1.0
2022-04-20T16:01:55.497Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4996
         "time": 1650470515526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2ABC2A0B96F3D2F3C1FAD17F0CD49D760B48E782-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4996
         "time": 1650470515534
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADDF3F77E6182AF099A8A2E9AA2C6595B3CC5674-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4996
         "time": 1650470515538
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "932DD57B0BDD4FAB859E6605123CF9AF5F2C3900-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4996
         "time": 1650470515541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4839A9FB819A98A00B6572A81B8C75B365DEAAB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4996
         "time": 1650470515543
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4996
         "time": 1650470515546
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "413376C6986DFC6833EB0C73BCD58D846B4D32A2-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4996
         "time": 1650470515548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D81BB75F8D32B08FDBD7E2A95A1A924F767040CD-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4996
         "time": 1650470515550
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4996
         "time": 1650470515551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15427D1706F621D8E1D72799EFBD4FA724F74AAB-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4996
         "time": 1650470515552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 4996
         "time": 1650470515554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4096DB0BD0176D55A85C3822191DFA4AECD3F286-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4996
         "time": 1650470515555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8499BAD7A390D26179186E6C151C9435F8482296-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4996
         "time": 1650470515660
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 4D2E37D9046F89D280F793D8DD4D8B6B6184158E-1"
         "pid": 4996
         "time": 1650470515689
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:03.649Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:03.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:03.650Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:03.651Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:03.718Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:03.847Z appoptics:patching patched crypto 
2022-04-20T16:02:03.866Z appoptics:patching patched https 
2022-04-20T16:02:03.867Z appoptics:patching patched http 
2022-04-20T16:02:03.909Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:03.910Z appoptics:patching patched fs 
2022-04-20T16:02:03.919Z appoptics:patching patched pino 7.2.0
2022-04-20T16:02:03.923Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5018
         "time": 1650470523951
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87FAD062F3BE2E4D65C9DB2F9C96FA2788281F69-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5018
         "time": 1650470523959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD646F4E225D3CA91DD1DE9358026C7573888B1E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5018
         "time": 1650470523962
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6274F4A7C3BB1B965BAB7949EEAAD9B42083D4AB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5018
         "time": 1650470523965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60833CD35AEABAEEC83DB46CA7A441FE537DD36C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5018
         "time": 1650470523968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5018
         "time": 1650470523971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "076D895543DA942D033F63C63BABBC4A0A89E18B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5018
         "time": 1650470523973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E2DEC085DAEE15A26E8DF784B48BC2D813FBBD35-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5018
         "time": 1650470523974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5018
         "time": 1650470523976
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EBC0D28561CD7595E6E58BCE1BA475080A754A88-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5018
         "time": 1650470523977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5018
         "time": 1650470523979
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D9BF0B7B3DDEFB4B7B019D6FB801D954A9F2AC1F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5018
         "time": 1650470523980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A36EAD398C27F5AF1788A79162BC0999E84D25E5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5018
         "time": 1650470524084
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B83B9829D082D38A1A92C1E711401141C6A0CC15-1"
         "pid": 5018
         "time": 1650470524112
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:11.207Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:11.207Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:11.207Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:11.208Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:11.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:11.407Z appoptics:patching patched crypto 
2022-04-20T16:02:11.428Z appoptics:patching patched https 
2022-04-20T16:02:11.428Z appoptics:patching patched http 
2022-04-20T16:02:11.478Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:11.479Z appoptics:patching patched fs 
2022-04-20T16:02:11.496Z appoptics:patching patched pino 7.3.0
2022-04-20T16:02:11.500Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5040
         "time": 1650470531530
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CA3A37BDAB1C1A0C7EC862141462D679CDDC451-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5040
         "time": 1650470531541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0AE4AE064027109D3FEED07634D4D70BF2883EBC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5040
         "time": 1650470531545
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "57B5620715DE866263FF22B48C30590016057F63-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5040
         "time": 1650470531548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BE129AE2EA477DC25ADF73446AD7EF5E9FFA6B3C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5040
         "time": 1650470531551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5040
         "time": 1650470531554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C4F6B8534F03DDBC048735EBEE0EFC6003C46089-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5040
         "time": 1650470531556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E67588AA1E85409B479516C23004906BD688B6A-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5040
         "time": 1650470531557
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5040
         "time": 1650470531559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "308C3E5E6B0993BDA8AF20024BA319BA2B9C92DB-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5040
         "time": 1650470531560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5040
         "time": 1650470531562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "155061D6FCEF7B7FCFB6B27E693597209733DD86-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5040
         "time": 1650470531564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B3CD98D3C4D9074AF99EFCEA7CAC245D3C3021B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5040
         "time": 1650470531667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 30CDAC0FFFAC5D80D59761BBCDF402FC5F09F83A-1"
         "pid": 5040
         "time": 1650470531696
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:19.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:19.714Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:19.714Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:19.715Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:19.782Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:19.914Z appoptics:patching patched crypto 
2022-04-20T16:02:19.934Z appoptics:patching patched https 
2022-04-20T16:02:19.934Z appoptics:patching patched http 
2022-04-20T16:02:19.977Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:19.977Z appoptics:patching patched fs 
2022-04-20T16:02:19.986Z appoptics:patching patched pino 7.4.0
2022-04-20T16:02:19.990Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5062
         "time": 1650470540019
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A27C7E2D41664E1310367CBF095DAAC3499920A1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5062
         "time": 1650470540027
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A425AA773AEE0AC9D8968B04727D4118E341041B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5062
         "time": 1650470540031
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39E6D082EB11F4317A74FBB8BE1F42948EE290A0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5062
         "time": 1650470540034
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D630F59854769BA9FB061C445F491D7654112C3D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5062
         "time": 1650470540037
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5062
         "time": 1650470540040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B2B8AA8F405911D50ADA76D2848907B6CE320BC-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5062
         "time": 1650470540042
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "66FDA802296337D3739613A6B9AB91B7B805219B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5062
         "time": 1650470540043
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5062
         "time": 1650470540045
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2AA174EFD7459730CB85B50A810751F8A4FC7B5F-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5062
         "time": 1650470540046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5062
         "time": 1650470540048
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "918E7B43566E5DC0F5BFDE48A4F2D66F04D6F890-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5062
         "time": 1650470540050
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EF12D3BF9BE9C3FBE1A98A9BAD07D3D51B5B8D70-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5062
         "time": 1650470540153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 71016344AE6AC754BA612765CE78176136FB3FFC-1"
         "pid": 5062
         "time": 1650470540184
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:27.495Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:27.496Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:27.496Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:27.497Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:27.583Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:27.749Z appoptics:patching patched crypto 
2022-04-20T16:02:27.806Z appoptics:patching patched https 
2022-04-20T16:02:27.807Z appoptics:patching patched http 
2022-04-20T16:02:27.856Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:27.856Z appoptics:patching patched fs 
2022-04-20T16:02:27.867Z appoptics:patching patched pino 7.4.1
2022-04-20T16:02:27.872Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (202ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5084
         "time": 1650470547909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46265108480C574C5AA6E046FC8010827034FA0D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5084
         "time": 1650470547921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BBC6FD60F869294465E4772394E8D19649180FE7-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5084
         "time": 1650470547926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7669BE1A67C3A77450693DC688649961F9958DEA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5084
         "time": 1650470547929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6952D4740FC9C317D8E46AE2ECEFFC133059CB9D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5084
         "time": 1650470547933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5084
         "time": 1650470547937
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9CE6B557BB9BAB949BBEE0181E5A921D7FC836B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5084
         "time": 1650470547939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "365918EB261D98C2173F3D3BE1B1565F6DCFCA51-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5084
         "time": 1650470547941
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5084
         "time": 1650470547942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEFECAE3CD7ACA5BF28EA00BCD05439FE94D1DA3-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5084
         "time": 1650470547945
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5084
         "time": 1650470547946
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "19839B3CEE94EF4F6E3DCCD05BFB5F02C66AEF83-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5084
         "time": 1650470547948
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFBE03F8038121CE6709FD4174D2B067641AE1E3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5084
         "time": 1650470548052
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BB3AAD56155198E9002BE0DFDC8203E90C7205EB-1"
         "pid": 5084
         "time": 1650470548082
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:35.260Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:35.260Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:35.260Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:35.261Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:35.346Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:35.491Z appoptics:patching patched crypto 
2022-04-20T16:02:35.524Z appoptics:patching patched https 
2022-04-20T16:02:35.524Z appoptics:patching patched http 
2022-04-20T16:02:35.579Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:35.579Z appoptics:patching patched fs 
2022-04-20T16:02:35.589Z appoptics:patching patched pino 7.5.0
2022-04-20T16:02:35.594Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5106
         "time": 1650470555623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "73F855B14234CB9469C5657567AC2BF100F3C4ED-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5106
         "time": 1650470555631
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2DD34BD653F508AD8E0E5EB78097415D633CD4F1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5106
         "time": 1650470555635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7579E0BF1C3512F92F0B098A5B79A1660A5C5DEA-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5106
         "time": 1650470555638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E407D844535854ED42642674F1A491FD6370BA48-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5106
         "time": 1650470555641
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5106
         "time": 1650470555645
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D73848EE585C3556A77753A2773373461087FDA6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5106
         "time": 1650470555648
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02A5C505D9D871BA237633106E30D61EAC2FBC44-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5106
         "time": 1650470555650
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5106
         "time": 1650470555652
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C422467FF106F24FECEE314B6607F1B8B9E27432-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5106
         "time": 1650470555654
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5106
         "time": 1650470555656
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D0DA767C5EB70F53179307E3A7918DA4C2A7C0E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5106
         "time": 1650470555658
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DCB283CD730A5D7D09A9B91686BDB2C4CD4879BC-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5106
         "time": 1650470555763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A53E622C81859AF8FE7A253B21A0594CFE0AF617-1"
         "pid": 5106
         "time": 1650470555791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:43.648Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:43.649Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:43.649Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:43.649Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:43.718Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:43.851Z appoptics:patching patched crypto 
2022-04-20T16:02:43.884Z appoptics:patching patched https 
2022-04-20T16:02:43.885Z appoptics:patching patched http 
2022-04-20T16:02:43.917Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:43.917Z appoptics:patching patched fs 
2022-04-20T16:02:43.927Z appoptics:patching patched pino 7.5.1
2022-04-20T16:02:43.931Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5128
         "time": 1650470563959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85F7475FD0DE31206D5AC40EDBB6FD7278626F9A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5128
         "time": 1650470563968
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CEF773D3CE169C9F863B1F6C2FDA745DC776673E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5128
         "time": 1650470563972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DBF22107C63EF6342660E20FC220CA8C19E00D01-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5128
         "time": 1650470563975
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7CB5A4C395EE62905D8D817A8E027070052E1BD2-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5128
         "time": 1650470563978
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5128
         "time": 1650470563981
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF2C600AC6E74FED0E042296D9475020C71AF26E-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5128
         "time": 1650470563983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DC41A0C6EFB0FAEA1B1C2D633691ADD752BB1BB-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5128
         "time": 1650470563985
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5128
         "time": 1650470563986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EFFBD618B2CDC26B2B3371E1A0885C9202671A1D-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5128
         "time": 1650470563988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5128
         "time": 1650470563989
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87B69219E54393594ABBF8472C7FD15D7E144F43-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5128
         "time": 1650470563991
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FD027EEACB0514D5468CA2D6936D1567DBED35B3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5128
         "time": 1650470564097
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EEF1BD785195B2F659ACFFA2701D1A9B8774C3F2-1"
         "pid": 5128
         "time": 1650470564127
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:50.966Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:50.967Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:50.967Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:50.968Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:51.058Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:51.209Z appoptics:patching patched crypto 
2022-04-20T16:02:51.256Z appoptics:patching patched https 
2022-04-20T16:02:51.256Z appoptics:patching patched http 
2022-04-20T16:02:51.297Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:51.297Z appoptics:patching patched fs 
2022-04-20T16:02:51.306Z appoptics:patching patched pino 7.6.0
2022-04-20T16:02:51.311Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5150
         "time": 1650470571340
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EC6F8303AAD6B9D16D2350E053AECE6008D3BE1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5150
         "time": 1650470571349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A880652034F27F551BF48700F449C3094C2BBC5D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5150
         "time": 1650470571353
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D31AC21DFEB5E585267CCB6DD5C5E4261B4DD7E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5150
         "time": 1650470571356
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE41A7D029853D0599DBA15DF42939C8D2DDF10E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5150
         "time": 1650470571359
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5150
         "time": 1650470571362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A45C7DA0819380C7D3602D0FC3456FC770111BA2-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5150
         "time": 1650470571364
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2D62188931EFCCD7657F762F0428086C04B2B096-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5150
         "time": 1650470571366
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5150
         "time": 1650470571367
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "63E84592963565FE4767E346D974BCBC61D84633-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5150
         "time": 1650470571369
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5150
         "time": 1650470571370
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C5AE4BFD371E25B09AD83A47F56959CBC7F98C0F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5150
         "time": 1650470571372
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "944EDAB81449821BBFFBCECBA6313638F440E6EE-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5150
         "time": 1650470571476
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6834C2A8D5BFECA98D0936AB41C10CBB7D087513-1"
         "pid": 5150
         "time": 1650470571504
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:02:59.379Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:02:59.379Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:02:59.379Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:02:59.380Z appoptics:debug using context provider: ace-context
2022-04-20T16:02:59.445Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:02:59.578Z appoptics:patching patched crypto 
2022-04-20T16:02:59.598Z appoptics:patching patched https 
2022-04-20T16:02:59.598Z appoptics:patching patched http 
2022-04-20T16:02:59.630Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:02:59.631Z appoptics:patching patched fs 
2022-04-20T16:02:59.650Z appoptics:patching patched pino 7.6.1
2022-04-20T16:02:59.655Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5172
         "time": 1650470579682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60044504EA6344A35E43F064C0CBE026B1A5ED22-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5172
         "time": 1650470579690
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2A393F8BB9927B5F30A9E9FA5A67EAEA0F326D3A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5172
         "time": 1650470579694
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A691073526F36BCB95DE894CB48061A639648C1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5172
         "time": 1650470579697
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F9E5D74B8278CE3DE90CC8372F939A3F277B0CF0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5172
         "time": 1650470579700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5172
         "time": 1650470579703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "01A2E186ACA05EA66B032AE6BBF4F19E56C4054D-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5172
         "time": 1650470579704
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4D57ACB1D8EE164555A007805219BA7606B8114E-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5172
         "time": 1650470579706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5172
         "time": 1650470579707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99D3C31E779719BEF3C0AC69AECF15B998EF5CD3-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5172
         "time": 1650470579709
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5172
         "time": 1650470579710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02F1ED3E5CAB5EC3452699F910AA45AD7E20F4E2-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5172
         "time": 1650470579712
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F9A56E585281FE975C95CCF398F7BACECDFFC20-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5172
         "time": 1650470579817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D6000681C724B42B17C79A49706C9AA9126CF422-1"
         "pid": 5172
         "time": 1650470579847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:07.889Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:07.890Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:07.890Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:07.891Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:07.959Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:08.093Z appoptics:patching patched crypto 
2022-04-20T16:03:08.113Z appoptics:patching patched https 
2022-04-20T16:03:08.113Z appoptics:patching patched http 
2022-04-20T16:03:08.145Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:08.146Z appoptics:patching patched fs 
2022-04-20T16:03:08.161Z appoptics:patching patched pino 7.6.2
2022-04-20T16:03:08.166Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5194
         "time": 1650470588194
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "831E49E95E41151C9904C5AFD533F73A8D6660A8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5194
         "time": 1650470588202
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CD3C4DAA94D4E42F554D2B80C56F78E992EBE059-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5194
         "time": 1650470588206
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4A9CA648A7010692C5836D0C9A54AE06FBECD12-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5194
         "time": 1650470588209
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45D63DD1AD86C15E540B0BA567BFE98BFFA66864-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5194
         "time": 1650470588212
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5194
         "time": 1650470588215
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D492285C368E828CD641E465CE705D1F6A845197-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5194
         "time": 1650470588216
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "92697900F06DBFB45C5BB43A84E148E04EB1E057-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5194
         "time": 1650470588218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5194
         "time": 1650470588219
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5928A293BFEA40DB117DE9B7F5339FC9FA77D022-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5194
         "time": 1650470588221
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5194
         "time": 1650470588222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "10C6080625410529F898482C1FC8A543FB78D67C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5194
         "time": 1650470588224
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E40E3AD2694A28F9E3E1A2DCAD42681D0E7AF336-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5194
         "time": 1650470588329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DF5FB32304144C3F7C62D8DBFB70445E1D5BEAA4-1"
         "pid": 5194
         "time": 1650470588358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:15.443Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:15.444Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:15.444Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:15.445Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:15.512Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:15.639Z appoptics:patching patched crypto 
2022-04-20T16:03:15.658Z appoptics:patching patched https 
2022-04-20T16:03:15.659Z appoptics:patching patched http 
2022-04-20T16:03:15.691Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:15.695Z appoptics:patching patched fs 
2022-04-20T16:03:15.710Z appoptics:patching patched pino 7.6.3
2022-04-20T16:03:15.714Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5216
         "time": 1650470595741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "794B5EC4CA76AA851BBD01943AE08FC810D8A59D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5216
         "time": 1650470595750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "596890F6FD5820B04288BC8CE744D05BF5DD4FBF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5216
         "time": 1650470595754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77A49A52A82655967D5680A316869BC51456ED57-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5216
         "time": 1650470595757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D41FED0193D6B24C35C8AAFFAED2F56EC43896A2-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5216
         "time": 1650470595759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5216
         "time": 1650470595762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39784727C8AF954C8BC71A26DA71883E0D0F0667-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5216
         "time": 1650470595764
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F1CA3AC421F4C564D57CE4C251CF1CAB8FA6D8C6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5216
         "time": 1650470595766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5216
         "time": 1650470595767
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7DD5F1B781E012D4CC22114F7ADC0DEB9D527623-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5216
         "time": 1650470595768
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5216
         "time": 1650470595770
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D9F627F55B6C6766A30AC911FD36B635532D37E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5216
         "time": 1650470595772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4A75D081E0F3CAC6222F15BF2DE65754A8E63FCE-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5216
         "time": 1650470595875
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 69591B5FEF13379EDBCAF34DFE0142FCABC57054-1"
         "pid": 5216
         "time": 1650470595906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:23.405Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:23.406Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:23.406Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:23.407Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:23.474Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:23.605Z appoptics:patching patched crypto 
2022-04-20T16:03:23.625Z appoptics:patching patched https 
2022-04-20T16:03:23.625Z appoptics:patching patched http 
2022-04-20T16:03:23.664Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:23.664Z appoptics:patching patched fs 
2022-04-20T16:03:23.673Z appoptics:patching patched pino 7.6.4
2022-04-20T16:03:23.677Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5238
         "time": 1650470603711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F35D139131BA1A205606460E0C12221395C7EA0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5238
         "time": 1650470603721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9EF6A3AD508EA15AC9A08CEA390ED95F47BF56FB-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5238
         "time": 1650470603724
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5F4FC21E10A70ADDEFE5444A2FBB9603225C6F69-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5238
         "time": 1650470603728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "306E6F8F50C8997C1879C84A6AA9A84938CF2B91-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5238
         "time": 1650470603730
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5238
         "time": 1650470603733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BA42FC2828EBE3FEE6BDF66D6443DA9C522F0E45-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5238
         "time": 1650470603735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "08943F6DB9406D6CCB07ACEEA8C7AE881DFE636B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5238
         "time": 1650470603739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5238
         "time": 1650470603741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7AD81CD907FAC01D345602CF978F3BBBD7EA88E8-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5238
         "time": 1650470603742
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5238
         "time": 1650470603744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5BFFC273FFE6045AD57F517CC4218AB2D92B7815-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5238
         "time": 1650470603746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "05574C0B7E3BA2CCD2253C71DEE9C7BE580B6299-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5238
         "time": 1650470603850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 05834818E7C5D242AE8C81D22737F2CE00DE0CD3-1"
         "pid": 5238
         "time": 1650470603879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:31.551Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:31.552Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:31.552Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:31.552Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:31.626Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:31.765Z appoptics:patching patched crypto 
2022-04-20T16:03:31.785Z appoptics:patching patched https 
2022-04-20T16:03:31.785Z appoptics:patching patched http 
2022-04-20T16:03:31.824Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:31.825Z appoptics:patching patched fs 
2022-04-20T16:03:31.834Z appoptics:patching patched pino 7.6.5
2022-04-20T16:03:31.838Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5260
         "time": 1650470611866
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E8676EF38F5BAAD560A50CA465206521A43415F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5260
         "time": 1650470611875
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "737E455075C62861B87048412263865B44909731-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5260
         "time": 1650470611879
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "96D7BEEA977863920C7087F7BB3A2658256A6FD8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5260
         "time": 1650470611882
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "307005CB18EA6C6ED8A00BF88A0ABFB5100C338B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5260
         "time": 1650470611884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5260
         "time": 1650470611887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "219ECDF72CC987BD77058631B1388CB5FF17EE3A-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5260
         "time": 1650470611889
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "69ECFEFD6B86F6DCAEF423B4DAA9CCA4A8B48569-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5260
         "time": 1650470611891
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5260
         "time": 1650470611892
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DBD00F12FD260B79848473700FCD04FAEA5E4CB6-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5260
         "time": 1650470611894
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5260
         "time": 1650470611895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0FBC449ED5E4461FA9FFDEFEBAA6F15EE1492328-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5260
         "time": 1650470611897
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9E6D531B4F9A7DB00010947A0E8F823498E4A80-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5260
         "time": 1650470612003
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6957A3C8CAF81FFD3E31EF1CD306015EF00DC2F6-1"
         "pid": 5260
         "time": 1650470612032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:39.213Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:39.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:39.214Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:39.215Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:39.282Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:39.410Z appoptics:patching patched crypto 
2022-04-20T16:03:39.429Z appoptics:patching patched https 
2022-04-20T16:03:39.430Z appoptics:patching patched http 
2022-04-20T16:03:39.471Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:39.471Z appoptics:patching patched fs 
2022-04-20T16:03:39.480Z appoptics:patching patched pino 7.7.0
2022-04-20T16:03:39.484Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5282
         "time": 1650470619511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DC55C9EEAB19B8827DE5FB8FEA353424A45184D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5282
         "time": 1650470619520
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CF6C0539546843C558107CF524F8C01DD0ACBF5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5282
         "time": 1650470619523
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "656AB8B7BB9D08D775EDB2C8F5ABE8A67B4F7925-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5282
         "time": 1650470619526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "815B17F6AB80332645C31F96E2396C3B8E0F977B-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5282
         "time": 1650470619529
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5282
         "time": 1650470619532
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E053ACC24143FEB1151382373D08A55901168E4C-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5282
         "time": 1650470619533
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E36B5FB45099B9FAE15E4A48927E12B0391C5EBC-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5282
         "time": 1650470619535
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5282
         "time": 1650470619536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F1E38F02EE517D9A53267588A3593DC6AF7EF606-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5282
         "time": 1650470619538
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5282
         "time": 1650470619539
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9DC67C84963A3A38B4355958A2BC9FCA98925A46-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5282
         "time": 1650470619541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62587FF18468C573FB85E33887C96AD949901157-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5282
         "time": 1650470619645
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D9692EABD491F345BA18E16DBD6C7F0A23319B33-1"
         "pid": 5282
         "time": 1650470619675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:47.343Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:47.344Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:47.344Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:47.345Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:47.412Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:47.593Z appoptics:patching patched crypto 
2022-04-20T16:03:47.644Z appoptics:patching patched https 
2022-04-20T16:03:47.645Z appoptics:patching patched http 
2022-04-20T16:03:47.699Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:47.699Z appoptics:patching patched fs 
2022-04-20T16:03:47.708Z appoptics:patching patched pino 7.8.0
2022-04-20T16:03:47.713Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5304
         "time": 1650470627747
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1592A550698DE617DD1D1AD0DDCB8C51E8381BF5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5304
         "time": 1650470627756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D3269AE6621DD3B44F1649120CBF1D2AA653902-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5304
         "time": 1650470627760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD9B9CFA1FBF61FED72F4BAF6B0A6BA63336A359-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5304
         "time": 1650470627763
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C92F7FBA21E72E7B6691AF76D64758468D61B11-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5304
         "time": 1650470627766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5304
         "time": 1650470627769
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1009020C82371C8420984DBDB9E3C5CB806BD472-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5304
         "time": 1650470627771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E0C5DE65D13C9F839C31506DF87EE84F55AA45E9-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5304
         "time": 1650470627773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5304
         "time": 1650470627774
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA11C0D4D17289A7F3999EDFF7F357E92476B30B-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5304
         "time": 1650470627776
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5304
         "time": 1650470627777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "190778EAED6132C1CCFC225BEC42EBF46C73D20A-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5304
         "time": 1650470627779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E780E9AA10975FF78A9561C8F9A588DA681FD3DE-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5304
         "time": 1650470627884
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DB3C532B90ACC2743EF02AFF38200D3F8D86B090-1"
         "pid": 5304
         "time": 1650470627912
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:03:55.256Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:03:55.259Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:03:55.259Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:03:55.260Z appoptics:debug using context provider: ace-context
2022-04-20T16:03:55.389Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:03:55.589Z appoptics:patching patched crypto 
2022-04-20T16:03:55.609Z appoptics:patching patched https 
2022-04-20T16:03:55.610Z appoptics:patching patched http 
2022-04-20T16:03:55.650Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:03:55.651Z appoptics:patching patched fs 
2022-04-20T16:03:55.660Z appoptics:patching patched pino 7.8.1
2022-04-20T16:03:55.664Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5326
         "time": 1650470635692
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1436C2D83AFDB73E399CE142065F16C97B4721B1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5326
         "time": 1650470635701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0329F8AE4F1798E74FAC44BB524A45DCCED4522D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5326
         "time": 1650470635705
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADD2A1A9E2ABC2FFDC1CAFCC66A181D78F0FB7D3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5326
         "time": 1650470635708
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B90B912E48CC7303B2AC9F1E84BAB0535AD4BE8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5326
         "time": 1650470635710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5326
         "time": 1650470635713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6BCE2F9A63B73A1EAD25D245CE8E15F33BA21D38-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5326
         "time": 1650470635715
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "343B0D060D9C49D901F87F690CC9F0BFE8BB0251-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5326
         "time": 1650470635717
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5326
         "time": 1650470635718
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30BFA4285BAD1D2A36EB786214FCFD47C8CE20D1-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5326
         "time": 1650470635720
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5326
         "time": 1650470635721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CF5338C6A27204FBDDBDAF7CD47C4831570C06C2-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5326
         "time": 1650470635723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6CB16E38EC8C3345EDE1A6454F1A8C3235241962-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5326
         "time": 1650470635828
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 81A83A2F1DCABA986C50A3EA43131CF24D97D1DE-1"
         "pid": 5326
         "time": 1650470635857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:04:02.968Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:04:02.969Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:04:02.969Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:04:02.970Z appoptics:debug using context provider: ace-context
2022-04-20T16:04:03.038Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:04:03.169Z appoptics:patching patched crypto 
2022-04-20T16:04:03.188Z appoptics:patching patched https 
2022-04-20T16:04:03.189Z appoptics:patching patched http 
2022-04-20T16:04:03.246Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:04:03.247Z appoptics:patching patched fs 
2022-04-20T16:04:03.267Z appoptics:patching patched pino 7.9.0
2022-04-20T16:04:03.271Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (192ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5348
         "time": 1650470643308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C14DDD9C91871FE3CD85B0B9453FE5C7CBE5865D-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5348
         "time": 1650470643317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FDC1C4E8453E49A8AA48637E26A36E1C8AE8C12C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5348
         "time": 1650470643321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F43233384420FB3F380ABF475BDE1AAE7B8CB066-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5348
         "time": 1650470643324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FC5C0A12E431D2430CACEC578A93AB61C75DA31E-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5348
         "time": 1650470643327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5348
         "time": 1650470643330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BED35CB64CF8625EB29467B1EB584827DE88D4DA-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5348
         "time": 1650470643332
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "82DC8D5A28F01CF6108664ACBCC5F0327B57A5EE-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5348
         "time": 1650470643333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5348
         "time": 1650470643334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D506EA99B4C0B6DB7EF3371763F021483FFAEDB-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5348
         "time": 1650470643336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5348
         "time": 1650470643337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "06C9E08DE358AACEC199022C84D17CADFAED6EC9-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5348
         "time": 1650470643339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E2537FE705B3E9DA0F596AF319A5D1E507445C49-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5348
         "time": 1650470643443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 59BAA5B9F3A4A3B3E284AF11D23D8E82172BE166-1"
         "pid": 5348
         "time": 1650470643472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:04:11.506Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:04:11.507Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:04:11.507Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:04:11.508Z appoptics:debug using context provider: ace-context
2022-04-20T16:04:11.576Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:04:11.712Z appoptics:patching patched crypto 
2022-04-20T16:04:11.733Z appoptics:patching patched https 
2022-04-20T16:04:11.733Z appoptics:patching patched http 
2022-04-20T16:04:11.771Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:04:11.772Z appoptics:patching patched fs 
2022-04-20T16:04:11.781Z appoptics:patching patched pino 7.9.1
2022-04-20T16:04:11.785Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (189ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5370
         "time": 1650470651815
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "08A97D4152D7829CC3D1E01BC496E9A95651F416-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5370
         "time": 1650470651823
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D18E9C45305CA805ACDF7005D829857F9573C1C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5370
         "time": 1650470651827
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DE039D8A99F6F4D0F5550DE6F9195B28D0B5A12-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5370
         "time": 1650470651830
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C3A660C25233A742072D0528F155999D62585799-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5370
         "time": 1650470651833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5370
         "time": 1650470651836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CDACBDC399941F7A2B0A37D52328A85B9AD19725-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5370
         "time": 1650470651838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5CB65BD06BBB6D011F696BA3532F0626C0E27BB2-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5370
         "time": 1650470651840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5370
         "time": 1650470651841
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F90BF7EADCE1D87867B60EB25A0F3D895B946D89-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5370
         "time": 1650470651843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5370
         "time": 1650470651844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DC11E97D2CEC878BCE47BEF80EB6D582BC7896C-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5370
         "time": 1650470651846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F91EC828D6C4ADDF32AAFA9316D6577804B608E4-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5370
         "time": 1650470651951
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5058198DD415357EBA2C46B1013EB5314F2F8272-1"
         "pid": 5370
         "time": 1650470651980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:04:19.434Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:04:19.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:04:19.436Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:04:19.437Z appoptics:debug using context provider: ace-context
2022-04-20T16:04:19.509Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:04:19.664Z appoptics:patching patched crypto 
2022-04-20T16:04:19.707Z appoptics:patching patched https 
2022-04-20T16:04:19.708Z appoptics:patching patched http 
2022-04-20T16:04:19.761Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:04:19.761Z appoptics:patching patched fs 
2022-04-20T16:04:19.770Z appoptics:patching patched pino 7.9.2
2022-04-20T16:04:19.774Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5392
         "time": 1650470659804
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00EB99DA56429394E28065C4C98F42CB4D1F0B28-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5392
         "time": 1650470659812
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7D0E0FC1A0DA9D8623205CB9BA5452481C4FD098-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5392
         "time": 1650470659816
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6445C8F8E47B34481504163AF914E46DDB773D24-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5392
         "time": 1650470659819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BBF8FBC4F55813492674C3863066F4075CF2E0B0-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5392
         "time": 1650470659822
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5392
         "time": 1650470659825
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5901C1AD208E20F058FC244E345EB914A555069-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5392
         "time": 1650470659827
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "48152D1EB0FF8D2EBB22F31E256FCB148FC2949D-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5392
         "time": 1650470659828
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5392
         "time": 1650470659829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "268CE27545F313951600C4529A23C7F52A63ED61-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5392
         "time": 1650470659831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5392
         "time": 1650470659832
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C64193D84F86354A3766DE96F78AB51D98417E3-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5392
         "time": 1650470659834
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "55FEAA90CAAE5E82929B67F97AA04EC3571EA1D1-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5392
         "time": 1650470659938
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BCA632F5D665D7726851338A552448C5843EC335-1"
         "pid": 5392
         "time": 1650470659967
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T16:04:27.226Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T16:04:27.226Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T16:04:27.226Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T16:04:27.227Z appoptics:debug using context provider: ace-context
2022-04-20T16:04:27.294Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T16:04:27.427Z appoptics:patching patched crypto 
2022-04-20T16:04:27.465Z appoptics:patching patched https 
2022-04-20T16:04:27.466Z appoptics:patching patched http 
2022-04-20T16:04:27.513Z appoptics:patching fs.realpath - adding native method
2022-04-20T16:04:27.514Z appoptics:patching patched fs 
2022-04-20T16:04:27.523Z appoptics:patching patched pino 7.10.0
2022-04-20T16:04:27.527Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (197ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5414
         "time": 1650470667561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F65C1C401AE1106825C776DDD80A2D06E44BD0F-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5414
         "time": 1650470667570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A43C93E2EB0D9865655871ABDFB2B35614C4A0E5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5414
         "time": 1650470667574
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4E1671F074B4C13B53CC8E6875EDB8DE4E48C85-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5414
         "time": 1650470667577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7054C225AC1690060DFCD4A34B3AC0C7155F87D5-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5414
         "time": 1650470667580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5414
         "time": 1650470667583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B851B04D9B6043588326DC01F9E944AE6F9B5D7-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5414
         "time": 1650470667585
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44620522C07CE22C802DF996A5AF3913323ADCE4-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5414
         "time": 1650470667586
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5414
         "time": 1650470667588
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7867A109C079DD98ECB6FE73F7FFF62597BF7EA9-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5414
         "time": 1650470667590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "always insert"
         "pid": 5414
         "time": 1650470667597
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "98CE9589F170EB56B576A341D738A360D049C8A8-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5414
         "time": 1650470667599
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F7BBD39FCD8457797994073FD4F0893333432CF-1"
      +  }
         "hostname": "62529d2b92fa"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5414
         "time": 1650470667703
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 89EFCACAE4D23A48CB34DD05850D87A50B418319-1"
         "pid": 5414
         "time": 1650470667732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 28s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
