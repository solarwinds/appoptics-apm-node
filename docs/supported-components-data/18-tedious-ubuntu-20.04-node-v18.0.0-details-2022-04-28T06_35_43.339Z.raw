npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.1.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }
npm WARN deprecated sprintf@0.1.1: The sprintf package is deprecated in favor of sprintf-js.

added 2 packages, removed 73 packages, changed 3 packages, and audited 852 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:35:53.109Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:35:53.110Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:35:53.110Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:35:53.110Z appoptics:debug using context provider: ace-context
2022-04-28T06:35:53.182Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:35:53.447Z appoptics:patching patched crypto 
2022-04-28T06:35:53.478Z appoptics:patching patched https 
2022-04-28T06:35:53.479Z appoptics:patching patched http 
2022-04-28T06:35:53.564Z appoptics:patching patched tedious 0.1.5
2022-04-28T06:35:53.568Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.1.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 0.1.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.1.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:467:13)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:486:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.1.5
       "before each" hook for "should sanitize query with a database name":
     Uncaught TypeError: Cannot create property 'error@context' on string 'Login failed; one or more errorMessage events should have been emitted'
      at Connection.clsBind (node_modules/ace-context/context.js:266:33)
      at Connection.emit (node:events:527:28)
      at Connection.emitted (node_modules/emitter-listener/listener.js:134:21)
      at Connection.processLogin7Response (node_modules/tedious/lib/connection.js:592:12)
      at Connection.message (node_modules/tedious/lib/connection.js:153:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:465:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:419:20)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:59:21)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:02.489Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:02.490Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:02.490Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:02.490Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:02.570Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:02.780Z appoptics:patching patched crypto 
2022-04-28T06:36:02.827Z appoptics:patching patched https 
2022-04-28T06:36:02.827Z appoptics:patching patched http 
2022-04-28T06:36:02.914Z appoptics:patching patched tedious 0.2.1
2022-04-28T06:36:02.918Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) "before each" hook for "should support basic queries with no database name"


  3 passing (2s)
  7 failing

  1) probes.tedious 0.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.2.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.2.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.2.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:574:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:593:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.2.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:674:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:572:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

4 high severity vulnerabilities

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:12.705Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:12.705Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:12.705Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:12.705Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:12.777Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:12.923Z appoptics:patching patched crypto 
2022-04-28T06:36:12.943Z appoptics:patching patched https 
2022-04-28T06:36:12.943Z appoptics:patching patched http 
2022-04-28T06:36:13.019Z appoptics:patching patched tedious 0.2.2
2022-04-28T06:36:13.023Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 0.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.2.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.2.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.2.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 0.2.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 0.2.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 0.2.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 0.2.2
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

removed 1 package, changed 2 packages, and audited 851 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:23.871Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:23.871Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:23.871Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:23.872Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:23.936Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:24.055Z appoptics:patching patched crypto 
2022-04-28T06:36:24.075Z appoptics:patching patched https 
2022-04-28T06:36:24.076Z appoptics:patching patched http 
2022-04-28T06:36:24.155Z appoptics:patching patched tedious 0.2.3
2022-04-28T06:36:24.159Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 0.2.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:575:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:594:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:325:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:675:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:573:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:523:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.2.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 851 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:33.346Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:33.347Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:33.347Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:33.347Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:33.433Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:33.578Z appoptics:patching patched crypto 
2022-04-28T06:36:33.621Z appoptics:patching patched https 
2022-04-28T06:36:33.623Z appoptics:patching patched http 
2022-04-28T06:36:33.677Z appoptics:patching patched tedious 0.2.4
2022-04-28T06:36:33.682Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.2.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) "before each" hook for "should support basic queries with no database name"


  3 passing (2s)
  7 failing

  1) probes.tedious 0.2.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.2.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.2.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.2.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.2.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.2.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:607:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:626:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.2.4
       "before each" hook for "should support basic queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:339:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:707:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:605:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:537:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@0.3.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 851 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:43.818Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:43.819Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:43.819Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:43.819Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:43.886Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:44.023Z appoptics:patching patched crypto 
2022-04-28T06:36:44.063Z appoptics:patching patched https 
2022-04-28T06:36:44.063Z appoptics:patching patched http 
2022-04-28T06:36:44.118Z appoptics:patching patched tedious 0.3.0
2022-04-28T06:36:44.122Z appoptics:debug starting runtimeMetrics


  probes.tedious 0.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 0.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 0.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 0.3.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 0.3.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 0.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 0.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 0.3.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 0.3.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 0.3.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 0.3.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 0.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 0.3.0
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.0.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 851 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:36:55.972Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:36:55.973Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:36:55.973Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:36:55.973Z appoptics:debug using context provider: ace-context
2022-04-28T06:36:56.047Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:36:56.175Z appoptics:patching patched crypto 
2022-04-28T06:36:56.197Z appoptics:patching patched https 
2022-04-28T06:36:56.197Z appoptics:patching patched http 
2022-04-28T06:36:56.273Z appoptics:patching patched tedious 1.0.0
2022-04-28T06:36:56.277Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:608:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:627:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.0.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:340:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:89:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:66:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:708:35)
      at Connection.data (node_modules/tedious/lib/connection.js:146:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:606:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:538:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.1.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 1 package, changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:06.337Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:06.338Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:06.338Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:06.338Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:06.434Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:06.594Z appoptics:patching patched crypto 
2022-04-28T06:37:06.632Z appoptics:patching patched https 
2022-04-28T06:37:06.632Z appoptics:patching patched http 
2022-04-28T06:37:06.673Z appoptics:patching patched tedious 1.1.0
2022-04-28T06:37:06.677Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.1.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:790:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:15.524Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:15.525Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:15.525Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:15.525Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:15.607Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:15.756Z appoptics:patching patched crypto 
2022-04-28T06:37:15.804Z appoptics:patching patched https 
2022-04-28T06:37:15.804Z appoptics:patching patched http 
2022-04-28T06:37:15.859Z appoptics:patching patched tedious 1.2.0
2022-04-28T06:37:15.863Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:401:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:791:35)
      at Connection.data (node_modules/tedious/lib/connection.js:152:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:667:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:599:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:24.510Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:24.511Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:24.511Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:24.511Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:24.582Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:24.702Z appoptics:patching patched crypto 
2022-04-28T06:37:24.722Z appoptics:patching patched https 
2022-04-28T06:37:24.723Z appoptics:patching patched http 
2022-04-28T06:37:24.778Z appoptics:patching patched tedious 1.2.1
2022-04-28T06:37:24.782Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.2.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.2.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.2.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.2.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.2.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.2.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.2.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.2.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.2.1
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.2.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:35.967Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:35.968Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:35.968Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:35.968Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:36.037Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:36.156Z appoptics:patching patched crypto 
2022-04-28T06:37:36.177Z appoptics:patching patched https 
2022-04-28T06:37:36.177Z appoptics:patching patched http 
2022-04-28T06:37:36.229Z appoptics:patching patched tedious 1.2.2
2022-04-28T06:37:36.234Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.2.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.2.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.2.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.2.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.2.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.2.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.2.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.2.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.2.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.2.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:688:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:47.336Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:47.337Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:47.337Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:47.337Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:47.404Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:47.533Z appoptics:patching patched crypto 
2022-04-28T06:37:47.554Z appoptics:patching patched https 
2022-04-28T06:37:47.554Z appoptics:patching patched http 
2022-04-28T06:37:47.610Z appoptics:patching patched tedious 1.3.0
2022-04-28T06:37:47.614Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 1.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.3.0
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:37:57.597Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:37:57.598Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:37:57.598Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:37:57.598Z appoptics:debug using context provider: ace-context
2022-04-28T06:37:57.671Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:37:57.797Z appoptics:patching patched crypto 
2022-04-28T06:37:57.819Z appoptics:patching patched https 
2022-04-28T06:37:57.820Z appoptics:patching patched http 
2022-04-28T06:37:57.875Z appoptics:patching patched tedious 1.3.1
2022-04-28T06:37:57.879Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 1.3.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:06.814Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:06.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:06.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:06.814Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:06.881Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:07.001Z appoptics:patching patched crypto 
2022-04-28T06:38:07.021Z appoptics:patching patched https 
2022-04-28T06:38:07.022Z appoptics:patching patched http 
2022-04-28T06:38:07.076Z appoptics:patching patched tedious 1.3.2
2022-04-28T06:38:07.080Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.3.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:16.463Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:16.463Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:16.463Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:16.464Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:16.553Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:16.710Z appoptics:patching patched crypto 
2022-04-28T06:38:16.737Z appoptics:patching patched https 
2022-04-28T06:38:16.737Z appoptics:patching patched http 
2022-04-28T06:38:16.789Z appoptics:patching patched tedious 1.3.3
2022-04-28T06:38:16.793Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.3.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:25.522Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:25.522Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:25.522Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:25.522Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:25.590Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:25.710Z appoptics:patching patched crypto 
2022-04-28T06:38:25.731Z appoptics:patching patched https 
2022-04-28T06:38:25.732Z appoptics:patching patched http 
2022-04-28T06:38:25.783Z appoptics:patching patched tedious 1.3.4
2022-04-28T06:38:25.788Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.3.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.3.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.3.4
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.3.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:35.459Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:35.460Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:35.460Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:35.460Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:35.524Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:35.640Z appoptics:patching patched crypto 
2022-04-28T06:38:35.672Z appoptics:patching patched https 
2022-04-28T06:38:35.672Z appoptics:patching patched http 
2022-04-28T06:38:35.718Z appoptics:patching patched tedious 1.3.5
2022-04-28T06:38:35.722Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.3.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.3.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.3.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.3.5
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:44.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:44.607Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:44.607Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:44.608Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:44.685Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:44.820Z appoptics:patching patched crypto 
2022-04-28T06:38:44.855Z appoptics:patching patched https 
2022-04-28T06:38:44.855Z appoptics:patching patched http 
2022-04-28T06:38:44.903Z appoptics:patching patched tedious 1.4.0
2022-04-28T06:38:44.907Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:671:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:690:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.0
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:793:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:669:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:601:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:38:55.793Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:38:55.794Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:38:55.794Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:38:55.794Z appoptics:debug using context provider: ace-context
2022-04-28T06:38:55.871Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:38:55.988Z appoptics:patching patched crypto 
2022-04-28T06:38:56.009Z appoptics:patching patched https 
2022-04-28T06:38:56.009Z appoptics:patching patched http 
2022-04-28T06:38:56.060Z appoptics:patching patched tedious 1.4.1
2022-04-28T06:38:56.064Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.4.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.4.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.4.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.4.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:07.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:07.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:07.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:07.447Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:07.513Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:07.632Z appoptics:patching patched crypto 
2022-04-28T06:39:07.653Z appoptics:patching patched https 
2022-04-28T06:39:07.654Z appoptics:patching patched http 
2022-04-28T06:39:07.704Z appoptics:patching patched tedious 1.4.2
2022-04-28T06:39:07.708Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.4.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.4.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:16.908Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:16.909Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:16.909Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:16.910Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:17.047Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:17.205Z appoptics:patching patched crypto 
2022-04-28T06:39:17.258Z appoptics:patching patched https 
2022-04-28T06:39:17.259Z appoptics:patching patched http 
2022-04-28T06:39:17.302Z appoptics:patching patched tedious 1.4.3
2022-04-28T06:39:17.306Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.4.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.4.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.4.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.4.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.4.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.4.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.4.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.4.3
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:693:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.4.3
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:403:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:796:35)
      at Connection.data (node_modules/tedious/lib/connection.js:154:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:672:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:604:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 13s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:33.680Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:33.681Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:33.681Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:33.681Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:33.765Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:33.885Z appoptics:patching patched crypto 
2022-04-28T06:39:33.905Z appoptics:patching patched https 
2022-04-28T06:39:33.905Z appoptics:patching patched http 
2022-04-28T06:39:33.957Z appoptics:patching patched tedious 1.5.1
2022-04-28T06:39:33.961Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.5.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:714:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:734:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.5.1
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:848:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:712:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:640:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.2',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:45.985Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:45.985Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:45.985Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:45.985Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:46.051Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:46.183Z appoptics:patching patched crypto 
2022-04-28T06:39:46.204Z appoptics:patching patched https 
2022-04-28T06:39:46.204Z appoptics:patching patched http 
2022-04-28T06:39:46.270Z appoptics:patching patched tedious 1.5.2
2022-04-28T06:39:46.274Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.5.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.2
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:720:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:648:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.3',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:39:56.793Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:39:56.793Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:39:56.793Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:39:56.794Z appoptics:debug using context provider: ace-context
2022-04-28T06:39:56.860Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:39:56.977Z appoptics:patching patched crypto 
2022-04-28T06:39:57.010Z appoptics:patching patched https 
2022-04-28T06:39:57.010Z appoptics:patching patched http 
2022-04-28T06:39:57.058Z appoptics:patching patched tedious 1.5.3
2022-04-28T06:39:57.062Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.5.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.3
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.4',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:07.132Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:07.132Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:07.132Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:07.132Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:07.198Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:07.314Z appoptics:patching patched crypto 
2022-04-28T06:40:07.335Z appoptics:patching patched https 
2022-04-28T06:40:07.335Z appoptics:patching patched http 
2022-04-28T06:40:07.386Z appoptics:patching patched tedious 1.5.4
2022-04-28T06:40:07.390Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.5.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.4
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.4
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.4
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.4
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:721:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:742:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.5.4
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:433:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:856:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:719:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:647:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.5',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:18.381Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:18.382Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:18.382Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:18.382Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:18.465Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:18.598Z appoptics:patching patched crypto 
2022-04-28T06:40:18.644Z appoptics:patching patched https 
2022-04-28T06:40:18.645Z appoptics:patching patched http 
2022-04-28T06:40:18.707Z appoptics:patching patched tedious 1.5.5
2022-04-28T06:40:18.711Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.5.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:724:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:745:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.5
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:859:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:722:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:650:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.6',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:27.485Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:27.486Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:27.486Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:27.486Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:27.562Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:27.681Z appoptics:patching patched crypto 
2022-04-28T06:40:27.701Z appoptics:patching patched https 
2022-04-28T06:40:27.702Z appoptics:patching patched http 
2022-04-28T06:40:27.757Z appoptics:patching patched tedious 1.5.6
2022-04-28T06:40:27.760Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.5.6
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:727:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:748:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.6
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:727:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:748:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.6
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:436:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:862:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:725:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:653:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.7',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:37.172Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:37.173Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:37.173Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:37.173Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:37.240Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:37.358Z appoptics:patching patched crypto 
2022-04-28T06:40:37.380Z appoptics:patching patched https 
2022-04-28T06:40:37.380Z appoptics:patching patched http 
2022-04-28T06:40:37.436Z appoptics:patching patched tedious 1.5.7
2022-04-28T06:40:37.440Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.7
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) "before each" hook for "should truncate long queries with no database name"


  3 passing (3s)
  10 failing

  1) probes.tedious 1.5.7
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.7
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.7
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.7
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.7
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.7
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.7
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.7
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.5.7
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:731:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:752:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.5.7
       "before each" hook for "should truncate long queries with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:866:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:729:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:657:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.5.8',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:48.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:48.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:48.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:48.447Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:48.514Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:48.631Z appoptics:patching patched crypto 
2022-04-28T06:40:48.650Z appoptics:patching patched https 
2022-04-28T06:40:48.650Z appoptics:patching patched http 
2022-04-28T06:40:48.701Z appoptics:patching patched tedious 1.5.8
2022-04-28T06:40:48.705Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.5.8
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.5.8
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.5.8
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.5.8
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.5.8
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.5.8
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.5.8
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.5.8
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.5.8
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.6.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:40:59.453Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:40:59.454Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:40:59.454Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:40:59.454Z appoptics:debug using context provider: ace-context
2022-04-28T06:40:59.524Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:40:59.648Z appoptics:patching patched crypto 
2022-04-28T06:40:59.669Z appoptics:patching patched https 
2022-04-28T06:40:59.670Z appoptics:patching patched http 
2022-04-28T06:40:59.723Z appoptics:patching patched tedious 1.6.0
2022-04-28T06:40:59.727Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.6.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.6.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.6.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.6.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.6.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.6.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.6.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.6.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.6.0
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.7.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:11.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:11.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:11.654Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:11.654Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:11.720Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:11.842Z appoptics:patching patched crypto 
2022-04-28T06:41:11.863Z appoptics:patching patched https 
2022-04-28T06:41:11.863Z appoptics:patching patched http 
2022-04-28T06:41:11.918Z appoptics:patching patched tedious 1.7.0
2022-04-28T06:41:11.923Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.7.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.7.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.7.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.7.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.7.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.7.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.7.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.7.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.7.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.7.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.7.0
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:869:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.8.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:23.724Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:23.724Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:23.724Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:23.724Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:23.790Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:23.906Z appoptics:patching patched crypto 
2022-04-28T06:41:23.940Z appoptics:patching patched https 
2022-04-28T06:41:23.946Z appoptics:patching patched http 
2022-04-28T06:41:23.987Z appoptics:patching patched tedious 1.8.0
2022-04-28T06:41:23.991Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  5 failing

  1) probes.tedious 1.8.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.8.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.8.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.8.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:734:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:755:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.8.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:440:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:868:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:732:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:660:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.8.1',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:33.837Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:33.838Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:33.838Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:33.838Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:33.903Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:34.022Z appoptics:patching patched crypto 
2022-04-28T06:41:34.042Z appoptics:patching patched https 
2022-04-28T06:41:34.042Z appoptics:patching patched http 
2022-04-28T06:41:34.094Z appoptics:patching patched tedious 1.8.1
2022-04-28T06:41:34.098Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.8.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.8.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.8.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:741:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:762:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.8.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:876:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:739:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:667:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'tedious@1.9.0',
npm WARN EBADENGINE   required: { node: '0.6 || 0.7 || 0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:42.931Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:42.932Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:42.932Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:42.932Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:43.001Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:43.138Z appoptics:patching patched crypto 
2022-04-28T06:41:43.181Z appoptics:patching patched https 
2022-04-28T06:41:43.182Z appoptics:patching patched http 
2022-04-28T06:41:43.235Z appoptics:patching patched tedious 1.9.0
2022-04-28T06:41:43.239Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.9.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.9.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.9.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.9.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.9.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.9.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.9.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.9.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.9.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.9.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.9.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.9.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:744:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:765:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.9.0
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:447:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:879:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:742:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:670:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated sprintf@0.1.5: The sprintf package is deprecated in favor of sprintf-js.

changed 4 packages, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:41:54.303Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:41:54.303Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:41:54.303Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:41:54.304Z appoptics:debug using context provider: ace-context
2022-04-28T06:41:54.370Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:41:54.502Z appoptics:patching patched crypto 
2022-04-28T06:41:54.545Z appoptics:patching patched https 
2022-04-28T06:41:54.545Z appoptics:patching patched http 
2022-04-28T06:41:54.599Z appoptics:patching patched tedious 1.10.0
2022-04-28T06:41:54.604Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.10.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.10.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.10.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.10.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.10.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.10.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.10.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.10.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.10.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.10.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.10.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.10.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:751:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:774:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.10.0
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:453:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:888:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:749:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:677:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:05.740Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:05.741Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:05.741Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:05.741Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:05.817Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:05.948Z appoptics:patching patched crypto 
2022-04-28T06:42:06.011Z appoptics:patching patched https 
2022-04-28T06:42:06.011Z appoptics:patching patched http 
2022-04-28T06:42:06.052Z appoptics:patching patched tedious 1.11.0
2022-04-28T06:42:06.057Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.11.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.0
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:16.326Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:16.327Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:16.327Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:16.327Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:16.397Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:16.516Z appoptics:patching patched crypto 
2022-04-28T06:42:16.537Z appoptics:patching patched https 
2022-04-28T06:42:16.537Z appoptics:patching patched http 
2022-04-28T06:42:16.593Z appoptics:patching patched tedious 1.11.1
2022-04-28T06:42:16.597Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.11.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:456:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:891:35)
      at Connection.data (node_modules/tedious/lib/connection.js:176:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:680:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:59)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:25.481Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:25.481Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:25.481Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:25.481Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:25.562Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:25.697Z appoptics:patching patched crypto 
2022-04-28T06:42:25.723Z appoptics:patching patched https 
2022-04-28T06:42:25.724Z appoptics:patching patched http 
2022-04-28T06:42:25.772Z appoptics:patching patched tedious 1.11.2
2022-04-28T06:42:25.775Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.11.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.11.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.11.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.11.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.11.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:37.541Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:37.541Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:37.541Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:37.541Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:37.605Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:37.717Z appoptics:patching patched crypto 
2022-04-28T06:42:37.736Z appoptics:patching patched https 
2022-04-28T06:42:37.736Z appoptics:patching patched http 
2022-04-28T06:42:37.786Z appoptics:patching patched tedious 1.11.4
2022-04-28T06:42:37.790Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.11.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.11.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.11.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.11.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.11.4
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.11.4
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.11.4
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.11.4
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.11.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.11.4
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:754:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:777:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:59)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 852 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:49.222Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:49.223Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:49.223Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:49.223Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:49.290Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:49.409Z appoptics:patching patched crypto 
2022-04-28T06:42:49.429Z appoptics:patching patched https 
2022-04-28T06:42:49.430Z appoptics:patching patched http 
2022-04-28T06:42:49.482Z appoptics:patching patched tedious 1.11.5
2022-04-28T06:42:49.487Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.11.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.11.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:775:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:57)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.11.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:752:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:775:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:3:57)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.11.5
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:454:37)
      at Parser.emit (node:events:527:28)
      at Parser.nextToken (node_modules/tedious/lib/token/token-stream-parser.js:91:18)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:68:17)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:890:35)
      at Connection.data (node_modules/tedious/lib/connection.js:174:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:750:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:678:22)
      at MessageIO.emit (node:events:527:28)
      at MessageIO.eventData (node_modules/tedious/lib/message-io.js:56:12)
      at Socket.<anonymous> (node_modules/tedious/lib/message-io.js:3:57)
      at Socket.emit (node:events:527:28)
      at addChunk (node:internal/streams/readable:324:12)
      at readableAddChunk (node:internal/streams/readable:297:9)
      at Readable.push (node:internal/streams/readable:234:10)
      at TCP.onStreamRead (node:internal/stream_base_commons:190:23)
      at TCP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated core-js@1.2.7: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

added 6 packages, removed 1 package, changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:42:59.328Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:42:59.328Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:42:59.328Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:42:59.328Z appoptics:debug using context provider: ace-context
2022-04-28T06:42:59.396Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:42:59.519Z appoptics:patching patched crypto 
2022-04-28T06:42:59.540Z appoptics:patching patched https 
2022-04-28T06:42:59.540Z appoptics:patching patched http 
2022-04-28T06:42:59.637Z appoptics:patching patched tedious 1.12.0
2022-04-28T06:42:59.642Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.12.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:791:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:814:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:34:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.0
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:493:37)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:928:35)
      at Connection.data (node_modules/tedious/lib/connection.js:213:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:789:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:717:22)
      at MessageIO.emit (node:events:527:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:131:15)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:09.201Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:09.202Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:09.202Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:09.202Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:09.269Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:09.388Z appoptics:patching patched crypto 
2022-04-28T06:43:09.409Z appoptics:patching patched https 
2022-04-28T06:43:09.410Z appoptics:patching patched http 
2022-04-28T06:43:09.499Z appoptics:patching patched tedious 1.12.1
2022-04-28T06:43:09.504Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 1.12.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.12.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.12.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.12.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.12.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.12.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.12.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.12.1
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 857 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:21.404Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:21.405Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:21.405Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:21.405Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:21.474Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:21.627Z appoptics:patching patched crypto 
2022-04-28T06:43:21.648Z appoptics:patching patched https 
2022-04-28T06:43:21.649Z appoptics:patching patched http 
2022-04-28T06:43:21.736Z appoptics:patching patched tedious 1.12.2
2022-04-28T06:43:21.740Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.12.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.12.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.12.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.12.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.12.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.12.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:783:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:806:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.12.2
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:484:37)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:898:35)
      at Connection.data (node_modules/tedious/lib/connection.js:204:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:708:22)
      at MessageIO.emit (node:events:527:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:33.552Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:33.552Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:33.552Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:33.552Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:33.623Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:33.750Z appoptics:patching patched crypto 
2022-04-28T06:43:33.770Z appoptics:patching patched https 
2022-04-28T06:43:33.771Z appoptics:patching patched http 
2022-04-28T06:43:33.858Z appoptics:patching patched tedious 1.12.3
2022-04-28T06:43:33.862Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.12.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) "before each" hook for "should do nothing when disabled with no database name"


  3 passing (4s)
  12 failing

  1) probes.tedious 1.12.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.12.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.12.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.12.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.12.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.12.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.12.3
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.12.3
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.12.3
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.12.3
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.12.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:781:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:804:17)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:33:15)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 1.12.3
       "before each" hook for "should do nothing when disabled with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:482:37)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:40:24)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at Parser.callee$1$0$ (node_modules/tedious/lib/token/stream-parser.js:92:18)
      at tryCatch (node_modules/babel-runtime/regenerator/runtime.js:72:40)
      at Generator.invoke [as _invoke] (node_modules/babel-runtime/regenerator/runtime.js:334:22)
      at prototype.<computed> [as next] (node_modules/babel-runtime/regenerator/runtime.js:105:21)
      at StreamParser._transform (node_modules/tedious/lib/stream-parser.js:128:41)
      at Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:184:10)
      at Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:172:83)
      at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:428:64)
      at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:417:5)
      at Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:334:11)
      at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)
      at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:897:35)
      at Connection.data (node_modules/tedious/lib/connection.js:202:23)
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:779:59)
      at MessageIO.<anonymous> (node_modules/tedious/lib/connection.js:706:22)
      at MessageIO.emit (node:events:527:28)
      at ReadablePacketStream.<anonymous> (node_modules/tedious/lib/message-io.js:137:15)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:45.992Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:45.993Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:45.993Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:45.993Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:46.061Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:46.184Z appoptics:patching patched crypto 
2022-04-28T06:43:46.216Z appoptics:patching patched https 
2022-04-28T06:43:46.216Z appoptics:patching patched http 
2022-04-28T06:43:46.313Z appoptics:patching patched tedious 1.13.0
2022-04-28T06:43:46.318Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) "before each" hook for "should tag queries when feature is enabled"


  3 passing (3s)
  11 failing

  1) probes.tedious 1.13.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.13.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.13.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.13.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.13.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.13.0
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 1.13.0
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 1.13.0
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 1.13.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:43:58.352Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:43:58.352Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:43:58.352Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:43:58.352Z appoptics:debug using context provider: ace-context
2022-04-28T06:43:58.421Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:43:58.540Z appoptics:patching patched crypto 
2022-04-28T06:43:58.560Z appoptics:patching patched https 
2022-04-28T06:43:58.560Z appoptics:patching patched http 
2022-04-28T06:43:58.633Z appoptics:patching patched tedious 1.13.1
2022-04-28T06:43:58.637Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 1.13.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.1
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




changed 1 package, and audited 857 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:08.201Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:08.201Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:08.201Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:08.201Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:08.270Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:08.389Z appoptics:patching patched crypto 
2022-04-28T06:44:08.408Z appoptics:patching patched https 
2022-04-28T06:44:08.409Z appoptics:patching patched http 
2022-04-28T06:44:08.480Z appoptics:patching patched tedious 1.13.2
2022-04-28T06:44:08.484Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.13.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 1.13.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.13.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.13.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:561:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:585:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.13.2
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:21:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:256:66)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:51:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:82:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:49:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:18:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:175:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:172:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:17:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:417:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:405:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:402:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:416:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:142:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:116:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:139:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:415:12)




added 1 package, changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:17.755Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:17.756Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:17.756Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:17.756Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:17.823Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:17.959Z appoptics:patching patched crypto 
2022-04-28T06:44:17.987Z appoptics:patching patched https 
2022-04-28T06:44:17.987Z appoptics:patching patched http 
2022-04-28T06:44:18.087Z appoptics:patching patched tedious 1.14.0
2022-04-28T06:44:18.091Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.14.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) "before each" hook for "should support parameters with no database name"


  3 passing (3s)
  8 failing

  1) probes.tedious 1.14.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.14.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 1.14.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 1.14.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 1.14.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 1.14.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 1.14.0
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:521:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:545:19)
      at Socket.emit (node:events:539:35)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 1.14.0
       "before each" hook for "should support parameters with no database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:216:38)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:42:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:87:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:180:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:177:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:422:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:410:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:407:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:421:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:147:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:121:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:144:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:420:12)



npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

added 3 packages, removed 1 package, changed 3 packages, and audited 860 packages in 14s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:35.775Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:35.776Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:35.776Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:35.776Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:35.840Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:35.956Z appoptics:patching patched crypto 
2022-04-28T06:44:35.976Z appoptics:patching patched https 
2022-04-28T06:44:35.977Z appoptics:patching patched http 
2022-04-28T06:44:36.046Z appoptics:patching patched dns 
2022-04-28T06:44:36.076Z appoptics:patching patched tedious 1.15.0
2022-04-28T06:44:36.080Z appoptics:debug starting runtimeMetrics


  probes.tedious 1.15.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 1.15.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:674:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:698:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:591:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 1.15.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:358:38)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




removed 2 packages, changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:45.413Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:45.414Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:45.414Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:45.414Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:45.488Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:45.616Z appoptics:patching patched crypto 
2022-04-28T06:44:45.636Z appoptics:patching patched https 
2022-04-28T06:44:45.636Z appoptics:patching patched http 
2022-04-28T06:44:45.701Z appoptics:patching patched dns 
2022-04-28T06:44:45.730Z appoptics:patching patched tedious 2.0.0
2022-04-28T06:44:45.734Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.0.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:44:54.268Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:44:54.269Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:44:54.269Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:44:54.269Z appoptics:debug using context provider: ace-context
2022-04-28T06:44:54.350Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:44:54.489Z appoptics:patching patched crypto 
2022-04-28T06:44:54.539Z appoptics:patching patched https 
2022-04-28T06:44:54.539Z appoptics:patching patched http 
2022-04-28T06:44:54.624Z appoptics:patching patched dns 
2022-04-28T06:44:54.667Z appoptics:patching patched tedious 2.0.1
2022-04-28T06:44:54.671Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:689:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:713:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:606:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.0.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:373:38)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:102:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:195:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:192:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:438:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:425:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:422:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:437:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:162:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:136:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:159:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:436:12)




added 2 packages, changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:04.141Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:04.142Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:04.142Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:04.142Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:04.213Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:04.366Z appoptics:patching patched crypto 
2022-04-28T06:45:04.387Z appoptics:patching patched https 
2022-04-28T06:45:04.387Z appoptics:patching patched http 
2022-04-28T06:45:04.462Z appoptics:patching patched dns 
2022-04-28T06:45:04.496Z appoptics:patching patched tedious 2.1.0
2022-04-28T06:45:04.499Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:872:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:896:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:768:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:519:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




removed 2 packages, changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:13.584Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:13.585Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:13.585Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:13.586Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:13.656Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:13.793Z appoptics:patching patched crypto 
2022-04-28T06:45:13.834Z appoptics:patching patched https 
2022-04-28T06:45:13.835Z appoptics:patching patched http 
2022-04-28T06:45:13.890Z appoptics:patching patched dns 
2022-04-28T06:45:13.921Z appoptics:patching patched tedious 2.1.1
2022-04-28T06:45:13.926Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:23.168Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:23.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:23.169Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:23.169Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:23.234Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:23.349Z appoptics:patching patched crypto 
2022-04-28T06:45:23.370Z appoptics:patching patched https 
2022-04-28T06:45:23.370Z appoptics:patching patched http 
2022-04-28T06:45:23.435Z appoptics:patching patched dns 
2022-04-28T06:45:23.464Z appoptics:patching patched tedious 2.1.2
2022-04-28T06:45:23.469Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.2
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:32.894Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:32.894Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:32.894Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:32.894Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:32.964Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:33.085Z appoptics:patching patched crypto 
2022-04-28T06:45:33.105Z appoptics:patching patched https 
2022-04-28T06:45:33.106Z appoptics:patching patched http 
2022-04-28T06:45:33.170Z appoptics:patching patched dns 
2022-04-28T06:45:33.200Z appoptics:patching patched tedious 2.1.3
2022-04-28T06:45:33.204Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.3
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:41.671Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:41.672Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:41.672Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:41.672Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:41.737Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:41.861Z appoptics:patching patched crypto 
2022-04-28T06:45:41.882Z appoptics:patching patched https 
2022-04-28T06:45:41.882Z appoptics:patching patched http 
2022-04-28T06:45:41.950Z appoptics:patching patched dns 
2022-04-28T06:45:41.980Z appoptics:patching patched tedious 2.1.4
2022-04-28T06:45:41.985Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 2.1.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.1.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 2.1.4
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:45:51.266Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:45:51.267Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:45:51.267Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:45:51.267Z appoptics:debug using context provider: ace-context
2022-04-28T06:45:51.332Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:45:51.449Z appoptics:patching patched crypto 
2022-04-28T06:45:51.470Z appoptics:patching patched https 
2022-04-28T06:45:51.470Z appoptics:patching patched http 
2022-04-28T06:45:51.532Z appoptics:patching patched dns 
2022-04-28T06:45:51.562Z appoptics:patching patched tedious 2.1.5
2022-04-28T06:45:51.566Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.1.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.1.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.1.5
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:00.477Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:00.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:00.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:00.477Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:00.542Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:00.669Z appoptics:patching patched crypto 
2022-04-28T06:46:00.690Z appoptics:patching patched https 
2022-04-28T06:46:00.691Z appoptics:patching patched http 
2022-04-28T06:46:00.754Z appoptics:patching patched dns 
2022-04-28T06:46:00.782Z appoptics:patching patched tedious 2.2.0
2022-04-28T06:46:00.786Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:10.160Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:10.161Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:10.161Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:10.161Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:10.225Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:10.346Z appoptics:patching patched crypto 
2022-04-28T06:46:10.366Z appoptics:patching patched https 
2022-04-28T06:46:10.367Z appoptics:patching patched http 
2022-04-28T06:46:10.433Z appoptics:patching patched dns 
2022-04-28T06:46:10.461Z appoptics:patching patched tedious 2.2.1
2022-04-28T06:46:10.465Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:19.155Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:19.156Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:19.156Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:19.156Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:19.223Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:19.341Z appoptics:patching patched crypto 
2022-04-28T06:46:19.362Z appoptics:patching patched https 
2022-04-28T06:46:19.363Z appoptics:patching patched http 
2022-04-28T06:46:19.426Z appoptics:patching patched dns 
2022-04-28T06:46:19.456Z appoptics:patching patched tedious 2.2.2
2022-04-28T06:46:19.460Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.2
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:29.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:29.078Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:29.078Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:29.078Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:29.148Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:29.275Z appoptics:patching patched crypto 
2022-04-28T06:46:29.294Z appoptics:patching patched https 
2022-04-28T06:46:29.294Z appoptics:patching patched http 
2022-04-28T06:46:29.358Z appoptics:patching patched dns 
2022-04-28T06:46:29.390Z appoptics:patching patched tedious 2.2.3
2022-04-28T06:46:29.395Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.2.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:859:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:883:19)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:755:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.2.3
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:506:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 858 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:39.576Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:39.576Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:39.576Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:39.576Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:39.642Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:39.762Z appoptics:patching patched crypto 
2022-04-28T06:46:39.782Z appoptics:patching patched https 
2022-04-28T06:46:39.782Z appoptics:patching patched http 
2022-04-28T06:46:39.913Z appoptics:patching patched dns 
2022-04-28T06:46:40.016Z appoptics:patching patched tedious 2.2.4
2022-04-28T06:46:40.021Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.2.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.2.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.2.4
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, changed 1 package, and audited 859 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:49.224Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:49.227Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:49.227Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:49.227Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:49.315Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:49.472Z appoptics:patching patched crypto 
2022-04-28T06:46:49.509Z appoptics:patching patched https 
2022-04-28T06:46:49.510Z appoptics:patching patched http 
2022-04-28T06:46:49.578Z appoptics:patching patched dns 
2022-04-28T06:46:49.635Z appoptics:patching patched tedious 2.3.0
2022-04-28T06:46:49.639Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.3.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:46:58.465Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:46:58.465Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:46:58.465Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:46:58.466Z appoptics:debug using context provider: ace-context
2022-04-28T06:46:58.547Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:46:58.686Z appoptics:patching patched crypto 
2022-04-28T06:46:58.732Z appoptics:patching patched https 
2022-04-28T06:46:58.746Z appoptics:patching patched http 
2022-04-28T06:46:58.801Z appoptics:patching patched dns 
2022-04-28T06:46:58.846Z appoptics:patching patched tedious 2.3.1
2022-04-28T06:46:58.851Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.3.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:865:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:889:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:761:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.3.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:507:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, removed 1 package, changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:08.929Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:08.930Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:08.930Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:08.930Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:09.013Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:09.148Z appoptics:patching patched crypto 
2022-04-28T06:47:09.191Z appoptics:patching patched https 
2022-04-28T06:47:09.192Z appoptics:patching patched http 
2022-04-28T06:47:09.271Z appoptics:patching patched dns 
2022-04-28T06:47:09.334Z appoptics:patching patched tedious 2.4.0
2022-04-28T06:47:09.339Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:176:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.4.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:18.697Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:18.698Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:18.698Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:18.698Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:18.786Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:18.917Z appoptics:patching patched crypto 
2022-04-28T06:47:18.953Z appoptics:patching patched https 
2022-04-28T06:47:18.954Z appoptics:patching patched http 
2022-04-28T06:47:19.035Z appoptics:patching patched dns 
2022-04-28T06:47:19.078Z appoptics:patching patched tedious 2.5.0
2022-04-28T06:47:19.082Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.5.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.5.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:27.969Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:27.969Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:27.969Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:27.969Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:28.036Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:28.157Z appoptics:patching patched crypto 
2022-04-28T06:47:28.178Z appoptics:patching patched https 
2022-04-28T06:47:28.178Z appoptics:patching patched http 
2022-04-28T06:47:28.246Z appoptics:patching patched dns 
2022-04-28T06:47:28.289Z appoptics:patching patched tedious 2.5.1
2022-04-28T06:47:28.293Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.5.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.5.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:992:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1016:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:888:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.5.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:634:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:37.775Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:37.775Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:37.775Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:37.776Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:37.842Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:37.966Z appoptics:patching patched crypto 
2022-04-28T06:47:37.987Z appoptics:patching patched https 
2022-04-28T06:47:37.988Z appoptics:patching patched http 
2022-04-28T06:47:38.057Z appoptics:patching patched dns 
2022-04-28T06:47:38.105Z appoptics:patching patched tedious 2.6.0
2022-04-28T06:47:38.110Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  4 failing

  1) probes.tedious 2.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 2.6.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:47.938Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:47.939Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:47.939Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:47.939Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:48.005Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:48.122Z appoptics:patching patched crypto 
2022-04-28T06:47:48.142Z appoptics:patching patched https 
2022-04-28T06:47:48.142Z appoptics:patching patched http 
2022-04-28T06:47:48.209Z appoptics:patching patched dns 
2022-04-28T06:47:48.251Z appoptics:patching patched tedious 2.6.1
2022-04-28T06:47:48.255Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.6.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:47:56.763Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:47:56.764Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:47:56.764Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:47:56.764Z appoptics:debug using context provider: ace-context
2022-04-28T06:47:56.831Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:47:56.958Z appoptics:patching patched crypto 
2022-04-28T06:47:56.980Z appoptics:patching patched https 
2022-04-28T06:47:56.980Z appoptics:patching patched http 
2022-04-28T06:47:57.047Z appoptics:patching patched dns 
2022-04-28T06:47:57.089Z appoptics:patching patched tedious 2.6.2
2022-04-28T06:47:57.094Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.6.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:994:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1018:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.2
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:636:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 859 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:06.104Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:06.105Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:06.105Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:06.105Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:06.173Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:06.331Z appoptics:patching patched crypto 
2022-04-28T06:48:06.376Z appoptics:patching patched https 
2022-04-28T06:48:06.376Z appoptics:patching patched http 
2022-04-28T06:48:06.453Z appoptics:patching patched dns 
2022-04-28T06:48:06.511Z appoptics:patching patched tedious 2.6.3
2022-04-28T06:48:06.515Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.6.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.3
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




added 1 package, changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:16.035Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:16.036Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:16.036Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:16.036Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:16.103Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:16.220Z appoptics:patching patched crypto 
2022-04-28T06:48:16.239Z appoptics:patching patched https 
2022-04-28T06:48:16.239Z appoptics:patching patched http 
2022-04-28T06:48:16.305Z appoptics:patching patched dns 
2022-04-28T06:48:16.347Z appoptics:patching patched tedious 2.6.4
2022-04-28T06:48:16.352Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.6.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) "before each" hook for "should sanitize query with a database name"


  3 passing (1s)
  3 failing

  1) probes.tedious 2.6.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.6.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1006:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1030:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:890:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 2.6.4
       "before each" hook for "should sanitize query with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:628:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:26.330Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:26.331Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:26.331Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:26.331Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:26.405Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:26.530Z appoptics:patching patched crypto 
2022-04-28T06:48:26.550Z appoptics:patching patched https 
2022-04-28T06:48:26.550Z appoptics:patching patched http 
2022-04-28T06:48:26.623Z appoptics:patching patched dns 
2022-04-28T06:48:26.670Z appoptics:patching patched tedious 2.7.0
2022-04-28T06:48:26.674Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1014:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1038:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:897:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.7.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:35.828Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:35.828Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:35.828Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:35.828Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:35.897Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:36.027Z appoptics:patching patched crypto 
2022-04-28T06:48:36.054Z appoptics:patching patched https 
2022-04-28T06:48:36.054Z appoptics:patching patched http 
2022-04-28T06:48:36.129Z appoptics:patching patched dns 
2022-04-28T06:48:36.176Z appoptics:patching patched tedious 2.7.1
2022-04-28T06:48:36.180Z appoptics:debug starting runtimeMetrics


  probes.tedious 2.7.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 2.7.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1014:28)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1038:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:897:16
      at Socket.onConnect (node_modules/tedious/lib/connector.js:177:9)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 2.7.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:635:33)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:54:15)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:110:18)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:203:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:200:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:446:11
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:433:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:430:12)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:445:17
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:170:9
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:144:9)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:167:12)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:444:12)




changed 1 package, and audited 860 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:44.845Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:44.845Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:44.845Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:44.845Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:44.930Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:45.086Z appoptics:patching patched crypto 
2022-04-28T06:48:45.146Z appoptics:patching patched https 
2022-04-28T06:48:45.147Z appoptics:patching patched http 
2022-04-28T06:48:45.187Z appoptics:patching patched dns 
2022-04-28T06:48:45.254Z appoptics:patching patched tedious 3.0.0
2022-04-28T06:48:45.262Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 3.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:952:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:974:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:857:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:147:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 3.0.0
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:12:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:601:29)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:291:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:278:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:245:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:148:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:78:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:46:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:152:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:149:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:332:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:324:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:321:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:331:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:128:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:108:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:125:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:330:10)




removed 5 packages, changed 4 packages, and audited 855 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:48:54.105Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:48:54.106Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:48:54.106Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:48:54.106Z appoptics:debug using context provider: ace-context
2022-04-28T06:48:54.172Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:48:54.307Z appoptics:patching patched crypto 
2022-04-28T06:48:54.341Z appoptics:patching patched https 
2022-04-28T06:48:54.342Z appoptics:patching patched http 
2022-04-28T06:48:54.390Z appoptics:patching patched dns 
2022-04-28T06:48:54.440Z appoptics:patching patched tedious 3.0.1
2022-04-28T06:48:54.444Z appoptics:debug starting runtimeMetrics


  probes.tedious 3.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) "before each" hook for "should support parameters with a database name"


  3 passing (1s)
  2 failing

  1) probes.tedious 3.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:999:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1022:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:902:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 3.0.1
       "before each" hook for "should support parameters with a database name":
     Uncaught ConnectionError: Login failed for user ''.
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Parser.<anonymous> (node_modules/tedious/lib/connection.js:654:29)
      at Parser.emit (node:events:527:28)
      at Parser.<anonymous> (node_modules/tedious/lib/token/token-stream-parser.js:27:14)
      at Parser.emit (node:events:527:28)
      at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:298:12)
      at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:280:11)
      at Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:241:10)
      at Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:139:32)
      at doneParsing (node_modules/tedious/lib/token/stream-parser.js:80:14)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:13:19
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:153:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:150:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/infoerror-token-parser.js:12:90
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:322:9
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:314:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:311:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:321:12
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/token/stream-parser.js:129:7
      at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:109:7)
      at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:126:10)
      at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:320:10)




changed 1 package, and audited 855 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:03.307Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:03.309Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:03.309Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:03.309Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:03.375Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:03.490Z appoptics:patching patched crypto 
2022-04-28T06:49:03.509Z appoptics:patching patched https 
2022-04-28T06:49:03.510Z appoptics:patching patched http 
2022-04-28T06:49:03.547Z appoptics:patching patched dns 
2022-04-28T06:49:03.589Z appoptics:patching patched tedious 4.0.0
2022-04-28T06:49:03.593Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support parameters with a database name
    3) should sanitize query with a database name
    4) should truncate long queries with a database name
    5) should tag queries when feature is enabled
    6) should do nothing when disabled with a database name
    7) should support basic queries with no database name
    8) should support parameters with no database name
    9) should sanitize query with no database name
    10) should truncate long queries with no database name
    11) should tag queries when feature is enabled
    12) should do nothing when disabled with no database name


  3 passing (4s)
  12 failing

  1) probes.tedious 4.0.0
       should support basic queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:99:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:98:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  2) probes.tedious 4.0.0
       should support parameters with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:121:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:120:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  3) probes.tedious 4.0.0
       should sanitize query with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:154:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:152:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  4) probes.tedious 4.0.0
       should truncate long queries with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:187:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:186:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  5) probes.tedious 4.0.0
       should tag queries when feature is enabled:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:214:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_tag (test/probes/tedious.test.js:213:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  6) probes.tedious 4.0.0
       should do nothing when disabled with a database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:239:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:238:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  7) probes.tedious 4.0.0
       should support basic queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:99:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_basic (test/probes/tedious.test.js:98:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  8) probes.tedious 4.0.0
       should support parameters with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:121:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_parameters (test/probes/tedious.test.js:120:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  9) probes.tedious 4.0.0
       should sanitize query with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:154:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_sanitization (test/probes/tedious.test.js:152:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  10) probes.tedious 4.0.0
       should truncate long queries with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:187:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_truncate (test/probes/tedious.test.js:186:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  11) probes.tedious 4.0.0
       should tag queries when feature is enabled:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:214:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_tag (test/probes/tedious.test.js:213:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)

  12) probes.tedious 4.0.0
       should do nothing when disabled with no database name:
     TypeError: The "config.authentication.type" property must be of type string.
      at new Connection (node_modules/tedious/lib/connection.js:93:15)
      at query (test/probes/tedious.test.js:278:24)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:239:7
      at ao.requestStore.run.newContext (test/helper.js:296:5)
      at Namespace.run (node_modules/ace-context/context.js:187:5)
      at exports.test (test/helper.js:288:19)
      at Context.test_disabled (test/probes/tedious.test.js:238:12)
      at Timeout._onTimeout (test/probes/tedious.test.js:26:7)
      at listOnTimeout (node:internal/timers:564:17)
      at process.processTimers (node:internal/timers:507:7)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:16.235Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:16.236Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:16.236Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:16.236Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:16.301Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:16.417Z appoptics:patching patched crypto 
2022-04-28T06:49:16.437Z appoptics:patching patched https 
2022-04-28T06:49:16.437Z appoptics:patching patched http 
2022-04-28T06:49:16.476Z appoptics:patching patched dns 
2022-04-28T06:49:16.517Z appoptics:patching patched tedious 4.0.1
2022-04-28T06:49:16.521Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.0.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1386:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1326:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1891:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1051:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:951:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:34:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'F731FC201830656E',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6328,
  Timestamp_u: 1651128558872333,
  'X-Trace': '2B8B41ED03CF7F34250DB7D75785F3A9D400000000112F9C8105606BC401',
  _V: '1',
  'sw.parent_span_id': 'f731fc201830656e',
  'sw.trace_context': '00-8b41ed03cf7f34250db7d75785f3a9d4-112f9c8105606bc4-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 855 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:28.961Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:28.962Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:28.962Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:28.962Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:29.031Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:29.153Z appoptics:patching patched crypto 
2022-04-28T06:49:29.173Z appoptics:patching patched https 
2022-04-28T06:49:29.174Z appoptics:patching patched http 
2022-04-28T06:49:29.213Z appoptics:patching patched dns 
2022-04-28T06:49:29.256Z appoptics:patching patched tedious 4.0.2
2022-04-28T06:49:29.260Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.0.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.0.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1386:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1326:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1891:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1051:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:951:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:34:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '5491B28C57756D02',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6393,
  Timestamp_u: 1651128571610318,
  'X-Trace': '2B141B63A2904CD82E1B4A00E34C88B92B00000000D245D8004AD14A9001',
  _V: '1',
  'sw.parent_span_id': '5491b28c57756d02',
  'sw.trace_context': '00-141b63a2904cd82e1b4a00e34c88b92b-d245d8004ad14a90-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 855 packages in 14s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:46.459Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:46.460Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:46.460Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:46.460Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:46.525Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:46.638Z appoptics:patching patched crypto 
2022-04-28T06:49:46.658Z appoptics:patching patched https 
2022-04-28T06:49:46.659Z appoptics:patching patched http 
2022-04-28T06:49:46.694Z appoptics:patching patched dns 
2022-04-28T06:49:46.737Z appoptics:patching patched tedious 4.0.3
2022-04-28T06:49:46.741Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  10 failing

  1) probes.tedious 4.0.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.3
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1066:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1085:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:944:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 855 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:49:57.678Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:49:57.679Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:49:57.679Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:49:57.679Z appoptics:debug using context provider: ace-context
2022-04-28T06:49:57.759Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:49:57.893Z appoptics:patching patched crypto 
2022-04-28T06:49:57.948Z appoptics:patching patched https 
2022-04-28T06:49:57.948Z appoptics:patching patched http 
2022-04-28T06:49:57.979Z appoptics:patching patched dns 
2022-04-28T06:49:58.029Z appoptics:patching patched tedious 4.0.4
2022-04-28T06:49:58.033Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.0.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.0.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.0.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.0.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.0.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.0.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.0.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.0.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.0.4
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1053:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1076:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:956:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.0.4
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1386:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1326:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1895:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1051:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:951:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'B8F49041185913E1',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6523,
  Timestamp_u: 1651128600380068,
  'X-Trace': '2B1B694A82B91629CA02D66FB063BD57AC000000006535DF6C0D23FBA201',
  _V: '1',
  'sw.parent_span_id': 'b8f49041185913e1',
  'sw.trace_context': '00-1b694a82b91629ca02d66fb063bd57ac-6535df6c0d23fba2-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.0.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.0.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 28 packages, changed 1 package, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:10.943Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:10.944Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:10.944Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:10.944Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:11.017Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:11.145Z appoptics:patching patched crypto 
2022-04-28T06:50:11.167Z appoptics:patching patched https 
2022-04-28T06:50:11.167Z appoptics:patching patched http 
2022-04-28T06:50:11.259Z appoptics:patching patched zlib 
2022-04-28T06:50:11.333Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:50:11.334Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:50:11.334Z appoptics:patching patched fs 
2022-04-28T06:50:11.413Z appoptics:patching patched dns 
2022-04-28T06:50:11.471Z appoptics:patching patched tedious 4.1.0
2022-04-28T06:50:11.476Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1064:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1087:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:967:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1427:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1367:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2004:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1062:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:962:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'FCF244971C5D8420',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6588,
  Timestamp_u: 1651128613822178,
  'X-Trace': '2B089F7DE13D6E5DD3E36E33E0DD942CF60000000082EA65A06BC64DDC01',
  _V: '1',
  'sw.parent_span_id': 'fcf244971c5d8420',
  'sw.trace_context': '00-089f7de13d6e5dd3e36e33e0dd942cf6-82ea65a06bc64ddc-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:23.203Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:23.204Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:23.204Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:23.204Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:23.272Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:23.401Z appoptics:patching patched crypto 
2022-04-28T06:50:23.421Z appoptics:patching patched https 
2022-04-28T06:50:23.422Z appoptics:patching patched http 
2022-04-28T06:50:23.479Z appoptics:patching patched zlib 
2022-04-28T06:50:23.522Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:50:23.523Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:50:23.523Z appoptics:patching patched fs 
2022-04-28T06:50:23.604Z appoptics:patching patched dns 
2022-04-28T06:50:23.665Z appoptics:patching patched tedious 4.1.1
2022-04-28T06:50:23.669Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2026:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'CC569D2A90DDC496',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6653,
  Timestamp_u: 1651128626137550,
  'X-Trace': '2B610CD0F8CC4D0F4EDD8FDB64568D3A23000000003198A1DE90E8B6BB01',
  _V: '1',
  'sw.parent_span_id': 'cc569d2a90ddc496',
  'sw.trace_context': '00-610cd0f8cc4d0f4edd8fdb64568d3a23-3198a1de90e8b6bb-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:35.362Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:35.363Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:35.363Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:35.363Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:35.434Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:35.561Z appoptics:patching patched crypto 
2022-04-28T06:50:35.587Z appoptics:patching patched https 
2022-04-28T06:50:35.587Z appoptics:patching patched http 
2022-04-28T06:50:35.664Z appoptics:patching patched zlib 
2022-04-28T06:50:35.718Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:50:35.719Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:50:35.719Z appoptics:patching patched fs 
2022-04-28T06:50:35.808Z appoptics:patching patched dns 
2022-04-28T06:50:35.865Z appoptics:patching patched tedious 4.1.2
2022-04-28T06:50:35.869Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 4.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2029:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '7A7312A3060EFC8B',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6718,
  Timestamp_u: 1651128638328188,
  'X-Trace': '2B32E3F5378175BD4E3C08909E3ABB165E00000000B69AD6AE832745A301',
  _V: '1',
  'sw.parent_span_id': '7a7312a3060efc8b',
  'sw.trace_context': '00-32e3f5378175bd4e3c08909e3abb165e-b69ad6ae832745a3-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:46.115Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:46.116Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:46.116Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:46.116Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:46.198Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:46.341Z appoptics:patching patched crypto 
2022-04-28T06:50:46.401Z appoptics:patching patched https 
2022-04-28T06:50:46.402Z appoptics:patching patched http 
2022-04-28T06:50:46.449Z appoptics:patching patched zlib 
2022-04-28T06:50:46.513Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:50:46.513Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:50:46.513Z appoptics:patching patched fs 
2022-04-28T06:50:46.597Z appoptics:patching patched dns 
2022-04-28T06:50:46.655Z appoptics:patching patched tedious 4.1.3
2022-04-28T06:50:46.660Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.1.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"


  3 passing (2s)
  12 failing

  1) probes.tedious 4.1.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.1.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.1.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.1.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.1.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.1.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.1.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.1.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.1.3
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.1.3 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.1.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.1.3
       "before each" hook for "should support basic queries with no database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1099:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1118:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:977:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:50:56.578Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:50:56.578Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:50:56.578Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:50:56.578Z appoptics:debug using context provider: ace-context
2022-04-28T06:50:56.644Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:50:56.768Z appoptics:patching patched crypto 
2022-04-28T06:50:56.788Z appoptics:patching patched https 
2022-04-28T06:50:56.789Z appoptics:patching patched http 
2022-04-28T06:50:56.854Z appoptics:patching patched zlib 
2022-04-28T06:50:56.897Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:50:56.898Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:50:56.898Z appoptics:patching patched fs 
2022-04-28T06:50:56.960Z appoptics:patching patched dns 
2022-04-28T06:50:57.006Z appoptics:patching patched tedious 4.2.0
2022-04-28T06:50:57.010Z appoptics:debug starting runtimeMetrics


  probes.tedious 4.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (3s)
  13 failing

  1) probes.tedious 4.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 4.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 4.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 4.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 4.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 4.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 4.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 4.2.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 4.2.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1086:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1109:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:989:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 4.2.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1449:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1389:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2050:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:984:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'E30D075DF8B31CE3',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6848,
  Timestamp_u: 1651128659515776,
  'X-Trace': '2BE4998EB38810D4E7C3834934F04BAB6D0000000002E2ABA3BB0E51FC01',
  _V: '1',
  'sw.parent_span_id': 'e30d075df8b31ce3',
  'sw.trace_context': '00-e4998eb38810d4e7c3834934f04bab6d-02e2aba3bb0e51fc-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 4.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 4.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:07.231Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:07.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:07.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:07.232Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:07.297Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:07.420Z appoptics:patching patched crypto 
2022-04-28T06:51:07.461Z appoptics:patching patched https 
2022-04-28T06:51:07.461Z appoptics:patching patched http 
2022-04-28T06:51:07.516Z appoptics:patching patched zlib 
2022-04-28T06:51:07.561Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:07.562Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:07.562Z appoptics:patching patched fs 
2022-04-28T06:51:07.628Z appoptics:patching patched dns 
2022-04-28T06:51:07.680Z appoptics:patching patched tedious 5.0.0
2022-04-28T06:51:07.684Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 5.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1136:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1159:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1014:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1410:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1392:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2044:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1009:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '87F1A1B30943F9CB',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 6913,
  Timestamp_u: 1651128670185708,
  'X-Trace': '2B5044D8370AF7D18F6AC354C77A800E7A000000004A53A3199D41C12901',
  _V: '1',
  'sw.parent_span_id': '87f1a1b30943f9cb',
  'sw.trace_context': '00-5044d8370af7d18f6ac354c77a800e7a-4a53a3199d41c129-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:17.695Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:17.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:17.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:17.696Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:17.761Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:17.887Z appoptics:patching patched crypto 
2022-04-28T06:51:17.928Z appoptics:patching patched https 
2022-04-28T06:51:17.928Z appoptics:patching patched http 
2022-04-28T06:51:17.982Z appoptics:patching patched zlib 
2022-04-28T06:51:18.027Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:18.028Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:18.028Z appoptics:patching patched fs 
2022-04-28T06:51:18.099Z appoptics:patching patched dns 
2022-04-28T06:51:18.148Z appoptics:patching patched tedious 5.0.1
2022-04-28T06:51:18.153Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) should support parameters with no database name
    17) should sanitize query with no database name
    18) should sanitize query with no database name
    19) should truncate long queries with no database name
    20) should truncate long queries with no database name
    21) should tag queries when feature is enabled
    22) should tag queries when feature is enabled
    23) should do nothing when disabled with no database name


  3 passing (4s)
  23 failing

  1) probes.tedious 5.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 5.0.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 5.0.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 5.0.1
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  17) probes.tedious 5.0.1
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  18) probes.tedious 5.0.1
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  19) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  20) probes.tedious 5.0.1
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  21) probes.tedious 5.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  22) probes.tedious 5.0.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  23) probes.tedious 5.0.1
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:29.663Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:29.664Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:29.664Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:29.664Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:29.732Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:29.862Z appoptics:patching patched crypto 
2022-04-28T06:51:29.890Z appoptics:patching patched https 
2022-04-28T06:51:29.891Z appoptics:patching patched http 
2022-04-28T06:51:29.957Z appoptics:patching patched zlib 
2022-04-28T06:51:30.002Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:30.002Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:30.003Z appoptics:patching patched fs 
2022-04-28T06:51:30.068Z appoptics:patching patched dns 
2022-04-28T06:51:30.117Z appoptics:patching patched tedious 5.0.2
2022-04-28T06:51:30.122Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) should support parameters with no database name
    17) should sanitize query with no database name
    18) should sanitize query with no database name
    19) should truncate long queries with no database name
    20) should truncate long queries with no database name
    21) should tag queries when feature is enabled
    22) should tag queries when feature is enabled
    23) should do nothing when disabled with no database name


  3 passing (4s)
  23 failing

  1) probes.tedious 5.0.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.2
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 5.0.2
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 5.0.2
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 5.0.2
       should support parameters with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should support parameters with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  17) probes.tedious 5.0.2
       should sanitize query with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  18) probes.tedious 5.0.2
       should sanitize query with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should sanitize query with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  19) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  20) probes.tedious 5.0.2
       should truncate long queries with no database name:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should truncate long queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  21) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  22) probes.tedious 5.0.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  23) probes.tedious 5.0.2
       should do nothing when disabled with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:41.609Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:41.609Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:41.610Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:41.610Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:41.682Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:41.802Z appoptics:patching patched crypto 
2022-04-28T06:51:41.822Z appoptics:patching patched https 
2022-04-28T06:51:41.822Z appoptics:patching patched http 
2022-04-28T06:51:41.887Z appoptics:patching patched zlib 
2022-04-28T06:51:41.927Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:41.927Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:41.927Z appoptics:patching patched fs 
2022-04-28T06:51:41.992Z appoptics:patching patched dns 
2022-04-28T06:51:42.043Z appoptics:patching patched tedious 5.0.3
2022-04-28T06:51:42.047Z appoptics:debug starting runtimeMetrics


  probes.tedious 5.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (3s)
  13 failing

  1) probes.tedious 5.0.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 5.0.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 5.0.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 5.0.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 5.0.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 5.0.3
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 5.0.3
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 5.0.3
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1138:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1161:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1016:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 5.0.3
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1412:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1394:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2064:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1136:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1011:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'D1100B4B8A05FEC5',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7108,
  Timestamp_u: 1651128704555003,
  'X-Trace': '2B339DFB8D59890DC0730352A859D8FDE50000000086C19857DF76F20301',
  _V: '1',
  'sw.parent_span_id': 'd1100b4b8a05fec5',
  'sw.trace_context': '00-339dfb8d59890dc0730352a859d8fde5-86c19857df76f203-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 5.0.3
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 5.0.3 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:51:52.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:51:52.024Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:51:52.024Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:51:52.024Z appoptics:debug using context provider: ace-context
2022-04-28T06:51:52.090Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:51:52.209Z appoptics:patching patched crypto 
2022-04-28T06:51:52.229Z appoptics:patching patched https 
2022-04-28T06:51:52.229Z appoptics:patching patched http 
2022-04-28T06:51:52.314Z appoptics:patching patched zlib 
2022-04-28T06:51:52.363Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:51:52.364Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:51:52.364Z appoptics:patching patched fs 
2022-04-28T06:51:52.434Z appoptics:patching patched dns 
2022-04-28T06:51:52.480Z appoptics:patching patched tedious 6.0.0
2022-04-28T06:51:52.486Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:142:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1419:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2088:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1161:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1034:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '8689D74BFCAC8B05',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7173,
  Timestamp_u: 1651128714968402,
  'X-Trace': '2BF2FA147FB4AFB927C32C3AAB1F97059600000000C8E4161476020F6001',
  _V: '1',
  'sw.parent_span_id': '8689d74bfcac8b05',
  'sw.trace_context': '00-f2fa147fb4afb927c32c3aab1f970596-c8e4161476020f60-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:04.516Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:04.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:04.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:04.517Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:04.591Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:04.724Z appoptics:patching patched crypto 
2022-04-28T06:52:04.746Z appoptics:patching patched https 
2022-04-28T06:52:04.746Z appoptics:patching patched http 
2022-04-28T06:52:04.812Z appoptics:patching patched zlib 
2022-04-28T06:52:04.858Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:04.858Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:04.859Z appoptics:patching patched fs 
2022-04-28T06:52:04.926Z appoptics:patching patched dns 
2022-04-28T06:52:04.976Z appoptics:patching patched tedious 6.0.1
2022-04-28T06:52:04.980Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.0.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.0.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.0.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.0.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1163:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1186:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1039:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.0.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1419:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2076:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1161:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1034:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'F679DA9924EE0D19',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7238,
  Timestamp_u: 1651128727446390,
  'X-Trace': '2BD1D29D6F4187733BF2A1F191686ED76000000000829DCC5195E2E2BD01',
  _V: '1',
  'sw.parent_span_id': 'f679da9924ee0d19',
  'sw.trace_context': '00-d1d29d6f4187733bf2a1f191686ed760-829dcc5195e2e2bd-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.0.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.0.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:16.237Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:16.237Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:16.237Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:16.237Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:16.307Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:16.436Z appoptics:patching patched crypto 
2022-04-28T06:52:16.455Z appoptics:patching patched https 
2022-04-28T06:52:16.455Z appoptics:patching patched http 
2022-04-28T06:52:16.516Z appoptics:patching patched zlib 
2022-04-28T06:52:16.568Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:16.568Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:16.569Z appoptics:patching patched fs 
2022-04-28T06:52:16.643Z appoptics:patching patched dns 
2022-04-28T06:52:16.699Z appoptics:patching patched tedious 6.1.0
2022-04-28T06:52:16.704Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.1.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.1.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.1.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.1.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1457:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2095:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1172:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1045:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '86D094F0DD241236',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7303,
  Timestamp_u: 1651128739172301,
  'X-Trace': '2B366B8F1073F674DBEC9D2C46A7E2DF8E0000000073CF032DEEDDD86701',
  _V: '1',
  'sw.parent_span_id': '86d094f0dd241236',
  'sw.trace_context': '00-366b8f1073f674dbec9d2c46a7e2df8e-73cf032deeddd867-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.1.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:28.231Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:28.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:28.232Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:28.232Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:28.304Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:28.425Z appoptics:patching patched crypto 
2022-04-28T06:52:28.445Z appoptics:patching patched https 
2022-04-28T06:52:28.446Z appoptics:patching patched http 
2022-04-28T06:52:28.508Z appoptics:patching patched zlib 
2022-04-28T06:52:28.549Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:28.550Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:28.550Z appoptics:patching patched fs 
2022-04-28T06:52:28.616Z appoptics:patching patched dns 
2022-04-28T06:52:28.663Z appoptics:patching patched tedious 6.1.1
2022-04-28T06:52:28.668Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.1.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1457:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2095:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1172:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1045:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'B9630390CF357D13',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7368,
  Timestamp_u: 1651128751122216,
  'X-Trace': '2B473EA0E2141C4920978F2153ECBBDC550000000076C9789D20C5426F01',
  _V: '1',
  'sw.parent_span_id': 'b9630390cf357d13',
  'sw.trace_context': '00-473ea0e2141c4920978f2153ecbbdc55-76c9789d20c5426f-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:39.211Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:39.212Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:39.212Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:39.212Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:39.278Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:39.400Z appoptics:patching patched crypto 
2022-04-28T06:52:39.421Z appoptics:patching patched https 
2022-04-28T06:52:39.422Z appoptics:patching patched http 
2022-04-28T06:52:39.487Z appoptics:patching patched zlib 
2022-04-28T06:52:39.530Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:39.531Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:39.531Z appoptics:patching patched fs 
2022-04-28T06:52:39.594Z appoptics:patching patched dns 
2022-04-28T06:52:39.641Z appoptics:patching patched tedious 6.1.2
2022-04-28T06:52:39.646Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.1.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.1.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.1.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.1.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.1.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.1.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.1.2
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.1.2
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.1.2
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.1.2
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.1.2
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1457:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1438:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2095:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1172:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1045:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'D5DDB09CAFFF6916',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7433,
  Timestamp_u: 1651128762130315,
  'X-Trace': '2B45455BD3E964982477C52D3E008AD15C0000000012353EF732B5276601',
  _V: '1',
  'sw.parent_span_id': 'd5ddb09cafff6916',
  'sw.trace_context': '00-45455bd3e964982477c52d3e008ad15c-12353ef732b52766-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.1.2
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.1.2 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 883 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:52:50.190Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:52:50.190Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:52:50.190Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:52:50.190Z appoptics:debug using context provider: ace-context
2022-04-28T06:52:50.254Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:52:50.376Z appoptics:patching patched crypto 
2022-04-28T06:52:50.396Z appoptics:patching patched https 
2022-04-28T06:52:50.397Z appoptics:patching patched http 
2022-04-28T06:52:50.457Z appoptics:patching patched zlib 
2022-04-28T06:52:50.499Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:52:50.500Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:52:50.500Z appoptics:patching patched fs 
2022-04-28T06:52:50.566Z appoptics:patching patched dns 
2022-04-28T06:52:50.613Z appoptics:patching patched tedious 6.2.0
2022-04-28T06:52:50.618Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.2.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.2.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.2.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.2.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1459:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1440:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2120:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1172:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1045:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '12B9384D15C43252',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7498,
  Timestamp_u: 1651128773093163,
  'X-Trace': '2BB8F976FA81A6F92AB672E97B85DAC1790000000032555C567720767301',
  _V: '1',
  'sw.parent_span_id': '12b9384d15c43252',
  'sw.trace_context': '00-b8f976fa81a6f92ab672e97b85dac179-32555c5677207673-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 883 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:01.271Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:01.272Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:01.272Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:01.272Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:01.339Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:01.463Z appoptics:patching patched crypto 
2022-04-28T06:53:01.482Z appoptics:patching patched https 
2022-04-28T06:53:01.483Z appoptics:patching patched http 
2022-04-28T06:53:01.545Z appoptics:patching patched zlib 
2022-04-28T06:53:01.588Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:01.588Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:01.589Z appoptics:patching patched fs 
2022-04-28T06:53:01.651Z appoptics:patching patched dns 
2022-04-28T06:53:01.691Z appoptics:patching patched tedious 6.2.1
2022-04-28T06:53:01.695Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) "before each" hook for "should do nothing when disabled with a database name"


  3 passing (2s)
  10 failing

  1) probes.tedious 6.2.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.2.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.2.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.2.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.2.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.2.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.2.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.2.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.2.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.2.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1174:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1197:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1050:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.2.1
       "before each" hook for "should do nothing when disabled with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1187:26)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1206:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1038:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




added 10 packages, changed 1 package, and audited 893 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:12.848Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:12.849Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:12.849Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:12.849Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:12.915Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:13.035Z appoptics:patching patched crypto 
2022-04-28T06:53:13.054Z appoptics:patching patched https 
2022-04-28T06:53:13.054Z appoptics:patching patched http 
2022-04-28T06:53:13.112Z appoptics:patching patched zlib 
2022-04-28T06:53:13.118Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:13.119Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:13.119Z appoptics:patching patched fs 
2022-04-28T06:53:13.291Z appoptics:patching patched dns 
2022-04-28T06:53:13.338Z appoptics:patching patched tedious 6.3.0
2022-04-28T06:53:13.342Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should truncate long queries with a database name
    7) should truncate long queries with a database name
    8) should tag queries when feature is enabled
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) "before each" hook for "should support basic queries with no database name"
    12) should do nothing when disabled with a database name


  3 passing (2s)
  12 failing

  1) probes.tedious 6.3.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.3.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.3.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.3.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.3.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.3.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.3.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.3.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.3.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.3.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1213:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1236:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1089:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:90:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.3.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1507:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1488:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2199:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1211:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1084:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:32:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'A2511D3B8329AC72',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7628,
  Timestamp_u: 1651128795814981,
  'X-Trace': '2B2170B90A95F5ED03D958EC7DA467820700000000F2120BB0AE72E30E01',
  _V: '1',
  'sw.parent_span_id': 'a2511d3b8329ac72',
  'sw.trace_context': '00-2170b90a95f5ed03d958ec7da4678207-f2120bb0ae72e30e-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.3.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.3.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 894 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:24.393Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:24.394Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:24.394Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:24.394Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:24.462Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:24.587Z appoptics:patching patched crypto 
2022-04-28T06:53:24.607Z appoptics:patching patched https 
2022-04-28T06:53:24.608Z appoptics:patching patched http 
2022-04-28T06:53:24.667Z appoptics:patching patched zlib 
2022-04-28T06:53:24.673Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:24.673Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:24.673Z appoptics:patching patched fs 
2022-04-28T06:53:24.835Z appoptics:patching patched dns 
2022-04-28T06:53:24.865Z appoptics:patching patched tedious 6.4.0
2022-04-28T06:53:24.870Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.4.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.4.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.4.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.4.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.4.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.4.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.4.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.4.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.4.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.4.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.4.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:100:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.4.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1516:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1497:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2208:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1220:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1093:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:33:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '397D0C86B465D18F',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7693,
  Timestamp_u: 1651128807317372,
  'X-Trace': '2BCAC43D36ECB41FD432B3BE6CC285572B000000001E0F2DB6F142D5FB01',
  _V: '1',
  'sw.parent_span_id': '397d0c86b465d18f',
  'sw.trace_context': '00-cac43d36ecb41fd432b3be6cc285572b-1e0f2db6f142d5fb-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.4.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.4.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 1 package, changed 3 packages, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:36.588Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:36.589Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:36.589Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:36.589Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:36.664Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:36.821Z appoptics:patching patched crypto 
2022-04-28T06:53:36.878Z appoptics:patching patched https 
2022-04-28T06:53:36.879Z appoptics:patching patched http 
2022-04-28T06:53:36.971Z appoptics:patching patched zlib 
2022-04-28T06:53:36.977Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:36.977Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:36.977Z appoptics:patching patched fs 
2022-04-28T06:53:37.146Z appoptics:patching patched dns 
2022-04-28T06:53:37.178Z appoptics:patching patched tedious 6.5.0
2022-04-28T06:53:37.182Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.5.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.5.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.5.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.5.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.5.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.5.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.5.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.5.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.5.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.5.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.5.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1222:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1245:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1098:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.5.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1516:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1497:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2208:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1220:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1093:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'DA9E6307BB2AABA1',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7758,
  Timestamp_u: 1651128819647082,
  'X-Trace': '2BA19813EEEE3F7FFBB20EBA12DA9387AD00000000BE5241018B8776AE01',
  _V: '1',
  'sw.parent_span_id': 'da9e6307bb2aaba1',
  'sw.trace_context': '00-a19813eeee3f7ffbb20eba12da9387ad-be5241018b8776ae-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.5.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.5.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:53:49.624Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:53:49.625Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:53:49.625Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:53:49.625Z appoptics:debug using context provider: ace-context
2022-04-28T06:53:49.692Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:53:49.815Z appoptics:patching patched crypto 
2022-04-28T06:53:49.835Z appoptics:patching patched https 
2022-04-28T06:53:49.835Z appoptics:patching patched http 
2022-04-28T06:53:49.897Z appoptics:patching patched zlib 
2022-04-28T06:53:49.903Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:53:49.903Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:53:49.903Z appoptics:patching patched fs 
2022-04-28T06:53:50.062Z appoptics:patching patched dns 
2022-04-28T06:53:50.094Z appoptics:patching patched tedious 6.6.0
2022-04-28T06:53:50.098Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1244:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1267:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1120:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1539:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1520:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2235:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1242:36)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1115:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:35:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '48D8EEB769CD837E',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7823,
  Timestamp_u: 1651128832549055,
  'X-Trace': '2BDBA31E3DFB29C7801B060786C0CE207500000000813CD891FFADA60C01',
  _V: '1',
  'sw.parent_span_id': '48d8eeb769cd837e',
  'sw.trace_context': '00-dba31e3dfb29c7801b060786c0ce2075-813cd891ffada60c-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:02.235Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:02.236Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:02.236Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:02.236Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:02.331Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:02.474Z appoptics:patching patched crypto 
2022-04-28T06:54:02.495Z appoptics:patching patched https 
2022-04-28T06:54:02.495Z appoptics:patching patched http 
2022-04-28T06:54:02.557Z appoptics:patching patched zlib 
2022-04-28T06:54:02.563Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:02.563Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:02.564Z appoptics:patching patched fs 
2022-04-28T06:54:02.775Z appoptics:patching patched dns 
2022-04-28T06:54:02.808Z appoptics:patching patched tedious 6.6.1
2022-04-28T06:54:02.813Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1543:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1524:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2300:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1247:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1107:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:40:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'EF9D5DAC70568326',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 7888,
  Timestamp_u: 1651128845282699,
  'X-Trace': '2BFBDC4487A0519B9376945C5EAFE5EA360000000079AFB056D5F0584E01',
  _V: '1',
  'sw.parent_span_id': 'ef9d5dac70568326',
  'sw.trace_context': '00-fbdc4487a0519b9376945c5eafe5ea36-79afb056d5f0584e-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:14.680Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:14.681Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:14.681Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:14.681Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:14.754Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:14.883Z appoptics:patching patched crypto 
2022-04-28T06:54:14.903Z appoptics:patching patched https 
2022-04-28T06:54:14.904Z appoptics:patching patched http 
2022-04-28T06:54:14.963Z appoptics:patching patched zlib 
2022-04-28T06:54:14.969Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:14.969Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:14.969Z appoptics:patching patched fs 
2022-04-28T06:54:15.136Z appoptics:patching patched dns 
2022-04-28T06:54:15.169Z appoptics:patching patched tedious 6.6.2
2022-04-28T06:54:15.172Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 6.6.2
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.2
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.2 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.2
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.2
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.2 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.2
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1249:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1271:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1113:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:102:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.2
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1262:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1280:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1099:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:26.230Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:26.231Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:26.231Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:26.231Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:26.296Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:26.419Z appoptics:patching patched crypto 
2022-04-28T06:54:26.439Z appoptics:patching patched https 
2022-04-28T06:54:26.439Z appoptics:patching patched http 
2022-04-28T06:54:26.497Z appoptics:patching patched zlib 
2022-04-28T06:54:26.503Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:26.503Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:26.503Z appoptics:patching patched fs 
2022-04-28T06:54:26.663Z appoptics:patching patched dns 
2022-04-28T06:54:26.703Z appoptics:patching patched tedious 6.6.3
2022-04-28T06:54:26.707Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 6.6.3
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.3
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.3
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.3
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.3 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.3
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.3
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1289:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1307:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 896 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:54:39.193Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:54:39.194Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:54:39.194Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:54:39.194Z appoptics:debug using context provider: ace-context
2022-04-28T06:54:39.259Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:54:39.394Z appoptics:patching patched crypto 
2022-04-28T06:54:39.434Z appoptics:patching patched https 
2022-04-28T06:54:39.434Z appoptics:patching patched http 
2022-04-28T06:54:39.524Z appoptics:patching patched zlib 
2022-04-28T06:54:39.530Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:54:39.531Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:54:39.531Z appoptics:patching patched fs 
2022-04-28T06:54:39.716Z appoptics:patching patched dns 
2022-04-28T06:54:39.748Z appoptics:patching patched tedious 6.6.4
2022-04-28T06:54:39.753Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.4
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.4
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.4
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.4
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.4
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.4
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.4
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.4
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.4
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.4
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.4
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.4
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '9EB0A41875D5E0C5',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8083,
  Timestamp_u: 1651128882219415,
  'X-Trace': '2B9C1D69DA1B27616A1809A690910C0FED000000009A7DA4E78E4E5CC101',
  _V: '1',
  'sw.parent_span_id': '9eb0a41875d5e0c5',
  'sw.trace_context': '00-9c1d69da1b27616a1809a690910c0fed-9a7da4e78e4e5cc1-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.4
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.4 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 17s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:00.079Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:00.080Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:00.080Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:00.080Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:00.149Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:00.275Z appoptics:patching patched crypto 
2022-04-28T06:55:00.295Z appoptics:patching patched https 
2022-04-28T06:55:00.296Z appoptics:patching patched http 
2022-04-28T06:55:00.362Z appoptics:patching patched zlib 
2022-04-28T06:55:00.369Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:00.369Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:00.369Z appoptics:patching patched fs 
2022-04-28T06:55:00.531Z appoptics:patching patched dns 
2022-04-28T06:55:00.564Z appoptics:patching patched tedious 6.6.5
2022-04-28T06:55:00.569Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 6.6.5
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.5
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.5
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.5
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.5 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.5
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.5
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1289:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1307:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1126:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:12.166Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:12.166Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:12.167Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:12.167Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:12.248Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:12.386Z appoptics:patching patched crypto 
2022-04-28T06:55:12.444Z appoptics:patching patched https 
2022-04-28T06:55:12.444Z appoptics:patching patched http 
2022-04-28T06:55:12.493Z appoptics:patching patched zlib 
2022-04-28T06:55:12.499Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:12.499Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:12.499Z appoptics:patching patched fs 
2022-04-28T06:55:12.687Z appoptics:patching patched dns 
2022-04-28T06:55:12.722Z appoptics:patching patched tedious 6.6.6
2022-04-28T06:55:12.726Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.6.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 6.6.6
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.6.6
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.6.6
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.6.6
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.6.6
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.6.6
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.6.6
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.6.6
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.6.6
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.6.6
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.6.6
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1276:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1298:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.6.6
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1570:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1551:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2327:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1274:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1134:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '5E408E6B578428D8',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8213,
  Timestamp_u: 1651128915191181,
  'X-Trace': '2B967210DC5F619E0D082AB515AA65EF3700000000650EAF05D29AC3E101',
  _V: '1',
  'sw.parent_span_id': '5e408e6b578428d8',
  'sw.trace_context': '00-967210dc5f619e0d082ab515aa65ef37-650eaf05d29ac3e1-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.6.6
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.6.6 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 896 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:25.018Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:25.019Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:25.019Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:25.019Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:25.108Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:25.231Z appoptics:patching patched crypto 
2022-04-28T06:55:25.252Z appoptics:patching patched https 
2022-04-28T06:55:25.253Z appoptics:patching patched http 
2022-04-28T06:55:25.315Z appoptics:patching patched zlib 
2022-04-28T06:55:25.321Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:25.321Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:25.321Z appoptics:patching patched fs 
2022-04-28T06:55:25.490Z appoptics:patching patched dns 
2022-04-28T06:55:25.526Z appoptics:patching patched tedious 6.7.0
2022-04-28T06:55:25.530Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) "before each" hook for "should tag queries when feature is enabled"


  3 passing (2s)
  8 failing

  1) probes.tedious 6.7.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.7.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.7.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.7.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.7.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.7.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.7.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.7.0
       "before each" hook for "should tag queries when feature is enabled":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1294:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1312:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1131:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




added 7 packages, removed 20 packages, changed 7 packages, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:37.954Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:37.955Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:37.955Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:37.955Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:38.019Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:38.139Z appoptics:patching patched crypto 
2022-04-28T06:55:38.179Z appoptics:patching patched https 
2022-04-28T06:55:38.181Z appoptics:patching patched http 
2022-04-28T06:55:38.274Z appoptics:patching patched zlib 
2022-04-28T06:55:38.278Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:38.279Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:38.279Z appoptics:patching patched fs 
2022-04-28T06:55:38.374Z appoptics:patching patched dns 
2022-04-28T06:55:38.410Z appoptics:patching patched tedious 6.7.1
2022-04-28T06:55:38.414Z appoptics:debug starting runtimeMetrics


  probes.tedious 6.7.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) should do nothing when disabled with a database name
    13) should support basic queries with no database name
    14) should support basic queries with no database name
    15) should support parameters with no database name
    16) "before each" hook for "should sanitize query with no database name"


  3 passing (3s)
  16 failing

  1) probes.tedious 6.7.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 6.7.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 6.7.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 6.7.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 6.7.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 6.7.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 6.7.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 6.7.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 6.7.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 6.7.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 6.7.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 6.7.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:250:9
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 6.7.1
       should support basic queries with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  14) probes.tedious 6.7.1
       should support basic queries with no database name:
     Error: done() called multiple times in test <probes.tedious 6.7.1 should support basic queries with no database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  15) probes.tedious 6.7.1
       should support parameters with no database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1281:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1303:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1145:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  16) probes.tedious 6.7.1
       "before each" hook for "should sanitize query with no database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1294:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1312:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1131:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 20 packages, removed 9 packages, changed 7 packages, and audited 894 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:55:51.304Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:55:51.304Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:55:51.304Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:55:51.304Z appoptics:debug using context provider: ace-context
2022-04-28T06:55:51.371Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:55:51.491Z appoptics:patching patched crypto 
2022-04-28T06:55:51.511Z appoptics:patching patched https 
2022-04-28T06:55:51.512Z appoptics:patching patched http 
2022-04-28T06:55:51.573Z appoptics:patching patched zlib 
2022-04-28T06:55:51.579Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:55:51.579Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:55:51.579Z appoptics:patching patched fs 
2022-04-28T06:55:51.741Z appoptics:patching patched dns 
2022-04-28T06:55:51.776Z appoptics:patching patched tedious 7.0.0
2022-04-28T06:55:51.780Z appoptics:debug starting runtimeMetrics


  probes.tedious 7.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 7.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 7.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 7.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 7.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 7.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 7.0.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 7.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 7.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 7.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 7.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 7.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 7.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1573:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1554:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2330:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1277:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1137:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: '69B4F698B0C6D75F',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8408,
  Timestamp_u: 1651128954227002,
  'X-Trace': '2BCCCE229B40BFF0093F88B9E2F87D169100000000C57AD9C9B8B5A1D701',
  _V: '1',
  'sw.parent_span_id': '69b4f698b0c6d75f',
  'sw.trace_context': '00-ccce229b40bff0093f88b9e2f87d1691-c57ad9c9b8b5a1d7-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 7.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 7.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:03.822Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:03.823Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:03.823Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:03.823Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:03.890Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:04.021Z appoptics:patching patched crypto 
2022-04-28T06:56:04.044Z appoptics:patching patched https 
2022-04-28T06:56:04.044Z appoptics:patching patched http 
2022-04-28T06:56:04.104Z appoptics:patching patched zlib 
2022-04-28T06:56:04.110Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:04.110Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:04.110Z appoptics:patching patched fs 
2022-04-28T06:56:04.264Z appoptics:patching patched dns 
2022-04-28T06:56:04.317Z appoptics:patching patched tedious 8.0.0
2022-04-28T06:56:04.322Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should truncate long queries with a database name
    7) should truncate long queries with a database name
    8) should tag queries when feature is enabled
    9) should tag queries when feature is enabled
    10) should do nothing when disabled with a database name
    11) "before each" hook for "should support basic queries with no database name"
    12) should do nothing when disabled with a database name


  3 passing (2s)
  12 failing

  1) probes.tedious 8.0.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.0.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.0.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.0.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.0.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.0.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.0.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.0.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.0.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.0.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.0.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1573:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1554:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2330:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1277:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1137:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:46:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'A0F68A8CE19B0C9F',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8473,
  Timestamp_u: 1651128966787736,
  'X-Trace': '2B76001D7F7858F9E40B1EB8042B0CF9A500000000E2E15F12D0C4895401',
  _V: '1',
  'sw.parent_span_id': 'a0f68a8ce19b0c9f',
  'sw.trace_context': '00-76001d7f7858f9e40b1eb8042b0cf9a5-e2e15f12d0c48954-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.0.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:14.939Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:14.940Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:14.940Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:14.940Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:15.004Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:15.124Z appoptics:patching patched crypto 
2022-04-28T06:56:15.144Z appoptics:patching patched https 
2022-04-28T06:56:15.144Z appoptics:patching patched http 
2022-04-28T06:56:15.203Z appoptics:patching patched zlib 
2022-04-28T06:56:15.209Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:15.209Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:15.210Z appoptics:patching patched fs 
2022-04-28T06:56:15.372Z appoptics:patching patched dns 
2022-04-28T06:56:15.426Z appoptics:patching patched tedious 8.0.1
2022-04-28T06:56:15.430Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 8.0.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.0.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.0.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.0.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.0.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.0.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1301:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1143:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.0.1
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1292:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1310:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1129:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 2 packages, and audited 895 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:24.787Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:24.788Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:24.788Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:24.788Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:24.857Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:25.001Z appoptics:patching patched crypto 
2022-04-28T06:56:25.043Z appoptics:patching patched https 
2022-04-28T06:56:25.043Z appoptics:patching patched http 
2022-04-28T06:56:25.109Z appoptics:patching patched zlib 
2022-04-28T06:56:25.115Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:25.116Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:25.116Z appoptics:patching patched fs 
2022-04-28T06:56:25.313Z appoptics:patching patched dns 
2022-04-28T06:56:25.377Z appoptics:patching patched tedious 8.1.0
2022-04-28T06:56:25.382Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) "before each" hook for "should truncate long queries with a database name"


  3 passing (2s)
  6 failing

  1) probes.tedious 8.1.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.1.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.1.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.1.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.1.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentLogin7WithStandardLogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.1.0
       "before each" hook for "should truncate long queries with a database name":
     Uncaught ConnectionError: Connection lost - socket hang up
      at ConnectionError (node_modules/tedious/lib/errors.js:13:12)
      at Connection.socketError (node_modules/tedious/lib/connection.js:1297:54)
      at Connection.socketEnd (node_modules/tedious/lib/connection.js:1315:12)
      at Socket.<anonymous> (node_modules/tedious/lib/connection.js:1134:14)
      at Socket.emit (node:events:539:35)
      at endReadableNT (node:internal/streams/readable:1344:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)




changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:35.808Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:35.809Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:35.809Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:35.809Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:35.912Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:36.137Z appoptics:patching patched crypto 
2022-04-28T06:56:36.162Z appoptics:patching patched https 
2022-04-28T06:56:36.163Z appoptics:patching patched http 
2022-04-28T06:56:36.239Z appoptics:patching patched zlib 
2022-04-28T06:56:36.245Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:36.245Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:36.245Z appoptics:patching patched fs 
2022-04-28T06:56:36.421Z appoptics:patching patched dns 
2022-04-28T06:56:36.498Z appoptics:patching patched tedious 8.1.1
2022-04-28T06:56:36.502Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (3s)
  13 failing

  1) probes.tedious 8.1.1
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.1.1
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.1.1
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.1.1
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.1.1
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.1.1
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.1.1
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.1.1
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.1.1
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1282:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1304:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1146:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.1.1
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1579:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1560:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2331:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1280:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1140:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:47:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'C0B459544BB7A858',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8668,
  Timestamp_u: 1651128999025146,
  'X-Trace': '2B1CFADF606A771CBE6C6ABA7EAD0B2B7100000000150E5F8769910C4801',
  _V: '1',
  'sw.parent_span_id': 'c0b459544bb7a858',
  'sw.trace_context': '00-1cfadf606a771cbe6c6aba7ead0b2b71-150e5f8769910c48-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.1.1
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.1.1 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:47.798Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:47.800Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:47.800Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:47.800Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:47.884Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:48.026Z appoptics:patching patched crypto 
2022-04-28T06:56:48.061Z appoptics:patching patched https 
2022-04-28T06:56:48.062Z appoptics:patching patched http 
2022-04-28T06:56:48.125Z appoptics:patching patched zlib 
2022-04-28T06:56:48.131Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:48.132Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:48.132Z appoptics:patching patched fs 
2022-04-28T06:56:48.324Z appoptics:patching patched dns 
2022-04-28T06:56:48.383Z appoptics:patching patched tedious 8.2.0
2022-04-28T06:56:48.387Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    1) should support basic queries with a database name
    2) should support basic queries with a database name
    3) should support parameters with a database name
    4) should support parameters with a database name
    5) should sanitize query with a database name
    6) should sanitize query with a database name
    7) should truncate long queries with a database name
    8) should truncate long queries with a database name
    9) should tag queries when feature is enabled
    10) should tag queries when feature is enabled
    11) should do nothing when disabled with a database name
    12) "before each" hook for "should support basic queries with no database name"
    13) should do nothing when disabled with a database name


  3 passing (2s)
  13 failing

  1) probes.tedious 8.2.0
       should support basic queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  2) probes.tedious 8.2.0
       should support basic queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support basic queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.tedious 8.2.0
       should support parameters with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  4) probes.tedious 8.2.0
       should support parameters with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should support parameters with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) probes.tedious 8.2.0
       should sanitize query with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  6) probes.tedious 8.2.0
       should sanitize query with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should sanitize query with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:175:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  7) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  8) probes.tedious 8.2.0
       should truncate long queries with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should truncate long queries with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:207:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  9) probes.tedious 8.2.0
       should tag queries when feature is enabled:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  10) probes.tedious 8.2.0
       should tag queries when feature is enabled:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should tag queries when feature is enabled> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:231:7
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  11) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Uncaught Error: No event 'socketConnect' in state 'SentPrelogin'
      at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1284:26)
      at Connection.socketConnect (node_modules/tedious/lib/connection.js:1306:10)
      at /__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1148:12
      at Socket.onConnect (node_modules/tedious/lib/connector.js:106:7)
      at Socket.emit (node:events:527:28)
      at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1181:10)
      at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)

  12) probes.tedious 8.2.0
       "before each" hook for "should support basic queries with no database name":
     Uncaught AssertionError: expected Object {
  Async: true,
  Backtrace: 'at Object.backtrace (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:285:15)\nat runSpan (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:922:43)\nat runInstrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:909:10)\nat Object.instrument (/__w/appoptics-apm-node/appoptics-apm-node/lib/api.js:800:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/lib/probes/tedious.js:70:15)\nat Connection.execSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1581:10)\nat Connection.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:284:18)\nat Connection.clsBind (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/ace-context/context.js:263:17)\nat Connection.emit (node:events:527:28)\nat Connection.emitted (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/emitter-listener/listener.js:134:21)\nat Connection.processedInitialSql (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1562:10)\nat Connection.message (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:2333:14)\nat Connection.dispatchEvent (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1282:15)\nat MessageIO.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/connection.js:1142:14)\nat MessageIO.emit (node:events:527:28)\nat Message.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/lib/message-io.js:47:14)\nat Message.emit (node:events:539:35)\nat endReadableNT (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:1094:12)\nat process.processTicksAndRejections (node:internal/process/task_queues:82:21)',
  Database: '',
  Edge: 'C919AD5C65A9C1A9',
  Flavor: 'mssql',
  Hostname: '41d228bbc8fb',
  Label: 'entry',
  Layer: 'mssql',
  Query: 'select 42, \'hello world\'',
  QueryArgs: '{}',
  RemoteHost: 'mssql:1433',
  Spec: 'query',
  TID: 8733,
  Timestamp_u: 1651129010866987,
  'X-Trace': '2B716F70D86A0505D01F76358AA4DAEBBC0000000034A1B7EE751886D501',
  _V: '1',
  'sw.parent_span_id': 'c919ad5c65a9c1a9',
  'sw.trace_context': '00-716f70d86a0505d01f76358aa4daebbc-34a1b7ee751886d5-01'
} not to have property Query (false negative fail)
      at Assertion.fail (node_modules/should/lib/assertion.js:92:17)
      at Assertion.value [as property] (node_modules/should/lib/assertion.js:174:17)
      at /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js:248:29
      at EventEmitter.onMessage (test/helper.js:170:9)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) probes.tedious 8.2.0
       should do nothing when disabled with a database name:
     Error: done() called multiple times in test <probes.tedious 8.2.0 should do nothing when disabled with a database name> of file /__w/appoptics-apm-node/appoptics-apm-node/test/probes/tedious.test.js
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:527:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:527:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 895 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:56:58.295Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:56:58.296Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:56:58.296Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:56:58.296Z appoptics:debug using context provider: ace-context
2022-04-28T06:56:58.361Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:56:58.484Z appoptics:patching patched crypto 
2022-04-28T06:56:58.517Z appoptics:patching patched https 
2022-04-28T06:56:58.518Z appoptics:patching patched http 
2022-04-28T06:56:58.573Z appoptics:patching patched zlib 
2022-04-28T06:56:58.579Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:56:58.579Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:56:58.579Z appoptics:patching patched fs 
2022-04-28T06:56:58.743Z appoptics:patching patched dns 
2022-04-28T06:56:58.796Z appoptics:patching patched tedious 8.3.0
2022-04-28T06:56:58.800Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (117ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:12.009Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:12.009Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:12.009Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:12.010Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:12.093Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:12.336Z appoptics:patching patched crypto 
2022-04-28T06:57:12.417Z appoptics:patching patched https 
2022-04-28T06:57:12.418Z appoptics:patching patched http 
2022-04-28T06:57:12.477Z appoptics:patching patched zlib 
2022-04-28T06:57:12.485Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:12.485Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:12.485Z appoptics:patching patched fs 
2022-04-28T06:57:12.799Z appoptics:patching patched dns 
2022-04-28T06:57:12.904Z appoptics:patching patched tedious 8.3.1
2022-04-28T06:57:12.910Z appoptics:debug starting runtimeMetrics


  probes.tedious 8.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (115ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:26.754Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:26.755Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:26.755Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:26.755Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:26.817Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:26.987Z appoptics:patching patched crypto 
2022-04-28T06:57:27.033Z appoptics:patching patched https 
2022-04-28T06:57:27.034Z appoptics:patching patched http 
2022-04-28T06:57:27.097Z appoptics:patching patched zlib 
2022-04-28T06:57:27.103Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:27.103Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:27.104Z appoptics:patching patched fs 
2022-04-28T06:57:27.279Z appoptics:patching patched dns 
2022-04-28T06:57:27.336Z appoptics:patching patched tedious 9.0.0
2022-04-28T06:57:27.340Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (123ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:40.830Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:40.830Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:40.830Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:40.830Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:40.897Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:41.024Z appoptics:patching patched crypto 
2022-04-28T06:57:41.054Z appoptics:patching patched https 
2022-04-28T06:57:41.055Z appoptics:patching patched http 
2022-04-28T06:57:41.140Z appoptics:patching patched zlib 
2022-04-28T06:57:41.150Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:41.151Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:41.151Z appoptics:patching patched fs 
2022-04-28T06:57:41.332Z appoptics:patching patched dns 
2022-04-28T06:57:41.386Z appoptics:patching patched tedious 9.0.1
2022-04-28T06:57:41.390Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (114ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:57:54.782Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:57:54.783Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:57:54.783Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:57:54.783Z appoptics:debug using context provider: ace-context
2022-04-28T06:57:54.852Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:57:54.979Z appoptics:patching patched crypto 
2022-04-28T06:57:55.013Z appoptics:patching patched https 
2022-04-28T06:57:55.013Z appoptics:patching patched http 
2022-04-28T06:57:55.075Z appoptics:patching patched zlib 
2022-04-28T06:57:55.082Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:57:55.082Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:57:55.082Z appoptics:patching patched fs 
2022-04-28T06:57:55.291Z appoptics:patching patched dns 
2022-04-28T06:57:55.346Z appoptics:patching patched tedious 9.1.0
2022-04-28T06:57:55.351Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (121ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 3 packages, and audited 895 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address all issues possible, run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:07.653Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:07.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:07.654Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:07.654Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:07.799Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:08.015Z appoptics:patching patched crypto 
2022-04-28T06:58:08.080Z appoptics:patching patched https 
2022-04-28T06:58:08.081Z appoptics:patching patched http 
2022-04-28T06:58:08.134Z appoptics:patching patched zlib 
2022-04-28T06:58:08.139Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:08.140Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:08.140Z appoptics:patching patched fs 
2022-04-28T06:58:08.328Z appoptics:patching patched dns 
2022-04-28T06:58:08.386Z appoptics:patching patched tedious 9.1.1
2022-04-28T06:58:08.390Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (115ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:22.043Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:22.044Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:22.044Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:22.044Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:22.112Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:22.228Z appoptics:patching patched crypto 
2022-04-28T06:58:22.247Z appoptics:patching patched https 
2022-04-28T06:58:22.248Z appoptics:patching patched http 
2022-04-28T06:58:22.307Z appoptics:patching patched zlib 
2022-04-28T06:58:22.313Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:22.313Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:22.313Z appoptics:patching patched fs 
2022-04-28T06:58:22.474Z appoptics:patching patched dns 
2022-04-28T06:58:22.529Z appoptics:patching patched tedious 9.2.0
2022-04-28T06:58:22.533Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (118ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 895 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (4 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:34.321Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:34.322Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:34.322Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:34.322Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:34.387Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:34.504Z appoptics:patching patched crypto 
2022-04-28T06:58:34.523Z appoptics:patching patched https 
2022-04-28T06:58:34.524Z appoptics:patching patched http 
2022-04-28T06:58:34.581Z appoptics:patching patched zlib 
2022-04-28T06:58:34.587Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:34.587Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:34.588Z appoptics:patching patched fs 
2022-04-28T06:58:34.745Z appoptics:patching patched dns 
2022-04-28T06:58:34.801Z appoptics:patching patched tedious 9.2.1
2022-04-28T06:58:34.805Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (128ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 7 packages, removed 20 packages, changed 7 packages, and audited 882 packages in 7s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:58:46.515Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:58:46.515Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:58:46.515Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:58:46.515Z appoptics:debug using context provider: ace-context
2022-04-28T06:58:46.581Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:58:46.700Z appoptics:patching patched crypto 
2022-04-28T06:58:46.720Z appoptics:patching patched https 
2022-04-28T06:58:46.720Z appoptics:patching patched http 
2022-04-28T06:58:46.800Z appoptics:patching patched zlib 
2022-04-28T06:58:46.804Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:58:46.804Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:58:46.805Z appoptics:patching patched fs 
2022-04-28T06:58:46.895Z appoptics:patching patched dns 
2022-04-28T06:58:46.952Z appoptics:patching patched tedious 9.2.2
2022-04-28T06:58:46.956Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (210ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 23 packages, removed 2 packages, changed 3 packages, and audited 903 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:00.380Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:00.381Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:00.381Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:00.381Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:00.470Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:00.661Z appoptics:patching patched crypto 
2022-04-28T06:59:00.705Z appoptics:patching patched https 
2022-04-28T06:59:00.706Z appoptics:patching patched http 
2022-04-28T06:59:00.845Z appoptics:patching patched zlib 
2022-04-28T06:59:00.849Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:00.849Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:00.850Z appoptics:patching patched fs 
2022-04-28T06:59:00.948Z appoptics:patching patched dns 
2022-04-28T06:59:01.098Z appoptics:patching patched tedious 9.2.3
2022-04-28T06:59:01.102Z appoptics:debug starting runtimeMetrics


  probes.tedious 9.2.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (115ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 903 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:15.069Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:15.070Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:15.070Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:15.070Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:15.140Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:15.266Z appoptics:patching patched crypto 
2022-04-28T06:59:15.286Z appoptics:patching patched https 
2022-04-28T06:59:15.287Z appoptics:patching patched http 
2022-04-28T06:59:15.368Z appoptics:patching patched zlib 
2022-04-28T06:59:15.371Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:15.372Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:15.372Z appoptics:patching patched fs 
2022-04-28T06:59:15.469Z appoptics:patching patched dns 
2022-04-28T06:59:15.621Z appoptics:patching patched tedious 10.0.0
2022-04-28T06:59:15.625Z appoptics:debug starting runtimeMetrics


  probes.tedious 10.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (118ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 903 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

5 vulnerabilities (3 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:29.559Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:29.560Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:29.560Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:29.560Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:29.626Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:29.749Z appoptics:patching patched crypto 
2022-04-28T06:59:29.769Z appoptics:patching patched https 
2022-04-28T06:59:29.769Z appoptics:patching patched http 
2022-04-28T06:59:29.850Z appoptics:patching patched zlib 
2022-04-28T06:59:29.854Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:29.854Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:29.854Z appoptics:patching patched fs 
2022-04-28T06:59:29.939Z appoptics:patching patched dns 
2022-04-28T06:59:30.100Z appoptics:patching patched tedious 11.0.0
2022-04-28T06:59:30.104Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (114ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 3 packages, removed 23 packages, changed 4 packages, and audited 883 packages in 10s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T06:59:44.394Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T06:59:44.394Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T06:59:44.395Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T06:59:44.395Z appoptics:debug using context provider: ace-context
2022-04-28T06:59:44.459Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T06:59:44.579Z appoptics:patching patched crypto 
2022-04-28T06:59:44.601Z appoptics:patching patched https 
2022-04-28T06:59:44.603Z appoptics:patching patched http 
2022-04-28T06:59:44.681Z appoptics:patching patched zlib 
2022-04-28T06:59:44.684Z appoptics:patching fs.realpath - adding native method
2022-04-28T06:59:44.685Z appoptics:patching fsPromises.exists not a function
2022-04-28T06:59:44.685Z appoptics:patching patched fs 
2022-04-28T06:59:44.782Z appoptics:patching patched dns 
2022-04-28T06:59:44.841Z appoptics:patching patched tedious 11.0.1
2022-04-28T06:59:44.845Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (140ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 1 package, changed 1 package, and audited 884 packages in 20s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:09.794Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:09.795Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:09.795Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:09.795Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:09.864Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:10.013Z appoptics:patching patched crypto 
2022-04-28T07:00:10.065Z appoptics:patching patched https 
2022-04-28T07:00:10.066Z appoptics:patching patched http 
2022-04-28T07:00:10.136Z appoptics:patching patched zlib 
2022-04-28T07:00:10.140Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:10.141Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:10.141Z appoptics:patching patched fs 
2022-04-28T07:00:10.239Z appoptics:patching patched dns 
2022-04-28T07:00:10.303Z appoptics:patching patched tedious 11.0.2
2022-04-28T07:00:10.307Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (168ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:24.366Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:24.367Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:24.367Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:24.367Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:24.492Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:24.678Z appoptics:patching patched crypto 
2022-04-28T07:00:24.745Z appoptics:patching patched https 
2022-04-28T07:00:24.745Z appoptics:patching patched http 
2022-04-28T07:00:24.865Z appoptics:patching patched zlib 
2022-04-28T07:00:24.869Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:24.869Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:24.870Z appoptics:patching patched fs 
2022-04-28T07:00:24.972Z appoptics:patching patched dns 
2022-04-28T07:00:25.035Z appoptics:patching patched tedious 11.0.3
2022-04-28T07:00:25.040Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (116ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:39.068Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:39.069Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:39.069Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:39.069Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:39.139Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:39.267Z appoptics:patching patched crypto 
2022-04-28T07:00:39.287Z appoptics:patching patched https 
2022-04-28T07:00:39.288Z appoptics:patching patched http 
2022-04-28T07:00:39.366Z appoptics:patching patched zlib 
2022-04-28T07:00:39.370Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:39.371Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:39.371Z appoptics:patching patched fs 
2022-04-28T07:00:39.455Z appoptics:patching patched dns 
2022-04-28T07:00:39.534Z appoptics:patching patched tedious 11.0.4
2022-04-28T07:00:39.538Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (117ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 9s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:00:53.422Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:00:53.422Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:00:53.422Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:00:53.423Z appoptics:debug using context provider: ace-context
2022-04-28T07:00:53.489Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:00:53.610Z appoptics:patching patched crypto 
2022-04-28T07:00:53.631Z appoptics:patching patched https 
2022-04-28T07:00:53.631Z appoptics:patching patched http 
2022-04-28T07:00:53.712Z appoptics:patching patched zlib 
2022-04-28T07:00:53.716Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:00:53.716Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:00:53.716Z appoptics:patching patched fs 
2022-04-28T07:00:53.812Z appoptics:patching patched dns 
2022-04-28T07:00:53.874Z appoptics:patching patched tedious 11.0.5
2022-04-28T07:00:53.878Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (134ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:06.955Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:06.955Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:06.955Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:06.956Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:07.024Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:07.178Z appoptics:patching patched crypto 
2022-04-28T07:01:07.217Z appoptics:patching patched https 
2022-04-28T07:01:07.218Z appoptics:patching patched http 
2022-04-28T07:01:07.288Z appoptics:patching patched zlib 
2022-04-28T07:01:07.292Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:07.292Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:07.293Z appoptics:patching patched fs 
2022-04-28T07:01:07.389Z appoptics:patching patched dns 
2022-04-28T07:01:07.451Z appoptics:patching patched tedious 11.0.6
2022-04-28T07:01:07.455Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.6
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (124ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:20.769Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:20.769Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:20.770Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:20.770Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:20.836Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:20.957Z appoptics:patching patched crypto 
2022-04-28T07:01:20.977Z appoptics:patching patched https 
2022-04-28T07:01:20.978Z appoptics:patching patched http 
2022-04-28T07:01:21.073Z appoptics:patching patched zlib 
2022-04-28T07:01:21.078Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:21.078Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:21.078Z appoptics:patching patched fs 
2022-04-28T07:01:21.195Z appoptics:patching patched dns 
2022-04-28T07:01:21.259Z appoptics:patching patched tedious 11.0.7
2022-04-28T07:01:21.263Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.7
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (125ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 884 packages in 8s

87 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:34.063Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:34.064Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:34.064Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:34.064Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:34.137Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:34.267Z appoptics:patching patched crypto 
2022-04-28T07:01:34.308Z appoptics:patching patched https 
2022-04-28T07:01:34.308Z appoptics:patching patched http 
2022-04-28T07:01:34.377Z appoptics:patching patched zlib 
2022-04-28T07:01:34.381Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:34.381Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:34.382Z appoptics:patching patched fs 
2022-04-28T07:01:34.479Z appoptics:patching patched dns 
2022-04-28T07:01:34.540Z appoptics:patching patched tedious 11.0.8
2022-04-28T07:01:34.544Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.8
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (201ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 98 packages, removed 2 packages, changed 5 packages, and audited 980 packages in 12s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:01:51.293Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:01:51.294Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:01:51.294Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:01:51.294Z appoptics:debug using context provider: ace-context
2022-04-28T07:01:51.367Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:01:51.506Z appoptics:patching patched crypto 
2022-04-28T07:01:51.533Z appoptics:patching patched https 
2022-04-28T07:01:51.534Z appoptics:patching patched http 
2022-04-28T07:01:51.643Z appoptics:patching patched zlib 
2022-04-28T07:01:51.647Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:01:51.647Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:01:51.647Z appoptics:patching patched fs 
2022-04-28T07:01:51.758Z appoptics:patching patched dns 
2022-04-28T07:01:51.831Z appoptics:patching patched tedious 11.0.9
2022-04-28T07:01:51.836Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.9
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (124ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 8s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:04.590Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:04.591Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:04.591Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:04.591Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:04.658Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:04.777Z appoptics:patching patched crypto 
2022-04-28T07:02:04.797Z appoptics:patching patched https 
2022-04-28T07:02:04.797Z appoptics:patching patched http 
2022-04-28T07:02:04.879Z appoptics:patching patched zlib 
2022-04-28T07:02:04.882Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:04.883Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:04.883Z appoptics:patching patched fs 
2022-04-28T07:02:04.977Z appoptics:patching patched dns 
2022-04-28T07:02:05.038Z appoptics:patching patched tedious 11.0.10
2022-04-28T07:02:05.042Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.0.10
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (120ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:18.494Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:18.495Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:18.495Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:18.495Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:18.576Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:18.718Z appoptics:patching patched crypto 
2022-04-28T07:02:18.738Z appoptics:patching patched https 
2022-04-28T07:02:18.738Z appoptics:patching patched http 
2022-04-28T07:02:18.859Z appoptics:patching patched zlib 
2022-04-28T07:02:18.862Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:18.863Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:18.863Z appoptics:patching patched fs 
2022-04-28T07:02:18.980Z appoptics:patching patched dns 
2022-04-28T07:02:19.049Z appoptics:patching patched tedious 11.1.0
2022-04-28T07:02:19.053Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (117ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:32.907Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:32.907Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:32.907Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:32.908Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:32.974Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:33.096Z appoptics:patching patched crypto 
2022-04-28T07:02:33.116Z appoptics:patching patched https 
2022-04-28T07:02:33.116Z appoptics:patching patched http 
2022-04-28T07:02:33.197Z appoptics:patching patched zlib 
2022-04-28T07:02:33.201Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:33.201Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:33.201Z appoptics:patching patched fs 
2022-04-28T07:02:33.293Z appoptics:patching patched dns 
2022-04-28T07:02:33.355Z appoptics:patching patched tedious 11.1.1
2022-04-28T07:02:33.358Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.1.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (128ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 980 packages in 8s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:02:45.826Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:02:45.827Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:02:45.827Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:02:45.827Z appoptics:debug using context provider: ace-context
2022-04-28T07:02:45.894Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:02:46.020Z appoptics:patching patched crypto 
2022-04-28T07:02:46.044Z appoptics:patching patched https 
2022-04-28T07:02:46.044Z appoptics:patching patched http 
2022-04-28T07:02:46.152Z appoptics:patching patched zlib 
2022-04-28T07:02:46.156Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:02:46.157Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:02:46.157Z appoptics:patching patched fs 
2022-04-28T07:02:46.261Z appoptics:patching patched dns 
2022-04-28T07:02:46.321Z appoptics:patching patched tedious 11.2.0
2022-04-28T07:02:46.326Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (152ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


added 1 package, changed 4 packages, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:00.638Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:00.639Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:00.639Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:00.639Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:00.709Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:00.839Z appoptics:patching patched crypto 
2022-04-28T07:03:00.859Z appoptics:patching patched https 
2022-04-28T07:03:00.859Z appoptics:patching patched http 
2022-04-28T07:03:00.951Z appoptics:patching patched zlib 
2022-04-28T07:03:00.955Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:00.956Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:00.956Z appoptics:patching patched fs 
2022-04-28T07:03:01.060Z appoptics:patching patched dns 
2022-04-28T07:03:01.126Z appoptics:patching patched tedious 11.3.0
2022-04-28T07:03:01.131Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (150ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:15.536Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:15.537Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:15.537Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:15.537Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:15.607Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:15.745Z appoptics:patching patched crypto 
2022-04-28T07:03:15.765Z appoptics:patching patched https 
2022-04-28T07:03:15.766Z appoptics:patching patched http 
2022-04-28T07:03:15.849Z appoptics:patching patched zlib 
2022-04-28T07:03:15.853Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:15.854Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:15.854Z appoptics:patching patched fs 
2022-04-28T07:03:15.953Z appoptics:patching patched dns 
2022-04-28T07:03:16.018Z appoptics:patching patched tedious 11.3.1
2022-04-28T07:03:16.022Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.3.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (124ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:29.658Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:29.659Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:29.659Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:29.659Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:29.726Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:29.848Z appoptics:patching patched crypto 
2022-04-28T07:03:29.868Z appoptics:patching patched https 
2022-04-28T07:03:29.869Z appoptics:patching patched http 
2022-04-28T07:03:29.947Z appoptics:patching patched zlib 
2022-04-28T07:03:29.950Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:29.951Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:29.951Z appoptics:patching patched fs 
2022-04-28T07:03:30.047Z appoptics:patching patched dns 
2022-04-28T07:03:30.110Z appoptics:patching patched tedious 11.4.0
2022-04-28T07:03:30.114Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (121ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:43.497Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:43.498Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:43.498Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:43.499Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:43.617Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:43.761Z appoptics:patching patched crypto 
2022-04-28T07:03:43.782Z appoptics:patching patched https 
2022-04-28T07:03:43.782Z appoptics:patching patched http 
2022-04-28T07:03:43.862Z appoptics:patching patched zlib 
2022-04-28T07:03:43.865Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:43.865Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:43.866Z appoptics:patching patched fs 
2022-04-28T07:03:43.952Z appoptics:patching patched dns 
2022-04-28T07:03:44.032Z appoptics:patching patched tedious 11.4.1
2022-04-28T07:03:44.039Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (129ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:03:58.223Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:03:58.223Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:03:58.223Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:03:58.223Z appoptics:debug using context provider: ace-context
2022-04-28T07:03:58.292Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:03:58.421Z appoptics:patching patched crypto 
2022-04-28T07:03:58.442Z appoptics:patching patched https 
2022-04-28T07:03:58.442Z appoptics:patching patched http 
2022-04-28T07:03:58.526Z appoptics:patching patched zlib 
2022-04-28T07:03:58.530Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:03:58.530Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:03:58.531Z appoptics:patching patched fs 
2022-04-28T07:03:58.630Z appoptics:patching patched dns 
2022-04-28T07:03:58.695Z appoptics:patching patched tedious 11.4.2
2022-04-28T07:03:58.699Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.4.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (139ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:12.868Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:12.869Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:12.869Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:12.869Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:12.935Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:13.072Z appoptics:patching patched crypto 
2022-04-28T07:04:13.101Z appoptics:patching patched https 
2022-04-28T07:04:13.101Z appoptics:patching patched http 
2022-04-28T07:04:13.189Z appoptics:patching patched zlib 
2022-04-28T07:04:13.193Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:13.193Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:13.194Z appoptics:patching patched fs 
2022-04-28T07:04:13.306Z appoptics:patching patched dns 
2022-04-28T07:04:13.391Z appoptics:patching patched tedious 11.5.0
2022-04-28T07:04:13.395Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (125ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:27.415Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:27.415Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:27.415Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:27.416Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:27.487Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:27.624Z appoptics:patching patched crypto 
2022-04-28T07:04:27.647Z appoptics:patching patched https 
2022-04-28T07:04:27.647Z appoptics:patching patched http 
2022-04-28T07:04:27.721Z appoptics:patching patched zlib 
2022-04-28T07:04:27.724Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:27.725Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:27.725Z appoptics:patching patched fs 
2022-04-28T07:04:27.811Z appoptics:patching patched dns 
2022-04-28T07:04:27.895Z appoptics:patching patched tedious 11.6.0
2022-04-28T07:04:27.899Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (118ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:41.823Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:41.824Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:41.824Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:41.824Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:41.902Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:42.031Z appoptics:patching patched crypto 
2022-04-28T07:04:42.049Z appoptics:patching patched https 
2022-04-28T07:04:42.050Z appoptics:patching patched http 
2022-04-28T07:04:42.133Z appoptics:patching patched zlib 
2022-04-28T07:04:42.137Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:42.137Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:42.137Z appoptics:patching patched fs 
2022-04-28T07:04:42.220Z appoptics:patching patched dns 
2022-04-28T07:04:42.299Z appoptics:patching patched tedious 11.6.1
2022-04-28T07:04:42.303Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.6.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (119ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 11s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:04:58.214Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:04:58.215Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:04:58.215Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:04:58.215Z appoptics:debug using context provider: ace-context
2022-04-28T07:04:58.282Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:04:58.409Z appoptics:patching patched crypto 
2022-04-28T07:04:58.453Z appoptics:patching patched https 
2022-04-28T07:04:58.454Z appoptics:patching patched http 
2022-04-28T07:04:58.537Z appoptics:patching patched zlib 
2022-04-28T07:04:58.541Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:04:58.541Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:04:58.542Z appoptics:patching patched fs 
2022-04-28T07:04:58.703Z appoptics:patching patched dns 
2022-04-28T07:04:58.777Z appoptics:patching patched tedious 11.7.0
2022-04-28T07:04:58.780Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.7.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (140ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 23s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:26.409Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:26.410Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:26.410Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:26.410Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:26.477Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:26.601Z appoptics:patching patched crypto 
2022-04-28T07:05:26.622Z appoptics:patching patched https 
2022-04-28T07:05:26.622Z appoptics:patching patched http 
2022-04-28T07:05:26.693Z appoptics:patching patched zlib 
2022-04-28T07:05:26.697Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:26.697Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:26.697Z appoptics:patching patched fs 
2022-04-28T07:05:26.781Z appoptics:patching patched dns 
2022-04-28T07:05:26.861Z appoptics:patching patched tedious 11.8.0
2022-04-28T07:05:26.864Z appoptics:debug starting runtimeMetrics


  probes.tedious 11.8.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (116ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:41.792Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:41.792Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:41.793Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:41.793Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:41.861Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:41.999Z appoptics:patching patched crypto 
2022-04-28T07:05:42.020Z appoptics:patching patched https 
2022-04-28T07:05:42.021Z appoptics:patching patched http 
2022-04-28T07:05:42.097Z appoptics:patching patched zlib 
2022-04-28T07:05:42.101Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:42.102Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:42.102Z appoptics:patching patched fs 
2022-04-28T07:05:42.190Z appoptics:patching patched dns 
2022-04-28T07:05:42.271Z appoptics:patching patched tedious 12.0.0
2022-04-28T07:05:42.275Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (118ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:05:55.913Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:05:55.913Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:05:55.913Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:05:55.920Z appoptics:debug using context provider: ace-context
2022-04-28T07:05:56.010Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:05:56.152Z appoptics:patching patched crypto 
2022-04-28T07:05:56.211Z appoptics:patching patched https 
2022-04-28T07:05:56.211Z appoptics:patching patched http 
2022-04-28T07:05:56.273Z appoptics:patching patched zlib 
2022-04-28T07:05:56.276Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:05:56.277Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:05:56.277Z appoptics:patching patched fs 
2022-04-28T07:05:56.395Z appoptics:patching patched dns 
2022-04-28T07:05:56.473Z appoptics:patching patched tedious 12.1.0
2022-04-28T07:05:56.478Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (125ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:10.685Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:10.685Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:10.685Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:10.685Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:10.797Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:10.995Z appoptics:patching patched crypto 
2022-04-28T07:06:11.035Z appoptics:patching patched https 
2022-04-28T07:06:11.036Z appoptics:patching patched http 
2022-04-28T07:06:11.132Z appoptics:patching patched zlib 
2022-04-28T07:06:11.136Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:11.137Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:11.137Z appoptics:patching patched fs 
2022-04-28T07:06:11.282Z appoptics:patching patched dns 
2022-04-28T07:06:11.375Z appoptics:patching patched tedious 12.2.0
2022-04-28T07:06:11.379Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (120ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 3 packages, and audited 981 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:25.276Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:25.276Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:25.276Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:25.276Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:25.345Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:25.471Z appoptics:patching patched crypto 
2022-04-28T07:06:25.491Z appoptics:patching patched https 
2022-04-28T07:06:25.492Z appoptics:patching patched http 
2022-04-28T07:06:25.563Z appoptics:patching patched zlib 
2022-04-28T07:06:25.566Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:25.567Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:25.567Z appoptics:patching patched fs 
2022-04-28T07:06:25.650Z appoptics:patching patched dns 
2022-04-28T07:06:25.738Z appoptics:patching patched tedious 12.3.0
2022-04-28T07:06:25.742Z appoptics:debug starting runtimeMetrics


  probes.tedious 12.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (120ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


removed 17 packages, changed 2 packages, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:40.045Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:40.045Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:40.045Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:40.046Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:40.121Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:40.273Z appoptics:patching patched crypto 
2022-04-28T07:06:40.322Z appoptics:patching patched https 
2022-04-28T07:06:40.323Z appoptics:patching patched http 
2022-04-28T07:06:40.398Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:40.401Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:40.402Z appoptics:patching patched fs 
2022-04-28T07:06:40.450Z appoptics:patching patched zlib 
2022-04-28T07:06:40.540Z appoptics:patching patched dns 
2022-04-28T07:06:40.622Z appoptics:patching patched tedious 13.0.0
2022-04-28T07:06:40.626Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (118ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:06:54.487Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:06:54.488Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:06:54.488Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:06:54.488Z appoptics:debug using context provider: ace-context
2022-04-28T07:06:54.572Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:06:54.713Z appoptics:patching patched crypto 
2022-04-28T07:06:54.734Z appoptics:patching patched https 
2022-04-28T07:06:54.734Z appoptics:patching patched http 
2022-04-28T07:06:54.808Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:06:54.808Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:06:54.809Z appoptics:patching patched fs 
2022-04-28T07:06:54.836Z appoptics:patching patched zlib 
2022-04-28T07:06:54.914Z appoptics:patching patched dns 
2022-04-28T07:06:54.998Z appoptics:patching patched tedious 13.0.1
2022-04-28T07:06:55.002Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.1
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (117ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:08.306Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:08.307Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:08.307Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:08.307Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:08.374Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:08.497Z appoptics:patching patched crypto 
2022-04-28T07:07:08.517Z appoptics:patching patched https 
2022-04-28T07:07:08.517Z appoptics:patching patched http 
2022-04-28T07:07:08.591Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:08.592Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:08.592Z appoptics:patching patched fs 
2022-04-28T07:07:08.617Z appoptics:patching patched zlib 
2022-04-28T07:07:08.697Z appoptics:patching patched dns 
2022-04-28T07:07:08.787Z appoptics:patching patched tedious 13.0.2
2022-04-28T07:07:08.791Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.2
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (138ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:22.470Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:22.471Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:22.471Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:22.471Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:22.582Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:22.807Z appoptics:patching patched crypto 
2022-04-28T07:07:22.840Z appoptics:patching patched https 
2022-04-28T07:07:22.840Z appoptics:patching patched http 
2022-04-28T07:07:22.940Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:22.941Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:22.941Z appoptics:patching patched fs 
2022-04-28T07:07:22.967Z appoptics:patching patched zlib 
2022-04-28T07:07:23.072Z appoptics:patching patched dns 
2022-04-28T07:07:23.170Z appoptics:patching patched tedious 13.0.3
2022-04-28T07:07:23.175Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.3
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (126ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:37.735Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:37.736Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:37.736Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:37.736Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:37.804Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:37.927Z appoptics:patching patched crypto 
2022-04-28T07:07:37.948Z appoptics:patching patched https 
2022-04-28T07:07:37.948Z appoptics:patching patched http 
2022-04-28T07:07:38.026Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:38.026Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:38.027Z appoptics:patching patched fs 
2022-04-28T07:07:38.052Z appoptics:patching patched zlib 
2022-04-28T07:07:38.139Z appoptics:patching patched dns 
2022-04-28T07:07:38.238Z appoptics:patching patched tedious 13.0.4
2022-04-28T07:07:38.242Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.4
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (117ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:07:52.695Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:07:52.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:07:52.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:07:52.696Z appoptics:debug using context provider: ace-context
2022-04-28T07:07:52.762Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:07:52.888Z appoptics:patching patched crypto 
2022-04-28T07:07:52.908Z appoptics:patching patched https 
2022-04-28T07:07:52.909Z appoptics:patching patched http 
2022-04-28T07:07:52.989Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:07:52.990Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:07:52.990Z appoptics:patching patched fs 
2022-04-28T07:07:53.015Z appoptics:patching patched zlib 
2022-04-28T07:07:53.098Z appoptics:patching patched dns 
2022-04-28T07:07:53.193Z appoptics:patching patched tedious 13.0.5
2022-04-28T07:07:53.197Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.0.5
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (127ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:07.250Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:07.251Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:07.251Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:07.251Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:07.328Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:07.474Z appoptics:patching patched crypto 
2022-04-28T07:08:07.496Z appoptics:patching patched https 
2022-04-28T07:08:07.497Z appoptics:patching patched http 
2022-04-28T07:08:07.579Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:07.579Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:07.579Z appoptics:patching patched fs 
2022-04-28T07:08:07.606Z appoptics:patching patched zlib 
2022-04-28T07:08:07.688Z appoptics:patching patched dns 
2022-04-28T07:08:07.780Z appoptics:patching patched tedious 13.1.0
2022-04-28T07:08:07.784Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (122ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:21.695Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:21.696Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:21.696Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:21.696Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:21.784Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:22.011Z appoptics:patching patched crypto 
2022-04-28T07:08:22.120Z appoptics:patching patched https 
2022-04-28T07:08:22.122Z appoptics:patching patched http 
2022-04-28T07:08:22.203Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:22.203Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:22.204Z appoptics:patching patched fs 
2022-04-28T07:08:22.231Z appoptics:patching patched zlib 
2022-04-28T07:08:22.340Z appoptics:patching patched dns 
2022-04-28T07:08:22.450Z appoptics:patching patched tedious 13.2.0
2022-04-28T07:08:22.454Z appoptics:debug starting runtimeMetrics


  probes.tedious 13.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (125ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 10s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:37.157Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:37.158Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:37.158Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:37.158Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:37.230Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:37.355Z appoptics:patching patched crypto 
2022-04-28T07:08:37.375Z appoptics:patching patched https 
2022-04-28T07:08:37.376Z appoptics:patching patched http 
2022-04-28T07:08:37.450Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:37.451Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:37.451Z appoptics:patching patched fs 
2022-04-28T07:08:37.477Z appoptics:patching patched zlib 
2022-04-28T07:08:37.559Z appoptics:patching patched dns 
2022-04-28T07:08:37.649Z appoptics:patching patched tedious 14.0.0
2022-04-28T07:08:37.653Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.0.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (132ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:08:51.300Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:08:51.301Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:08:51.301Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:08:51.301Z appoptics:debug using context provider: ace-context
2022-04-28T07:08:51.368Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:08:51.494Z appoptics:patching patched crypto 
2022-04-28T07:08:51.515Z appoptics:patching patched https 
2022-04-28T07:08:51.515Z appoptics:patching patched http 
2022-04-28T07:08:51.592Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:08:51.592Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:08:51.592Z appoptics:patching patched fs 
2022-04-28T07:08:51.619Z appoptics:patching patched zlib 
2022-04-28T07:08:51.700Z appoptics:patching patched dns 
2022-04-28T07:08:51.813Z appoptics:patching patched tedious 14.1.0
2022-04-28T07:08:51.817Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.1.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (123ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)


changed 1 package, and audited 964 packages in 9s

93 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:05.666Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:05.667Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:05.667Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:05.667Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:05.733Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:05.857Z appoptics:patching patched crypto 
2022-04-28T07:09:05.877Z appoptics:patching patched https 
2022-04-28T07:09:05.877Z appoptics:patching patched http 
2022-04-28T07:09:05.952Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:05.953Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:05.953Z appoptics:patching patched fs 
2022-04-28T07:09:05.978Z appoptics:patching patched zlib 
2022-04-28T07:09:06.058Z appoptics:patching patched dns 
2022-04-28T07:09:06.152Z appoptics:patching patched tedious 14.2.0
2022-04-28T07:09:06.156Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.2.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (137ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@azure/msal-node@1.8.0',
npm WARN EBADENGINE   required: { node: '10 || 12 || 14 || 16' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 5 packages, removed 46 packages, changed 5 packages, and audited 923 packages in 8s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:19.034Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:19.035Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:19.035Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:19.035Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:19.123Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:19.246Z appoptics:patching patched crypto 
2022-04-28T07:09:19.267Z appoptics:patching patched https 
2022-04-28T07:09:19.268Z appoptics:patching patched http 
2022-04-28T07:09:19.328Z appoptics:patching patched zlib 
2022-04-28T07:09:19.386Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:19.386Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:19.387Z appoptics:patching patched fs 
2022-04-28T07:09:19.435Z appoptics:patching patched dns 
2022-04-28T07:09:19.520Z appoptics:patching patched tedious 14.3.0
2022-04-28T07:09:19.524Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.3.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (129ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@azure/msal-node@1.8.0',
npm WARN EBADENGINE   required: { node: '10 || 12 || 14 || 16' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 8s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:32.887Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:32.888Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:32.888Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:32.888Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:32.993Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:33.293Z appoptics:patching patched crypto 
2022-04-28T07:09:33.369Z appoptics:patching patched https 
2022-04-28T07:09:33.370Z appoptics:patching patched http 
2022-04-28T07:09:33.533Z appoptics:patching patched zlib 
2022-04-28T07:09:33.655Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:33.655Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:33.656Z appoptics:patching patched fs 
2022-04-28T07:09:33.762Z appoptics:patching patched dns 
2022-04-28T07:09:33.908Z appoptics:patching patched tedious 14.4.0
2022-04-28T07:09:33.915Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.4.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (122ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@azure/msal-node@1.8.0',
npm WARN EBADENGINE   required: { node: '10 || 12 || 14 || 16' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

added 4 packages, changed 1 package, and audited 927 packages in 10s

92 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-28T07:09:48.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-28T07:09:48.772Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-28T07:09:48.773Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-28T07:09:48.773Z appoptics:debug using context provider: ace-context
2022-04-28T07:09:48.840Z appoptics:debug apm 10.2.2-nh.0, bindings 12.0.0-nh.1, oboe 10.3.3
2022-04-28T07:09:48.964Z appoptics:patching patched crypto 
2022-04-28T07:09:48.984Z appoptics:patching patched https 
2022-04-28T07:09:48.985Z appoptics:patching patched http 
2022-04-28T07:09:49.048Z appoptics:patching patched zlib 
2022-04-28T07:09:49.106Z appoptics:patching fs.realpath - adding native method
2022-04-28T07:09:49.106Z appoptics:patching fsPromises.exists not a function
2022-04-28T07:09:49.107Z appoptics:patching patched fs 
2022-04-28T07:09:49.154Z appoptics:patching patched dns 
2022-04-28T07:09:49.327Z appoptics:patching patched tedious 14.5.0
2022-04-28T07:09:49.332Z appoptics:debug starting runtimeMetrics


  probes.tedious 14.5.0
    ✔ UDP might lose a message
    ✔ should be configured to sanitize SQL by default
    ✔ should be configured to not tag SQL by default
    ✔ should support basic queries with a database name (128ms)
    ✔ should support parameters with a database name
    ✔ should sanitize query with a database name
    ✔ should truncate long queries with a database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with a database name
    ✔ should support basic queries with no database name
    ✔ should support parameters with no database name
    ✔ should sanitize query with no database name
    ✔ should truncate long queries with no database name
    ✔ should tag queries when feature is enabled
    ✔ should do nothing when disabled with no database name


  15 passing (4s)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@azure/msal-node@1.8.0',
npm WARN EBADENGINE   required: { node: '10 || 12 || 14 || 16' },
npm WARN EBADENGINE   current: { node: 'v18.0.0', npm: '8.6.0' }
npm WARN EBADENGINE }

removed 4 packages, changed 1 package, and audited 923 packages in 10s

89 packages are looking for funding
  run `npm fund` for details

2 high severity vulnerabilities

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
