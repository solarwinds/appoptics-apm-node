npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.0
added 1 package from 3 contributors, removed 6 packages, updated 3 packages and audited 929 packages in 4.618s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:21.856Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:21.857Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:21.857Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:21.857Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:21.951Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:22.153Z appoptics:patching patched crypto 
2022-04-21T16:16:22.209Z appoptics:patching patched https 
2022-04-21T16:16:22.209Z appoptics:patching patched http 
2022-04-21T16:16:22.252Z appoptics:patching patched amqplib 0.2.0
2022-04-21T16:16:22.254Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:22.257Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.1
updated 2 packages and audited 929 packages in 4.195s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:31.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:31.531Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:31.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:31.532Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:31.599Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:31.750Z appoptics:patching patched crypto 
2022-04-21T16:16:31.770Z appoptics:patching patched https 
2022-04-21T16:16:31.771Z appoptics:patching patched http 
2022-04-21T16:16:31.825Z appoptics:patching patched amqplib 0.2.1
2022-04-21T16:16:31.827Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:31.829Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:493) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (229ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.0
updated 1 package and audited 929 packages in 5.407s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:38.511Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:38.512Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:38.512Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:38.514Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:38.585Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:38.743Z appoptics:patching patched crypto 
2022-04-21T16:16:38.764Z appoptics:patching patched https 
2022-04-21T16:16:38.764Z appoptics:patching patched http 
2022-04-21T16:16:38.816Z appoptics:patching patched amqplib 0.3.0
2022-04-21T16:16:38.818Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:38.821Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:515) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (57ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (237ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.1
updated 2 packages and audited 929 packages in 4.361s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:44.435Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:44.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:44.436Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:44.438Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:44.508Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:44.660Z appoptics:patching patched crypto 
2022-04-21T16:16:44.680Z appoptics:patching patched https 
2022-04-21T16:16:44.680Z appoptics:patching patched http 
2022-04-21T16:16:44.736Z appoptics:patching patched amqplib 0.3.1
2022-04-21T16:16:44.738Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:44.741Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:537) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (57ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (281ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.2: wanted: {"node":">=0.8 <0.13 || ^1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.2
updated 1 package and audited 929 packages in 5.541s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:51.631Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:51.632Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:51.632Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:51.633Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:51.701Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:51.854Z appoptics:patching patched crypto 
2022-04-21T16:16:51.890Z appoptics:patching patched https 
2022-04-21T16:16:51.890Z appoptics:patching patched http 
2022-04-21T16:16:51.936Z appoptics:patching patched amqplib 0.3.2
2022-04-21T16:16:51.938Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:51.941Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:559) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (52ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (190ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.0: wanted: {"node":">=0.8 <4 || ^4"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.0
updated 1 package and audited 929 packages in 4.325s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:16:57.480Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:57.481Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:57.481Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:57.482Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:57.557Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:57.714Z appoptics:patching patched crypto 
2022-04-21T16:16:57.736Z appoptics:patching patched https 
2022-04-21T16:16:57.736Z appoptics:patching patched http 
2022-04-21T16:16:57.790Z appoptics:patching patched amqplib 0.4.0
2022-04-21T16:16:57.792Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:57.795Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:581) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (66ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (267ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.1: wanted: {"node":">=0.8 <5 || ^5"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.1
updated 1 package and audited 929 packages in 5.102s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:04.348Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:04.349Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:04.349Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:04.352Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:04.420Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:04.573Z appoptics:patching patched crypto 
2022-04-21T16:17:04.592Z appoptics:patching patched https 
2022-04-21T16:17:04.593Z appoptics:patching patched http 
2022-04-21T16:17:04.649Z appoptics:patching patched amqplib 0.4.1
2022-04-21T16:17:04.651Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:04.653Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:603) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (50ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (193ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.2: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.2
updated 1 package and audited 929 packages in 4.206s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:10.227Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:10.228Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:10.228Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:10.231Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:10.360Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:10.538Z appoptics:patching patched crypto 
2022-04-21T16:17:10.574Z appoptics:patching patched https 
2022-04-21T16:17:10.574Z appoptics:patching patched http 
2022-04-21T16:17:10.626Z appoptics:patching patched amqplib 0.4.2
2022-04-21T16:17:10.628Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:10.631Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:625) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (213ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.1: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.1
removed 1 package, updated 1 package and audited 929 packages in 4.948s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:16.896Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:16.896Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:16.896Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:16.897Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:16.963Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:17.119Z appoptics:patching patched crypto 
2022-04-21T16:17:17.139Z appoptics:patching patched https 
2022-04-21T16:17:17.139Z appoptics:patching patched http 
2022-04-21T16:17:17.207Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:17.209Z appoptics:patching patched amqplib 0.5.1
2022-04-21T16:17:17.211Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:17.213Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:647) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (61ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (236ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.2: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.2
updated 1 package and audited 929 packages in 4.351s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:22.885Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:22.885Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:22.885Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:22.886Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:22.979Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:23.227Z appoptics:patching patched crypto 
2022-04-21T16:17:23.269Z appoptics:patching patched https 
2022-04-21T16:17:23.270Z appoptics:patching patched http 
2022-04-21T16:17:23.350Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:23.353Z appoptics:patching patched amqplib 0.5.2
2022-04-21T16:17:23.355Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:23.358Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:669) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (54ms)


  7 passing (226ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.3: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.3
added 7 packages from 5 contributors, updated 3 packages and audited 936 packages in 5.054s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:29.778Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:29.779Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:29.779Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:29.779Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:29.845Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:30.001Z appoptics:patching patched crypto 
2022-04-21T16:17:30.034Z appoptics:patching patched https 
2022-04-21T16:17:30.034Z appoptics:patching patched http 
2022-04-21T16:17:30.100Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:30.102Z appoptics:patching patched amqplib 0.5.3
2022-04-21T16:17:30.104Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:30.107Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:691) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)


  7 passing (198ms)

npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.4: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.4
updated 1 package and audited 936 packages in 4.377s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:35.964Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:35.965Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:35.965Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:35.965Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:36.051Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:36.229Z appoptics:patching patched crypto 
2022-04-21T16:17:36.271Z appoptics:patching patched https 
2022-04-21T16:17:36.272Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:902:15)
    at Function.Module._load (internal/modules/cjs/loader.js:746:27)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.5: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.5
updated 1 package and audited 936 packages in 4.562s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:42.020Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:42.020Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:42.021Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:42.023Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:42.091Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:42.245Z appoptics:patching patched crypto 
2022-04-21T16:17:42.265Z appoptics:patching patched https 
2022-04-21T16:17:42.266Z appoptics:patching patched http 
2022-04-21T16:17:42.337Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:42.340Z appoptics:patching patched amqplib 0.5.5
2022-04-21T16:17:42.343Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:42.345Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:731) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (236ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.6: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.6
updated 1 package and audited 936 packages in 4.326s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:47.988Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:47.989Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:47.989Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:47.989Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:48.110Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:48.349Z appoptics:patching patched crypto 
2022-04-21T16:17:48.407Z appoptics:patching patched https 
2022-04-21T16:17:48.407Z appoptics:patching patched http 
2022-04-21T16:17:48.473Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:48.475Z appoptics:patching patched amqplib 0.5.6
2022-04-21T16:17:48.477Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:48.480Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:753) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)


  7 passing (258ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.6.0
updated 1 package and audited 936 packages in 4.382s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:17:54.406Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:54.407Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:54.407Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:54.413Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:54.484Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:54.637Z appoptics:patching patched crypto 
2022-04-21T16:17:54.656Z appoptics:patching patched https 
2022-04-21T16:17:54.657Z appoptics:patching patched http 
2022-04-21T16:17:54.735Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:54.737Z appoptics:patching patched amqplib 0.6.0
2022-04-21T16:17:54.739Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:54.742Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:775) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (54ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (251ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.0
updated 1 package and audited 936 packages in 4.353s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:00.457Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:00.458Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:00.458Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:00.461Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:00.548Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:00.726Z appoptics:patching patched crypto 
2022-04-21T16:18:00.780Z appoptics:patching patched https 
2022-04-21T16:18:00.780Z appoptics:patching patched http 
2022-04-21T16:18:00.897Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:18:00.904Z appoptics:patching patched amqplib 0.7.0
2022-04-21T16:18:00.906Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:18:00.909Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:797) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (66ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (41ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (274ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.1
removed 1 package, updated 2 packages and audited 935 packages in 4.713s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:07.115Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:07.116Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:07.116Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:07.116Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:07.182Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:07.342Z appoptics:patching patched crypto 
2022-04-21T16:18:07.362Z appoptics:patching patched https 
2022-04-21T16:18:07.363Z appoptics:patching patched http 
2022-04-21T16:18:07.430Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:18:07.433Z appoptics:patching patched amqplib 0.7.1
2022-04-21T16:18:07.435Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:18:07.437Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:819) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (195ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 4.168s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-21T16:18:12.959Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:12.960Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:12.960Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:12.963Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:13.053Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:13.230Z appoptics:patching patched crypto 
2022-04-21T16:18:13.271Z appoptics:patching patched https 
2022-04-21T16:18:13.272Z appoptics:patching patched http 
2022-04-21T16:18:13.347Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:18:13.349Z appoptics:patching patched amqplib 0.8.0
2022-04-21T16:18:13.351Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:18:13.354Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:841) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (58ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (270ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 4.501s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
