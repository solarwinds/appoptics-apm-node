
added 15 packages, removed 5 packages, changed 2 packages, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:27:50.139Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:50.139Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:50.139Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:50.140Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:50.204Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:50.338Z appoptics:patching patched crypto 
2022-04-20T15:27:50.360Z appoptics:patching patched https 
2022-04-20T15:27:50.360Z appoptics:patching patched http 
2022-04-20T15:27:50.403Z appoptics:patching patched pino 2.3.0
2022-04-20T15:27:50.407Z appoptics:debug starting runtimeMetrics


  pino v2.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:27:56.322Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:56.322Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:56.322Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:56.323Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:56.392Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:56.509Z appoptics:patching patched crypto 
2022-04-20T15:27:56.527Z appoptics:patching patched https 
2022-04-20T15:27:56.527Z appoptics:patching patched http 
2022-04-20T15:27:56.569Z appoptics:patching patched pino 2.4.0
2022-04-20T15:27:56.573Z appoptics:debug starting runtimeMetrics


  pino v2.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:03.234Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:03.235Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:03.235Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:03.236Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:03.295Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:03.435Z appoptics:patching patched crypto 
2022-04-20T15:28:03.468Z appoptics:patching patched https 
2022-04-20T15:28:03.469Z appoptics:patching patched http 
2022-04-20T15:28:03.497Z appoptics:patching patched pino 2.4.1
2022-04-20T15:28:03.501Z appoptics:debug starting runtimeMetrics


  pino v2.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:10.030Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:10.030Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:10.030Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:10.031Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:10.095Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:10.226Z appoptics:patching patched crypto 
2022-04-20T15:28:10.245Z appoptics:patching patched https 
2022-04-20T15:28:10.246Z appoptics:patching patched http 
2022-04-20T15:28:10.304Z appoptics:patching patched pino 2.4.2
2022-04-20T15:28:10.308Z appoptics:debug starting runtimeMetrics


  pino v2.4.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:16.523Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:16.524Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:16.524Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:16.525Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:16.601Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:16.721Z appoptics:patching patched crypto 
2022-04-20T15:28:16.747Z appoptics:patching patched https 
2022-04-20T15:28:16.748Z appoptics:patching patched http 
2022-04-20T15:28:16.779Z appoptics:patching patched pino 2.4.3
2022-04-20T15:28:16.782Z appoptics:debug starting runtimeMetrics


  pino v2.4.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:22.849Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:22.850Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:22.850Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:22.850Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:22.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:23.081Z appoptics:patching patched crypto 
2022-04-20T15:28:23.119Z appoptics:patching patched https 
2022-04-20T15:28:23.119Z appoptics:patching patched http 
2022-04-20T15:28:23.163Z appoptics:patching patched pino 2.4.4
2022-04-20T15:28:23.167Z appoptics:debug starting runtimeMetrics


  pino v2.4.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:29.484Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:29.485Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:29.485Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:29.485Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:29.553Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:29.680Z appoptics:patching patched crypto 
2022-04-20T15:28:29.718Z appoptics:patching patched https 
2022-04-20T15:28:29.718Z appoptics:patching patched http 
2022-04-20T15:28:29.759Z appoptics:patching patched pino 2.5.0
2022-04-20T15:28:29.763Z appoptics:debug starting runtimeMetrics


  pino v2.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:37.083Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:37.084Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:37.084Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:37.084Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:37.153Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:37.277Z appoptics:patching patched crypto 
2022-04-20T15:28:37.322Z appoptics:patching patched https 
2022-04-20T15:28:37.323Z appoptics:patching patched http 
2022-04-20T15:28:37.354Z appoptics:patching patched pino 2.6.0
2022-04-20T15:28:37.358Z appoptics:debug starting runtimeMetrics


  pino v2.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (184ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:43.733Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:43.734Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:43.734Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:43.735Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:43.805Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:43.919Z appoptics:patching patched crypto 
2022-04-20T15:28:43.936Z appoptics:patching patched https 
2022-04-20T15:28:43.936Z appoptics:patching patched http 
2022-04-20T15:28:43.979Z appoptics:patching patched pino 2.6.1
2022-04-20T15:28:43.983Z appoptics:debug starting runtimeMetrics


  pino v2.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (185ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:51.045Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:51.046Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:51.046Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:51.046Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:51.117Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:51.254Z appoptics:patching patched crypto 
2022-04-20T15:28:51.313Z appoptics:patching patched https 
2022-04-20T15:28:51.314Z appoptics:patching patched http 
2022-04-20T15:28:51.368Z appoptics:patching patched pino 2.7.0
2022-04-20T15:28:51.372Z appoptics:debug starting runtimeMetrics


  pino v2.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:57.020Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:57.021Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:57.021Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:57.021Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:57.076Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:57.180Z appoptics:patching patched crypto 
2022-04-20T15:28:57.196Z appoptics:patching patched https 
2022-04-20T15:28:57.196Z appoptics:patching patched http 
2022-04-20T15:28:57.233Z appoptics:patching patched pino 2.7.1
2022-04-20T15:28:57.236Z appoptics:debug starting runtimeMetrics


  pino v2.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:03.972Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:03.973Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:03.973Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:03.974Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:04.035Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:04.154Z appoptics:patching patched crypto 
2022-04-20T15:29:04.174Z appoptics:patching patched https 
2022-04-20T15:29:04.174Z appoptics:patching patched http 
2022-04-20T15:29:04.211Z appoptics:patching patched pino 2.7.2
2022-04-20T15:29:04.215Z appoptics:debug starting runtimeMetrics


  pino v2.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:10.853Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:10.854Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:10.854Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:10.854Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:10.913Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:11.033Z appoptics:patching patched crypto 
2022-04-20T15:29:11.053Z appoptics:patching patched https 
2022-04-20T15:29:11.053Z appoptics:patching patched http 
2022-04-20T15:29:11.091Z appoptics:patching patched pino 2.7.3
2022-04-20T15:29:11.095Z appoptics:debug starting runtimeMetrics


  pino v2.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:18.392Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:18.392Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:18.393Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:18.393Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:18.446Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:18.557Z appoptics:patching patched crypto 
2022-04-20T15:29:18.573Z appoptics:patching patched https 
2022-04-20T15:29:18.573Z appoptics:patching patched http 
2022-04-20T15:29:18.611Z appoptics:patching patched pino 2.7.4
2022-04-20T15:29:18.614Z appoptics:debug starting runtimeMetrics


  pino v2.7.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:25.605Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:25.606Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:25.606Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:25.607Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:25.689Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:25.816Z appoptics:patching patched crypto 
2022-04-20T15:29:25.833Z appoptics:patching patched https 
2022-04-20T15:29:25.833Z appoptics:patching patched http 
2022-04-20T15:29:25.868Z appoptics:patching patched pino 2.7.5
2022-04-20T15:29:25.871Z appoptics:debug starting runtimeMetrics


  pino v2.7.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:32.065Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:32.066Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:32.066Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:32.066Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:32.125Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:32.241Z appoptics:patching patched crypto 
2022-04-20T15:29:32.260Z appoptics:patching patched https 
2022-04-20T15:29:32.260Z appoptics:patching patched http 
2022-04-20T15:29:32.298Z appoptics:patching patched pino 2.8.0
2022-04-20T15:29:32.301Z appoptics:debug starting runtimeMetrics


  pino v2.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:38.689Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:38.690Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:38.690Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:38.691Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:38.751Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:38.870Z appoptics:patching patched crypto 
2022-04-20T15:29:38.887Z appoptics:patching patched https 
2022-04-20T15:29:38.888Z appoptics:patching patched http 
2022-04-20T15:29:38.933Z appoptics:patching patched pino 2.8.1
2022-04-20T15:29:38.936Z appoptics:debug starting runtimeMetrics


  pino v2.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:44.477Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:44.477Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:44.477Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:44.478Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:44.530Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:44.637Z appoptics:patching patched crypto 
2022-04-20T15:29:44.653Z appoptics:patching patched https 
2022-04-20T15:29:44.654Z appoptics:patching patched http 
2022-04-20T15:29:44.695Z appoptics:patching patched pino 2.8.2
2022-04-20T15:29:44.699Z appoptics:debug starting runtimeMetrics


  pino v2.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:51.165Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:51.165Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:51.165Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:51.166Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:51.225Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:51.340Z appoptics:patching patched crypto 
2022-04-20T15:29:51.357Z appoptics:patching patched https 
2022-04-20T15:29:51.358Z appoptics:patching patched http 
2022-04-20T15:29:51.402Z appoptics:patching patched pino 2.8.3
2022-04-20T15:29:51.406Z appoptics:debug starting runtimeMetrics


  pino v2.8.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:57.536Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:57.536Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:57.536Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:57.537Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:57.593Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:57.700Z appoptics:patching patched crypto 
2022-04-20T15:29:57.716Z appoptics:patching patched https 
2022-04-20T15:29:57.717Z appoptics:patching patched http 
2022-04-20T15:29:57.757Z appoptics:patching patched pino 2.9.0
2022-04-20T15:29:57.761Z appoptics:debug starting runtimeMetrics


  pino v2.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:04.573Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:04.574Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:04.574Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:04.575Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:04.628Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:04.731Z appoptics:patching patched crypto 
2022-04-20T15:30:04.747Z appoptics:patching patched https 
2022-04-20T15:30:04.747Z appoptics:patching patched http 
2022-04-20T15:30:04.790Z appoptics:patching patched pino 2.10.0
2022-04-20T15:30:04.793Z appoptics:debug starting runtimeMetrics


  pino v2.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:11.122Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:11.123Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:11.123Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:11.124Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:11.181Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:11.299Z appoptics:patching patched crypto 
2022-04-20T15:30:11.316Z appoptics:patching patched https 
2022-04-20T15:30:11.317Z appoptics:patching patched http 
2022-04-20T15:30:11.363Z appoptics:patching patched pino 2.10.1
2022-04-20T15:30:11.367Z appoptics:debug starting runtimeMetrics


  pino v2.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:17.907Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:17.907Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:17.907Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:17.908Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:17.981Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:18.189Z appoptics:patching patched crypto 
2022-04-20T15:30:18.242Z appoptics:patching patched https 
2022-04-20T15:30:18.242Z appoptics:patching patched http 
2022-04-20T15:30:18.286Z appoptics:patching patched pino 2.11.0
2022-04-20T15:30:18.289Z appoptics:debug starting runtimeMetrics


  pino v2.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:24.706Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:24.706Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:24.706Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:24.707Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:24.772Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:24.893Z appoptics:patching patched crypto 
2022-04-20T15:30:24.917Z appoptics:patching patched https 
2022-04-20T15:30:24.917Z appoptics:patching patched http 
2022-04-20T15:30:24.975Z appoptics:patching patched pino 2.12.0
2022-04-20T15:30:24.982Z appoptics:debug starting runtimeMetrics


  pino v2.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:33.527Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:33.527Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:33.527Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:33.528Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:33.582Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:33.685Z appoptics:patching patched crypto 
2022-04-20T15:30:33.701Z appoptics:patching patched https 
2022-04-20T15:30:33.702Z appoptics:patching patched http 
2022-04-20T15:30:33.743Z appoptics:patching patched pino 2.12.1
2022-04-20T15:30:33.746Z appoptics:debug starting runtimeMetrics


  pino v2.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:40.490Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:40.491Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:40.491Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:40.492Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:40.570Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:40.694Z appoptics:patching patched crypto 
2022-04-20T15:30:40.713Z appoptics:patching patched https 
2022-04-20T15:30:40.713Z appoptics:patching patched http 
2022-04-20T15:30:40.758Z appoptics:patching patched pino 2.12.2
2022-04-20T15:30:40.761Z appoptics:debug starting runtimeMetrics


  pino v2.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:46.435Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:46.436Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:46.436Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:46.436Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:46.490Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:46.594Z appoptics:patching patched crypto 
2022-04-20T15:30:46.610Z appoptics:patching patched https 
2022-04-20T15:30:46.610Z appoptics:patching patched http 
2022-04-20T15:30:46.656Z appoptics:patching patched pino 2.12.3
2022-04-20T15:30:46.664Z appoptics:debug starting runtimeMetrics


  pino v2.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:55.219Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:55.219Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:55.219Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:55.220Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:55.274Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:55.379Z appoptics:patching patched crypto 
2022-04-20T15:30:55.395Z appoptics:patching patched https 
2022-04-20T15:30:55.395Z appoptics:patching patched http 
2022-04-20T15:30:55.439Z appoptics:patching patched pino 2.12.4
2022-04-20T15:30:55.442Z appoptics:debug starting runtimeMetrics


  pino v2.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:01.864Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:01.865Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:01.865Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:01.866Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:02.004Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:02.165Z appoptics:patching patched crypto 
2022-04-20T15:31:02.217Z appoptics:patching patched https 
2022-04-20T15:31:02.218Z appoptics:patching patched http 
2022-04-20T15:31:02.285Z appoptics:patching patched pino 2.13.0
2022-04-20T15:31:02.288Z appoptics:debug starting runtimeMetrics


  pino v2.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:07.609Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:07.610Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:07.610Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:07.610Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:07.663Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:07.767Z appoptics:patching patched crypto 
2022-04-20T15:31:07.782Z appoptics:patching patched https 
2022-04-20T15:31:07.783Z appoptics:patching patched http 
2022-04-20T15:31:07.823Z appoptics:patching patched pino 2.13.2
2022-04-20T15:31:07.827Z appoptics:debug starting runtimeMetrics


  pino v2.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:14.956Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:14.957Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:14.957Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:14.957Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:15.016Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:15.132Z appoptics:patching patched crypto 
2022-04-20T15:31:15.150Z appoptics:patching patched https 
2022-04-20T15:31:15.150Z appoptics:patching patched http 
2022-04-20T15:31:15.195Z appoptics:patching patched pino 2.14.0
2022-04-20T15:31:15.199Z appoptics:debug starting runtimeMetrics


  pino v2.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:20.754Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:20.754Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:20.754Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:20.755Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:20.809Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:20.913Z appoptics:patching patched crypto 
2022-04-20T15:31:20.931Z appoptics:patching patched https 
2022-04-20T15:31:20.931Z appoptics:patching patched http 
2022-04-20T15:31:20.974Z appoptics:patching patched pino 2.15.0
2022-04-20T15:31:20.978Z appoptics:debug starting runtimeMetrics


  pino v2.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:27.210Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:27.210Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:27.210Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:27.211Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:27.290Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:27.421Z appoptics:patching patched crypto 
2022-04-20T15:31:27.439Z appoptics:patching patched https 
2022-04-20T15:31:27.440Z appoptics:patching patched http 
2022-04-20T15:31:27.468Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:27.468Z appoptics:patching patched fs 
2022-04-20T15:31:27.489Z appoptics:patching patched pino 2.16.0
2022-04-20T15:31:27.493Z appoptics:debug starting runtimeMetrics


  pino v2.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:33.541Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:33.542Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:33.542Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:33.543Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:33.595Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:33.699Z appoptics:patching patched crypto 
2022-04-20T15:31:33.715Z appoptics:patching patched https 
2022-04-20T15:31:33.715Z appoptics:patching patched http 
2022-04-20T15:31:33.740Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:33.740Z appoptics:patching patched fs 
2022-04-20T15:31:33.752Z appoptics:patching patched pino 3.0.0
2022-04-20T15:31:33.755Z appoptics:debug starting runtimeMetrics


  pino v3.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


added 1 package, removed 1 package, changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:40.845Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:40.846Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:40.846Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:40.847Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:40.907Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:41.024Z appoptics:patching patched crypto 
2022-04-20T15:31:41.042Z appoptics:patching patched https 
2022-04-20T15:31:41.042Z appoptics:patching patched http 
2022-04-20T15:31:41.072Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:41.072Z appoptics:patching patched fs 
2022-04-20T15:31:41.085Z appoptics:patching patched pino 3.0.1
2022-04-20T15:31:41.089Z appoptics:debug starting runtimeMetrics


  pino v3.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:46.790Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:46.790Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:46.790Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:46.791Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:46.844Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:46.948Z appoptics:patching patched crypto 
2022-04-20T15:31:46.966Z appoptics:patching patched https 
2022-04-20T15:31:46.966Z appoptics:patching patched http 
2022-04-20T15:31:46.990Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:46.990Z appoptics:patching patched fs 
2022-04-20T15:31:47.002Z appoptics:patching patched pino 3.0.2
2022-04-20T15:31:47.005Z appoptics:debug starting runtimeMetrics


  pino v3.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:53.159Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:53.159Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:53.159Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:53.160Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:53.217Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:53.332Z appoptics:patching patched crypto 
2022-04-20T15:31:53.350Z appoptics:patching patched https 
2022-04-20T15:31:53.350Z appoptics:patching patched http 
2022-04-20T15:31:53.380Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:53.381Z appoptics:patching patched fs 
2022-04-20T15:31:53.392Z appoptics:patching patched pino 3.0.3
2022-04-20T15:31:53.396Z appoptics:debug starting runtimeMetrics


  pino v3.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:31:59.073Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:31:59.073Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:31:59.073Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:31:59.074Z appoptics:debug using context provider: ace-context
2022-04-20T15:31:59.127Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:31:59.240Z appoptics:patching patched crypto 
2022-04-20T15:31:59.276Z appoptics:patching patched https 
2022-04-20T15:31:59.277Z appoptics:patching patched http 
2022-04-20T15:31:59.312Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:31:59.313Z appoptics:patching patched fs 
2022-04-20T15:31:59.326Z appoptics:patching patched pino 3.0.4
2022-04-20T15:31:59.330Z appoptics:debug starting runtimeMetrics


  pino v3.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 13s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:13.015Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:13.016Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:13.016Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:13.017Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:13.080Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:13.244Z appoptics:patching patched crypto 
2022-04-20T15:32:13.283Z appoptics:patching patched https 
2022-04-20T15:32:13.283Z appoptics:patching patched http 
2022-04-20T15:32:13.310Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:13.310Z appoptics:patching patched fs 
2022-04-20T15:32:13.322Z appoptics:patching patched pino 3.0.5
2022-04-20T15:32:13.325Z appoptics:debug starting runtimeMetrics


  pino v3.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:20.333Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:20.333Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:20.333Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:20.334Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:20.394Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:20.513Z appoptics:patching patched crypto 
2022-04-20T15:32:20.531Z appoptics:patching patched https 
2022-04-20T15:32:20.531Z appoptics:patching patched http 
2022-04-20T15:32:20.561Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:20.561Z appoptics:patching patched fs 
2022-04-20T15:32:20.575Z appoptics:patching patched pino 3.0.6
2022-04-20T15:32:20.578Z appoptics:debug starting runtimeMetrics


  pino v3.0.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:26.859Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:26.860Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:26.860Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:26.860Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:26.914Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:27.023Z appoptics:patching patched crypto 
2022-04-20T15:32:27.039Z appoptics:patching patched https 
2022-04-20T15:32:27.039Z appoptics:patching patched http 
2022-04-20T15:32:27.083Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:27.084Z appoptics:patching patched fs 
2022-04-20T15:32:27.095Z appoptics:patching patched pino 3.0.7
2022-04-20T15:32:27.099Z appoptics:debug starting runtimeMetrics


  pino v3.0.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:32.830Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:32.830Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:32.830Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:32.831Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:32.890Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:33.006Z appoptics:patching patched crypto 
2022-04-20T15:32:33.023Z appoptics:patching patched https 
2022-04-20T15:32:33.024Z appoptics:patching patched http 
2022-04-20T15:32:33.050Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:33.051Z appoptics:patching patched fs 
2022-04-20T15:32:33.064Z appoptics:patching patched pino 3.1.0
2022-04-20T15:32:33.067Z appoptics:debug starting runtimeMetrics


  pino v3.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:38.924Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:38.925Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:38.925Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:38.925Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:38.986Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:39.095Z appoptics:patching patched crypto 
2022-04-20T15:32:39.119Z appoptics:patching patched https 
2022-04-20T15:32:39.119Z appoptics:patching patched http 
2022-04-20T15:32:39.154Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:39.154Z appoptics:patching patched fs 
2022-04-20T15:32:39.179Z appoptics:patching patched pino 3.1.1
2022-04-20T15:32:39.183Z appoptics:debug starting runtimeMetrics


  pino v3.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (181ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:45.063Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:45.064Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:45.064Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:45.065Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:45.118Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:45.223Z appoptics:patching patched crypto 
2022-04-20T15:32:45.238Z appoptics:patching patched https 
2022-04-20T15:32:45.239Z appoptics:patching patched http 
2022-04-20T15:32:45.264Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:45.264Z appoptics:patching patched fs 
2022-04-20T15:32:45.276Z appoptics:patching patched pino 3.1.2
2022-04-20T15:32:45.279Z appoptics:debug starting runtimeMetrics


  pino v3.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:51.492Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:51.493Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:51.493Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:51.493Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:51.560Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:51.667Z appoptics:patching patched crypto 
2022-04-20T15:32:51.683Z appoptics:patching patched https 
2022-04-20T15:32:51.683Z appoptics:patching patched http 
2022-04-20T15:32:51.710Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:51.711Z appoptics:patching patched fs 
2022-04-20T15:32:51.722Z appoptics:patching patched pino 3.1.3
2022-04-20T15:32:51.726Z appoptics:debug starting runtimeMetrics


  pino v3.1.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:32:56.940Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:32:56.940Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:32:56.940Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:32:56.941Z appoptics:debug using context provider: ace-context
2022-04-20T15:32:56.999Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:32:57.113Z appoptics:patching patched crypto 
2022-04-20T15:32:57.131Z appoptics:patching patched https 
2022-04-20T15:32:57.132Z appoptics:patching patched http 
2022-04-20T15:32:57.158Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:32:57.159Z appoptics:patching patched fs 
2022-04-20T15:32:57.171Z appoptics:patching patched pino 3.2.0
2022-04-20T15:32:57.175Z appoptics:debug starting runtimeMetrics


  pino v3.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:03.450Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:03.450Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:03.451Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:03.451Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:03.523Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:03.653Z appoptics:patching patched crypto 
2022-04-20T15:33:03.680Z appoptics:patching patched https 
2022-04-20T15:33:03.680Z appoptics:patching patched http 
2022-04-20T15:33:03.714Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:03.715Z appoptics:patching patched fs 

Error: Cannot find module './lib/events'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/pino/pino.js:7:14)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/pino.test.js:11:14)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.exports.requireOrImport (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:42:12)
    at Object.exports.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js:55:34)
    at Mocha.loadFilesAsync (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js:473:19)
    at singleRun (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:125:15)
    at exports.runMocha (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/run-helpers.js:190:10)

changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:10.161Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:10.162Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:10.162Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:10.163Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:10.258Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:10.392Z appoptics:patching patched crypto 
2022-04-20T15:33:10.410Z appoptics:patching patched https 
2022-04-20T15:33:10.410Z appoptics:patching patched http 
2022-04-20T15:33:10.438Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:10.438Z appoptics:patching patched fs 
2022-04-20T15:33:10.453Z appoptics:patching patched pino 3.3.1
2022-04-20T15:33:10.457Z appoptics:debug starting runtimeMetrics


  pino v3.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (177ms)


changed 1 package, and audited 937 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:18.193Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:18.194Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:18.194Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:18.194Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:18.249Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:18.355Z appoptics:patching patched crypto 
2022-04-20T15:33:18.371Z appoptics:patching patched https 
2022-04-20T15:33:18.372Z appoptics:patching patched http 
2022-04-20T15:33:18.399Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:18.399Z appoptics:patching patched fs 
2022-04-20T15:33:18.413Z appoptics:patching patched pino 3.3.2
2022-04-20T15:33:18.416Z appoptics:debug starting runtimeMetrics


  pino v3.3.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


added 2 packages, changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:24.305Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:24.305Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:24.306Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:24.306Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:24.372Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:24.492Z appoptics:patching patched crypto 
2022-04-20T15:33:24.510Z appoptics:patching patched https 
2022-04-20T15:33:24.511Z appoptics:patching patched http 
2022-04-20T15:33:24.539Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:24.540Z appoptics:patching patched fs 
2022-04-20T15:33:24.556Z appoptics:patching patched pino 3.4.0
2022-04-20T15:33:24.559Z appoptics:debug starting runtimeMetrics


  pino v3.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:30.504Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:30.507Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:30.507Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:30.508Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:30.564Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:30.675Z appoptics:patching patched crypto 
2022-04-20T15:33:30.705Z appoptics:patching patched https 
2022-04-20T15:33:30.705Z appoptics:patching patched http 
2022-04-20T15:33:30.731Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:30.731Z appoptics:patching patched fs 
2022-04-20T15:33:30.751Z appoptics:patching patched pino 4.0.0
2022-04-20T15:33:30.754Z appoptics:debug starting runtimeMetrics


  pino v4.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:36.607Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:36.608Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:36.608Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:36.608Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:36.661Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:36.764Z appoptics:patching patched crypto 
2022-04-20T15:33:36.780Z appoptics:patching patched https 
2022-04-20T15:33:36.781Z appoptics:patching patched http 
2022-04-20T15:33:36.806Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:36.807Z appoptics:patching patched fs 
2022-04-20T15:33:36.820Z appoptics:patching patched pino 4.0.1
2022-04-20T15:33:36.823Z appoptics:debug starting runtimeMetrics


  pino v4.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:42.508Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:42.508Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:42.508Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:42.509Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:42.569Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:42.685Z appoptics:patching patched crypto 
2022-04-20T15:33:42.704Z appoptics:patching patched https 
2022-04-20T15:33:42.705Z appoptics:patching patched http 
2022-04-20T15:33:42.729Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:42.729Z appoptics:patching patched fs 
2022-04-20T15:33:42.745Z appoptics:patching patched pino 4.0.2
2022-04-20T15:33:42.748Z appoptics:debug starting runtimeMetrics


  pino v4.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:48.555Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:48.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:48.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:48.557Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:48.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:48.715Z appoptics:patching patched crypto 
2022-04-20T15:33:48.731Z appoptics:patching patched https 
2022-04-20T15:33:48.731Z appoptics:patching patched http 
2022-04-20T15:33:48.758Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:48.758Z appoptics:patching patched fs 
2022-04-20T15:33:48.773Z appoptics:patching patched pino 4.0.3
2022-04-20T15:33:48.776Z appoptics:debug starting runtimeMetrics


  pino v4.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (186ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:33:54.794Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:33:54.794Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:33:54.795Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:33:54.795Z appoptics:debug using context provider: ace-context
2022-04-20T15:33:54.854Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:33:54.970Z appoptics:patching patched crypto 
2022-04-20T15:33:54.987Z appoptics:patching patched https 
2022-04-20T15:33:54.988Z appoptics:patching patched http 
2022-04-20T15:33:55.015Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:33:55.016Z appoptics:patching patched fs 
2022-04-20T15:33:55.031Z appoptics:patching patched pino 4.1.0
2022-04-20T15:33:55.035Z appoptics:debug starting runtimeMetrics


  pino v4.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:01.082Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:01.082Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:01.082Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:01.083Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:01.146Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:01.282Z appoptics:patching patched crypto 
2022-04-20T15:34:01.306Z appoptics:patching patched https 
2022-04-20T15:34:01.306Z appoptics:patching patched http 
2022-04-20T15:34:01.322Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:01.322Z appoptics:patching patched fs 
2022-04-20T15:34:01.337Z appoptics:patching patched pino 4.1.1
2022-04-20T15:34:01.340Z appoptics:debug starting runtimeMetrics


  pino v4.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:07.120Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:07.121Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:07.121Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:07.122Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:07.185Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:07.303Z appoptics:patching patched crypto 
2022-04-20T15:34:07.337Z appoptics:patching patched https 
2022-04-20T15:34:07.337Z appoptics:patching patched http 
2022-04-20T15:34:07.364Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:07.364Z appoptics:patching patched fs 
2022-04-20T15:34:07.378Z appoptics:patching patched pino 4.1.2
2022-04-20T15:34:07.382Z appoptics:debug starting runtimeMetrics


  pino v4.1.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:13.179Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:13.180Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:13.180Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:13.181Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:13.251Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:13.383Z appoptics:patching patched crypto 
2022-04-20T15:34:13.419Z appoptics:patching patched https 
2022-04-20T15:34:13.420Z appoptics:patching patched http 
2022-04-20T15:34:13.446Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:13.446Z appoptics:patching patched fs 
2022-04-20T15:34:13.460Z appoptics:patching patched pino 4.2.0
2022-04-20T15:34:13.463Z appoptics:debug starting runtimeMetrics


  pino v4.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:19.360Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:19.360Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:19.360Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:19.361Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:19.420Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:19.534Z appoptics:patching patched crypto 
2022-04-20T15:34:19.551Z appoptics:patching patched https 
2022-04-20T15:34:19.552Z appoptics:patching patched http 
2022-04-20T15:34:19.579Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:19.579Z appoptics:patching patched fs 
2022-04-20T15:34:19.594Z appoptics:patching patched pino 4.2.1
2022-04-20T15:34:19.598Z appoptics:debug starting runtimeMetrics


  pino v4.2.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:25.550Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:25.551Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:25.551Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:25.552Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:25.650Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:25.788Z appoptics:patching patched crypto 
2022-04-20T15:34:25.804Z appoptics:patching patched https 
2022-04-20T15:34:25.805Z appoptics:patching patched http 
2022-04-20T15:34:25.830Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:25.830Z appoptics:patching patched fs 
2022-04-20T15:34:25.844Z appoptics:patching patched pino 4.2.2
2022-04-20T15:34:25.847Z appoptics:debug starting runtimeMetrics


  pino v4.2.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:31.692Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:31.693Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:31.693Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:31.693Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:31.748Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:31.864Z appoptics:patching patched crypto 
2022-04-20T15:34:31.888Z appoptics:patching patched https 
2022-04-20T15:34:31.888Z appoptics:patching patched http 
2022-04-20T15:34:31.905Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:31.905Z appoptics:patching patched fs 
2022-04-20T15:34:31.919Z appoptics:patching patched pino 4.2.3
2022-04-20T15:34:31.923Z appoptics:debug starting runtimeMetrics


  pino v4.2.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:38.348Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:38.349Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:38.349Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:38.349Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:38.402Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:38.506Z appoptics:patching patched crypto 
2022-04-20T15:34:38.522Z appoptics:patching patched https 
2022-04-20T15:34:38.523Z appoptics:patching patched http 
2022-04-20T15:34:38.549Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:38.549Z appoptics:patching patched fs 
2022-04-20T15:34:38.563Z appoptics:patching patched pino 4.2.4
2022-04-20T15:34:38.566Z appoptics:debug starting runtimeMetrics


  pino v4.2.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:44.214Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:44.215Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:44.215Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:44.215Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:44.268Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:44.374Z appoptics:patching patched crypto 
2022-04-20T15:34:44.391Z appoptics:patching patched https 
2022-04-20T15:34:44.391Z appoptics:patching patched http 
2022-04-20T15:34:44.414Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:44.414Z appoptics:patching patched fs 
2022-04-20T15:34:44.428Z appoptics:patching patched pino 4.3.0
2022-04-20T15:34:44.431Z appoptics:debug starting runtimeMetrics


  pino v4.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:50.531Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:50.532Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:50.532Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:50.532Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:50.603Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:50.753Z appoptics:patching patched crypto 
2022-04-20T15:34:50.780Z appoptics:patching patched https 
2022-04-20T15:34:50.781Z appoptics:patching patched http 
2022-04-20T15:34:50.799Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:50.800Z appoptics:patching patched fs 
2022-04-20T15:34:50.817Z appoptics:patching patched pino 4.4.0
2022-04-20T15:34:50.821Z appoptics:debug starting runtimeMetrics


  pino v4.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:34:57.010Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:34:57.010Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:34:57.010Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:34:57.011Z appoptics:debug using context provider: ace-context
2022-04-20T15:34:57.070Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:34:57.187Z appoptics:patching patched crypto 
2022-04-20T15:34:57.204Z appoptics:patching patched https 
2022-04-20T15:34:57.205Z appoptics:patching patched http 
2022-04-20T15:34:57.233Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:34:57.233Z appoptics:patching patched fs 
2022-04-20T15:34:57.249Z appoptics:patching patched pino 4.5.0
2022-04-20T15:34:57.252Z appoptics:debug starting runtimeMetrics


  pino v4.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:04.212Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:04.213Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:04.213Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:04.214Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:04.270Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:04.376Z appoptics:patching patched crypto 
2022-04-20T15:35:04.392Z appoptics:patching patched https 
2022-04-20T15:35:04.393Z appoptics:patching patched http 
2022-04-20T15:35:04.419Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:04.419Z appoptics:patching patched fs 
2022-04-20T15:35:04.433Z appoptics:patching patched pino 4.5.1
2022-04-20T15:35:04.436Z appoptics:debug starting runtimeMetrics


  pino v4.5.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:10.954Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:10.954Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:10.954Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:10.955Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:11.014Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:11.119Z appoptics:patching patched crypto 
2022-04-20T15:35:11.135Z appoptics:patching patched https 
2022-04-20T15:35:11.136Z appoptics:patching patched http 
2022-04-20T15:35:11.162Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:11.162Z appoptics:patching patched fs 
2022-04-20T15:35:11.178Z appoptics:patching patched pino 4.5.2
2022-04-20T15:35:11.181Z appoptics:debug starting runtimeMetrics


  pino v4.5.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:18.203Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:18.203Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:18.203Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:18.204Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:18.257Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:18.361Z appoptics:patching patched crypto 
2022-04-20T15:35:18.378Z appoptics:patching patched https 
2022-04-20T15:35:18.379Z appoptics:patching patched http 
2022-04-20T15:35:18.401Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:18.401Z appoptics:patching patched fs 
2022-04-20T15:35:18.415Z appoptics:patching patched pino 4.5.3
2022-04-20T15:35:18.418Z appoptics:debug starting runtimeMetrics


  pino v4.5.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:23.910Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:23.910Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:23.911Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:23.911Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:24.020Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:24.150Z appoptics:patching patched crypto 
2022-04-20T15:35:24.187Z appoptics:patching patched https 
2022-04-20T15:35:24.187Z appoptics:patching patched http 
2022-04-20T15:35:24.216Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:24.216Z appoptics:patching patched fs 
2022-04-20T15:35:24.232Z appoptics:patching patched pino 4.5.4
2022-04-20T15:35:24.236Z appoptics:debug starting runtimeMetrics


  pino v4.5.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:30.077Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:30.077Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:30.077Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:30.078Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:30.137Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:30.255Z appoptics:patching patched crypto 
2022-04-20T15:35:30.273Z appoptics:patching patched https 
2022-04-20T15:35:30.274Z appoptics:patching patched http 
2022-04-20T15:35:30.302Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:30.303Z appoptics:patching patched fs 
2022-04-20T15:35:30.318Z appoptics:patching patched pino 4.6.0
2022-04-20T15:35:30.322Z appoptics:debug starting runtimeMetrics


  pino v4.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


added 3 packages, removed 4 packages, changed 4 packages, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:36.017Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:36.017Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:36.017Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:36.018Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:36.072Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:36.181Z appoptics:patching patched crypto 
2022-04-20T15:35:36.204Z appoptics:patching patched https 
2022-04-20T15:35:36.205Z appoptics:patching patched http 
2022-04-20T15:35:36.228Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:36.229Z appoptics:patching patched fs 
2022-04-20T15:35:36.247Z appoptics:patching patched pino 4.7.0
2022-04-20T15:35:36.250Z appoptics:debug starting runtimeMetrics


  pino v4.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:42.025Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:42.026Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:42.026Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:42.027Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:42.088Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:42.197Z appoptics:patching patched crypto 
2022-04-20T15:35:42.214Z appoptics:patching patched https 
2022-04-20T15:35:42.214Z appoptics:patching patched http 
2022-04-20T15:35:42.259Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:42.266Z appoptics:patching patched fs 
2022-04-20T15:35:42.288Z appoptics:patching patched pino 4.7.1
2022-04-20T15:35:42.292Z appoptics:debug starting runtimeMetrics


  pino v4.7.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:47.760Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:47.761Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:47.761Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:47.761Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:47.815Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:47.929Z appoptics:patching patched crypto 
2022-04-20T15:35:47.947Z appoptics:patching patched https 
2022-04-20T15:35:47.948Z appoptics:patching patched http 
2022-04-20T15:35:47.973Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:47.973Z appoptics:patching patched fs 
2022-04-20T15:35:47.991Z appoptics:patching patched pino 4.7.2
2022-04-20T15:35:47.994Z appoptics:debug starting runtimeMetrics


  pino v4.7.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:35:54.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:35:54.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:35:54.249Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:35:54.249Z appoptics:debug using context provider: ace-context
2022-04-20T15:35:54.303Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:35:54.425Z appoptics:patching patched crypto 
2022-04-20T15:35:54.441Z appoptics:patching patched https 
2022-04-20T15:35:54.441Z appoptics:patching patched http 
2022-04-20T15:35:54.467Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:35:54.467Z appoptics:patching patched fs 
2022-04-20T15:35:54.485Z appoptics:patching patched pino 4.7.3
2022-04-20T15:35:54.488Z appoptics:debug starting runtimeMetrics


  pino v4.7.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:00.340Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:00.341Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:00.341Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:00.341Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:00.411Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:00.551Z appoptics:patching patched crypto 
2022-04-20T15:36:00.591Z appoptics:patching patched https 
2022-04-20T15:36:00.591Z appoptics:patching patched http 
2022-04-20T15:36:00.623Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:00.623Z appoptics:patching patched fs 
2022-04-20T15:36:00.645Z appoptics:patching patched pino 4.8.0
2022-04-20T15:36:00.649Z appoptics:debug starting runtimeMetrics


  pino v4.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (182ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:06.556Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:06.556Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:06.556Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:06.557Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:06.610Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:06.713Z appoptics:patching patched crypto 
2022-04-20T15:36:06.729Z appoptics:patching patched https 
2022-04-20T15:36:06.729Z appoptics:patching patched http 
2022-04-20T15:36:06.756Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:06.757Z appoptics:patching patched fs 
2022-04-20T15:36:06.774Z appoptics:patching patched pino 4.8.1
2022-04-20T15:36:06.777Z appoptics:debug starting runtimeMetrics


  pino v4.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:12.404Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:12.404Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:12.404Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:12.405Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:12.475Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:12.668Z appoptics:patching patched crypto 
2022-04-20T15:36:12.705Z appoptics:patching patched https 
2022-04-20T15:36:12.705Z appoptics:patching patched http 
2022-04-20T15:36:12.733Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:12.734Z appoptics:patching patched fs 
2022-04-20T15:36:12.758Z appoptics:patching patched pino 4.8.2
2022-04-20T15:36:12.763Z appoptics:debug starting runtimeMetrics


  pino v4.8.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:18.438Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:18.439Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:18.439Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:18.439Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:18.496Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:18.613Z appoptics:patching patched crypto 
2022-04-20T15:36:18.630Z appoptics:patching patched https 
2022-04-20T15:36:18.631Z appoptics:patching patched http 
2022-04-20T15:36:18.657Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:18.658Z appoptics:patching patched fs 
2022-04-20T15:36:18.677Z appoptics:patching patched pino 4.9.0
2022-04-20T15:36:18.681Z appoptics:debug starting runtimeMetrics


  pino v4.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:24.040Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:24.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:24.040Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:24.041Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:24.103Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:24.217Z appoptics:patching patched crypto 
2022-04-20T15:36:24.251Z appoptics:patching patched https 
2022-04-20T15:36:24.252Z appoptics:patching patched http 
2022-04-20T15:36:24.280Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:24.286Z appoptics:patching patched fs 
2022-04-20T15:36:24.319Z appoptics:patching patched pino 4.10.0
2022-04-20T15:36:24.322Z appoptics:debug starting runtimeMetrics


  pino v4.10.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (201ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:29.992Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:29.993Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:29.993Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:29.993Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:30.047Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:30.151Z appoptics:patching patched crypto 
2022-04-20T15:36:30.166Z appoptics:patching patched https 
2022-04-20T15:36:30.167Z appoptics:patching patched http 
2022-04-20T15:36:30.192Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:30.192Z appoptics:patching patched fs 
2022-04-20T15:36:30.210Z appoptics:patching patched pino 4.10.1
2022-04-20T15:36:30.213Z appoptics:debug starting runtimeMetrics


  pino v4.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:35.438Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:35.439Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:35.439Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:35.439Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:35.498Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:35.632Z appoptics:patching patched crypto 
2022-04-20T15:36:35.650Z appoptics:patching patched https 
2022-04-20T15:36:35.650Z appoptics:patching patched http 
2022-04-20T15:36:35.686Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:35.686Z appoptics:patching patched fs 
2022-04-20T15:36:35.706Z appoptics:patching patched pino 4.10.2
2022-04-20T15:36:35.709Z appoptics:debug starting runtimeMetrics


  pino v4.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 2 packages, and audited 938 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:41.950Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:41.950Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:41.950Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:41.951Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:42.013Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:42.129Z appoptics:patching patched crypto 
2022-04-20T15:36:42.145Z appoptics:patching patched https 
2022-04-20T15:36:42.145Z appoptics:patching patched http 
2022-04-20T15:36:42.171Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:42.172Z appoptics:patching patched fs 
2022-04-20T15:36:42.190Z appoptics:patching patched pino 4.10.3
2022-04-20T15:36:42.193Z appoptics:debug starting runtimeMetrics


  pino v4.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 938 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:47.349Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:47.350Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:47.350Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:47.350Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:47.404Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:47.520Z appoptics:patching patched crypto 
2022-04-20T15:36:47.537Z appoptics:patching patched https 
2022-04-20T15:36:47.537Z appoptics:patching patched http 
2022-04-20T15:36:47.557Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:47.557Z appoptics:patching patched fs 
2022-04-20T15:36:47.593Z appoptics:patching patched pino 4.10.4
2022-04-20T15:36:47.597Z appoptics:debug starting runtimeMetrics


  pino v4.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 938 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:36:56.844Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:36:56.844Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:36:56.844Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:36:56.845Z appoptics:debug using context provider: ace-context
2022-04-20T15:36:56.919Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:36:57.033Z appoptics:patching patched crypto 
2022-04-20T15:36:57.049Z appoptics:patching patched https 
2022-04-20T15:36:57.049Z appoptics:patching patched http 
2022-04-20T15:36:57.074Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:36:57.074Z appoptics:patching patched fs 
2022-04-20T15:36:57.092Z appoptics:patching patched pino 4.11.0
2022-04-20T15:36:57.095Z appoptics:debug starting runtimeMetrics


  pino v4.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


added 1 package, changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:02.444Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:02.445Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:02.445Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:02.445Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:02.509Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:02.659Z appoptics:patching patched crypto 
2022-04-20T15:37:02.694Z appoptics:patching patched https 
2022-04-20T15:37:02.695Z appoptics:patching patched http 
2022-04-20T15:37:02.719Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:02.719Z appoptics:patching patched fs 
2022-04-20T15:37:02.737Z appoptics:patching patched pino 4.12.0
2022-04-20T15:37:02.740Z appoptics:debug starting runtimeMetrics


  pino v4.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 1 package, and audited 939 packages in 15s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:18.449Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:18.450Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:18.450Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:18.450Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:18.510Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:18.626Z appoptics:patching patched crypto 
2022-04-20T15:37:18.643Z appoptics:patching patched https 
2022-04-20T15:37:18.644Z appoptics:patching patched http 
2022-04-20T15:37:18.673Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:18.673Z appoptics:patching patched fs 
2022-04-20T15:37:18.693Z appoptics:patching patched pino 4.13.0
2022-04-20T15:37:18.697Z appoptics:debug starting runtimeMetrics


  pino v4.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 2 packages, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:25.280Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:25.280Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:25.280Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:25.281Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:25.336Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:25.444Z appoptics:patching patched crypto 
2022-04-20T15:37:25.462Z appoptics:patching patched https 
2022-04-20T15:37:25.462Z appoptics:patching patched http 
2022-04-20T15:37:25.483Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:25.484Z appoptics:patching patched fs 
2022-04-20T15:37:25.541Z appoptics:patching patched pino 4.14.0
2022-04-20T15:37:25.551Z appoptics:debug starting runtimeMetrics


  pino v4.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (280ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:33.241Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:33.242Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:33.242Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:33.243Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:33.306Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:33.425Z appoptics:patching patched crypto 
2022-04-20T15:37:33.443Z appoptics:patching patched https 
2022-04-20T15:37:33.444Z appoptics:patching patched http 
2022-04-20T15:37:33.472Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:33.472Z appoptics:patching patched fs 
2022-04-20T15:37:33.492Z appoptics:patching patched pino 4.15.0
2022-04-20T15:37:33.496Z appoptics:debug starting runtimeMetrics


  pino v4.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (105ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (192ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:40.475Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:40.475Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:40.475Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:40.476Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:40.541Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:40.661Z appoptics:patching patched crypto 
2022-04-20T15:37:40.696Z appoptics:patching patched https 
2022-04-20T15:37:40.697Z appoptics:patching patched http 
2022-04-20T15:37:40.724Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:40.725Z appoptics:patching patched fs 
2022-04-20T15:37:40.744Z appoptics:patching patched pino 4.15.1
2022-04-20T15:37:40.747Z appoptics:debug starting runtimeMetrics


  pino v4.15.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:47.938Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:47.938Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:47.938Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:47.939Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:47.998Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:48.116Z appoptics:patching patched crypto 
2022-04-20T15:37:48.135Z appoptics:patching patched https 
2022-04-20T15:37:48.136Z appoptics:patching patched http 
2022-04-20T15:37:48.161Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:48.161Z appoptics:patching patched fs 
2022-04-20T15:37:48.181Z appoptics:patching patched pino 4.15.2
2022-04-20T15:37:48.184Z appoptics:debug starting runtimeMetrics


  pino v4.15.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (173ms)


changed 2 packages, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:53.850Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:53.850Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:53.850Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:53.851Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:53.959Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:37:54.145Z appoptics:patching patched crypto 
2022-04-20T15:37:54.184Z appoptics:patching patched https 
2022-04-20T15:37:54.185Z appoptics:patching patched http 
2022-04-20T15:37:54.218Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:37:54.219Z appoptics:patching patched fs 
2022-04-20T15:37:54.242Z appoptics:patching patched pino 4.15.3
2022-04-20T15:37:54.245Z appoptics:debug starting runtimeMetrics


  pino v4.15.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:37:59.841Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:37:59.841Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:37:59.841Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:37:59.842Z appoptics:debug using context provider: ace-context
2022-04-20T15:37:59.896Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:00.000Z appoptics:patching patched crypto 
2022-04-20T15:38:00.016Z appoptics:patching patched https 
2022-04-20T15:38:00.017Z appoptics:patching patched http 
2022-04-20T15:38:00.044Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:00.044Z appoptics:patching patched fs 
2022-04-20T15:38:00.062Z appoptics:patching patched pino 4.15.4
2022-04-20T15:38:00.065Z appoptics:debug starting runtimeMetrics


  pino v4.15.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:06.318Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:06.318Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:06.318Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:06.319Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:06.414Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:06.542Z appoptics:patching patched crypto 
2022-04-20T15:38:06.587Z appoptics:patching patched https 
2022-04-20T15:38:06.587Z appoptics:patching patched http 
2022-04-20T15:38:06.617Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:06.617Z appoptics:patching patched fs 
2022-04-20T15:38:06.637Z appoptics:patching patched pino 4.16.0
2022-04-20T15:38:06.645Z appoptics:debug starting runtimeMetrics


  pino v4.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (204ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:12.118Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:12.118Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:12.118Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:12.119Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:12.183Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:12.345Z appoptics:patching patched crypto 
2022-04-20T15:38:12.362Z appoptics:patching patched https 
2022-04-20T15:38:12.362Z appoptics:patching patched http 
2022-04-20T15:38:12.384Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:12.385Z appoptics:patching patched fs 
2022-04-20T15:38:12.424Z appoptics:patching patched pino 4.16.1
2022-04-20T15:38:12.427Z appoptics:debug starting runtimeMetrics


  pino v4.16.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:18.789Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:18.789Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:18.789Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:18.790Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:18.843Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:18.949Z appoptics:patching patched crypto 
2022-04-20T15:38:18.964Z appoptics:patching patched https 
2022-04-20T15:38:18.965Z appoptics:patching patched http 
2022-04-20T15:38:18.994Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:18.994Z appoptics:patching patched fs 
2022-04-20T15:38:19.014Z appoptics:patching patched pino 4.17.0
2022-04-20T15:38:19.018Z appoptics:debug starting runtimeMetrics


  pino v4.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:24.645Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:24.646Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:24.646Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:24.646Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:24.700Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:24.805Z appoptics:patching patched crypto 
2022-04-20T15:38:24.822Z appoptics:patching patched https 
2022-04-20T15:38:24.822Z appoptics:patching patched http 
2022-04-20T15:38:24.849Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:24.850Z appoptics:patching patched fs 
2022-04-20T15:38:24.867Z appoptics:patching patched pino 4.17.1
2022-04-20T15:38:24.870Z appoptics:debug starting runtimeMetrics


  pino v4.17.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:31.015Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:31.016Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:31.016Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:31.016Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:31.076Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:31.193Z appoptics:patching patched crypto 
2022-04-20T15:38:31.214Z appoptics:patching patched https 
2022-04-20T15:38:31.214Z appoptics:patching patched http 
2022-04-20T15:38:31.231Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:31.231Z appoptics:patching patched fs 
2022-04-20T15:38:31.249Z appoptics:patching patched pino 4.17.2
2022-04-20T15:38:31.252Z appoptics:debug starting runtimeMetrics


  pino v4.17.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:39.226Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:39.227Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:39.227Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:39.227Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:39.294Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:39.424Z appoptics:patching patched crypto 
2022-04-20T15:38:39.459Z appoptics:patching patched https 
2022-04-20T15:38:39.459Z appoptics:patching patched http 
2022-04-20T15:38:39.487Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:39.487Z appoptics:patching patched fs 
2022-04-20T15:38:39.505Z appoptics:patching patched pino 4.17.3
2022-04-20T15:38:39.509Z appoptics:debug starting runtimeMetrics


  pino v4.17.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (240ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:45.274Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:45.275Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:45.275Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:45.275Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:45.329Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:45.435Z appoptics:patching patched crypto 
2022-04-20T15:38:45.451Z appoptics:patching patched https 
2022-04-20T15:38:45.451Z appoptics:patching patched http 
2022-04-20T15:38:45.478Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:45.479Z appoptics:patching patched fs 
2022-04-20T15:38:45.496Z appoptics:patching patched pino 4.17.5
2022-04-20T15:38:45.499Z appoptics:debug starting runtimeMetrics


  pino v4.17.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 939 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:51.058Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:51.059Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:51.059Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:51.059Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:51.119Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:51.233Z appoptics:patching patched crypto 
2022-04-20T15:38:51.250Z appoptics:patching patched https 
2022-04-20T15:38:51.251Z appoptics:patching patched http 
2022-04-20T15:38:51.282Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:51.282Z appoptics:patching patched fs 
2022-04-20T15:38:51.303Z appoptics:patching patched pino 4.17.6
2022-04-20T15:38:51.307Z appoptics:debug starting runtimeMetrics


  pino v4.17.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


added 2 packages, removed 12 packages, changed 3 packages, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:38:57.320Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:38:57.320Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:38:57.321Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:38:57.321Z appoptics:debug using context provider: ace-context
2022-04-20T15:38:57.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:38:57.482Z appoptics:patching patched crypto 
2022-04-20T15:38:57.498Z appoptics:patching patched https 
2022-04-20T15:38:57.498Z appoptics:patching patched http 
2022-04-20T15:38:57.524Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:38:57.524Z appoptics:patching patched fs 
2022-04-20T15:38:57.531Z appoptics:patching patched pino 5.0.0
2022-04-20T15:38:57.534Z appoptics:debug starting runtimeMetrics


  pino v5.0.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 2 packages, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:03.343Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:03.344Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:03.344Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:03.344Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:03.404Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:03.519Z appoptics:patching patched crypto 
2022-04-20T15:39:03.546Z appoptics:patching patched https 
2022-04-20T15:39:03.547Z appoptics:patching patched http 
2022-04-20T15:39:03.571Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:03.572Z appoptics:patching patched fs 
2022-04-20T15:39:03.580Z appoptics:patching patched pino 5.0.1
2022-04-20T15:39:03.583Z appoptics:debug starting runtimeMetrics


  pino v5.0.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:09.635Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:09.635Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:09.635Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:09.636Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:09.690Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:09.794Z appoptics:patching patched crypto 
2022-04-20T15:39:09.812Z appoptics:patching patched https 
2022-04-20T15:39:09.812Z appoptics:patching patched http 
2022-04-20T15:39:09.836Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:09.836Z appoptics:patching patched fs 
2022-04-20T15:39:09.843Z appoptics:patching patched pino 5.0.2
2022-04-20T15:39:09.846Z appoptics:debug starting runtimeMetrics


  pino v5.0.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:15.553Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:15.554Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:15.554Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:15.555Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:15.615Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:15.732Z appoptics:patching patched crypto 
2022-04-20T15:39:15.750Z appoptics:patching patched https 
2022-04-20T15:39:15.750Z appoptics:patching patched http 
2022-04-20T15:39:15.779Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:15.779Z appoptics:patching patched fs 
2022-04-20T15:39:15.787Z appoptics:patching patched pino 5.0.3
2022-04-20T15:39:15.791Z appoptics:debug starting runtimeMetrics


  pino v5.0.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:21.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:21.772Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:21.772Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:21.773Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:21.833Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:21.951Z appoptics:patching patched crypto 
2022-04-20T15:39:21.977Z appoptics:patching patched https 
2022-04-20T15:39:21.978Z appoptics:patching patched http 
2022-04-20T15:39:22.002Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:22.002Z appoptics:patching patched fs 
2022-04-20T15:39:22.010Z appoptics:patching patched pino 5.0.4
2022-04-20T15:39:22.014Z appoptics:debug starting runtimeMetrics


  pino v5.0.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:27.784Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:27.785Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:27.785Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:27.786Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:27.853Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:27.964Z appoptics:patching patched crypto 
2022-04-20T15:39:27.988Z appoptics:patching patched https 
2022-04-20T15:39:27.989Z appoptics:patching patched http 
2022-04-20T15:39:28.012Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:28.012Z appoptics:patching patched fs 
2022-04-20T15:39:28.020Z appoptics:patching patched pino 5.0.5
2022-04-20T15:39:28.023Z appoptics:debug starting runtimeMetrics


  pino v5.0.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:34.188Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:34.189Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:34.189Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:34.190Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:34.260Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:34.453Z appoptics:patching patched crypto 
2022-04-20T15:39:34.468Z appoptics:patching patched https 
2022-04-20T15:39:34.469Z appoptics:patching patched http 
2022-04-20T15:39:34.497Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:34.498Z appoptics:patching patched fs 
2022-04-20T15:39:34.505Z appoptics:patching patched pino 5.1.0
2022-04-20T15:39:34.508Z appoptics:debug starting runtimeMetrics


  pino v5.1.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:39.713Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:39.713Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:39.713Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:39.714Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:39.768Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:39.873Z appoptics:patching patched crypto 
2022-04-20T15:39:39.889Z appoptics:patching patched https 
2022-04-20T15:39:39.890Z appoptics:patching patched http 
2022-04-20T15:39:39.916Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:39.916Z appoptics:patching patched fs 
2022-04-20T15:39:39.923Z appoptics:patching patched pino 5.1.1
2022-04-20T15:39:39.926Z appoptics:debug starting runtimeMetrics


  pino v5.1.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:45.702Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:45.703Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:45.703Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:45.703Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:45.757Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:45.862Z appoptics:patching patched crypto 
2022-04-20T15:39:45.878Z appoptics:patching patched https 
2022-04-20T15:39:45.878Z appoptics:patching patched http 
2022-04-20T15:39:45.906Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:45.906Z appoptics:patching patched fs 
2022-04-20T15:39:45.913Z appoptics:patching patched pino 5.2.0
2022-04-20T15:39:45.916Z appoptics:debug starting runtimeMetrics


  pino v5.2.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:51.517Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:51.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:51.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:51.518Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:51.572Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:51.677Z appoptics:patching patched crypto 
2022-04-20T15:39:51.693Z appoptics:patching patched https 
2022-04-20T15:39:51.694Z appoptics:patching patched http 
2022-04-20T15:39:51.720Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:51.720Z appoptics:patching patched fs 
2022-04-20T15:39:51.727Z appoptics:patching patched pino 5.3.0
2022-04-20T15:39:51.730Z appoptics:debug starting runtimeMetrics


  pino v5.3.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:39:57.869Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:39:57.870Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:39:57.870Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:39:57.870Z appoptics:debug using context provider: ace-context
2022-04-20T15:39:57.944Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:39:58.061Z appoptics:patching patched crypto 
2022-04-20T15:39:58.081Z appoptics:patching patched https 
2022-04-20T15:39:58.081Z appoptics:patching patched http 
2022-04-20T15:39:58.107Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:39:58.107Z appoptics:patching patched fs 
2022-04-20T15:39:58.118Z appoptics:patching patched pino 5.3.1
2022-04-20T15:39:58.121Z appoptics:debug starting runtimeMetrics


  pino v5.3.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (179ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:03.274Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:03.274Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:03.274Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:03.275Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:03.334Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:03.451Z appoptics:patching patched crypto 
2022-04-20T15:40:03.469Z appoptics:patching patched https 
2022-04-20T15:40:03.470Z appoptics:patching patched http 
2022-04-20T15:40:03.499Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:03.499Z appoptics:patching patched fs 
2022-04-20T15:40:03.507Z appoptics:patching patched pino 5.4.0
2022-04-20T15:40:03.511Z appoptics:debug starting runtimeMetrics


  pino v5.4.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:09.990Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:09.991Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:09.991Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:09.992Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:10.057Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:10.175Z appoptics:patching patched crypto 
2022-04-20T15:40:10.192Z appoptics:patching patched https 
2022-04-20T15:40:10.193Z appoptics:patching patched http 
2022-04-20T15:40:10.220Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:10.220Z appoptics:patching patched fs 
2022-04-20T15:40:10.228Z appoptics:patching patched pino 5.4.1
2022-04-20T15:40:10.231Z appoptics:debug starting runtimeMetrics


  pino v5.4.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:16.629Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:16.630Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:16.630Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:16.631Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:16.693Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:16.812Z appoptics:patching patched crypto 
2022-04-20T15:40:16.842Z appoptics:patching patched https 
2022-04-20T15:40:16.843Z appoptics:patching patched http 
2022-04-20T15:40:16.874Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:16.874Z appoptics:patching patched fs 
2022-04-20T15:40:16.886Z appoptics:patching patched pino 5.5.0
2022-04-20T15:40:16.891Z appoptics:debug starting runtimeMetrics


  pino v5.5.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:22.982Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:22.982Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:22.982Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:22.983Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:23.037Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:23.153Z appoptics:patching patched crypto 
2022-04-20T15:40:23.173Z appoptics:patching patched https 
2022-04-20T15:40:23.173Z appoptics:patching patched http 
2022-04-20T15:40:23.201Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:23.201Z appoptics:patching patched fs 
2022-04-20T15:40:23.209Z appoptics:patching patched pino 5.6.0
2022-04-20T15:40:23.213Z appoptics:debug starting runtimeMetrics


  pino v5.6.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:28.663Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:28.663Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:28.663Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:28.664Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:28.768Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:28.947Z appoptics:patching patched crypto 
2022-04-20T15:40:28.990Z appoptics:patching patched https 
2022-04-20T15:40:28.990Z appoptics:patching patched http 
2022-04-20T15:40:29.054Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:29.055Z appoptics:patching patched fs 
2022-04-20T15:40:29.072Z appoptics:patching patched pino 5.6.1
2022-04-20T15:40:29.076Z appoptics:debug starting runtimeMetrics


  pino v5.6.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (239ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:35.232Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:35.232Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:35.233Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:35.234Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:35.301Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:35.409Z appoptics:patching patched crypto 
2022-04-20T15:40:35.426Z appoptics:patching patched https 
2022-04-20T15:40:35.426Z appoptics:patching patched http 
2022-04-20T15:40:35.453Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:35.453Z appoptics:patching patched fs 
2022-04-20T15:40:35.461Z appoptics:patching patched pino 5.6.2
2022-04-20T15:40:35.464Z appoptics:debug starting runtimeMetrics


  pino v5.6.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:42.112Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:42.113Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:42.113Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:42.114Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:42.187Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:42.367Z appoptics:patching patched crypto 
2022-04-20T15:40:42.398Z appoptics:patching patched https 
2022-04-20T15:40:42.398Z appoptics:patching patched http 
2022-04-20T15:40:42.440Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:42.441Z appoptics:patching patched fs 
2022-04-20T15:40:42.450Z appoptics:patching patched pino 5.6.3
2022-04-20T15:40:42.455Z appoptics:debug starting runtimeMetrics


  pino v5.6.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:47.772Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:47.773Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:47.773Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:47.774Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:47.832Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:47.949Z appoptics:patching patched crypto 
2022-04-20T15:40:47.968Z appoptics:patching patched https 
2022-04-20T15:40:47.968Z appoptics:patching patched http 
2022-04-20T15:40:47.998Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:47.999Z appoptics:patching patched fs 
2022-04-20T15:40:48.007Z appoptics:patching patched pino 5.6.4
2022-04-20T15:40:48.010Z appoptics:debug starting runtimeMetrics


  pino v5.6.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (200ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:40:54.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:40:54.275Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:40:54.275Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:40:54.277Z appoptics:debug using context provider: ace-context
2022-04-20T15:40:54.425Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:40:54.830Z appoptics:patching patched crypto 
2022-04-20T15:40:54.893Z appoptics:patching patched https 
2022-04-20T15:40:54.894Z appoptics:patching patched http 
2022-04-20T15:40:54.924Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:40:54.924Z appoptics:patching patched fs 
2022-04-20T15:40:54.931Z appoptics:patching patched pino 5.7.0
2022-04-20T15:40:54.934Z appoptics:debug starting runtimeMetrics


  pino v5.7.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:00.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:00.282Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:00.282Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:00.283Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:00.337Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:00.443Z appoptics:patching patched crypto 
2022-04-20T15:41:00.458Z appoptics:patching patched https 
2022-04-20T15:41:00.459Z appoptics:patching patched http 
2022-04-20T15:41:00.484Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:00.485Z appoptics:patching patched fs 
2022-04-20T15:41:00.492Z appoptics:patching patched pino 5.8.0
2022-04-20T15:41:00.495Z appoptics:debug starting runtimeMetrics


  pino v5.8.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:06.604Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:06.604Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:06.604Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:06.605Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:06.704Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:06.850Z appoptics:patching patched crypto 
2022-04-20T15:41:06.879Z appoptics:patching patched https 
2022-04-20T15:41:06.879Z appoptics:patching patched http 
2022-04-20T15:41:06.907Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:06.908Z appoptics:patching patched fs 
2022-04-20T15:41:06.912Z appoptics:patching patched pino 5.8.1
2022-04-20T15:41:06.916Z appoptics:debug starting runtimeMetrics


  pino v5.8.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:13.937Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:13.938Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:13.938Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:13.939Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:13.998Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:14.113Z appoptics:patching patched crypto 
2022-04-20T15:41:14.130Z appoptics:patching patched https 
2022-04-20T15:41:14.131Z appoptics:patching patched http 
2022-04-20T15:41:14.161Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:14.162Z appoptics:patching patched fs 
2022-04-20T15:41:14.166Z appoptics:patching patched pino 5.9.0
2022-04-20T15:41:14.169Z appoptics:debug starting runtimeMetrics


  pino v5.9.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


added 1 package, changed 2 packages, and audited 930 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:20.650Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:20.650Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:20.650Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:20.651Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:20.705Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:20.810Z appoptics:patching patched crypto 
2022-04-20T15:41:20.827Z appoptics:patching patched https 
2022-04-20T15:41:20.828Z appoptics:patching patched http 
2022-04-20T15:41:20.854Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:20.854Z appoptics:patching patched fs 
2022-04-20T15:41:20.859Z appoptics:patching patched pino 5.10.1
2022-04-20T15:41:20.862Z appoptics:debug starting runtimeMetrics


  pino v5.10.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 930 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:26.282Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:26.282Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:26.282Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:26.283Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:26.336Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:26.442Z appoptics:patching patched crypto 
2022-04-20T15:41:26.459Z appoptics:patching patched https 
2022-04-20T15:41:26.459Z appoptics:patching patched http 
2022-04-20T15:41:26.488Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:26.488Z appoptics:patching patched fs 
2022-04-20T15:41:26.493Z appoptics:patching patched pino 5.10.2
2022-04-20T15:41:26.496Z appoptics:debug starting runtimeMetrics


  pino v5.10.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (180ms)


changed 1 package, and audited 930 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:32.311Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:32.312Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:32.312Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:32.313Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:32.372Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:32.488Z appoptics:patching patched crypto 
2022-04-20T15:41:32.513Z appoptics:patching patched https 
2022-04-20T15:41:32.514Z appoptics:patching patched http 
2022-04-20T15:41:32.535Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:32.535Z appoptics:patching patched fs 
2022-04-20T15:41:32.540Z appoptics:patching patched pino 5.10.3
2022-04-20T15:41:32.543Z appoptics:debug starting runtimeMetrics


  pino v5.10.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 930 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:38.068Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:38.069Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:38.069Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:38.070Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:38.123Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:38.228Z appoptics:patching patched crypto 
2022-04-20T15:41:38.244Z appoptics:patching patched https 
2022-04-20T15:41:38.245Z appoptics:patching patched http 
2022-04-20T15:41:38.274Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:38.274Z appoptics:patching patched fs 
2022-04-20T15:41:38.279Z appoptics:patching patched pino 5.10.4
2022-04-20T15:41:38.282Z appoptics:debug starting runtimeMetrics


  pino v5.10.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


removed 3 packages, changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:44.250Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:44.251Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:44.251Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:44.251Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:44.308Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:44.433Z appoptics:patching patched crypto 
2022-04-20T15:41:44.467Z appoptics:patching patched https 
2022-04-20T15:41:44.467Z appoptics:patching patched http 
2022-04-20T15:41:44.496Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:44.496Z appoptics:patching patched fs 
2022-04-20T15:41:44.501Z appoptics:patching patched pino 5.10.5
2022-04-20T15:41:44.504Z appoptics:debug starting runtimeMetrics


  pino v5.10.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:49.755Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:49.756Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:49.756Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:49.757Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:49.816Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:49.938Z appoptics:patching patched crypto 
2022-04-20T15:41:49.955Z appoptics:patching patched https 
2022-04-20T15:41:49.956Z appoptics:patching patched http 
2022-04-20T15:41:49.987Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:49.987Z appoptics:patching patched fs 
2022-04-20T15:41:49.992Z appoptics:patching patched pino 5.10.6
2022-04-20T15:41:49.995Z appoptics:debug starting runtimeMetrics


  pino v5.10.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:41:55.861Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:41:55.862Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:41:55.862Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:41:55.863Z appoptics:debug using context provider: ace-context
2022-04-20T15:41:55.920Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:41:56.032Z appoptics:patching patched crypto 
2022-04-20T15:41:56.059Z appoptics:patching patched https 
2022-04-20T15:41:56.059Z appoptics:patching patched http 
2022-04-20T15:41:56.150Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:41:56.150Z appoptics:patching patched fs 
2022-04-20T15:41:56.155Z appoptics:patching patched pino 5.10.7
2022-04-20T15:41:56.158Z appoptics:debug starting runtimeMetrics


  pino v5.10.7
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:01.647Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:01.647Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:01.647Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:01.648Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:01.702Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:01.823Z appoptics:patching patched crypto 
2022-04-20T15:42:01.840Z appoptics:patching patched https 
2022-04-20T15:42:01.852Z appoptics:patching patched http 
2022-04-20T15:42:01.881Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:01.881Z appoptics:patching patched fs 
2022-04-20T15:42:01.889Z appoptics:patching patched pino 5.10.8
2022-04-20T15:42:01.892Z appoptics:debug starting runtimeMetrics


  pino v5.10.8
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:08.556Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:08.557Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:08.557Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:08.557Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:08.618Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:08.735Z appoptics:patching patched crypto 
2022-04-20T15:42:08.759Z appoptics:patching patched https 
2022-04-20T15:42:08.760Z appoptics:patching patched http 
2022-04-20T15:42:08.788Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:08.788Z appoptics:patching patched fs 
2022-04-20T15:42:08.793Z appoptics:patching patched pino 5.10.9
2022-04-20T15:42:08.796Z appoptics:debug starting runtimeMetrics


  pino v5.10.9
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (169ms)


changed 1 package, and audited 927 packages in 15s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:24.023Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:24.023Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:24.023Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:24.024Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:24.078Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:24.182Z appoptics:patching patched crypto 
2022-04-20T15:42:24.197Z appoptics:patching patched https 
2022-04-20T15:42:24.198Z appoptics:patching patched http 
2022-04-20T15:42:24.227Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:24.227Z appoptics:patching patched fs 
2022-04-20T15:42:24.232Z appoptics:patching patched pino 5.10.10
2022-04-20T15:42:24.235Z appoptics:debug starting runtimeMetrics


  pino v5.10.10
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (104ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:30.735Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:30.736Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:30.736Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:30.736Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:30.797Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:30.915Z appoptics:patching patched crypto 
2022-04-20T15:42:30.933Z appoptics:patching patched https 
2022-04-20T15:42:30.933Z appoptics:patching patched http 
2022-04-20T15:42:30.966Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:30.967Z appoptics:patching patched fs 
2022-04-20T15:42:30.972Z appoptics:patching patched pino 5.11.0
2022-04-20T15:42:30.975Z appoptics:debug starting runtimeMetrics


  pino v5.11.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:36.362Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:36.362Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:36.362Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:36.363Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:36.417Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:36.553Z appoptics:patching patched crypto 
2022-04-20T15:42:36.580Z appoptics:patching patched https 
2022-04-20T15:42:36.581Z appoptics:patching patched http 
2022-04-20T15:42:36.610Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:36.611Z appoptics:patching patched fs 
2022-04-20T15:42:36.615Z appoptics:patching patched pino 5.11.1
2022-04-20T15:42:36.618Z appoptics:debug starting runtimeMetrics


  pino v5.11.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (167ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:43.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:43.530Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:43.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:43.531Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:43.593Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:43.713Z appoptics:patching patched crypto 
2022-04-20T15:42:43.731Z appoptics:patching patched https 
2022-04-20T15:42:43.732Z appoptics:patching patched http 
2022-04-20T15:42:43.767Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:43.767Z appoptics:patching patched fs 
2022-04-20T15:42:43.772Z appoptics:patching patched pino 5.11.2
2022-04-20T15:42:43.776Z appoptics:debug starting runtimeMetrics


  pino v5.11.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:49.225Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:49.226Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:49.226Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:49.227Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:49.287Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:49.421Z appoptics:patching patched crypto 
2022-04-20T15:42:49.452Z appoptics:patching patched https 
2022-04-20T15:42:49.453Z appoptics:patching patched http 
2022-04-20T15:42:49.486Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:49.486Z appoptics:patching patched fs 
2022-04-20T15:42:49.491Z appoptics:patching patched pino 5.11.3
2022-04-20T15:42:49.495Z appoptics:debug starting runtimeMetrics


  pino v5.11.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (176ms)


changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:42:56.654Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:42:56.654Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:42:56.654Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:42:56.655Z appoptics:debug using context provider: ace-context
2022-04-20T15:42:56.734Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:42:56.877Z appoptics:patching patched crypto 
2022-04-20T15:42:56.903Z appoptics:patching patched https 
2022-04-20T15:42:56.903Z appoptics:patching patched http 
2022-04-20T15:42:56.929Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:42:56.929Z appoptics:patching patched fs 
2022-04-20T15:42:56.934Z appoptics:patching patched pino 5.12.0
2022-04-20T15:42:56.937Z appoptics:debug starting runtimeMetrics


  pino v5.12.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (175ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:02.822Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:02.823Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:02.823Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:02.823Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:02.878Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:02.994Z appoptics:patching patched crypto 
2022-04-20T15:43:03.010Z appoptics:patching patched https 
2022-04-20T15:43:03.011Z appoptics:patching patched http 
2022-04-20T15:43:03.040Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:03.040Z appoptics:patching patched fs 
2022-04-20T15:43:03.045Z appoptics:patching patched pino 5.12.1
2022-04-20T15:43:03.048Z appoptics:debug starting runtimeMetrics


  pino v5.12.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:09.047Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:09.047Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:09.047Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:09.048Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:09.107Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:09.265Z appoptics:patching patched crypto 
2022-04-20T15:43:09.283Z appoptics:patching patched https 
2022-04-20T15:43:09.284Z appoptics:patching patched http 
2022-04-20T15:43:09.317Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:09.317Z appoptics:patching patched fs 
2022-04-20T15:43:09.322Z appoptics:patching patched pino 5.12.2
2022-04-20T15:43:09.325Z appoptics:debug starting runtimeMetrics


  pino v5.12.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:15.221Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:15.222Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:15.222Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:15.222Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:15.280Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:15.397Z appoptics:patching patched crypto 
2022-04-20T15:43:15.414Z appoptics:patching patched https 
2022-04-20T15:43:15.414Z appoptics:patching patched http 
2022-04-20T15:43:15.447Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:15.447Z appoptics:patching patched fs 
2022-04-20T15:43:15.452Z appoptics:patching patched pino 5.12.3
2022-04-20T15:43:15.455Z appoptics:debug starting runtimeMetrics


  pino v5.12.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:22.039Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:22.040Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:22.040Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:22.041Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:22.102Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:22.226Z appoptics:patching patched crypto 
2022-04-20T15:43:22.243Z appoptics:patching patched https 
2022-04-20T15:43:22.244Z appoptics:patching patched http 
2022-04-20T15:43:22.292Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:22.293Z appoptics:patching patched fs 
2022-04-20T15:43:22.298Z appoptics:patching patched pino 5.12.4
2022-04-20T15:43:22.301Z appoptics:debug starting runtimeMetrics


  pino v5.12.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:28.491Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:28.492Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:28.492Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:28.492Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:28.551Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:28.670Z appoptics:patching patched crypto 
2022-04-20T15:43:28.687Z appoptics:patching patched https 
2022-04-20T15:43:28.688Z appoptics:patching patched http 
2022-04-20T15:43:28.721Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:28.721Z appoptics:patching patched fs 
2022-04-20T15:43:28.726Z appoptics:patching patched pino 5.12.5
2022-04-20T15:43:28.729Z appoptics:debug starting runtimeMetrics


  pino v5.12.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (170ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:35.220Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:35.221Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:35.221Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:35.222Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:35.276Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:35.382Z appoptics:patching patched crypto 
2022-04-20T15:43:35.398Z appoptics:patching patched https 
2022-04-20T15:43:35.399Z appoptics:patching patched http 
2022-04-20T15:43:35.428Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:35.429Z appoptics:patching patched fs 
2022-04-20T15:43:35.433Z appoptics:patching patched pino 5.12.6
2022-04-20T15:43:35.436Z appoptics:debug starting runtimeMetrics


  pino v5.12.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:40.981Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:40.982Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:40.982Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:40.982Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:41.042Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:41.159Z appoptics:patching patched crypto 
2022-04-20T15:43:41.177Z appoptics:patching patched https 
2022-04-20T15:43:41.178Z appoptics:patching patched http 
2022-04-20T15:43:41.210Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:41.210Z appoptics:patching patched fs 
2022-04-20T15:43:41.215Z appoptics:patching patched pino 5.13.0
2022-04-20T15:43:41.219Z appoptics:debug starting runtimeMetrics


  pino v5.13.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:48.312Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:48.312Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:48.312Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:48.313Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:48.368Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:48.477Z appoptics:patching patched crypto 
2022-04-20T15:43:48.493Z appoptics:patching patched https 
2022-04-20T15:43:48.493Z appoptics:patching patched http 
2022-04-20T15:43:48.523Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:48.523Z appoptics:patching patched fs 
2022-04-20T15:43:48.528Z appoptics:patching patched pino 5.13.1
2022-04-20T15:43:48.531Z appoptics:debug starting runtimeMetrics


  pino v5.13.1
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:43:54.017Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:43:54.018Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:43:54.018Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:43:54.019Z appoptics:debug using context provider: ace-context
2022-04-20T15:43:54.088Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:43:54.218Z appoptics:patching patched crypto 
2022-04-20T15:43:54.257Z appoptics:patching patched https 
2022-04-20T15:43:54.257Z appoptics:patching patched http 
2022-04-20T15:43:54.290Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:43:54.290Z appoptics:patching patched fs 
2022-04-20T15:43:54.295Z appoptics:patching patched pino 5.13.2
2022-04-20T15:43:54.299Z appoptics:debug starting runtimeMetrics


  pino v5.13.2
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:00.397Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:00.398Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:00.398Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:00.399Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:00.458Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:00.578Z appoptics:patching patched crypto 
2022-04-20T15:44:00.596Z appoptics:patching patched https 
2022-04-20T15:44:00.597Z appoptics:patching patched http 
2022-04-20T15:44:00.630Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:00.630Z appoptics:patching patched fs 
2022-04-20T15:44:00.635Z appoptics:patching patched pino 5.13.3
2022-04-20T15:44:00.639Z appoptics:debug starting runtimeMetrics


  pino v5.13.3
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (171ms)


changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:06.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:06.250Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:06.250Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:06.251Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:06.373Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:06.573Z appoptics:patching patched crypto 
2022-04-20T15:44:06.633Z appoptics:patching patched https 
2022-04-20T15:44:06.634Z appoptics:patching patched http 
2022-04-20T15:44:06.680Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:06.680Z appoptics:patching patched fs 
2022-04-20T15:44:06.689Z appoptics:patching patched pino 5.13.4
2022-04-20T15:44:06.692Z appoptics:debug starting runtimeMetrics


  pino v5.13.4
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (187ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:12.822Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:12.822Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:12.822Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:12.823Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:12.887Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:13.177Z appoptics:patching patched crypto 
2022-04-20T15:44:13.233Z appoptics:patching patched https 
2022-04-20T15:44:13.235Z appoptics:patching patched http 
2022-04-20T15:44:13.294Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:13.295Z appoptics:patching patched fs 
2022-04-20T15:44:13.308Z appoptics:patching patched pino 5.13.5
2022-04-20T15:44:13.318Z appoptics:debug starting runtimeMetrics


  pino v5.13.5
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (106ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (248ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:19.897Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:19.898Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:19.898Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:19.898Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:19.953Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:20.062Z appoptics:patching patched crypto 
2022-04-20T15:44:20.078Z appoptics:patching patched https 
2022-04-20T15:44:20.079Z appoptics:patching patched http 
2022-04-20T15:44:20.108Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:20.109Z appoptics:patching patched fs 
2022-04-20T15:44:20.113Z appoptics:patching patched pino 5.13.6
2022-04-20T15:44:20.116Z appoptics:debug starting runtimeMetrics


  pino v5.13.6
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:25.245Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:25.245Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:25.245Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:25.246Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:25.301Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:25.409Z appoptics:patching patched crypto 
2022-04-20T15:44:25.426Z appoptics:patching patched https 
2022-04-20T15:44:25.426Z appoptics:patching patched http 
2022-04-20T15:44:25.457Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:25.458Z appoptics:patching patched fs 
2022-04-20T15:44:25.462Z appoptics:patching patched pino 5.14.0
2022-04-20T15:44:25.465Z appoptics:debug starting runtimeMetrics


  pino v5.14.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (102ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (166ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:31.446Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:31.447Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:31.447Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:31.448Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:31.530Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:31.664Z appoptics:patching patched crypto 
2022-04-20T15:44:31.681Z appoptics:patching patched https 
2022-04-20T15:44:31.682Z appoptics:patching patched http 
2022-04-20T15:44:31.713Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:31.714Z appoptics:patching patched fs 
2022-04-20T15:44:31.719Z appoptics:patching patched pino 5.15.0
2022-04-20T15:44:31.722Z appoptics:debug starting runtimeMetrics


  pino v5.15.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (172ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:36.892Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:36.892Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:36.893Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:36.893Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:36.953Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:37.069Z appoptics:patching patched crypto 
2022-04-20T15:44:37.088Z appoptics:patching patched https 
2022-04-20T15:44:37.088Z appoptics:patching patched http 
2022-04-20T15:44:37.116Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:37.116Z appoptics:patching patched fs 
2022-04-20T15:44:37.120Z appoptics:patching patched pino 5.16.0
2022-04-20T15:44:37.123Z appoptics:debug starting runtimeMetrics


  pino v5.16.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (168ms)


changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:42.780Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:42.781Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:42.781Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:42.782Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:42.845Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:42.957Z appoptics:patching patched crypto 
2022-04-20T15:44:42.992Z appoptics:patching patched https 
2022-04-20T15:44:42.992Z appoptics:patching patched http 
2022-04-20T15:44:43.027Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:43.027Z appoptics:patching patched fs 
2022-04-20T15:44:43.032Z appoptics:patching patched pino 5.17.0
2022-04-20T15:44:43.036Z appoptics:debug starting runtimeMetrics


  pino v5.17.0
    ✓ UDP might lose a message
    ✓ should not insert in sync sampled code when mode=false
    ✓ should insert in sync sampled code when mode=true
    ✓ should insert in sync sampled code when mode=traced
    ✓ should insert in sync sampled code when mode=sampledOnly
    ✓ should insert in sync sampled code when mode=always
    ✓ should not insert in sync unsampled code when mode=false
    ✓ should insert in sync unsampled code when mode=true
    ✓ should insert in sync unsampled code when mode=traced
    ✓ should not insert in sync unsampled code when mode=sampledOnly
    ✓ should insert in sync unsampled code when mode=always
    ✓ mode='always' should always insert a trace ID even if not tracing
    ✓ should insert trace IDs in asynchronous instrumented code (103ms)
    ✓ should insert trace IDs in promise-based instrumented code
    ✓ should insert trace IDs using the function directly


  15 passing (174ms)


changed 3 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:48.397Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:48.398Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:48.398Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:48.399Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:48.458Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:48.574Z appoptics:patching patched crypto 
2022-04-20T15:44:48.592Z appoptics:patching patched https 
2022-04-20T15:44:48.592Z appoptics:patching patched http 
2022-04-20T15:44:48.624Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:48.624Z appoptics:patching patched fs 
2022-04-20T15:44:48.629Z appoptics:patching patched pino 6.0.0
2022-04-20T15:44:48.633Z appoptics:debug starting runtimeMetrics


  pino v6.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3861
         "time": 1650469488657
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3861
         "time": 1650469488664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3861
         "time": 1650469488668
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3861
         "time": 1650469488671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3861
         "time": 1650469488673
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3861
         "time": 1650469488676
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3861
         "time": 1650469488677
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3861
         "time": 1650469488679
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3861
         "time": 1650469488680
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3861
         "time": 1650469488682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3861
         "time": 1650469488683
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3861
         "time": 1650469488685
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3861
         "time": 1650469488789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 11D049102E3834D2B37A3C079B15281A55BC5286-1"
         "pid": 3861
         "time": 1650469488819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:44:54.707Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:44:54.708Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:44:54.708Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:44:54.708Z appoptics:debug using context provider: ace-context
2022-04-20T15:44:54.780Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:44:54.907Z appoptics:patching patched crypto 
2022-04-20T15:44:54.964Z appoptics:patching patched https 
2022-04-20T15:44:54.965Z appoptics:patching patched http 
2022-04-20T15:44:55.018Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:44:55.018Z appoptics:patching patched fs 
2022-04-20T15:44:55.024Z appoptics:patching patched pino 6.1.0
2022-04-20T15:44:55.027Z appoptics:debug starting runtimeMetrics


  pino v6.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v6.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3883
         "time": 1650469495053
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3883
         "time": 1650469495062
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3883
         "time": 1650469495066
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3883
         "time": 1650469495069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3883
         "time": 1650469495072
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3883
         "time": 1650469495076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3883
         "time": 1650469495077
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3883
         "time": 1650469495079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3883
         "time": 1650469495081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3883
         "time": 1650469495082
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3883
         "time": 1650469495084
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3883
         "time": 1650469495086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3883
         "time": 1650469495190
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3F0D0193E7A86182077731B17F7CCACC9CCC0510-1"
         "pid": 3883
         "time": 1650469495218
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:00.570Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:00.570Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:00.570Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:00.571Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:00.641Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:00.791Z appoptics:patching patched crypto 
2022-04-20T15:45:00.843Z appoptics:patching patched https 
2022-04-20T15:45:00.846Z appoptics:patching patched http 
2022-04-20T15:45:00.899Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:00.900Z appoptics:patching patched fs 
2022-04-20T15:45:00.908Z appoptics:patching patched pino 6.1.1
2022-04-20T15:45:00.913Z appoptics:debug starting runtimeMetrics


  pino v6.1.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v6.1.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3905
         "time": 1650469500948
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.1.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3905
         "time": 1650469500960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.1.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3905
         "time": 1650469500966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.1.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3905
         "time": 1650469500969
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.1.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3905
         "time": 1650469500971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.1.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3905
         "time": 1650469500974
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.1.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3905
         "time": 1650469500977
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.1.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3905
         "time": 1650469500978
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.1.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3905
         "time": 1650469500980
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.1.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3905
         "time": 1650469500981
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.1.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3905
         "time": 1650469500983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.1.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3905
         "time": 1650469500985
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.1.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3905
         "time": 1650469501088
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.1.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B527E5AA41847097B5D6FC7FD2B11A1B18B76B4F-1"
         "pid": 3905
         "time": 1650469501117
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:06.933Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:06.933Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:06.933Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:06.934Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:07.032Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:07.228Z appoptics:patching patched crypto 
2022-04-20T15:45:07.255Z appoptics:patching patched https 
2022-04-20T15:45:07.256Z appoptics:patching patched http 
2022-04-20T15:45:07.285Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:07.286Z appoptics:patching patched fs 
2022-04-20T15:45:07.291Z appoptics:patching patched pino 6.2.0
2022-04-20T15:45:07.294Z appoptics:debug starting runtimeMetrics


  pino v6.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3927
         "time": 1650469507316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3927
         "time": 1650469507323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3927
         "time": 1650469507327
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3927
         "time": 1650469507329
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3927
         "time": 1650469507331
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3927
         "time": 1650469507334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3927
         "time": 1650469507335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3927
         "time": 1650469507336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3927
         "time": 1650469507338
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3927
         "time": 1650469507339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3927
         "time": 1650469507340
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3927
         "time": 1650469507342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3927
         "time": 1650469507445
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D2DFE1CAB9366881BB3FCF3AE2AD290A311D110A-1"
         "pid": 3927
         "time": 1650469507475
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:13.217Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:13.218Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:13.218Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:13.218Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:13.279Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:13.400Z appoptics:patching patched crypto 
2022-04-20T15:45:13.418Z appoptics:patching patched https 
2022-04-20T15:45:13.419Z appoptics:patching patched http 
2022-04-20T15:45:13.453Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:13.454Z appoptics:patching patched fs 
2022-04-20T15:45:13.459Z appoptics:patching patched pino 6.2.1
2022-04-20T15:45:13.463Z appoptics:debug starting runtimeMetrics


  pino v6.2.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.2.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3949
         "time": 1650469513487
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.2.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3949
         "time": 1650469513495
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.2.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3949
         "time": 1650469513499
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.2.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3949
         "time": 1650469513501
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.2.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3949
         "time": 1650469513504
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.2.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3949
         "time": 1650469513507
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.2.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3949
         "time": 1650469513508
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.2.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3949
         "time": 1650469513510
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.2.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3949
         "time": 1650469513511
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.2.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3949
         "time": 1650469513513
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.2.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3949
         "time": 1650469513514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.2.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3949
         "time": 1650469513516
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.2.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3949
         "time": 1650469513619
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.2.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8C2395C80441F605FD7E203E8C25413C2F8E9F4C-1"
         "pid": 3949
         "time": 1650469513649
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:19.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:19.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:19.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:19.563Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:19.623Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:19.742Z appoptics:patching patched crypto 
2022-04-20T15:45:19.759Z appoptics:patching patched https 
2022-04-20T15:45:19.760Z appoptics:patching patched http 
2022-04-20T15:45:19.793Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:19.793Z appoptics:patching patched fs 
2022-04-20T15:45:19.798Z appoptics:patching patched pino 6.3.0
2022-04-20T15:45:19.802Z appoptics:debug starting runtimeMetrics


  pino v6.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3971
         "time": 1650469519826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3971
         "time": 1650469519834
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3971
         "time": 1650469519838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3971
         "time": 1650469519840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3971
         "time": 1650469519843
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3971
         "time": 1650469519846
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3971
         "time": 1650469519847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3971
         "time": 1650469519849
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3971
         "time": 1650469519850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3971
         "time": 1650469519852
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3971
         "time": 1650469519853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3971
         "time": 1650469519855
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3971
         "time": 1650469519959
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CDB3C636B81C03E8F39729141911AF5BA62908A3-1"
         "pid": 3971
         "time": 1650469519988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:26.336Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:26.336Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:26.336Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:26.337Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:26.397Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:26.515Z appoptics:patching patched crypto 
2022-04-20T15:45:26.533Z appoptics:patching patched https 
2022-04-20T15:45:26.533Z appoptics:patching patched http 
2022-04-20T15:45:26.566Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:26.566Z appoptics:patching patched fs 
2022-04-20T15:45:26.571Z appoptics:patching patched pino 6.3.1
2022-04-20T15:45:26.575Z appoptics:debug starting runtimeMetrics


  pino v6.3.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.3.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 3993
         "time": 1650469526599
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 3993
         "time": 1650469526607
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 3993
         "time": 1650469526610
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 3993
         "time": 1650469526613
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 3993
         "time": 1650469526616
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 3993
         "time": 1650469526618
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 3993
         "time": 1650469526620
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 3993
         "time": 1650469526621
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 3993
         "time": 1650469526623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 3993
         "time": 1650469526624
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 3993
         "time": 1650469526625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 3993
         "time": 1650469526627
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 3993
         "time": 1650469526730
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 212E021D12AB9A3E946B5E14AE2B6516DAEB620F-1"
         "pid": 3993
         "time": 1650469526758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:32.516Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:32.517Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:32.517Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:32.517Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:32.571Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:32.680Z appoptics:patching patched crypto 
2022-04-20T15:45:32.697Z appoptics:patching patched https 
2022-04-20T15:45:32.698Z appoptics:patching patched http 
2022-04-20T15:45:32.741Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:32.741Z appoptics:patching patched fs 
2022-04-20T15:45:32.746Z appoptics:patching patched pino 6.3.2
2022-04-20T15:45:32.749Z appoptics:debug starting runtimeMetrics


  pino v6.3.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (181ms)
  14 failing

  1) pino v6.3.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4015
         "time": 1650469532772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.3.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4015
         "time": 1650469532779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.3.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4015
         "time": 1650469532783
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.3.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4015
         "time": 1650469532787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.3.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4015
         "time": 1650469532789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.3.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4015
         "time": 1650469532792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.3.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4015
         "time": 1650469532794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.3.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4015
         "time": 1650469532795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.3.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4015
         "time": 1650469532797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.3.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4015
         "time": 1650469532798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.3.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "always insert"
         "pid": 4015
         "time": 1650469532799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.3.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4015
         "time": 1650469532801
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.3.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "promise instrumentation"
         "pid": 4015
         "time": 1650469532905
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.3.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous F65095509F4C7281A719AC1D49E94FD2EA97CE03-1"
         "pid": 4015
         "time": 1650469532934
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:38.204Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:38.205Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:38.205Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:38.205Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:38.259Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:38.364Z appoptics:patching patched crypto 
2022-04-20T15:45:38.380Z appoptics:patching patched https 
2022-04-20T15:45:38.381Z appoptics:patching patched http 
2022-04-20T15:45:38.412Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:38.412Z appoptics:patching patched fs 
2022-04-20T15:45:38.417Z appoptics:patching patched pino 6.4.0
2022-04-20T15:45:38.421Z appoptics:debug starting runtimeMetrics


  pino v6.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4037
         "time": 1650469538444
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4AF60E39158464E94E857CF1DA037E85C6B8573F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4037
         "time": 1650469538452
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E4AB4FE0C6648067EF0A66D5B50AC76FC51D9E4A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4037
         "time": 1650469538455
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AD65DC4853B3AE59169C8D0D05A04ABE5415497-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4037
         "time": 1650469538458
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "117CE2EAFC4E3326B4FA9BCD358A970223C2E819-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4037
         "time": 1650469538460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4037
         "time": 1650469538463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "455B086EEFE148EE3402F65A4F71F10AFF980490-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4037
         "time": 1650469538464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3EF5DD0213EA51DE64B297062348484398CB0C4F-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4037
         "time": 1650469538466
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4037
         "time": 1650469538467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E78BE109812C313DFFDD3B17990EC8B0822F3948-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4037
         "time": 1650469538468
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4037
         "time": 1650469538469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AEC011069980949CE8AF21D5076450CE6B4448D3-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4037
         "time": 1650469538471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4650BEA46308169AA266FAA8DCFD363FCED673A5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4037
         "time": 1650469538574
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 30D5D01940E28B1EC253683C346B696D20999CBB-1"
         "pid": 4037
         "time": 1650469538603
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:44.528Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:44.528Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:44.528Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:44.529Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:44.588Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:44.701Z appoptics:patching patched crypto 
2022-04-20T15:45:44.717Z appoptics:patching patched https 
2022-04-20T15:45:44.718Z appoptics:patching patched http 
2022-04-20T15:45:44.747Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:44.748Z appoptics:patching patched fs 
2022-04-20T15:45:44.752Z appoptics:patching patched pino 6.4.1
2022-04-20T15:45:44.756Z appoptics:debug starting runtimeMetrics


  pino v6.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v6.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4059
         "time": 1650469544777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "07222A2621A808D59C0B0D4AD24ECB763C848BAB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4059
         "time": 1650469544784
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "49ADE1D2852BCE61FD08BB158A10A0809D95E589-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4059
         "time": 1650469544787
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "751772E6985E40E05707FD8B0903788AA574C855-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4059
         "time": 1650469544789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB3EB5E92B0814516B1A8DB3CC624996096694EC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4059
         "time": 1650469544791
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4059
         "time": 1650469544794
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF4E9778652203D0C2C5BE2FAD5FEA654E0EC1E0-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4059
         "time": 1650469544795
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D84890F8F7BF1F573AA377AF45C7631C6A2656F5-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4059
         "time": 1650469544797
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4059
         "time": 1650469544798
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C2BD5F925A6DE10BB83B671D4FCC03B1544FBBE7-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4059
         "time": 1650469544799
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4059
         "time": 1650469544800
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "79EBB5733A3DC6D76DF8B8A331801EA8BF51CD21-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4059
         "time": 1650469544802
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4409B6C20827824D04504E9BBBC104858113D7BD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4059
         "time": 1650469544906
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 1380FEE16B283D07F35064135C2263C8E5FB087E-1"
         "pid": 4059
         "time": 1650469544933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:50.133Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:50.134Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:50.134Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:50.135Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:50.194Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:50.310Z appoptics:patching patched crypto 
2022-04-20T15:45:50.328Z appoptics:patching patched https 
2022-04-20T15:45:50.328Z appoptics:patching patched http 
2022-04-20T15:45:50.361Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:50.361Z appoptics:patching patched fs 
2022-04-20T15:45:50.366Z appoptics:patching patched pino 6.5.0
2022-04-20T15:45:50.370Z appoptics:debug starting runtimeMetrics


  pino v6.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4081
         "time": 1650469550394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE816B053C942B7A39D11FC92FD1E8384B00CAB6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4081
         "time": 1650469550401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F12A1993BAB6ACED0F892FC0B9F232778A6733F9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4081
         "time": 1650469550405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9B668A321F33C625DB98DD24278ADD10D0E35F1E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4081
         "time": 1650469550408
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FBD2C9B1669AE61FC87791B18971859B8B6782E4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4081
         "time": 1650469550410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4081
         "time": 1650469550413
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F2E1B08EA98E22151F8B951F689E40FAA1FA1D8B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4081
         "time": 1650469550414
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B320F257C698215079EC76AD179396E010759A5F-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4081
         "time": 1650469550416
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4081
         "time": 1650469550417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26C141E0FE203AE664DFEE19DE6033B666084D0D-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4081
         "time": 1650469550418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4081
         "time": 1650469550419
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2DBE93108A1B76E36F0D63635974E61E3DCD3F96-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4081
         "time": 1650469550421
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "87F0D9AC73AD25FDA441CF9AF2C7851AC5DEF90D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4081
         "time": 1650469550524
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D42BBA16FEEF725084DFCDCAA70742CDE00F5CEE-1"
         "pid": 4081
         "time": 1650469550553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:45:56.662Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:45:56.663Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:45:56.663Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:45:56.664Z appoptics:debug using context provider: ace-context
2022-04-20T15:45:56.722Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:45:56.837Z appoptics:patching patched crypto 
2022-04-20T15:45:56.855Z appoptics:patching patched https 
2022-04-20T15:45:56.856Z appoptics:patching patched http 
2022-04-20T15:45:56.887Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:45:56.888Z appoptics:patching patched fs 
2022-04-20T15:45:56.892Z appoptics:patching patched pino 6.5.1
2022-04-20T15:45:56.895Z appoptics:debug starting runtimeMetrics


  pino v6.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4103
         "time": 1650469556917
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A0A2C70CCF2B9859E60A19ECAA79BEAFC241000-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4103
         "time": 1650469556924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "21936BD369258A54F5E6CCF2F351E1A94C6C205B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4103
         "time": 1650469556927
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B949B0002414A46D9AD490B0385C64B958C28A12-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4103
         "time": 1650469556930
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B66966736F947E25F6A7CE731990D6BC3DE80056-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4103
         "time": 1650469556932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4103
         "time": 1650469556934
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BF359FA52759BEBB2B52337D0499FF65F91935A9-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4103
         "time": 1650469556935
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2EF4DE67AFC0C9E8A59DAE4FADE4618329F42AED-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4103
         "time": 1650469556937
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4103
         "time": 1650469556938
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "12D917F1F9D7B2B296A0BF9DE4A63FF526870C00-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4103
         "time": 1650469556939
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4103
         "time": 1650469556940
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F738EB4B16463494460808F24E10A4BFDF069AB4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4103
         "time": 1650469556942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "92C76FB35687F584FA6961E5C890368F4DB62A51-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4103
         "time": 1650469557046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 5C7792D8CDD6FC1DEA6DACD99FB4D8C93174DC12-1"
         "pid": 4103
         "time": 1650469557074
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:02.479Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:02.479Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:02.479Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:02.480Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:02.533Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:02.638Z appoptics:patching patched crypto 
2022-04-20T15:46:02.654Z appoptics:patching patched https 
2022-04-20T15:46:02.654Z appoptics:patching patched http 
2022-04-20T15:46:02.686Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:02.687Z appoptics:patching patched fs 
2022-04-20T15:46:02.691Z appoptics:patching patched pino 6.6.0
2022-04-20T15:46:02.694Z appoptics:debug starting runtimeMetrics


  pino v6.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (172ms)
  14 failing

  1) pino v6.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4125
         "time": 1650469562716
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0F3F51D5EE29CFA0BB33121F77C1093D487B66F8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4125
         "time": 1650469562722
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B3369230E860085351CA2128614F4B1E4FAC9056-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4125
         "time": 1650469562726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "594E130B97ADDB45171A3B27DBE70A82FC6C9E24-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4125
         "time": 1650469562728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AE8CB3DF6B15151734A9CB6038E2028A3B3A107E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4125
         "time": 1650469562730
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4125
         "time": 1650469562733
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3CCCA54FB2D8095E711F440526C9559B927264D6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4125
         "time": 1650469562734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE93E20B5A3F1781F1219C92EA4F7B8EFE65E4DF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4125
         "time": 1650469562735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4125
         "time": 1650469562737
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7FF438C80685803D0FFEE667D37D64F168FFEBBF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4125
         "time": 1650469562738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4125
         "time": 1650469562739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5EA0F29156979B40CA6D2F94255DD7F14CE1A9CD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4125
         "time": 1650469562741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "008FFF9714C819AA91FA35A9B4A5E8F4481DFC09-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4125
         "time": 1650469562844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FA21B6AA18450CF315907C1258BA66FED9FC3193-1"
         "pid": 4125
         "time": 1650469562871
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:08.983Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:08.984Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:08.984Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:08.985Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:09.043Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:09.201Z appoptics:patching patched crypto 
2022-04-20T15:46:09.248Z appoptics:patching patched https 
2022-04-20T15:46:09.250Z appoptics:patching patched http 
2022-04-20T15:46:09.307Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:09.307Z appoptics:patching patched fs 
2022-04-20T15:46:09.312Z appoptics:patching patched pino 6.6.1
2022-04-20T15:46:09.315Z appoptics:debug starting runtimeMetrics


  pino v6.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v6.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4147
         "time": 1650469569339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "607314D915565DD4010E6685528E29A0EB587220-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4147
         "time": 1650469569346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D588890226E49107DDE685FF2BF48925E859F3B1-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4147
         "time": 1650469569349
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9725756454E17B4BA0694BCB1A9E65D088E7C12C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4147
         "time": 1650469569352
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3743CA8758182B83702BE8514018AA749661167C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4147
         "time": 1650469569354
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4147
         "time": 1650469569357
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1F2A69B3C09DCB1902D49788C209617300E42C6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4147
         "time": 1650469569358
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4309AAD4558C35AE22345E19C99A124B38AA219-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4147
         "time": 1650469569359
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4147
         "time": 1650469569360
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E34D83C0BF9AC3C0524BAA0D0717390639DF491-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4147
         "time": 1650469569362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4147
         "time": 1650469569363
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "407382135D08CE8747A27E75498920F113FC696E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4147
         "time": 1650469569365
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8CC4ED71CEA5F419A2C816F2771A5CBC6607BD19-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4147
         "time": 1650469569469
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 694F3FD14B1AEFD08D34DE6E9C564A242184DA32-1"
         "pid": 4147
         "time": 1650469569497
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:16.125Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:16.126Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:16.126Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:16.127Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:16.186Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:16.303Z appoptics:patching patched crypto 
2022-04-20T15:46:16.320Z appoptics:patching patched https 
2022-04-20T15:46:16.321Z appoptics:patching patched http 
2022-04-20T15:46:16.352Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:16.352Z appoptics:patching patched fs 
2022-04-20T15:46:16.357Z appoptics:patching patched pino 6.7.0
2022-04-20T15:46:16.360Z appoptics:debug starting runtimeMetrics


  pino v6.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (172ms)
  14 failing

  1) pino v6.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4169
         "time": 1650469576382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0D2EF8AFD16194C21D9F2500C9AF41B6C5C6EBE7-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4169
         "time": 1650469576388
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4683AB9E9BCF9EE53A5A6D9C071DD07861B1E1C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4169
         "time": 1650469576391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0A00D2D1A948C9D52819B2CF10826B381B31B409-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4169
         "time": 1650469576394
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "596EB76A4D981FBD486AEEBCA05DB8CD2BC4200D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4169
         "time": 1650469576396
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4169
         "time": 1650469576398
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1043EB268FAA9D6D11D51EFFA11553F61AAE8E8C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4169
         "time": 1650469576400
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6EA27F0EE502E08BD486133B1D0E59A1AA0B3FDE-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4169
         "time": 1650469576401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4169
         "time": 1650469576402
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8FE98AF31C0FF2CB144D53C28489FAE7A4B2A59E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4169
         "time": 1650469576403
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4169
         "time": 1650469576404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "997FB19D01B5F5BEB4BCEB872AD87DE53A19110A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4169
         "time": 1650469576406
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F6174F3344BAD09F33F6EF0ED162E45598368B6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4169
         "time": 1650469576509
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AE6893B511F5160511BB37844EFA4046D3B9E271-1"
         "pid": 4169
         "time": 1650469576536
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:22.068Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:22.069Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:22.069Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:22.070Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:22.124Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:22.237Z appoptics:patching patched crypto 
2022-04-20T15:46:22.255Z appoptics:patching patched https 
2022-04-20T15:46:22.256Z appoptics:patching patched http 
2022-04-20T15:46:22.287Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:22.288Z appoptics:patching patched fs 
2022-04-20T15:46:22.293Z appoptics:patching patched pino 6.8.0
2022-04-20T15:46:22.297Z appoptics:debug starting runtimeMetrics


  pino v6.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4191
         "time": 1650469582321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "884921DC23687AAF88C232B97D0FD9F1F8FA8465-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4191
         "time": 1650469582328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "67F768B4E9B63A0458F003397E6225256D20D596-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4191
         "time": 1650469582332
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "065631C942F64333613C38B6D986C9D399CC2394-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4191
         "time": 1650469582334
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1C9E61EF6438144029CBAF937A7F6B2946CC3800-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4191
         "time": 1650469582337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4191
         "time": 1650469582339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A8DA0E2AB1C08301659AD1510C862DF1CD894CE-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4191
         "time": 1650469582341
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9A3859051C72A3B07D02513BEB85334A61596F3-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4191
         "time": 1650469582342
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4191
         "time": 1650469582344
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C0AA3603866B8AA4BF6A090444A51B8642334ED-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4191
         "time": 1650469582345
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4191
         "time": 1650469582346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "21975699AD374D2FE3DE4CA3F5A7849B3BB58948-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4191
         "time": 1650469582348
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D6031DF749C38E69B1FA9914D2ADB1DC8003DA8F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4191
         "time": 1650469582451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7C2DF5FF08E47ECBB1A94079B10CF5266B60D533-1"
         "pid": 4191
         "time": 1650469582480
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:27.703Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:27.704Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:27.704Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:27.705Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:27.783Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:27.919Z appoptics:patching patched crypto 
2022-04-20T15:46:27.957Z appoptics:patching patched https 
2022-04-20T15:46:27.958Z appoptics:patching patched http 
2022-04-20T15:46:27.993Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:27.994Z appoptics:patching patched fs 
2022-04-20T15:46:27.999Z appoptics:patching patched pino 6.9.0
2022-04-20T15:46:28.002Z appoptics:debug starting runtimeMetrics


  pino v6.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4213
         "time": 1650469588027
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6165A10A64A70C9CAF9A35D6B4A55724FB26AC0-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4213
         "time": 1650469588034
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0DC9C0C995B25B44B24048C2CA2572BDECE68008-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4213
         "time": 1650469588038
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A6D4333F39C141BE72C6DD303E2183A4AFB0A56E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4213
         "time": 1650469588040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C1C75769CDD87831D16D2F80A908B2F03646D4F2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4213
         "time": 1650469588043
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4213
         "time": 1650469588045
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DECD796DF2DBF5A8A4A66CDA0C4F3858202100A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4213
         "time": 1650469588047
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4042F6B308C4C01C24E3C4960D43D43C1AA71D93-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4213
         "time": 1650469588049
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4213
         "time": 1650469588050
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FA67EE08C71CF339A7D08A013D7B5617E32BC43E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4213
         "time": 1650469588052
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4213
         "time": 1650469588053
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E627E0989F7C9B4382CCBD96B7C0FCAEB0C3829A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4213
         "time": 1650469588055
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E235928901B6A3BDF3A5A78D0266965BE56CF6D8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4213
         "time": 1650469588159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 6ECDB1ED295DCE9A062BEAAD6480556E0D1BF47B-1"
         "pid": 4213
         "time": 1650469588188
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:34.056Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:34.057Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:34.057Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:34.057Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:34.116Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:34.232Z appoptics:patching patched crypto 
2022-04-20T15:46:34.251Z appoptics:patching patched https 
2022-04-20T15:46:34.251Z appoptics:patching patched http 
2022-04-20T15:46:34.279Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:34.279Z appoptics:patching patched fs 
2022-04-20T15:46:34.285Z appoptics:patching patched pino 6.10.0
2022-04-20T15:46:34.288Z appoptics:debug starting runtimeMetrics


  pino v6.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4235
         "time": 1650469594312
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E9B2A3F720E282396888B20C6711D5A7078B8DEA-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4235
         "time": 1650469594319
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15B19A239CB3F6550710E625AAD29B0BB6529AEE-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4235
         "time": 1650469594323
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "529C371C323D31718F3798161FF27F803E47E59D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4235
         "time": 1650469594325
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F074A83683B27DA4C593D63DFA1AD929ACBDF8FA-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4235
         "time": 1650469594328
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4235
         "time": 1650469594330
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CAE4CD14F8B8C3E2975DC155A148379039DFCD6C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4235
         "time": 1650469594332
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "928337EE8D9FF66A1121AEA28AE7D5D8C220293A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4235
         "time": 1650469594333
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4235
         "time": 1650469594335
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B65E305C39EA49B51858414A326424BF820D3EDB-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4235
         "time": 1650469594336
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4235
         "time": 1650469594337
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D2C884F8B834AA9C6971E3E9E5FCBCED086260B0-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4235
         "time": 1650469594339
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6C9CA52E59A7723A3FDC7ACA5E06E2806CCD2D67-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4235
         "time": 1650469594443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 543DFD5B4C16C4FB073C9C0407CE6BDBF2FE6DFA-1"
         "pid": 4235
         "time": 1650469594472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:40.354Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:40.355Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:40.355Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:40.355Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:40.422Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:40.565Z appoptics:patching patched crypto 
2022-04-20T15:46:40.583Z appoptics:patching patched https 
2022-04-20T15:46:40.584Z appoptics:patching patched http 
2022-04-20T15:46:40.615Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:40.615Z appoptics:patching patched fs 
2022-04-20T15:46:40.621Z appoptics:patching patched pino 6.11.0
2022-04-20T15:46:40.624Z appoptics:debug starting runtimeMetrics


  pino v6.11.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.11.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4257
         "time": 1650469600648
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "33D8CFCBD8C3DFB1D0550DAAB1B91A5CCB595224-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4257
         "time": 1650469600655
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DD256A4409E32CCF9B81C1D2242554B9F86BC797-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4257
         "time": 1650469600659
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "642B7CDEE7906E72F41FEADDACE6CD2597C8082F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4257
         "time": 1650469600662
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "77AAB13CBB3F7DAF3399A15D2597248C0FE07FF6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4257
         "time": 1650469600664
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4257
         "time": 1650469600667
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45F9EE7EF0BEA4AF972DDBD562275F72D069542C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4257
         "time": 1650469600668
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED928E1A03453F51F0527C83955B9267A80C0AB6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4257
         "time": 1650469600670
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4257
         "time": 1650469600671
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2190A03E5BAB3171C54AB94C85C37B500D82D924-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4257
         "time": 1650469600672
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4257
         "time": 1650469600673
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4A334F74C26846B47300588369A6D398E8CB91E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4257
         "time": 1650469600675
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7C089CF35D0ADE940D4C4297B549F7741CFA2547-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4257
         "time": 1650469600778
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8208DD7E5E7CBC45BA69CC517CF6CC03D1C88AA5-1"
         "pid": 4257
         "time": 1650469600808
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:46.355Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:46.356Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:46.356Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:46.356Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:46.410Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:46.517Z appoptics:patching patched crypto 
2022-04-20T15:46:46.535Z appoptics:patching patched https 
2022-04-20T15:46:46.535Z appoptics:patching patched http 
2022-04-20T15:46:46.567Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:46.568Z appoptics:patching patched fs 
2022-04-20T15:46:46.573Z appoptics:patching patched pino 6.11.1
2022-04-20T15:46:46.576Z appoptics:debug starting runtimeMetrics


  pino v6.11.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v6.11.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4279
         "time": 1650469606600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7A87731F7E29BB60C10F2393B855C121F386BF63-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4279
         "time": 1650469606606
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "592A7094FB572535FFAE2DD9A1CEEFD71D8A2226-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4279
         "time": 1650469606610
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A97F42CD4172685E6B5A5BFE3387D8A52D1267A7-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4279
         "time": 1650469606612
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "711CC27A83A3F12345DC16925920A56AD29BCBD6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4279
         "time": 1650469606614
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4279
         "time": 1650469606617
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "81744FAA25049DDEA1A4822C2012F426404B6D13-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4279
         "time": 1650469606618
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D1B1184B4D667211290E75162B5E50829147126-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4279
         "time": 1650469606620
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4279
         "time": 1650469606621
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "62E34CE1F5F89C62B149BC28D76719E50A71B59A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4279
         "time": 1650469606622
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4279
         "time": 1650469606623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C082BB8D39E2EF7AB057DD6F1DCE652D5002888C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4279
         "time": 1650469606625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4B8301496A41065E5FF1E1CF6EE9FAB7B9B8FAD5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4279
         "time": 1650469606729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 47592A82A2CA542165227855147205603924B713-1"
         "pid": 4279
         "time": 1650469606757
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:53.352Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:53.352Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:53.352Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:53.353Z appoptics:debug using context provider: ace-context
2022-04-20T15:46:53.414Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:46:53.546Z appoptics:patching patched crypto 
2022-04-20T15:46:53.563Z appoptics:patching patched https 
2022-04-20T15:46:53.564Z appoptics:patching patched http 
2022-04-20T15:46:53.603Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:46:53.603Z appoptics:patching patched fs 
2022-04-20T15:46:53.608Z appoptics:patching patched pino 6.11.2
2022-04-20T15:46:53.612Z appoptics:debug starting runtimeMetrics


  pino v6.11.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v6.11.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4301
         "time": 1650469613635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1B2580C56666E76A4E00D5DCDA828AE1F55EF498-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4301
         "time": 1650469613642
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "164076FCD7AAD17E3E9497A947DF073E4D0934E6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4301
         "time": 1650469613646
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "027D9AC04A8DB2325F146DF42FEB8423D93F83A1-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4301
         "time": 1650469613652
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DB3143F3C705A6446A0115204607151AFC0AFAC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4301
         "time": 1650469613657
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4301
         "time": 1650469613663
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6DD97FF59924FE207BA27F9123AFFEB079344E7F-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4301
         "time": 1650469613665
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5081BDCF0905D4822E83F6D1B6BE9F8294CB2D2A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4301
         "time": 1650469613666
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4301
         "time": 1650469613668
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "167DD06D0AAA315607BB5F120F418F1D5D0AECF6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4301
         "time": 1650469613673
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4301
         "time": 1650469613674
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A4281A80875F473F57470B602BDBB5A45DB7262-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4301
         "time": 1650469613676
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BACFE5CDA36A21651CA8B94425F537F8A8E6209D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4301
         "time": 1650469613779
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 458C940652927BBBEA1536DAA948E61319A67104-1"
         "pid": 4301
         "time": 1650469613807
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:46:59.974Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:46:59.975Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:46:59.980Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:46:59.982Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:00.203Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:00.471Z appoptics:patching patched crypto 
2022-04-20T15:47:00.517Z appoptics:patching patched https 
2022-04-20T15:47:00.518Z appoptics:patching patched http 
2022-04-20T15:47:00.570Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:00.570Z appoptics:patching patched fs 
2022-04-20T15:47:00.580Z appoptics:patching patched pino 6.11.3
2022-04-20T15:47:00.591Z appoptics:debug starting runtimeMetrics


  pino v6.11.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (244ms)
  14 failing

  1) pino v6.11.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4323
         "time": 1650469620665
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.11.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26BF23D999AC4B17349D67C09252F1D7325BD6FD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4323
         "time": 1650469620682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.11.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D3A006D59CA027136842460EBAD6D5F879EBB235-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4323
         "time": 1650469620690
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.11.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "341E41E97114A50597473E088AE622B2E8564E46-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4323
         "time": 1650469620700
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.11.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1CDAA30B13A877FEC8E8B0378951A0D89D6EF0DF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4323
         "time": 1650469620711
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.11.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4323
         "time": 1650469620721
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.11.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "22742A21788F11713D38518146AF208AE17AC4BC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4323
         "time": 1650469620723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.11.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8301ACCE2EBE8F9110E4F2A49F0C35C81E5EDE9D-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4323
         "time": 1650469620726
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.11.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4323
         "time": 1650469620728
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.11.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "028A2FA4971A34FC26B821554D890C94A0EA69FD-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4323
         "time": 1650469620734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.11.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4323
         "time": 1650469620739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.11.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7195C6E121D1617D79357EEFE6FC1CF33F6CEF3-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4323
         "time": 1650469620744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.11.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4C3E876C9205CA4BD8405AF3B186815C0C57D744-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4323
         "time": 1650469620847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.11.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0529C84343ECEEB63B265B03662D3F87829FD448-1"
         "pid": 4323
         "time": 1650469620875
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:08.320Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:08.321Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:08.321Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:08.322Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:08.381Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:08.497Z appoptics:patching patched crypto 
2022-04-20T15:47:08.516Z appoptics:patching patched https 
2022-04-20T15:47:08.516Z appoptics:patching patched http 
2022-04-20T15:47:08.547Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:08.547Z appoptics:patching patched fs 
2022-04-20T15:47:08.553Z appoptics:patching patched pino 6.12.0
2022-04-20T15:47:08.556Z appoptics:debug starting runtimeMetrics


  pino v6.12.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v6.12.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4345
         "time": 1650469628580
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.12.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F5BDA240DEE46CC1E328740B316F6A6075F0FF9D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4345
         "time": 1650469628587
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.12.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "626F2023975A31FFB932FEECD80A497C843C87DF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4345
         "time": 1650469628591
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.12.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CAFE2F291675351739A1104691D79DDCC8D0E824-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4345
         "time": 1650469628593
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.12.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "527872A3633F73BAD0BC0AD137D8CC7AFB0FDF4C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4345
         "time": 1650469628596
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.12.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4345
         "time": 1650469628598
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.12.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DD5182BE99DF459C499CFCF2343A3B1E5A990993-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4345
         "time": 1650469628600
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.12.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1A5DCE9855FA417C5AE2BB36A87FA323D4004BA-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4345
         "time": 1650469628601
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.12.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4345
         "time": 1650469628603
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.12.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "636F8D245FDF2C940240FF7ED35B82207B01AB46-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4345
         "time": 1650469628604
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.12.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4345
         "time": 1650469628605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.12.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2B457753688B10BD11AF548F23C19991D77E1CE0-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4345
         "time": 1650469628607
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.12.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D370C2CFBC30930F10A05666D9E1162BBF12BFB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4345
         "time": 1650469628710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.12.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9CF2FBC097FEA9209D11B7ED1DFB4D2D3A05DBA2-1"
         "pid": 4345
         "time": 1650469628739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 927 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:14.313Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:14.313Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:14.313Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:14.314Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:14.367Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:14.472Z appoptics:patching patched crypto 
2022-04-20T15:47:14.488Z appoptics:patching patched https 
2022-04-20T15:47:14.488Z appoptics:patching patched http 
2022-04-20T15:47:14.519Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:14.520Z appoptics:patching patched fs 
2022-04-20T15:47:14.525Z appoptics:patching patched pino 6.13.0
2022-04-20T15:47:14.528Z appoptics:debug starting runtimeMetrics


  pino v6.13.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v6.13.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4367
         "time": 1650469634549
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "30E7D315FD54D54990055299BCFF5744F728094B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4367
         "time": 1650469634556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "946EB8DF5600E717A986D1D2802DEAA05A41C257-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4367
         "time": 1650469634559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6CFDE51B56BBDA84DDDE04BB3A04DFD5706B5A40-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4367
         "time": 1650469634561
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "02A11749FDB6049AF9B65FBF3BF84007E3CEE241-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4367
         "time": 1650469634563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4367
         "time": 1650469634566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9E58E65E93DE59BD5577823834CD11C7A5CB39C2-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4367
         "time": 1650469634567
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "38ECE92772A9271894394A92286C05F8EFC08CFB-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4367
         "time": 1650469634568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4367
         "time": 1650469634570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B5F263F8A4151040E94D8A94A69C4AF5328708F4-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4367
         "time": 1650469634571
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4367
         "time": 1650469634572
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AFA83D3F568AF5D26B5239308C0AA578B7E7E11-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4367
         "time": 1650469634573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FD27416ED7FAEF110295F54B6FBD9204A49DC57D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4367
         "time": 1650469634678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous AF2E7EBCD44C3FBD9BF739533771E8D46094CEDF-1"
         "pid": 4367
         "time": 1650469634706
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 1 package, changed 2 packages, and audited 928 packages in 17s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:31.876Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:31.877Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:31.877Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:31.877Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:31.936Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:32.052Z appoptics:patching patched crypto 
2022-04-20T15:47:32.070Z appoptics:patching patched https 
2022-04-20T15:47:32.070Z appoptics:patching patched http 
2022-04-20T15:47:32.103Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:32.104Z appoptics:patching patched fs 
2022-04-20T15:47:32.110Z appoptics:patching patched pino 6.13.1
2022-04-20T15:47:32.113Z appoptics:debug starting runtimeMetrics


  pino v6.13.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v6.13.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4389
         "time": 1650469652137
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "475A11C0E38B25B2DA20A317FA1DA67975810B1C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4389
         "time": 1650469652145
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EB3A4B04D07386ADAB0642ED485A651557256984-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4389
         "time": 1650469652148
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "319348A49E5C64E630D5F0C61265F57A2713ADB9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4389
         "time": 1650469652151
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "197EB722AA7BF3FD3007C6CF6D0A85F06E4DAE74-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4389
         "time": 1650469652153
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4389
         "time": 1650469652156
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44DA62023810BA51984C83817DCDDD349145EE0C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4389
         "time": 1650469652157
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C7456A912E87F5130F5992082121A051FB81B052-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4389
         "time": 1650469652159
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4389
         "time": 1650469652160
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3261585B238730E0A1CA78D352A11929209E63A8-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4389
         "time": 1650469652161
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4389
         "time": 1650469652162
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D945829F22CFB74311E73A78AB15A567FFFAF1E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4389
         "time": 1650469652164
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D89C9A2F1501A0EABDFF0F5C36615FF84C04D38D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4389
         "time": 1650469652267
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DC783E1B3007357DE4DF7163A4F27E19ED092789-1"
         "pid": 4389
         "time": 1650469652295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:37.639Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:37.640Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:37.640Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:37.640Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:37.700Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:37.817Z appoptics:patching patched crypto 
2022-04-20T15:47:37.834Z appoptics:patching patched https 
2022-04-20T15:47:37.835Z appoptics:patching patched http 
2022-04-20T15:47:37.868Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:37.868Z appoptics:patching patched fs 
2022-04-20T15:47:37.874Z appoptics:patching patched pino 6.13.2
2022-04-20T15:47:37.877Z appoptics:debug starting runtimeMetrics


  pino v6.13.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (187ms)
  14 failing

  1) pino v6.13.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4411
         "time": 1650469657902
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AF18BF71966876E79DE24F15A6169AEE77561EF5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4411
         "time": 1650469657909
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4B7E0AA77646AC1DD0F418956484397139F380D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4411
         "time": 1650469657917
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1391C0C923E52EA523DFF739CD2540C6660E019-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4411
         "time": 1650469657921
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1FE49FC7908C6BE21D63D6465C6423A68AEEE3DB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4411
         "time": 1650469657925
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4411
         "time": 1650469657928
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE0D922A209C7E45F6443F6D58F6955E2A0BD3BC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4411
         "time": 1650469657929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D5B30361FD103DC5EB176A25CC976650AA2C711-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4411
         "time": 1650469657931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4411
         "time": 1650469657932
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27E06141409DC49239FFB9B126DF711B33E54CC4-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4411
         "time": 1650469657933
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4411
         "time": 1650469657935
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "70EB7E798226AA416C195B37425D9E3DB7951FEA-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4411
         "time": 1650469657936
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7B03B0091923DB9BA45EB30B90E76B1FA1C80F0C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4411
         "time": 1650469658041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0F01ADAC15FA84F7DB9952166AB80317865ACB03-1"
         "pid": 4411
         "time": 1650469658069
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:45.727Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:45.727Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:45.727Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:45.728Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:45.782Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:45.889Z appoptics:patching patched crypto 
2022-04-20T15:47:45.906Z appoptics:patching patched https 
2022-04-20T15:47:45.906Z appoptics:patching patched http 
2022-04-20T15:47:45.935Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:45.936Z appoptics:patching patched fs 
2022-04-20T15:47:45.941Z appoptics:patching patched pino 6.13.3
2022-04-20T15:47:45.944Z appoptics:debug starting runtimeMetrics


  pino v6.13.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v6.13.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4433
         "time": 1650469665966
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DF9E7BC5562BA26CA60530C0CAB77296D469F00-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4433
         "time": 1650469665973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E6B33034C00DF769BE218344A98B027BB5C50240-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4433
         "time": 1650469665976
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "19C0D21223EC4F0A6A2B734863210C894713A6D7-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4433
         "time": 1650469665978
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "507B58E8E96C67625F3FF86840685A7DC9DB0B19-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4433
         "time": 1650469665981
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4433
         "time": 1650469665983
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8BB08DCCDF6EF699E2FCADF827EFB8CF6CFD797C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4433
         "time": 1650469665985
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0972BDC6ADA4A9848E8D5621E41910CEB5CC90A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4433
         "time": 1650469665986
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4433
         "time": 1650469665987
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "734A31DC430ED26A287B93F7B6E8AA71106B840C-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4433
         "time": 1650469665988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4433
         "time": 1650469665989
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "26AC3126E548B0A632B101389BE1378121E478A6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4433
         "time": 1650469665991
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BB0407896A3CCC42141E348EB26CC3C62851D6AB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4433
         "time": 1650469666094
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 501F25971716075EB7AEB5023BA02123105718F8-1"
         "pid": 4433
         "time": 1650469666123
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:51.255Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:51.255Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:51.255Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:51.256Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:51.315Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:51.434Z appoptics:patching patched crypto 
2022-04-20T15:47:51.451Z appoptics:patching patched https 
2022-04-20T15:47:51.452Z appoptics:patching patched http 
2022-04-20T15:47:51.499Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:51.499Z appoptics:patching patched fs 
2022-04-20T15:47:51.505Z appoptics:patching patched pino 6.13.4
2022-04-20T15:47:51.511Z appoptics:debug starting runtimeMetrics


  pino v6.13.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v6.13.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4455
         "time": 1650469671541
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.13.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6CD973990CE1784205288DDAC79F7C3609A125A8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4455
         "time": 1650469671548
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.13.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9456EEB83D122E3E6027E112C786BE8B661216BC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4455
         "time": 1650469671551
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.13.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1B722025BE475B496EF2B50DFA94FECD624899C1-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4455
         "time": 1650469671554
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.13.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C2AFB87A044B5EE6AB141805FAB543AB5C70B901-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4455
         "time": 1650469671556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.13.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4455
         "time": 1650469671560
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.13.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "140F9FCE51F3496A4E4FEB8226490AA12AC2C12A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4455
         "time": 1650469671563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.13.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D723AB23F57231277C82596C46AE8F6889CB82E4-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4455
         "time": 1650469671564
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.13.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4455
         "time": 1650469671565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.13.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CEF16660225F4E9EF22A3D9377E1FBA567E743FF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4455
         "time": 1650469671566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.13.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4455
         "time": 1650469671567
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.13.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B726B6211886B6721932AB0B3F1FEB4D27EC2A8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4455
         "time": 1650469671569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.13.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F67C740FD5834E0B9D64A8B1B23518D9A5A644B2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4455
         "time": 1650469671672
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.13.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous EB92F41B7DF006E4F53A587B9EC061C0C9CD9234-1"
         "pid": 4455
         "time": 1650469671701
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 928 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:47:57.501Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:47:57.502Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:47:57.502Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:47:57.503Z appoptics:debug using context provider: ace-context
2022-04-20T15:47:57.562Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:47:57.680Z appoptics:patching patched crypto 
2022-04-20T15:47:57.699Z appoptics:patching patched https 
2022-04-20T15:47:57.699Z appoptics:patching patched http 
2022-04-20T15:47:57.732Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:47:57.732Z appoptics:patching patched fs 
2022-04-20T15:47:57.738Z appoptics:patching patched pino 6.14.0
2022-04-20T15:47:57.742Z appoptics:debug starting runtimeMetrics


  pino v6.14.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v6.14.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4477
         "time": 1650469677766
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v6.14.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B7343FA57BD86E6059088720C06A361133B2E19C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4477
         "time": 1650469677773
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v6.14.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60D1B06F1C02BB11CEEF02FD0204649C7A1D162D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4477
         "time": 1650469677777
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v6.14.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64059B14FFFC25E13F83E16BBCB676EAED7E4D2B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4477
         "time": 1650469677780
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v6.14.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2AA986D10DD9A3EEE8C50255FD38EBCA3145FA06-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4477
         "time": 1650469677782
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v6.14.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4477
         "time": 1650469677785
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v6.14.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9A35EC1166FEFE53E360FB8C0FA4D81C1BB413A1-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4477
         "time": 1650469677786
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v6.14.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0E2C95B11F54EF02986FEC00CC914C8B4EBE57AC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4477
         "time": 1650469677788
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v6.14.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4477
         "time": 1650469677789
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v6.14.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B2C4D0BD51B73F65CD60DEDCEF38977F9315A1F2-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4477
         "time": 1650469677790
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v6.14.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4477
         "time": 1650469677792
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v6.14.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9832DAC4C212B6AFA604B9AFFE17190FE29865A2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4477
         "time": 1650469677793
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v6.14.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7F2B9F3CCD327B567A2176AE906F49A3AD198BAD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4477
         "time": 1650469677898
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v6.14.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous D8F25CD64F70C202B46E9AC190DB2094D70EA80A-1"
         "pid": 4477
         "time": 1650469677926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning

added 12 packages, removed 3 packages, changed 3 packages, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:03.132Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:03.132Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:03.132Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:03.133Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:03.194Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:03.301Z appoptics:patching patched crypto 
2022-04-20T15:48:03.317Z appoptics:patching patched https 
2022-04-20T15:48:03.318Z appoptics:patching patched http 
2022-04-20T15:48:03.349Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:03.349Z appoptics:patching patched fs 
2022-04-20T15:48:03.356Z appoptics:patching patched pino 7.0.0
2022-04-20T15:48:03.359Z appoptics:debug starting runtimeMetrics


  pino v7.0.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (191ms)
  14 failing

  1) pino v7.0.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4499
         "time": 1650469683391
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE42FAA7A69AC2F1C033B519811F2B1EF302CBCD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4499
         "time": 1650469683401
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B8283AE62F6058191490FE892DB5362B0C4DB7C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4499
         "time": 1650469683405
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6D7B5908CFD7CEA785E8543845AFE1CBE4C9F513-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4499
         "time": 1650469683407
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F66A2A27502985E3609538B8E43E48714F53C0C4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4499
         "time": 1650469683410
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4499
         "time": 1650469683413
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C067DB896E4D6BA6FE5A5564CF796FF1D1814B29-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4499
         "time": 1650469683415
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5330B1CDDDCEF2AE2E483B71C112ED4F604B331E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4499
         "time": 1650469683417
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4499
         "time": 1650469683418
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF29BC21BE104D4065B5BE0E047FBBA0178E8E71-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4499
         "time": 1650469683420
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4499
         "time": 1650469683421
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8381F13419C3E2ECC5667A7059B026417FE0783C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4499
         "time": 1650469683423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E83E8BE37B90F3CF5F07BFE54E12DFC132E7FF2C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4499
         "time": 1650469683526
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 8D00BA971656B2D4B8BE99F5B6F9088F08B223D0-1"
         "pid": 4499
         "time": 1650469683555
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:09.488Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:09.489Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:09.489Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:09.490Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:09.544Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:09.651Z appoptics:patching patched crypto 
2022-04-20T15:48:09.667Z appoptics:patching patched https 
2022-04-20T15:48:09.667Z appoptics:patching patched http 
2022-04-20T15:48:09.697Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:09.698Z appoptics:patching patched fs 
2022-04-20T15:48:09.704Z appoptics:patching patched pino 7.0.1
2022-04-20T15:48:09.707Z appoptics:debug starting runtimeMetrics


  pino v7.0.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v7.0.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4521
         "time": 1650469689729
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F097E239604B732FA0D4746A09B5C2E88F9D2A7F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4521
         "time": 1650469689736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9A9D78B3E4CDBA5A3A3CA7E6F2BB0BFD614C7C4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4521
         "time": 1650469689739
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "075F997448A76117173DEF4405E200DA33184FF9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4521
         "time": 1650469689741
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7341057F4A6F8824A10DE06E248D420AE0CBB4EF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4521
         "time": 1650469689744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4521
         "time": 1650469689746
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D8C8A0E58AE163BB02690548B676843427F0D54A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4521
         "time": 1650469689748
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60322E610D4D5A6BF58B52ABEC6805162CAF42BA-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4521
         "time": 1650469689749
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4521
         "time": 1650469689750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "824D95D29BE3015D42FFB9AA360CD7919B5FDF80-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4521
         "time": 1650469689751
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4521
         "time": 1650469689752
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "17506FCA4403E06A1AB587BD721981232AC14F6A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4521
         "time": 1650469689754
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "40A3BEC0287DAA4E6D91505E8B33874408838719-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4521
         "time": 1650469689857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 653A241C249C6C4BB1504D36F1849CA442B6A777-1"
         "pid": 4521
         "time": 1650469689887
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:15.227Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:15.228Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:15.228Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:15.229Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:15.287Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:15.436Z appoptics:patching patched crypto 
2022-04-20T15:48:15.461Z appoptics:patching patched https 
2022-04-20T15:48:15.462Z appoptics:patching patched http 
2022-04-20T15:48:15.508Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:15.508Z appoptics:patching patched fs 
2022-04-20T15:48:15.515Z appoptics:patching patched pino 7.0.2
2022-04-20T15:48:15.519Z appoptics:debug starting runtimeMetrics


  pino v7.0.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (183ms)
  14 failing

  1) pino v7.0.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4543
         "time": 1650469695545
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AD97A1212CD61EA2A1C5C497E62A051B8A0D880C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4543
         "time": 1650469695553
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "61E80F0CB575F282C43F166E32120E7DECFFCD37-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4543
         "time": 1650469695556
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8E58676073391B2AA7FE6DB491C1EF850F29254E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4543
         "time": 1650469695559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "19DF35BD77139E5B618365E08D4B95A45C68D250-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4543
         "time": 1650469695562
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4543
         "time": 1650469695565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44ADE0860A53D415804DF554EE28364B29020269-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4543
         "time": 1650469695566
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8951414A925C5FC077A5BA384AFAC018E7F68572-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4543
         "time": 1650469695568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4543
         "time": 1650469695569
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6FABB2E1DCA4ADC5DA9202514F92D75E00879D2E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4543
         "time": 1650469695570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4543
         "time": 1650469695572
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1A4F07567F5E49C26A2167958435DD9EEB7ADF49-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4543
         "time": 1650469695573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DE57811A1B0618705873B9749853ABDB383961A6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4543
         "time": 1650469695678
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 790F4E9B1DEE20301225B586056605EC5332D1DB-1"
         "pid": 4543
         "time": 1650469695707
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:22.149Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:22.150Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:22.150Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:22.150Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:22.210Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:22.329Z appoptics:patching patched crypto 
2022-04-20T15:48:22.355Z appoptics:patching patched https 
2022-04-20T15:48:22.356Z appoptics:patching patched http 
2022-04-20T15:48:22.379Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:22.380Z appoptics:patching patched fs 
2022-04-20T15:48:22.386Z appoptics:patching patched pino 7.0.3
2022-04-20T15:48:22.390Z appoptics:debug starting runtimeMetrics


  pino v7.0.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.0.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4565
         "time": 1650469702414
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B21A3C86A556A5BC39D23EA7A6B1AC791CEB74F4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4565
         "time": 1650469702421
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C9F4E3C5CCD99C142E85E17EF06A5699317BED67-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4565
         "time": 1650469702425
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "712E3E06E556DA66FFC21AA7F6D99C6A4782BC72-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4565
         "time": 1650469702427
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4E8616FE94B1E6536E3BA61682651024530FF1E6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4565
         "time": 1650469702430
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4565
         "time": 1650469702433
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3E200504D2FE40BE1CA6C2E192254C57F0C85607-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4565
         "time": 1650469702434
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DC8CC5543E31E4ED5BE8CDEF6908608677A6DEDC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4565
         "time": 1650469702436
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4565
         "time": 1650469702437
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5FC3B52A10D4E644E58BAB0A3D6D22F3EE5CA3AC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4565
         "time": 1650469702439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4565
         "time": 1650469702440
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "089D42D6E1688F42D73A8BB328CF3D87EB2DBDDC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4565
         "time": 1650469702442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FFC4D0D4C01C914667D4D22C0563F97A7BE471CF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4565
         "time": 1650469702546
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous E82B2A873A2AE90600B427E94C54E53EC5532745-1"
         "pid": 4565
         "time": 1650469702574
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:27.977Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:27.980Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:27.981Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:27.981Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:28.092Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:28.222Z appoptics:patching patched crypto 
2022-04-20T15:48:28.287Z appoptics:patching patched https 
2022-04-20T15:48:28.287Z appoptics:patching patched http 
2022-04-20T15:48:28.356Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:28.356Z appoptics:patching patched fs 
2022-04-20T15:48:28.370Z appoptics:patching patched pino 7.0.4
2022-04-20T15:48:28.379Z appoptics:debug starting runtimeMetrics


  pino v7.0.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (216ms)
  14 failing

  1) pino v7.0.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4587
         "time": 1650469708423
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "846A9E13C8E4231E2BAF893D0643DCE369B878D2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4587
         "time": 1650469708435
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6B143AD27547642E6C00686050B33952DB8C1BDB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4587
         "time": 1650469708443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "44312A83747A0A0F6D43D99F0F4F40325F1017F5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4587
         "time": 1650469708448
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "398C081266C47ADF34B0BBDB507D5E82C9E4CF8A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4587
         "time": 1650469708451
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4587
         "time": 1650469708459
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0B2737F8FAA3B6132ECAB90A150EBD792D99847E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4587
         "time": 1650469708460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "04F28E6F4192D8BC6EE0FD5D4E5504AA7141344A-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4587
         "time": 1650469708463
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4587
         "time": 1650469708465
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A90D4874A66C1739F735208004D1E857243B2D46-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4587
         "time": 1650469708467
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4587
         "time": 1650469708471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA0AE4B6E5DCFAE9EAEB495557E2966ED533EA89-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4587
         "time": 1650469708473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AC0DD1740CF4F15949000BD731FF5D5D0D6FB62-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4587
         "time": 1650469708577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous CEFB6042DA28A40798A60C23777FE7F3972D6323-1"
         "pid": 4587
         "time": 1650469708605
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 937 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:34.465Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:34.465Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:34.465Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:34.466Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:34.520Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:34.659Z appoptics:patching patched crypto 
2022-04-20T15:48:34.677Z appoptics:patching patched https 
2022-04-20T15:48:34.677Z appoptics:patching patched http 
2022-04-20T15:48:34.707Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:34.707Z appoptics:patching patched fs 
2022-04-20T15:48:34.713Z appoptics:patching patched pino 7.0.5
2022-04-20T15:48:34.716Z appoptics:debug starting runtimeMetrics


  pino v7.0.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v7.0.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4609
         "time": 1650469714738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.0.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "863B433D1139FB1C6B8EAE4B6BAE829B7EB8412C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4609
         "time": 1650469714745
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.0.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7E27A1C33B6F42A14F8E1D57F65FDACBF4B1EB9D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4609
         "time": 1650469714748
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.0.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6FB9CC7B167E53EF30323B5CBC1B9A790917BA02-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4609
         "time": 1650469714750
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.0.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB3B7B5484BBBDA247EC6D86FF783F1B3F7973A9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4609
         "time": 1650469714752
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.0.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4609
         "time": 1650469714755
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.0.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3D021973E26CFB379385B68B5B7E1802C029F52B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4609
         "time": 1650469714756
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.0.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5D2DD884261496BEF68525596F99A2BBD8197455-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4609
         "time": 1650469714758
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.0.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4609
         "time": 1650469714759
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.0.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "526BFD0353B9AD81B30F28BF74B53557B9653C1B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4609
         "time": 1650469714760
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.0.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4609
         "time": 1650469714761
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.0.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "042FD976047BF7D892E3E1EF56CADCF6955A7B56-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4609
         "time": 1650469714762
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.0.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB42B818C58B7A5E92776593394FE53228A8F94B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4609
         "time": 1650469714867
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.0.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A11FD6E84ED49FD433B3278B4EA3096DBAFFB45A-1"
         "pid": 4609
         "time": 1650469714895
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




removed 3 packages, changed 3 packages, and audited 934 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:40.277Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:40.277Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:40.277Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:40.278Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:40.348Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:40.482Z appoptics:patching patched crypto 
2022-04-20T15:48:40.521Z appoptics:patching patched https 
2022-04-20T15:48:40.521Z appoptics:patching patched http 
2022-04-20T15:48:40.556Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:40.557Z appoptics:patching patched fs 
2022-04-20T15:48:40.568Z appoptics:patching patched pino 7.1.0
2022-04-20T15:48:40.571Z appoptics:debug starting runtimeMetrics


  pino v7.1.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (195ms)
  14 failing

  1) pino v7.1.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4631
         "time": 1650469720603
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.1.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B06263FAB8B686176DB5D88244E97B336C6E380A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4631
         "time": 1650469720615
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.1.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2CDF95616B9DD5ADB7BD029BE8B62A77A32BEA78-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4631
         "time": 1650469720622
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.1.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1D2A924462F1597F5FA65498C3F1A8FF27E8B5E0-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4631
         "time": 1650469720625
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.1.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C6BE0194BCB27FF0297740E4513263065722203F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4631
         "time": 1650469720628
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.1.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4631
         "time": 1650469720631
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.1.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D185E0C11DE373BF5C824D32685A2511AFEE608E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4631
         "time": 1650469720632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.1.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9C3300FD9B43D9C220072C8DC3C5FCD46F03D889-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4631
         "time": 1650469720634
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.1.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4631
         "time": 1650469720635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.1.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A02ABFE79A43764AD13868D086C6182A8454A1F9-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4631
         "time": 1650469720636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.1.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4631
         "time": 1650469720638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.1.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3C9758BBB03004F0E4781553AA9A8A761F111936-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4631
         "time": 1650469720639
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.1.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADF8766A42DAD44189136FE22A98F9502AE13759-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4631
         "time": 1650469720744
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.1.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous B86484B5DC8ECC0AD4AD2ED3B4AA3F137E070EAD-1"
         "pid": 4631
         "time": 1650469720772
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, changed 2 packages, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:46.289Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:46.290Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:46.290Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:46.291Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:46.349Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:46.466Z appoptics:patching patched crypto 
2022-04-20T15:48:46.484Z appoptics:patching patched https 
2022-04-20T15:48:46.484Z appoptics:patching patched http 
2022-04-20T15:48:46.517Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:46.517Z appoptics:patching patched fs 
2022-04-20T15:48:46.525Z appoptics:patching patched pino 7.2.0
2022-04-20T15:48:46.528Z appoptics:debug starting runtimeMetrics


  pino v7.2.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.2.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4653
         "time": 1650469726552
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.2.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9FDB54D49812F0B4897D42884ACEF06EABBA3AC9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4653
         "time": 1650469726559
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.2.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "366D6DCFA8BA741FB1977E1FBD9C6C7BAA48B7F3-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4653
         "time": 1650469726563
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.2.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7F2CBCF4801C442D20B98E1B3891028354D6D3B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4653
         "time": 1650469726565
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.2.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "811A291E3AD7C2351CC9647F477DDBCE21333834-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4653
         "time": 1650469726568
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.2.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4653
         "time": 1650469726570
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.2.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6ED81C9369A87CF5D661437258082CBC0555701E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4653
         "time": 1650469726572
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.2.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "301E90024712412743BB97F6EBCBF8307850FFA0-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4653
         "time": 1650469726573
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.2.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4653
         "time": 1650469726575
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.2.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ED6B66EEBC0CF06761E5660CE68CA56ACE360B12-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4653
         "time": 1650469726576
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.2.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4653
         "time": 1650469726577
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.2.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D641EDB210F9AA3F0AA79CA302E153C60CC91453-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4653
         "time": 1650469726579
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.2.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E7A59630F09E0B57CCA241462038607927C6F81E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4653
         "time": 1650469726682
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.2.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 9333B7A9996AC4898B74F94C78E4264607A80A83-1"
         "pid": 4653
         "time": 1650469726710
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:52.577Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:52.578Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:52.578Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:52.578Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:52.650Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:52.787Z appoptics:patching patched crypto 
2022-04-20T15:48:52.826Z appoptics:patching patched https 
2022-04-20T15:48:52.827Z appoptics:patching patched http 
2022-04-20T15:48:52.864Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:52.864Z appoptics:patching patched fs 
2022-04-20T15:48:52.872Z appoptics:patching patched pino 7.3.0
2022-04-20T15:48:52.876Z appoptics:debug starting runtimeMetrics


  pino v7.3.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.3.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4675
         "time": 1650469732903
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.3.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "430E38BA73EBF19A39DB911A31D7725E469AC37A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4675
         "time": 1650469732911
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.3.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39E832ED91E042592425D0D91ADBE8A5AA3F70F8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4675
         "time": 1650469732915
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.3.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9DD798355BB729E8D34FCAFF262B1E999158512D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4675
         "time": 1650469732917
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.3.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B99DDD1168F9085641D6618771B0840216B2F0A2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4675
         "time": 1650469732920
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.3.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4675
         "time": 1650469732923
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.3.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BEBF07226821A6205CA245CBBBDAE0D9375A98CF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4675
         "time": 1650469732924
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.3.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C03A0F804A2DD8AD94CB160283774B314922252F-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4675
         "time": 1650469732926
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.3.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4675
         "time": 1650469732927
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.3.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "58DF54EFE64CEF4E3B267009C2C7458DB088F366-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4675
         "time": 1650469732928
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.3.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4675
         "time": 1650469732929
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.3.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E3526E0E1543AEE4A5C1C6CC60F378F8D277930F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4675
         "time": 1650469732931
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.3.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8B7795041C879F81504764386B881F44F6E589D4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4675
         "time": 1650469733035
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.3.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 39D5CCD75324AA9FF8C0222D2E006A21C6580811-1"
         "pid": 4675
         "time": 1650469733064
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:48:58.442Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:48:58.443Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:48:58.443Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:48:58.444Z appoptics:debug using context provider: ace-context
2022-04-20T15:48:58.504Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:48:58.623Z appoptics:patching patched crypto 
2022-04-20T15:48:58.653Z appoptics:patching patched https 
2022-04-20T15:48:58.654Z appoptics:patching patched http 
2022-04-20T15:48:58.680Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:48:58.681Z appoptics:patching patched fs 
2022-04-20T15:48:58.688Z appoptics:patching patched pino 7.4.0
2022-04-20T15:48:58.691Z appoptics:debug starting runtimeMetrics


  pino v7.4.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v7.4.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4697
         "time": 1650469738713
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "498865E629102CBBB0E2D20D63F9C6AFD8527AFA-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4697
         "time": 1650469738719
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "58DB476AE91B01447CB336916C8501E8BE37C213-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4697
         "time": 1650469738723
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1F65AF8F54E2477E33A60E0F3FF952EE9871F191-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4697
         "time": 1650469738725
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B0856CC8CFB99CFBEEDE2E737D60D218F152FF3C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4697
         "time": 1650469738727
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4697
         "time": 1650469738730
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.4.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DE202F945911789F505BD450CFF99D75A71CE589-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4697
         "time": 1650469738731
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.4.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64CD18C291D5C61BA2C57D74C6B4F366C74DB73E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4697
         "time": 1650469738732
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.4.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4697
         "time": 1650469738734
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.4.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F3C0CF285CCD7125D6EDD9DCAC5CE6B840AB08FF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4697
         "time": 1650469738735
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.4.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4697
         "time": 1650469738736
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.4.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E98D559967051C23B7CCCD73D028DF79140E8FB1-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4697
         "time": 1650469738738
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "958D272E5E3DACDA299F1D9B68A733CC66BA30B5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4697
         "time": 1650469738842
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C09EB1CC2C6016CBFA1F0F98095B245C1EB864F6-1"
         "pid": 4697
         "time": 1650469738870
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:04.786Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:04.786Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:04.786Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:04.787Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:04.854Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:05.039Z appoptics:patching patched crypto 
2022-04-20T15:49:05.110Z appoptics:patching patched https 
2022-04-20T15:49:05.111Z appoptics:patching patched http 
2022-04-20T15:49:05.179Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:05.179Z appoptics:patching patched fs 
2022-04-20T15:49:05.187Z appoptics:patching patched pino 7.4.1
2022-04-20T15:49:05.190Z appoptics:debug starting runtimeMetrics


  pino v7.4.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (177ms)
  14 failing

  1) pino v7.4.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4719
         "time": 1650469745217
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.4.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B9CF63606ACA2279C17C77FA7A9B10468FF89515-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4719
         "time": 1650469745224
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.4.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2935BC14920F63ACB4DC4A57D4CF6901B6C574BE-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4719
         "time": 1650469745227
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.4.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9BF7718FB7F6AED43A9E968B457742AB4B8A970C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4719
         "time": 1650469745229
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.4.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "649ECEE07E9C1C92B8CB00A65B9E18482C12FF53-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4719
         "time": 1650469745231
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.4.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4719
         "time": 1650469745234
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.4.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BEBA4DE2ABF74D58C810393F82E74C04627E9613-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4719
         "time": 1650469745235
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.4.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F2BE6D414DF4B128E2AB4BE83C188E64101F0226-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4719
         "time": 1650469745236
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.4.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4719
         "time": 1650469745238
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.4.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DA40F8D8F0F6031D91D2469D054CAD921FA247BD-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4719
         "time": 1650469745239
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.4.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4719
         "time": 1650469745240
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.4.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E76B37E8C5343975E231D5DC94AA3FB1850D600-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4719
         "time": 1650469745242
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.4.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6E71FBEF9B8231F3EFF5DC739F25EBC19B43E949-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4719
         "time": 1650469745346
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.4.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 36066B0EF141BD0C3B379028E656844A478D91E7-1"
         "pid": 4719
         "time": 1650469745374
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:10.378Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:10.378Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:10.378Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:10.379Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:10.433Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:10.539Z appoptics:patching patched crypto 
2022-04-20T15:49:10.564Z appoptics:patching patched https 
2022-04-20T15:49:10.564Z appoptics:patching patched http 
2022-04-20T15:49:10.590Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:10.591Z appoptics:patching patched fs 
2022-04-20T15:49:10.598Z appoptics:patching patched pino 7.5.0
2022-04-20T15:49:10.601Z appoptics:debug starting runtimeMetrics


  pino v7.5.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (176ms)
  14 failing

  1) pino v7.5.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4741
         "time": 1650469750623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "559541E691EF46E02BDD8C2A8E7A2E172417B553-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4741
         "time": 1650469750629
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B555B921AB1D1700C014B945C9ABF8B851694F46-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4741
         "time": 1650469750632
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "987B3134BF9586183C9C1BE8F9A465BEFF69E7E9-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4741
         "time": 1650469750635
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "86588B922B638015F8E90FFDBF170CBA47A05242-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4741
         "time": 1650469750637
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4741
         "time": 1650469750640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.5.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4E73C5BFF414388CC065052C773A937FFB79B10-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4741
         "time": 1650469750641
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.5.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "00D87D315BF5B6559605FAF0552004F494222A72-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4741
         "time": 1650469750643
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.5.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4741
         "time": 1650469750644
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.5.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB9E7610A270C00C33A31708388E99AF33098B71-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4741
         "time": 1650469750645
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.5.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4741
         "time": 1650469750647
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.5.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A3277DA0F97B677D99CF63DCB463DF3F3CAFED96-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4741
         "time": 1650469750648
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7240A3D793874AB983757C9B3BB7DE632B3A789D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4741
         "time": 1650469750753
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 7EBBD3AB450680C626736834375C62FECEB28276-1"
         "pid": 4741
         "time": 1650469750781
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:16.463Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:16.464Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:16.464Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:16.468Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:16.545Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:16.683Z appoptics:patching patched crypto 
2022-04-20T15:49:16.731Z appoptics:patching patched https 
2022-04-20T15:49:16.732Z appoptics:patching patched http 
2022-04-20T15:49:16.775Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:16.776Z appoptics:patching patched fs 
2022-04-20T15:49:16.785Z appoptics:patching patched pino 7.5.1
2022-04-20T15:49:16.789Z appoptics:debug starting runtimeMetrics


  pino v7.5.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (193ms)
  14 failing

  1) pino v7.5.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4763
         "time": 1650469756819
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.5.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EDC12AB7BD8A56AD55A2808B60F9DB4CB7BA424F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4763
         "time": 1650469756829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.5.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB8B5E4120BBFB2FD195BBDBDE7533138FE2D053-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4763
         "time": 1650469756833
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.5.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3665D130665BFAADDB9C8F659D668C4681C3F286-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4763
         "time": 1650469756837
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.5.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AFA3C1F241F6FD39E676573F7C21F1AFA5221EAF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4763
         "time": 1650469756840
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.5.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4763
         "time": 1650469756844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.5.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39105E358501EF99A8D74A09A294CD94B6235F37-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4763
         "time": 1650469756845
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.5.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F7CABA6BF9C744BCCBC603B1D5BF6230C952A673-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4763
         "time": 1650469756847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.5.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4763
         "time": 1650469756849
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.5.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "45E6082325BBFA4E7EB180EDFBB4B8A6201B56EF-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4763
         "time": 1650469756851
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.5.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4763
         "time": 1650469756853
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.5.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "64B20CB6AD2C4A169FAF1DBD730B075A2510BA97-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4763
         "time": 1650469756856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.5.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "85581C9154F5D5DD4F9E00DC4FE90025291649B8-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4763
         "time": 1650469756960
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.5.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 862F35040D6F0828B5AACA8BE0829B6B02964DD7-1"
         "pid": 4763
         "time": 1650469756988
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:22.311Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:22.311Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:22.311Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:22.312Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:22.371Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:22.487Z appoptics:patching patched crypto 
2022-04-20T15:49:22.505Z appoptics:patching patched https 
2022-04-20T15:49:22.506Z appoptics:patching patched http 
2022-04-20T15:49:22.552Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:22.553Z appoptics:patching patched fs 
2022-04-20T15:49:22.561Z appoptics:patching patched pino 7.6.0
2022-04-20T15:49:22.564Z appoptics:debug starting runtimeMetrics


  pino v7.6.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (201ms)
  14 failing

  1) pino v7.6.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4785
         "time": 1650469762590
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3DBD2E244DD488DE6C44145A876A99F046D2459D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4785
         "time": 1650469762606
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2302342F13569071EDAE9A8CBD128A8852DF400E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4785
         "time": 1650469762618
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "17EE82FCF09DC68745F18E6961531A53CFCD9724-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4785
         "time": 1650469762621
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5A1A332E7FB0CF19FEBC99C89F7003F68EE50999-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4785
         "time": 1650469762623
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4785
         "time": 1650469762626
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "28B1C2CEA8CAAD5E75C20318F7F46451E1ABCA09-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4785
         "time": 1650469762628
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39E4602BC00FFA1A4367D69F323566BE2A3BF9E5-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4785
         "time": 1650469762634
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4785
         "time": 1650469762636
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D92D49FBB510DB8495AC098E3B978A9CDAC7DFB9-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4785
         "time": 1650469762637
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4785
         "time": 1650469762638
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F7957373D64AD5470AF881F2C59754EE66BD03DD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4785
         "time": 1650469762640
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C786D5E682BFD5E267A86A6795508E717A690DB1-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4785
         "time": 1650469762743
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0B21A5D2D16CAECB572B308C3B8786852C48820D-1"
         "pid": 4785
         "time": 1650469762771
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:28.531Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:28.532Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:28.532Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:28.533Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:28.608Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:28.822Z appoptics:patching patched crypto 
2022-04-20T15:49:28.874Z appoptics:patching patched https 
2022-04-20T15:49:28.875Z appoptics:patching patched http 
2022-04-20T15:49:28.903Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:28.903Z appoptics:patching patched fs 
2022-04-20T15:49:28.915Z appoptics:patching patched pino 7.6.1
2022-04-20T15:49:28.918Z appoptics:debug starting runtimeMetrics


  pino v7.6.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (186ms)
  14 failing

  1) pino v7.6.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4807
         "time": 1650469768942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "640479790545A1B8D48D58E54E1DA89A90E481DD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4807
         "time": 1650469768952
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0904B005EA671CE7A85FA473C7EEF4C1D919BE37-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4807
         "time": 1650469768955
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F99EA839169520A43C3DB94F4E6B59856B511DE4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4807
         "time": 1650469768958
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BCE98AF5966274C654EA63F37F6BDC7844B4C03A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4807
         "time": 1650469768961
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4807
         "time": 1650469768965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F2139C3B27FA6F0E0874B20DA9C718C982BD467-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4807
         "time": 1650469768969
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "50896A758DE5EE80FCB790CF5D007D7A4982B0F2-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4807
         "time": 1650469768971
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4807
         "time": 1650469768972
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2F0458FD9405DF4D5A47086B2CA28C91AC0278D5-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4807
         "time": 1650469768973
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4807
         "time": 1650469768975
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5F6B7CA9B2E028828A245287513D189D30ACCE30-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4807
         "time": 1650469768976
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B186EE48A68615C7B7B5BF4D29150F0C15962CB6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4807
         "time": 1650469769081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FEBCA2A249A93CA1EC4CE9AC79839B415ACA75E6-1"
         "pid": 4807
         "time": 1650469769109
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 1 package, removed 1 package, changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:34.780Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:34.781Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:34.781Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:34.781Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:34.836Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:34.942Z appoptics:patching patched crypto 
2022-04-20T15:49:34.958Z appoptics:patching patched https 
2022-04-20T15:49:34.958Z appoptics:patching patched http 
2022-04-20T15:49:34.985Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:34.985Z appoptics:patching patched fs 
2022-04-20T15:49:34.997Z appoptics:patching patched pino 7.6.2
2022-04-20T15:49:35.000Z appoptics:debug starting runtimeMetrics


  pino v7.6.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (175ms)
  14 failing

  1) pino v7.6.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4829
         "time": 1650469775022
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FB2AF7059EF191A90C6107EB82F04AEC05EADB65-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4829
         "time": 1650469775029
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5AAE3F95017F724D23367F0ACE7F59350DF1ECD2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4829
         "time": 1650469775032
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09C6478FC4B5683A87309928AF658A124923B864-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4829
         "time": 1650469775034
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8DCE3BEF4BADDCAA3C1EC05BC77E3390BA260B4A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4829
         "time": 1650469775036
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4829
         "time": 1650469775039
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88A25F13E05D0F612CD716EA1669AA1AC0922578-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4829
         "time": 1650469775040
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FCCA700B7A83CE6D2214D4B86748BCBB322D7B90-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4829
         "time": 1650469775041
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4829
         "time": 1650469775042
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F438AA46F3E7560D96911EAB8908074598627E09-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4829
         "time": 1650469775044
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4829
         "time": 1650469775045
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "343FC182192DD5F38032EB9B10A82A5DF23622C2-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4829
         "time": 1650469775046
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D19333963D1DCB0245C6AFE525DFDC83EE86D0CF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4829
         "time": 1650469775151
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous A462E24DC3DEF7580E973FC875AE1F82A0A9A74F-1"
         "pid": 4829
         "time": 1650469775179
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:41.086Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:41.086Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:41.086Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:41.087Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:41.147Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:41.266Z appoptics:patching patched crypto 
2022-04-20T15:49:41.284Z appoptics:patching patched https 
2022-04-20T15:49:41.285Z appoptics:patching patched http 
2022-04-20T15:49:41.313Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:41.314Z appoptics:patching patched fs 
2022-04-20T15:49:41.327Z appoptics:patching patched pino 7.6.3
2022-04-20T15:49:41.330Z appoptics:debug starting runtimeMetrics


  pino v7.6.3
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (178ms)
  14 failing

  1) pino v7.6.3
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4851
         "time": 1650469781355
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.3
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "39188FB27011881EEAB29C7933CFAECC2418585A-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4851
         "time": 1650469781362
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.3
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9B28096034E084A17AF80ABF2715BA84B551B017-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4851
         "time": 1650469781366
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.3
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CD8EE26B96B5BFBE482662EACC15B0FDAC075593-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4851
         "time": 1650469781368
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.3
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1E644BB134AC0439103D612EB8BEC3A9215C6C05-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4851
         "time": 1650469781371
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.3
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4851
         "time": 1650469781373
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.3
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "60A0A693D1F231BB8E9A9729112F17E118063C5B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4851
         "time": 1650469781375
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.3
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C50D8A4A76C4B00B060B1CF9CA98D5A0FAD294B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4851
         "time": 1650469781376
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.3
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4851
         "time": 1650469781377
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.3
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E8B09F2D2AC912599B2919F1E5E841BDEF653F1D-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4851
         "time": 1650469781379
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.3
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4851
         "time": 1650469781380
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.3
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D19EF46FE203E424F3C017AC06AA491BB33C9DF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4851
         "time": 1650469781382
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.3
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3B1C371839B748F2AEAF568C3295CF1B35B07EED-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4851
         "time": 1650469781485
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.3
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 0375274D138D9DBD71409A408C0CDB6243D053E5-1"
         "pid": 4851
         "time": 1650469781514
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:47.028Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:47.029Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:47.029Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:47.029Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:47.089Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:47.208Z appoptics:patching patched crypto 
2022-04-20T15:49:47.226Z appoptics:patching patched https 
2022-04-20T15:49:47.226Z appoptics:patching patched http 
2022-04-20T15:49:47.261Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:47.261Z appoptics:patching patched fs 
2022-04-20T15:49:47.269Z appoptics:patching patched pino 7.6.4
2022-04-20T15:49:47.272Z appoptics:debug starting runtimeMetrics


  pino v7.6.4
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.6.4
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4873
         "time": 1650469787297
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.4
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7301EA0DEC8A6F80FF294B6B9B8A2D39462F73AF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4873
         "time": 1650469787304
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.4
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "69CAA6BC9BCD50C65DA706150C077DBFE90F4B7C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4873
         "time": 1650469787308
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.4
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "589D2A1202DD41DA84CD0C2B19E630D351E34F14-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4873
         "time": 1650469787311
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.4
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F7ADAC05C0FB27F51EBA743E1D301C9DC266DF07-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4873
         "time": 1650469787313
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.4
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4873
         "time": 1650469787316
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.4
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "67DBB508AE5A3754FDA7788FC3EA3AE703714202-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4873
         "time": 1650469787317
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.4
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CE12299A8FFD6F68A3E32E223337BB4732994F3E-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4873
         "time": 1650469787319
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.4
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4873
         "time": 1650469787320
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.4
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "46882A92B9D7E945A0C3FEB1315B6A8D41175BFB-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4873
         "time": 1650469787321
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.4
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4873
         "time": 1650469787322
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.4
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FF6F005A7FE9F50487477831DEEC27E97A5A1CCB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4873
         "time": 1650469787324
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.4
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4F9FE4A64D148AC5B0739ED1FBC36DDB704D088E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4873
         "time": 1650469787428
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.4
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous FA2D7F7DFB70BD905C81E091E64B120D50FD7CF1-1"
         "pid": 4873
         "time": 1650469787456
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:53.508Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:53.509Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:53.509Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:53.509Z appoptics:debug using context provider: ace-context
2022-04-20T15:49:53.576Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:49:53.716Z appoptics:patching patched crypto 
2022-04-20T15:49:53.743Z appoptics:patching patched https 
2022-04-20T15:49:53.744Z appoptics:patching patched http 
2022-04-20T15:49:53.774Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:49:53.774Z appoptics:patching patched fs 
2022-04-20T15:49:53.782Z appoptics:patching patched pino 7.6.5
2022-04-20T15:49:53.785Z appoptics:debug starting runtimeMetrics


  pino v7.6.5
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (180ms)
  14 failing

  1) pino v7.6.5
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4895
         "time": 1650469793810
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.6.5
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFD4BF1B4D59BF7D4B6123AA2AEF6348A777C528-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4895
         "time": 1650469793817
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.6.5
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0310EAF5943D082A9B0EB335A00A9364A2079135-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4895
         "time": 1650469793821
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.6.5
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "EE80A2ED8B5C35A21FFA55F3B2BB6D905B59AA33-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4895
         "time": 1650469793824
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.6.5
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "54F9B5B111BFBDE27FAE9BDD8782F5185148CF46-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4895
         "time": 1650469793826
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.6.5
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4895
         "time": 1650469793829
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.6.5
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "7872AA66B40F943F0AB2E26D48C933F254382397-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4895
         "time": 1650469793831
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.6.5
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "4DB363723109F4C5272A17D65964FE5FED4DA9F5-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4895
         "time": 1650469793832
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.6.5
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4895
         "time": 1650469793834
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.6.5
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "CCACC40507570AA042365EE65311E5F553CD1523-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4895
         "time": 1650469793835
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.6.5
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4895
         "time": 1650469793836
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.6.5
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "165C5C4C234D3E0D9AF02E46342D8B4FE80CE68F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4895
         "time": 1650469793838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.6.5
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "2C5326634F6C0FE7649B4DB3FB0D465387262A5B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4895
         "time": 1650469793942
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.6.5
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 248FD57812C872DD5F7DE375F8290E539B9B4CAA-1"
         "pid": 4895
         "time": 1650469793970
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:49:59.952Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:49:59.952Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:49:59.952Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:49:59.953Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:00.046Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:00.173Z appoptics:patching patched crypto 
2022-04-20T15:50:00.191Z appoptics:patching patched https 
2022-04-20T15:50:00.192Z appoptics:patching patched http 
2022-04-20T15:50:00.229Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:00.230Z appoptics:patching patched fs 
2022-04-20T15:50:00.238Z appoptics:patching patched pino 7.7.0
2022-04-20T15:50:00.242Z appoptics:debug starting runtimeMetrics


  pino v7.7.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (185ms)
  14 failing

  1) pino v7.7.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4917
         "time": 1650469800269
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.7.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0561B70130F2A44946A7A12E003C3C5D5027AA35-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4917
         "time": 1650469800277
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.7.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A10411E00E0AD5160EEFF1618465CE360986455C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4917
         "time": 1650469800281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.7.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "383BA64B9617661D2455282021FC8BB96794244C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4917
         "time": 1650469800284
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.7.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "569A3E66244A52CC082F873CA75FDBFC9DD7090B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4917
         "time": 1650469800287
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.7.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4917
         "time": 1650469800290
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.7.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "6F27BF0DC2F5B2D81B110B0DDEE474909F2FF5A5-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4917
         "time": 1650469800292
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.7.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "79874C2C4D16522EF37825BD70518C69EE34846B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4917
         "time": 1650469800293
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.7.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4917
         "time": 1650469800295
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.7.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A3DF55E59BE6C290E2337005661CD5EFAA4154E6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4917
         "time": 1650469800296
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.7.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4917
         "time": 1650469800298
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.7.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "99C0B36F408925B196CE649AF118F9D27B98508C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4917
         "time": 1650469800300
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.7.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "481D546519EC2156F18246097388D0A00FB0D17B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4917
         "time": 1650469800404
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.7.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BEB921198B412D12CB86DF52726D5912B7864EDA-1"
         "pid": 4917
         "time": 1650469800432
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:07.159Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:07.159Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:07.159Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:07.160Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:07.218Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:07.334Z appoptics:patching patched crypto 
2022-04-20T15:50:07.351Z appoptics:patching patched https 
2022-04-20T15:50:07.351Z appoptics:patching patched http 
2022-04-20T15:50:07.385Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:07.385Z appoptics:patching patched fs 
2022-04-20T15:50:07.392Z appoptics:patching patched pino 7.8.0
2022-04-20T15:50:07.396Z appoptics:debug starting runtimeMetrics


  pino v7.8.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (179ms)
  14 failing

  1) pino v7.8.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4939
         "time": 1650469807419
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E358C369C5B90BAEDD8BEB9D517227CAD8F95BFF-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4939
         "time": 1650469807426
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "84066E60C3A05A8123AE2D3F2C1BF04581F94741-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4939
         "time": 1650469807430
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "FE0498C0598496F289A6E677EB50AF57D9A73431-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4939
         "time": 1650469807433
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0AD15CE9E1A7525FC6D20D5C8F1926CA2797109B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4939
         "time": 1650469807435
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4939
         "time": 1650469807438
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.8.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "840004976D2925A276EFBBA40F364330A9703593-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4939
         "time": 1650469807439
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.8.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D4C6F01686A001B891E232DD4D6709046E167E89-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4939
         "time": 1650469807441
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.8.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4939
         "time": 1650469807442
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.8.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "AB6B09C63B165AFA099978ADDA70888D8EA7F2DC-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4939
         "time": 1650469807443
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.8.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4939
         "time": 1650469807444
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.8.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "D38DD89FC140CD6C7FBAA85B7D942D33D4F7CE40-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4939
         "time": 1650469807446
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5B6E28AED1FFEA09D36945717646EDF2426DC0CD-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4939
         "time": 1650469807549
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 3DD770D3161C0F09FA1A9569E3E1C2FFE01630FA-1"
         "pid": 4939
         "time": 1650469807579
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:13.965Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:13.966Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:13.966Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:13.967Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:14.030Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:14.154Z appoptics:patching patched crypto 
2022-04-20T15:50:14.173Z appoptics:patching patched https 
2022-04-20T15:50:14.174Z appoptics:patching patched http 
2022-04-20T15:50:14.208Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:14.209Z appoptics:patching patched fs 
2022-04-20T15:50:14.217Z appoptics:patching patched pino 7.8.1
2022-04-20T15:50:14.221Z appoptics:debug starting runtimeMetrics


  pino v7.8.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (188ms)
  14 failing

  1) pino v7.8.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4961
         "time": 1650469814246
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.8.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0DC3F79887DA81D2168E3C3E278E1C124909620C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4961
         "time": 1650469814254
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.8.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8D8385734FC2389A83160BC4AA52EF6FF8841DC5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4961
         "time": 1650469814258
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.8.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "238B1F5A6AC528B8995365461441787A721BFCF4-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4961
         "time": 1650469814263
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.8.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "20379483BB9B775D9482182F577E0336352AE565-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4961
         "time": 1650469814268
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.8.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4961
         "time": 1650469814272
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.8.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A6EB452EDBEE484A0CC8D41D0F156AD71B2A0258-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4961
         "time": 1650469814273
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.8.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C142B816FA7CB930313D329E094F6F1C778F60F9-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4961
         "time": 1650469814275
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.8.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4961
         "time": 1650469814276
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.8.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "5CC3E6E070F7209A47BCE7E718743B7CF4E88701-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4961
         "time": 1650469814278
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.8.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4961
         "time": 1650469814279
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.8.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "42AAAD04F9BDB9EF856DA97D03AF90E6BC040C1D-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4961
         "time": 1650469814281
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.8.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "504BD485FFA689C3B1E934F7F33AA35FF7675265-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4961
         "time": 1650469814385
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.8.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 78C0CB4D138F88CD7418C878BBE2FCEA614CBE1B-1"
         "pid": 4961
         "time": 1650469814413
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:20.795Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:20.796Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:20.796Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:20.796Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:20.856Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:20.973Z appoptics:patching patched crypto 
2022-04-20T15:50:21.000Z appoptics:patching patched https 
2022-04-20T15:50:21.000Z appoptics:patching patched http 
2022-04-20T15:50:21.024Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:21.024Z appoptics:patching patched fs 
2022-04-20T15:50:21.032Z appoptics:patching patched pino 7.9.0
2022-04-20T15:50:21.035Z appoptics:debug starting runtimeMetrics


  pino v7.9.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (182ms)
  14 failing

  1) pino v7.9.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 4983
         "time": 1650469821060
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "96DD67A8BC8F1CE8255218B761427BD02390F4BB-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 4983
         "time": 1650469821067
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "88A4F84B1D0CB1702A7EEEE8E1F388E3C27815FE-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 4983
         "time": 1650469821071
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27D68A0472E7F7EB04F8B517F2CFD54038C30FA5-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 4983
         "time": 1650469821073
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "09D4A93B3EF68478FC7508100DE06962B7A8530F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 4983
         "time": 1650469821076
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 4983
         "time": 1650469821079
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "096E638F64BD4B6473BC958E42B0200931E55CDB-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 4983
         "time": 1650469821081
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8EBF617FE90130C1E8DECF7F9CD3E0807BD5F354-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 4983
         "time": 1650469821082
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 4983
         "time": 1650469821084
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8AA36C0F7587845E440397C572FB96E386971692-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 4983
         "time": 1650469821086
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 4983
         "time": 1650469821087
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "90544364C2514122FB62B6DA20483B50A790633B-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 4983
         "time": 1650469821089
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0EC1D7EF5DE82E345EC508DF6740D5E24939B57F-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 4983
         "time": 1650469821193
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous DBA88E28754476FEFF31EA91D050A0916A86B96B-1"
         "pid": 4983
         "time": 1650469821222
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:26.596Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:26.597Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:26.597Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:26.597Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:26.651Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:26.757Z appoptics:patching patched crypto 
2022-04-20T15:50:26.773Z appoptics:patching patched https 
2022-04-20T15:50:26.774Z appoptics:patching patched http 
2022-04-20T15:50:26.806Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:26.806Z appoptics:patching patched fs 
2022-04-20T15:50:26.813Z appoptics:patching patched pino 7.9.1
2022-04-20T15:50:26.816Z appoptics:debug starting runtimeMetrics


  pino v7.9.1
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (173ms)
  14 failing

  1) pino v7.9.1
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5005
         "time": 1650469826838
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.1
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "66BFB272062F66775516235AEAC129EA619F8BE6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5005
         "time": 1650469826844
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.1
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "968D2F33B8F37BD93D3F69ADC80D1C5D5EA1979C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5005
         "time": 1650469826847
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.1
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "215A497F760641EEC2CDBB025DF80546EC038A8C-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5005
         "time": 1650469826850
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.1
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E5F68FEF30C1D1ADD0EFA11CD64DC489117437CE-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5005
         "time": 1650469826852
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.1
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5005
         "time": 1650469826854
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.1
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A4C5ACD291EC131741504FD4425CFB07BF707149-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5005
         "time": 1650469826856
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.1
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13ABD4DBAF5292EE597C1C97C5EF03FFAC762BBE-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5005
         "time": 1650469826857
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.1
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5005
         "time": 1650469826858
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.1
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "089659209F49A200E72630EA60B795B4C8FA6CD6-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5005
         "time": 1650469826859
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.1
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 5005
         "time": 1650469826860
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.1
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "8C10D05909159E7D17C1AE694B5A1D133837690E-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5005
         "time": 1650469826862
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.1
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F25757F95FB5CAC8E8A46DE41B16CF8D6DE99067-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5005
         "time": 1650469826965
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.1
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous C1AA828D421BEB120537FD26024E8F46E09F4C5F-1"
         "pid": 5005
         "time": 1650469826994
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 2 packages, and audited 935 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:33.163Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:33.164Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:33.164Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:33.165Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:33.255Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:33.369Z appoptics:patching patched crypto 
2022-04-20T15:50:33.396Z appoptics:patching patched https 
2022-04-20T15:50:33.396Z appoptics:patching patched http 
2022-04-20T15:50:33.422Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:33.422Z appoptics:patching patched fs 
2022-04-20T15:50:33.429Z appoptics:patching patched pino 7.9.2
2022-04-20T15:50:33.432Z appoptics:debug starting runtimeMetrics


  pino v7.9.2
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (174ms)
  14 failing

  1) pino v7.9.2
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5027
         "time": 1650469833454
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.9.2
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "E1A7BFDF237409D456252952CAEF15CDFAD567CC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5027
         "time": 1650469833460
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.9.2
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "BBEAD949CD6DEFE5F24B9C3DC4D8BAD820081463-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5027
         "time": 1650469833464
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.9.2
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "15D73BEB96C7062E53BE8668F7A45E3C3F299558-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5027
         "time": 1650469833466
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.9.2
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "B4AEDBA48E5358F3A73592ADA1DBFE45D68F0854-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5027
         "time": 1650469833468
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.9.2
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5027
         "time": 1650469833471
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.9.2
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F00E0DAB2448B1EC04C9C8A3B85143B3ED3BB522-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5027
         "time": 1650469833472
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.9.2
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0379812762F97DAB1844F7C1B6D0E2AE9C930EF8-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5027
         "time": 1650469833473
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.9.2
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5027
         "time": 1650469833475
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.9.2
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "C33E3DC7AFF575A289DD3B5141DDA990A711D6A3-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5027
         "time": 1650469833476
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.9.2
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 5027
         "time": 1650469833477
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.9.2
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "A9BB2B7EAECA7E5DBE8BF3FE993FC2F257D83281-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5027
         "time": 1650469833479
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.9.2
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "13416C593A1855B2C1CC0EDCB30BBCBF657C4742-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5027
         "time": 1650469833583
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.9.2
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous 85EF3774AF6D480B73BB6FDE273926656E2C2FE6-1"
         "pid": 5027
         "time": 1650469833611
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




changed 1 package, and audited 935 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:50:38.826Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:50:38.827Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:50:38.827Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:50:38.828Z appoptics:debug using context provider: ace-context
2022-04-20T15:50:38.887Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:50:39.006Z appoptics:patching patched crypto 
2022-04-20T15:50:39.029Z appoptics:patching patched https 
2022-04-20T15:50:39.030Z appoptics:patching patched http 
2022-04-20T15:50:39.067Z appoptics:patching fs.realpath - adding native method
2022-04-20T15:50:39.068Z appoptics:patching patched fs 
2022-04-20T15:50:39.081Z appoptics:patching patched pino 7.10.0
2022-04-20T15:50:39.084Z appoptics:debug starting runtimeMetrics


  pino v7.10.0
    ✓ UDP might lose a message
    1) should not insert in sync sampled code when mode=false
    2) should insert in sync sampled code when mode=true
    3) should insert in sync sampled code when mode=traced
    4) should insert in sync sampled code when mode=sampledOnly
    5) should insert in sync sampled code when mode=always
    6) should not insert in sync unsampled code when mode=false
    7) should insert in sync unsampled code when mode=true
    8) should insert in sync unsampled code when mode=traced
    9) should not insert in sync unsampled code when mode=sampledOnly
    10) should insert in sync unsampled code when mode=always
    11) mode='always' should always insert a trace ID even if not tracing
    12) should insert trace IDs in asynchronous instrumented code
    13) should insert trace IDs in promise-based instrumented code
    14) should insert trace IDs using the function directly


  1 passing (194ms)
  14 failing

  1) pino v7.10.0
       should not insert in sync sampled code when mode=false:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous traced setting = false"
         "pid": 5049
         "time": 1650469839116
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  2) pino v7.10.0
       should insert in sync sampled code when mode=true:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0EB87F4F916184B61A25526CD274A86DBD475968-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = true"
         "pid": 5049
         "time": 1650469839124
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  3) pino v7.10.0
       should insert in sync sampled code when mode=traced:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "DFD3FF733D28D58031247D843B5445610C5320FC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = traced"
         "pid": 5049
         "time": 1650469839128
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  4) pino v7.10.0
       should insert in sync sampled code when mode=sampledOnly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "9CB8D6623A256978D17F030D7A086B733493A786-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = sampledOnly"
         "pid": 5049
         "time": 1650469839131
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  5) pino v7.10.0
       should insert in sync sampled code when mode=always:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3322425553A907D0E84735BF7541191535D00CA6-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous traced setting = always"
         "pid": 5049
         "time": 1650469839134
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:228:9)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  6) pino v7.10.0
       should not insert in sync unsampled code when mode=false:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = false"
         "pid": 5049
         "time": 1650469839138
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  7) pino v7.10.0
       should insert in sync unsampled code when mode=true:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "F0F7FF477A9214BB0B53834B8DEAF09E7662526B-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = true"
         "pid": 5049
         "time": 1650469839139
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  8) pino v7.10.0
       should insert in sync unsampled code when mode=traced:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "3AEFD34259D367952DA6E2201C6CD1C70707A500-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = traced"
         "pid": 5049
         "time": 1650469839141
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  9) pino v7.10.0
       should not insert in sync unsampled code when mode=sampledOnly:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "synchronous unsampled setting = sampledOnly"
         "pid": 5049
         "time": 1650469839142
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  10) pino v7.10.0
       should insert in sync unsampled code when mode=always:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "ADE5E94E81C7CC28D26CE31B0E86FFDB424492C7-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "synchronous unsampled setting = always"
         "pid": 5049
         "time": 1650469839144
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:276:7)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  11) pino v7.10.0
       mode='always' should always insert a trace ID even if not tracing:

      AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "0000000000000000000000000000000000000000-0"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "always insert"
         "pid": 5049
         "time": 1650469839146
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at Context.<anonymous> (test/probes/pino.test.js:288:5)
      at processTicksAndRejections (node:internal/process/task_queues:78:11)

  12) pino v7.10.0
       should insert trace IDs in asynchronous instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "27458CAA060689759132A5421BADDD686EDF89BC-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 50
         "msg": "asynchronous instrumentation"
         "pid": 5049
         "time": 1650469839147
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:297:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  13) pino v7.10.0
       should insert trace IDs in promise-based instrumented code:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

       {
      +  "ao": {
      +    "traceId": "1DCF3E5E2553D37DB36395D5F36AE2DCE2435035-1"
      +  }
         "hostname": "f8a2d07fd6a4"
         "level": 30
         "msg": "promise instrumentation"
         "pid": 5049
         "time": 1650469839256
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:330:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)

  14) pino v7.10.0
       should insert trace IDs using the function directly:

      Uncaught AssertionError: expected { Object (level, time, ...) } to deeply equal { Object (level, time, ...) }
      + expected - actual

         "level": 30
         "msg": "helper and synchronous BE0D7D3B796E0868FDD4668690FEB76C904DA96C-1"
         "pid": 5049
         "time": 1650469839285
      +  "v": 1
       }
      
      at checkEventInfo (test/probes/pino.test.js:89:26)
      at localDone (test/probes/pino.test.js:371:7)
      at EventEmitter.onMessage (test/helper.js:183:7)
      at EventEmitter.emit (node:events:526:28)
      at Socket.<anonymous> (test/helper.js:112:13)
      at Socket.emit (node:events:526:28)
      at UDP.onMessage [as onmessage] (node:dgram:922:8)
      at UDP.callbackTrampoline (node:internal/async_hooks:130:17)




added 2 packages, removed 10 packages, changed 5 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
