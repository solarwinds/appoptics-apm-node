npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:04.797Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:04.798Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:04.798Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:04.799Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:04.865Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:04.994Z appoptics:patching patched crypto 
2022-04-21T16:16:05.016Z appoptics:patching patched https 
2022-04-21T16:16:05.017Z appoptics:patching patched http 
2022-04-21T16:16:05.086Z appoptics:patching patched amqplib 0.2.0
2022-04-21T16:16:05.089Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:05.091Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:15.011Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:15.012Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:15.012Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:15.012Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:15.074Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:15.194Z appoptics:patching patched crypto 
2022-04-21T16:16:15.213Z appoptics:patching patched https 
2022-04-21T16:16:15.213Z appoptics:patching patched http 
2022-04-21T16:16:15.272Z appoptics:patching patched amqplib 0.2.1
2022-04-21T16:16:15.274Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:15.276Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:472) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (68ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (52ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (280ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:23.094Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:23.094Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:23.094Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:23.095Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:23.154Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:23.279Z appoptics:patching patched crypto 
2022-04-21T16:16:23.297Z appoptics:patching patched https 
2022-04-21T16:16:23.298Z appoptics:patching patched http 
2022-04-21T16:16:23.350Z appoptics:patching patched amqplib 0.3.0
2022-04-21T16:16:23.352Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:23.355Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:494) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (178ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:29.630Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:29.631Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:29.631Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:29.631Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:29.888Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:30.079Z appoptics:patching patched crypto 
2022-04-21T16:16:30.125Z appoptics:patching patched https 
2022-04-21T16:16:30.126Z appoptics:patching patched http 
2022-04-21T16:16:30.201Z appoptics:patching patched amqplib 0.3.1
2022-04-21T16:16:30.205Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:30.208Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:516) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (60ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (61ms)


  7 passing (348ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:36.494Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:36.495Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:36.495Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:36.496Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:36.555Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:36.679Z appoptics:patching patched crypto 
2022-04-21T16:16:36.705Z appoptics:patching patched https 
2022-04-21T16:16:36.706Z appoptics:patching patched http 
2022-04-21T16:16:36.771Z appoptics:patching patched amqplib 0.3.2
2022-04-21T16:16:36.773Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:36.775Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:538) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (43ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (207ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:43.561Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:43.562Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:43.562Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:43.563Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:43.658Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:43.803Z appoptics:patching patched crypto 
2022-04-21T16:16:43.822Z appoptics:patching patched https 
2022-04-21T16:16:43.823Z appoptics:patching patched http 
2022-04-21T16:16:43.874Z appoptics:patching patched amqplib 0.4.0
2022-04-21T16:16:43.876Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:43.879Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:560) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (180ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:49.746Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:49.747Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:49.747Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:49.748Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:49.810Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:49.927Z appoptics:patching patched crypto 
2022-04-21T16:16:49.945Z appoptics:patching patched https 
2022-04-21T16:16:49.946Z appoptics:patching patched http 
2022-04-21T16:16:49.997Z appoptics:patching patched amqplib 0.4.1
2022-04-21T16:16:49.999Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:50.001Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:582) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (62ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (262ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:16:56.813Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:16:56.814Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:16:56.814Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:16:56.815Z appoptics:debug using context provider: ace-context
2022-04-21T16:16:56.876Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:16:57.012Z appoptics:patching patched crypto 
2022-04-21T16:16:57.030Z appoptics:patching patched https 
2022-04-21T16:16:57.031Z appoptics:patching patched http 
2022-04-21T16:16:57.084Z appoptics:patching patched amqplib 0.4.2
2022-04-21T16:16:57.086Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:16:57.088Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:604) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (239ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 923 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:03.028Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:03.029Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:03.029Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:03.030Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:03.100Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:03.237Z appoptics:patching patched crypto 
2022-04-21T16:17:03.304Z appoptics:patching patched https 
2022-04-21T16:17:03.305Z appoptics:patching patched http 
2022-04-21T16:17:03.426Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:03.428Z appoptics:patching patched amqplib 0.5.1
2022-04-21T16:17:03.430Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:03.432Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:626) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (186ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:09.954Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:09.955Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:09.955Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:09.956Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:10.017Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:10.135Z appoptics:patching patched crypto 
2022-04-21T16:17:10.153Z appoptics:patching patched https 
2022-04-21T16:17:10.154Z appoptics:patching patched http 
2022-04-21T16:17:10.222Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:10.224Z appoptics:patching patched amqplib 0.5.2
2022-04-21T16:17:10.228Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:10.231Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:648) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (198ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:16.462Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:16.462Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:16.462Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:16.463Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:16.522Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:16.643Z appoptics:patching patched crypto 
2022-04-21T16:17:16.662Z appoptics:patching patched https 
2022-04-21T16:17:16.663Z appoptics:patching patched http 
2022-04-21T16:17:16.725Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:16.727Z appoptics:patching patched amqplib 0.5.3
2022-04-21T16:17:16.729Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:16.732Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:670) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (64ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (246ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:23.372Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:23.372Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:23.373Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:23.373Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:23.437Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:23.570Z appoptics:patching patched crypto 
2022-04-21T16:17:23.589Z appoptics:patching patched https 
2022-04-21T16:17:23.590Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:29.546Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:29.546Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:29.546Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:29.547Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:29.607Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:29.727Z appoptics:patching patched crypto 
2022-04-21T16:17:29.745Z appoptics:patching patched https 
2022-04-21T16:17:29.746Z appoptics:patching patched http 
2022-04-21T16:17:29.812Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:29.814Z appoptics:patching patched amqplib 0.5.5
2022-04-21T16:17:29.816Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:29.818Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:710) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)


  7 passing (232ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:36.504Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:36.505Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:36.505Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:36.506Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:36.576Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:36.693Z appoptics:patching patched crypto 
2022-04-21T16:17:36.711Z appoptics:patching patched https 
2022-04-21T16:17:36.712Z appoptics:patching patched http 
2022-04-21T16:17:36.775Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:36.778Z appoptics:patching patched amqplib 0.5.6
2022-04-21T16:17:36.780Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:36.782Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:732) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (230ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 5s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:42.976Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:42.977Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:42.977Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:42.978Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:43.046Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:43.176Z appoptics:patching patched crypto 
2022-04-21T16:17:43.197Z appoptics:patching patched https 
2022-04-21T16:17:43.197Z appoptics:patching patched http 
2022-04-21T16:17:43.298Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:43.300Z appoptics:patching patched amqplib 0.6.0
2022-04-21T16:17:43.302Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:43.304Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:754) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (238ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:49.873Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:49.874Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:49.874Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:49.875Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:49.935Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:50.057Z appoptics:patching patched crypto 
2022-04-21T16:17:50.077Z appoptics:patching patched https 
2022-04-21T16:17:50.077Z appoptics:patching patched http 
2022-04-21T16:17:50.134Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:50.137Z appoptics:patching patched amqplib 0.7.0
2022-04-21T16:17:50.138Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:50.141Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:776) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (54ms)


  7 passing (196ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:17:56.628Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:17:56.629Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:17:56.629Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:17:56.630Z appoptics:debug using context provider: ace-context
2022-04-21T16:17:56.690Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:17:56.813Z appoptics:patching patched crypto 
2022-04-21T16:17:56.832Z appoptics:patching patched https 
2022-04-21T16:17:56.833Z appoptics:patching patched http 
2022-04-21T16:17:56.899Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:17:56.901Z appoptics:patching patched amqplib 0.7.1
2022-04-21T16:17:56.903Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:17:56.905Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:798) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (229ms)


changed 1 package, and audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-21T16:18:03.096Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-21T16:18:03.096Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-21T16:18:03.096Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-21T16:18:03.097Z appoptics:debug using context provider: ace-context
2022-04-21T16:18:03.157Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-21T16:18:03.275Z appoptics:patching patched crypto 
2022-04-21T16:18:03.294Z appoptics:patching patched https 
2022-04-21T16:18:03.295Z appoptics:patching patched http 
2022-04-21T16:18:03.353Z appoptics:patching patched bluebird 3.7.2
2022-04-21T16:18:03.355Z appoptics:patching patched amqplib 0.8.0
2022-04-21T16:18:03.357Z appoptics:patching patched amqplib/callback_api 
2022-04-21T16:18:03.359Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:820) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (51ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (280ms)


up to date, audited 927 packages in 6s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
