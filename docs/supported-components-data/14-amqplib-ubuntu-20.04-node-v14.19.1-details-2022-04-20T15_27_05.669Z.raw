npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.0
added 1 package from 3 contributors, removed 6 packages, updated 3 packages and audited 929 packages in 5.372s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:12.213Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:12.214Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:12.214Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:12.215Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:12.274Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:12.404Z appoptics:patching patched crypto 
2022-04-20T15:27:12.423Z appoptics:patching patched https 
2022-04-20T15:27:12.423Z appoptics:patching patched http 
2022-04-20T15:27:12.464Z appoptics:patching patched amqplib 0.2.0
2022-04-20T15:27:12.466Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:12.469Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (internal/timers.js:557:17)
      at processTimers (internal/timers.js:500:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read property 'close' of undefined
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (internal/timers.js:464:21)
      at process.callbackTrampoline (internal/async_hooks.js:130:17)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.2.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.2.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.2.1
updated 2 packages and audited 929 packages in 4.166s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:21.538Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:21.539Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:21.539Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:21.540Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:21.598Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:21.724Z appoptics:patching patched crypto 
2022-04-20T15:27:21.742Z appoptics:patching patched https 
2022-04-20T15:27:21.743Z appoptics:patching patched http 
2022-04-20T15:27:21.786Z appoptics:patching patched amqplib 0.2.1
2022-04-20T15:27:21.788Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:21.790Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:498) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (183ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.0: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.0
updated 1 package and audited 929 packages in 4.054s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:27.169Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:27.169Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:27.169Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:27.172Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:27.282Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:27.448Z appoptics:patching patched crypto 
2022-04-20T15:27:27.480Z appoptics:patching patched https 
2022-04-20T15:27:27.481Z appoptics:patching patched http 
2022-04-20T15:27:27.544Z appoptics:patching patched amqplib 0.3.0
2022-04-20T15:27:27.546Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:27.548Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:520) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (65ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (326ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.1: wanted: {"node":"0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.1
updated 2 packages and audited 929 packages in 3.847s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:32.539Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:32.539Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:32.539Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:32.540Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:32.598Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:32.720Z appoptics:patching patched crypto 
2022-04-20T15:27:32.736Z appoptics:patching patched https 
2022-04-20T15:27:32.737Z appoptics:patching patched http 
2022-04-20T15:27:32.784Z appoptics:patching patched amqplib 0.3.1
2022-04-20T15:27:32.785Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:32.787Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:542) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (55ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (210ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.3.2: wanted: {"node":">=0.8 <0.13 || ^1"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.3.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.3.2
updated 1 package and audited 929 packages in 3.284s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:37.158Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:37.158Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:37.158Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:37.161Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:37.224Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:37.362Z appoptics:patching patched crypto 
2022-04-20T15:27:37.381Z appoptics:patching patched https 
2022-04-20T15:27:37.382Z appoptics:patching patched http 
2022-04-20T15:27:37.441Z appoptics:patching patched amqplib 0.3.2
2022-04-20T15:27:37.443Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:37.445Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:564) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (168ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.0: wanted: {"node":">=0.8 <4 || ^4"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.0
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.0
updated 1 package and audited 929 packages in 4.331s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:42.796Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:42.797Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:42.797Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:42.798Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:42.857Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:42.981Z appoptics:patching patched crypto 
2022-04-20T15:27:42.999Z appoptics:patching patched https 
2022-04-20T15:27:42.999Z appoptics:patching patched http 
2022-04-20T15:27:43.045Z appoptics:patching patched amqplib 0.4.0
2022-04-20T15:27:43.046Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:43.049Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:586) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (212ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at emitReadable_ (internal/streams/readable.js:555:12)
      at processTicksAndRejections (internal/process/task_queues.js:81:21)



npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.1: wanted: {"node":">=0.8 <5 || ^5"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.1
updated 1 package and audited 929 packages in 3.47s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:47.618Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:47.619Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:47.619Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:47.621Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:47.679Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:47.802Z appoptics:patching patched crypto 
2022-04-20T15:27:47.819Z appoptics:patching patched https 
2022-04-20T15:27:47.819Z appoptics:patching patched http 
2022-04-20T15:27:47.864Z appoptics:patching patched amqplib 0.4.1
2022-04-20T15:27:47.866Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:47.868Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:608) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (54ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (217ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.4.2: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.4.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.4.2
updated 1 package and audited 929 packages in 3.851s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:52.820Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:52.821Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:52.822Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:52.823Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:52.888Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:53.013Z appoptics:patching patched crypto 
2022-04-20T15:27:53.030Z appoptics:patching patched https 
2022-04-20T15:27:53.030Z appoptics:patching patched http 
2022-04-20T15:27:53.076Z appoptics:patching patched amqplib 0.4.2
2022-04-20T15:27:53.078Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:53.080Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:630) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (171ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.1: wanted: {"node":">=0.8 <6 || ^6"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.1
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.1
removed 1 package, updated 1 package and audited 929 packages in 3.267s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:27:57.379Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:27:57.380Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:27:57.380Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:27:57.381Z appoptics:debug using context provider: ace-context
2022-04-20T15:27:57.462Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:27:57.603Z appoptics:patching patched crypto 
2022-04-20T15:27:57.619Z appoptics:patching patched https 
2022-04-20T15:27:57.620Z appoptics:patching patched http 
2022-04-20T15:27:57.674Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:27:57.676Z appoptics:patching patched amqplib 0.5.1
2022-04-20T15:27:57.678Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:27:57.680Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:652) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (48ms)


  7 passing (170ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.2: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.2
updated 1 package and audited 929 packages in 3.386s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:02.095Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:02.096Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:02.096Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:02.097Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:02.155Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:02.296Z appoptics:patching patched crypto 
2022-04-20T15:28:02.330Z appoptics:patching patched https 
2022-04-20T15:28:02.330Z appoptics:patching patched http 
2022-04-20T15:28:02.389Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:02.392Z appoptics:patching patched amqplib 0.5.2
2022-04-20T15:28:02.393Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:02.395Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:674) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (223ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.3: wanted: {"node":">=0.8 <=9"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.3
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.3
added 7 packages from 5 contributors, updated 3 packages and audited 936 packages in 3.976s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:07.698Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:07.699Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:07.699Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:07.700Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:07.758Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:07.883Z appoptics:patching patched crypto 
2022-04-20T15:28:07.899Z appoptics:patching patched https 
2022-04-20T15:28:07.900Z appoptics:patching patched http 
2022-04-20T15:28:07.958Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:07.960Z appoptics:patching patched amqplib 0.5.3
2022-04-20T15:28:07.962Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:07.964Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:696) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (223ms)

npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.4: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.4
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.4
updated 1 package and audited 936 packages in 3.808s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:12.820Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:12.821Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:12.821Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:12.821Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:12.881Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:13.007Z appoptics:patching patched crypto 
2022-04-20T15:28:13.024Z appoptics:patching patched https 
2022-04-20T15:28:13.024Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:902:15)
    at Function.Module._load (internal/modules/cjs/loader.js:746:27)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (internal/modules/cjs/helpers.js:101:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.5: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.5
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.5
updated 1 package and audited 936 packages in 4.473s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:18.316Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:18.317Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:18.317Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:18.319Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:18.377Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:18.498Z appoptics:patching patched crypto 
2022-04-20T15:28:18.514Z appoptics:patching patched https 
2022-04-20T15:28:18.515Z appoptics:patching patched http 
2022-04-20T15:28:18.570Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:18.572Z appoptics:patching patched amqplib 0.5.5
2022-04-20T15:28:18.574Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:18.576Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:736) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (54ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (208ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN notsup Unsupported engine for amqplib@0.5.6: wanted: {"node":">=0.8 <=12"} (current: {"node":"14.19.1","npm":"6.14.16"})
npm WARN notsup Not compatible with your version of node/npm: amqplib@0.5.6
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.5.6
updated 1 package and audited 936 packages in 3.299s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:22.902Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:22.903Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:22.903Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:22.904Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:22.963Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:23.091Z appoptics:patching patched crypto 
2022-04-20T15:28:23.108Z appoptics:patching patched https 
2022-04-20T15:28:23.108Z appoptics:patching patched http 
2022-04-20T15:28:23.165Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:23.167Z appoptics:patching patched amqplib 0.5.6
2022-04-20T15:28:23.169Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:23.171Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:758) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (171ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.6.0
updated 1 package and audited 936 packages in 5.081s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:29.248Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:29.248Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:29.248Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:29.250Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:29.311Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:29.436Z appoptics:patching patched crypto 
2022-04-20T15:28:29.453Z appoptics:patching patched https 
2022-04-20T15:28:29.454Z appoptics:patching patched http 
2022-04-20T15:28:29.510Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:29.512Z appoptics:patching patched amqplib 0.6.0
2022-04-20T15:28:29.514Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:29.516Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:780) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (45ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (129ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.0
updated 1 package and audited 936 packages in 3.478s

86 packages are looking for funding
  run `npm fund` for details

found 13 vulnerabilities (6 moderate, 6 high, 1 critical)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:33.960Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:33.961Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:33.961Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:33.962Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:34.020Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:34.159Z appoptics:patching patched crypto 
2022-04-20T15:28:34.176Z appoptics:patching patched https 
2022-04-20T15:28:34.176Z appoptics:patching patched http 
2022-04-20T15:28:34.232Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:34.234Z appoptics:patching patched amqplib 0.7.0
2022-04-20T15:28:34.235Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:34.237Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:802) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (44ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (168ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.7.1
removed 1 package, updated 2 packages and audited 935 packages in 3.579s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:38.826Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:38.826Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:38.826Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:38.828Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:38.891Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:39.027Z appoptics:patching patched crypto 
2022-04-20T15:28:39.063Z appoptics:patching patched https 
2022-04-20T15:28:39.064Z appoptics:patching patched http 
2022-04-20T15:28:39.131Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:39.133Z appoptics:patching patched amqplib 0.7.1
2022-04-20T15:28:39.135Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:39.137Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:824) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (229ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 3.497s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
2022-04-20T15:28:43.788Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:43.789Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:43.789Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:43.791Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:43.847Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:43.978Z appoptics:patching patched crypto 
2022-04-20T15:28:43.995Z appoptics:patching patched https 
2022-04-20T15:28:43.995Z appoptics:patching patched http 
2022-04-20T15:28:44.054Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:28:44.056Z appoptics:patching patched amqplib 0.8.0
2022-04-20T15:28:44.057Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:44.060Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:846) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (180ms)

npm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

+ amqplib@0.8.0
updated 1 package and audited 935 packages in 4.037s

86 packages are looking for funding
  run `npm fund` for details

found 7 vulnerabilities (2 moderate, 5 high)
  run `npm audit fix` to fix them, or `npm audit` for details
