npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 1 package, removed 4 packages, changed 3 packages, and audited 924 packages in 9s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:06.530Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:06.531Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:06.531Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:06.534Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:06.609Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:06.779Z appoptics:patching patched crypto 
2022-04-20T15:28:06.862Z appoptics:patching patched https 
2022-04-20T15:28:06.863Z appoptics:patching patched http 
2022-04-20T15:28:06.923Z appoptics:patching patched amqplib 0.2.0
2022-04-20T15:28:06.926Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:06.929Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.0
    ✓ UDP might lose a message
    promises
      1) "before all" hook for "should report send and consume in existing trace"
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      3) "before all" hook for "should report send and consume in existing trace"
      4) "after all" hook for "should include SourceTrace in consume external to traced publish"


  1 passing (4s)
  4 failing

  1) probes.amqplib 0.2.0
       promises
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  2) probes.amqplib 0.2.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:181:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)

  3) probes.amqplib 0.2.0
       callbacks
         "before all" hook for "should report send and consume in existing trace":
     Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js)
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)

  4) probes.amqplib 0.2.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     TypeError: Cannot read properties of undefined (reading 'close')
      at Context.<anonymous> (test/probes/amqplib.test.js:211:23)
      at processImmediate (node:internal/timers:466:21)
      at process.callbackTrampoline (node:internal/async_hooks:130:17)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.2.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:19.137Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:19.138Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:19.138Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:19.138Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:19.217Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:19.383Z appoptics:patching patched crypto 
2022-04-20T15:28:19.411Z appoptics:patching patched https 
2022-04-20T15:28:19.412Z appoptics:patching patched http 
2022-04-20T15:28:19.462Z appoptics:patching patched amqplib 0.2.1
2022-04-20T15:28:19.465Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:19.468Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.2.1
    ✓ UDP might lose a message
    promises
(node:455) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (64ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (243ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.0',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:27.269Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:27.269Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:27.269Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:27.270Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:27.368Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:27.581Z appoptics:patching patched crypto 
2022-04-20T15:28:27.634Z appoptics:patching patched https 
2022-04-20T15:28:27.635Z appoptics:patching patched http 
2022-04-20T15:28:27.714Z appoptics:patching patched amqplib 0.3.0
2022-04-20T15:28:27.718Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:27.722Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.0
    ✓ UDP might lose a message
    promises
(node:477) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (46ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (212ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.1',
npm WARN EBADENGINE   required: { node: '0.8 || 0.9 || 0.10 || 0.11 || 0.12 || 1.0 || 1.1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 2 packages, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:35.275Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:35.276Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:35.276Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:35.277Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:35.355Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:35.584Z appoptics:patching patched crypto 
2022-04-20T15:28:35.621Z appoptics:patching patched https 
2022-04-20T15:28:35.621Z appoptics:patching patched http 
2022-04-20T15:28:35.679Z appoptics:patching patched amqplib 0.3.1
2022-04-20T15:28:35.681Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:35.683Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.1
    ✓ UDP might lose a message
    promises
(node:499) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (188ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.3.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <0.13 || ^1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:44.002Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:44.003Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:44.003Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:44.004Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:44.077Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:44.238Z appoptics:patching patched crypto 
2022-04-20T15:28:44.261Z appoptics:patching patched https 
2022-04-20T15:28:44.261Z appoptics:patching patched http 
2022-04-20T15:28:44.324Z appoptics:patching patched amqplib 0.3.2
2022-04-20T15:28:44.326Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:44.329Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.3.2
    ✓ UDP might lose a message
    promises
(node:521) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (56ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)


  7 passing (239ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <4 || ^4' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:28:52.655Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:28:52.656Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:28:52.656Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:28:52.657Z appoptics:debug using context provider: ace-context
2022-04-20T15:28:52.751Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:28:52.994Z appoptics:patching patched crypto 
2022-04-20T15:28:53.063Z appoptics:patching patched https 
2022-04-20T15:28:53.064Z appoptics:patching patched http 
2022-04-20T15:28:53.154Z appoptics:patching patched amqplib 0.4.0
2022-04-20T15:28:53.158Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:28:53.163Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.0
    ✓ UDP might lose a message
    promises
(node:543) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (59ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      1) "after all" hook for "should include SourceTrace in consume external to traced publish"
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
      2) "after all" hook for "should include SourceTrace in consume external to traced publish"


  7 passing (242ms)
  2 failing

  1) probes.amqplib 0.4.0
       promises
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at ChannelModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)

  2) probes.amqplib 0.4.0
       callbacks
         "after all" hook for "should include SourceTrace in consume external to traced publish":
     Error: done() invoked with non-Error: Closed by client
      at CallbackModel.emit (node:events:526:28)
      at Connection.emit (node:events:526:28)
      at Connection.C.toClosed (node_modules/amqplib/lib/connection.js:411:8)
      at Connection.accept (node_modules/amqplib/lib/connection.js:378:12)
      at Socket.go (node_modules/amqplib/lib/connection.js:474:48)
      at Socket.emit (node:events:526:28)
      at emitReadable_ (node:internal/streams/readable:578:12)
      at processTicksAndRejections (node:internal/process/task_queues:82:21)



npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <5 || ^5' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:00.668Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:00.669Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:00.669Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:00.670Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:00.740Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:00.898Z appoptics:patching patched crypto 
2022-04-20T15:29:00.919Z appoptics:patching patched https 
2022-04-20T15:29:00.919Z appoptics:patching patched http 
2022-04-20T15:29:00.979Z appoptics:patching patched amqplib 0.4.1
2022-04-20T15:29:00.981Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:00.984Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.1
    ✓ UDP might lose a message
    promises
(node:565) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (61ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (243ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.4.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 924 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:09.346Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:09.346Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:09.347Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:09.347Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:09.429Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:09.618Z appoptics:patching patched crypto 
2022-04-20T15:29:09.640Z appoptics:patching patched https 
2022-04-20T15:29:09.640Z appoptics:patching patched http 
2022-04-20T15:29:09.703Z appoptics:patching patched amqplib 0.4.2
2022-04-20T15:29:09.705Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:09.708Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.4.2
    ✓ UDP might lose a message
    promises
(node:587) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (49ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (49ms)


  7 passing (238ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

removed 1 package, changed 1 package, and audited 923 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:17.747Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:17.748Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:17.748Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:17.749Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:17.834Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:18.029Z appoptics:patching patched crypto 
2022-04-20T15:29:18.068Z appoptics:patching patched https 
2022-04-20T15:29:18.069Z appoptics:patching patched http 
2022-04-20T15:29:18.162Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:29:18.165Z appoptics:patching patched amqplib 0.5.1
2022-04-20T15:29:18.168Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:18.171Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.1
    ✓ UDP might lose a message
    promises
(node:609) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (227ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.2',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 923 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:25.608Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:25.609Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:25.609Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:25.610Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:25.706Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:25.870Z appoptics:patching patched crypto 
2022-04-20T15:29:25.891Z appoptics:patching patched https 
2022-04-20T15:29:25.892Z appoptics:patching patched http 
2022-04-20T15:29:25.963Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:29:25.966Z appoptics:patching patched amqplib 0.5.2
2022-04-20T15:29:25.968Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:25.971Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.2
    ✓ UDP might lose a message
    promises
(node:631) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (61ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (48ms)
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (243ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.3',
npm WARN EBADENGINE   required: { node: '>=0.8 <=9' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 13 packages, removed 7 packages, changed 4 packages, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:34.111Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:34.111Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:34.111Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:34.112Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:34.188Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:34.380Z appoptics:patching patched crypto 
2022-04-20T15:29:34.425Z appoptics:patching patched https 
2022-04-20T15:29:34.425Z appoptics:patching patched http 
2022-04-20T15:29:34.506Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:29:34.509Z appoptics:patching patched amqplib 0.5.3
2022-04-20T15:29:34.511Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:34.514Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.3
    ✓ UDP might lose a message
    promises
(node:653) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (46ms)
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (200ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.4',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated amqplib@0.5.4: See github.com/squaremo/amqp.node/issues/534

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:42.369Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:42.370Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:42.370Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:42.371Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:42.458Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:42.669Z appoptics:patching patched crypto 
2022-04-20T15:29:42.722Z appoptics:patching patched https 
2022-04-20T15:29:42.735Z appoptics:patching patched http 

Error: Cannot find module './defs'
Require stack:
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js
- /__w/appoptics-apm-node/appoptics-apm-node/test/probes/amqplib.test.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/esm-utils.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/mocha.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/one-and-dones.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/lib/cli/options.js
- /__w/appoptics-apm-node/appoptics-apm-node/node_modules/mocha/bin/mocha
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:933:15)
    at Function.Module._load (node:internal/modules/cjs/loader:778:27)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connection.js:7:12)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/lib/connect.js:11:18)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at Module.patchedRequire [as require] (/__w/appoptics-apm-node/appoptics-apm-node/lib/require-patch.js:57:25)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/__w/appoptics-apm-node/appoptics-apm-node/node_modules/amqplib/channel_api.js:1:19)
    at Module._compile (node:internal/modules/cjs/loader:1103:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1157:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.5',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:50.249Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:50.250Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:50.250Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:50.251Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:50.333Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:50.507Z appoptics:patching patched crypto 
2022-04-20T15:29:50.529Z appoptics:patching patched https 
2022-04-20T15:29:50.529Z appoptics:patching patched http 
2022-04-20T15:29:50.606Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:29:50.608Z appoptics:patching patched amqplib 0.5.5
2022-04-20T15:29:50.611Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:50.614Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.5
    ✓ UDP might lose a message
    promises
(node:693) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (62ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (273ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.5.6',
npm WARN EBADENGINE   required: { node: '>=0.8 <=12' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:29:59.166Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:29:59.167Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:29:59.167Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:29:59.168Z appoptics:debug using context provider: ace-context
2022-04-20T15:29:59.261Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:29:59.430Z appoptics:patching patched crypto 
2022-04-20T15:29:59.453Z appoptics:patching patched https 
2022-04-20T15:29:59.453Z appoptics:patching patched http 
2022-04-20T15:29:59.533Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:29:59.536Z appoptics:patching patched amqplib 0.5.6
2022-04-20T15:29:59.538Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:29:59.541Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.5.6
    ✓ UDP might lose a message
    promises
(node:715) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (197ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.6.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=14' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:07.521Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:07.522Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:07.522Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:07.523Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:07.624Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:07.817Z appoptics:patching patched crypto 
2022-04-20T15:30:07.837Z appoptics:patching patched https 
2022-04-20T15:30:07.838Z appoptics:patching patched http 
2022-04-20T15:30:07.908Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:30:07.911Z appoptics:patching patched amqplib 0.6.0
2022-04-20T15:30:07.913Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:30:07.916Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.6.0
    ✓ UDP might lose a message
    promises
(node:737) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (47ms)


  7 passing (239ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.0',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

changed 1 package, and audited 929 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (7 moderate, 3 high, 1 critical)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:15.678Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:15.679Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:15.679Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:15.679Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:15.753Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:15.913Z appoptics:patching patched crypto 
2022-04-20T15:30:15.933Z appoptics:patching patched https 
2022-04-20T15:30:15.934Z appoptics:patching patched http 
2022-04-20T15:30:16.005Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:30:16.008Z appoptics:patching patched amqplib 0.7.0
2022-04-20T15:30:16.010Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:30:16.013Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.0
    ✓ UDP might lose a message
    promises
(node:759) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (66ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (50ms)


  7 passing (271ms)

npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'amqplib@0.7.1',
npm WARN EBADENGINE   required: { node: '>=0.8 <=15' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.5.0' }
npm WARN EBADENGINE }

added 8 packages, removed 10 packages, changed 3 packages, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:25.012Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:25.013Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:25.013Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:25.014Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:25.092Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:25.262Z appoptics:patching patched crypto 
2022-04-20T15:30:25.283Z appoptics:patching patched https 
2022-04-20T15:30:25.284Z appoptics:patching patched http 
2022-04-20T15:30:25.382Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:30:25.385Z appoptics:patching patched amqplib 0.7.1
2022-04-20T15:30:25.387Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:30:25.390Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.7.1
    ✓ UDP might lose a message
    promises
(node:781) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace (63ms)
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish


  7 passing (250ms)


changed 1 package, and audited 927 packages in 8s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
2022-04-20T15:30:33.787Z appoptics:debug read config from /__w/appoptics-apm-node/appoptics-apm-node/appoptics-apm-config
2022-04-20T15:30:33.788Z appoptics:debug guc ignoring APPOPTICS_LOG_SETTINGS
2022-04-20T15:30:33.788Z appoptics:debug serviceKey dIOz...wWK0:node-agent-test
2022-04-20T15:30:33.788Z appoptics:debug using context provider: ace-context
2022-04-20T15:30:33.862Z appoptics:debug apm 10.2.2-ao.0, bindings 11.2.0, oboe 10.2.0
2022-04-20T15:30:34.023Z appoptics:patching patched crypto 
2022-04-20T15:30:34.045Z appoptics:patching patched https 
2022-04-20T15:30:34.046Z appoptics:patching patched http 
2022-04-20T15:30:34.118Z appoptics:patching patched bluebird 3.7.2
2022-04-20T15:30:34.121Z appoptics:patching patched amqplib 0.8.0
2022-04-20T15:30:34.123Z appoptics:patching patched amqplib/callback_api 
2022-04-20T15:30:34.126Z appoptics:debug starting runtimeMetrics


  probes.amqplib 0.8.0
    ✓ UDP might lose a message
    promises
(node:803) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume (47ms)
      ✓ should include SourceTrace in consume external to traced publish
    callbacks
      ✓ should report send and consume in existing trace
      ✓ should start new trace for consume
      ✓ should include SourceTrace in consume external to traced publish (53ms)


  7 passing (248ms)


up to date, audited 927 packages in 7s

86 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (6 moderate, 3 high)

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
